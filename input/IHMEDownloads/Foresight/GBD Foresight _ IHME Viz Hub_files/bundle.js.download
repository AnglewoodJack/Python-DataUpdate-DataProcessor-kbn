!function(n){var i={};function a(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=n,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=159)}([function(t,e){t.exports=$},function(Wo,Fo,$o){var Bo,Vo;!function(){var N={version:"3.5.17"},r=[].slice,d=function(t){return r.call(t)},b=this.document;function o(t){return t&&(t.ownerDocument||t.document||t).documentElement}function j(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(b)try{d(b.documentElement.childNodes)[0].nodeType}catch(t){d=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),b)try{b.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var e=this.Element.prototype,n=e.setAttribute,i=e.setAttributeNS,a=this.CSSStyleDeclaration.prototype,s=a.setProperty;e.setAttribute=function(t,e){n.call(this,t,e+"")},e.setAttributeNS=function(t,e,n){i.call(this,t,e,n+"")},a.setProperty=function(t,e,n){s.call(this,t,e+"",n)}}function c(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function l(t){return null===t?NaN:+t}function u(t){return!isNaN(t)}function t(r){return{left:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var a=n+i>>>1;r(t[a],e)<0?n=a+1:i=a}return n},right:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var a=n+i>>>1;0<r(t[a],e)?i=a:n=a+1}return n}}}N.ascending=c,N.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},N.min=function(t,e){var n,i,a=-1,r=t.length;if(1===arguments.length){for(;++a<r;)if(null!=(i=t[a])&&i<=i){n=i;break}for(;++a<r;)null!=(i=t[a])&&i<n&&(n=i)}else{for(;++a<r;)if(null!=(i=e.call(t,t[a],a))&&i<=i){n=i;break}for(;++a<r;)null!=(i=e.call(t,t[a],a))&&i<n&&(n=i)}return n},N.max=function(t,e){var n,i,a=-1,r=t.length;if(1===arguments.length){for(;++a<r;)if(null!=(i=t[a])&&i<=i){n=i;break}for(;++a<r;)null!=(i=t[a])&&n<i&&(n=i)}else{for(;++a<r;)if(null!=(i=e.call(t,t[a],a))&&i<=i){n=i;break}for(;++a<r;)null!=(i=e.call(t,t[a],a))&&n<i&&(n=i)}return n},N.extent=function(t,e){var n,i,a,r=-1,s=t.length;if(1===arguments.length){for(;++r<s;)if(null!=(i=t[r])&&i<=i){n=a=i;break}for(;++r<s;)null!=(i=t[r])&&(i<n&&(n=i),a<i&&(a=i))}else{for(;++r<s;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=a=i;break}for(;++r<s;)null!=(i=e.call(t,t[r],r))&&(i<n&&(n=i),a<i&&(a=i))}return[n,a]},N.sum=function(t,e){var n,i=0,a=t.length,r=-1;if(1===arguments.length)for(;++r<a;)u(n=+t[r])&&(i+=n);else for(;++r<a;)u(n=+e.call(t,t[r],r))&&(i+=n);return i},N.mean=function(t,e){var n,i=0,a=t.length,r=-1,s=a;if(1===arguments.length)for(;++r<a;)u(n=l(t[r]))?i+=n:--s;else for(;++r<a;)u(n=l(e.call(t,t[r],r)))?i+=n:--s;if(s)return i/s},N.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),a=+t[i-1],r=n-i;return r?a+r*(t[i]-a):a},N.median=function(t,e){var n,i=[],a=t.length,r=-1;if(1===arguments.length)for(;++r<a;)u(n=l(t[r]))&&i.push(n);else for(;++r<a;)u(n=l(e.call(t,t[r],r)))&&i.push(n);if(i.length)return N.quantile(i.sort(c),.5)},N.variance=function(t,e){var n,i,a=t.length,r=0,s=0,o=-1,c=0;if(1===arguments.length)for(;++o<a;)u(n=l(t[o]))&&(s+=(i=n-r)*(n-(r+=i/++c)));else for(;++o<a;)u(n=l(e.call(t,t[o],o)))&&(s+=(i=n-r)*(n-(r+=i/++c)));if(1<c)return s/(c-1)},N.deviation=function(){var t=N.variance.apply(this,arguments);return t?Math.sqrt(t):t};var h=t(c);function f(t){return t.length}N.bisectLeft=h.left,N.bisect=N.bisectRight=h.right,N.bisector=function(n){return t(1===n.length?function(t,e){return c(n(t),e)}:n)},N.shuffle=function(t,e,n){(r=arguments.length)<3&&(n=t.length,r<2&&(e=0));for(var i,a,r=n-e;r;)a=Math.random()*r--|0,i=t[r+e],t[r+e]=t[a+e],t[a+e]=i;return t},N.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},N.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);e<n;)a[e]=[i,i=t[++e]];return a},N.transpose=function(t){if(!(a=t.length))return[];for(var e=-1,n=N.min(t,f),i=new Array(n);++e<n;)for(var a,r=-1,s=i[e]=new Array(a);++r<a;)s[r]=t[r][e];return i},N.zip=function(){return N.transpose(arguments)},N.keys=function(t){var e=[];for(var n in t)e.push(n);return e},N.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},N.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},N.merge=function(t){for(var e,n,i,a=t.length,r=-1,s=0;++r<a;)s+=t[r].length;for(n=new Array(s);0<=--a;)for(e=(i=t[a]).length;0<=--e;)n[--s]=i[e];return n};var I=Math.abs;function p(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function y(){this._=Object.create(null)}N.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,a=[],r=function(t){var e=1;for(;t*e%1;)e*=10;return e}(I(n)),s=-1;if(t*=r,e*=r,(n*=r)<0)for(;(i=t+n*++s)>e;)a.push(i/r);else for(;(i=t+n*++s)<e;)a.push(i/r);return a},N.map=function(t,e){var n=new y;if(t instanceof y)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,a=-1,r=t.length;if(1===arguments.length)for(;++a<r;)n.set(a,t[a]);else for(;++a<r;)n.set(e.call(t,i=t[a],a),i)}else for(var s in t)n.set(s,t[s]);return n};var g="__proto__",v="\0";function m(t){return(t+="")===g||t[0]===v?v+t:t}function x(t){return(t+="")[0]===v?t.slice(1):t}function _(t){return m(t)in this._}function w(t){return(t=m(t))in this._&&delete this._[t]}function k(){var t=[];for(var e in this._)t.push(x(e));return t}function S(){var t=0;for(var e in this._)++t;return t}function C(){for(var t in this._)return!1;return!0}function M(){this._=Object.create(null)}function z(t){return t}function T(e,n,i){return function(){var t=i.apply(n,arguments);return t===n?e:t}}function E(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=A.length;n<i;++n){var a=A[n]+e;if(a in t)return a}}p(y,{has:_,get:function(t){return this._[m(t)]},set:function(t,e){return this._[m(t)]=e},remove:w,keys:k,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:x(e),value:this._[e]});return t},size:S,empty:C,forEach:function(t){for(var e in this._)t.call(this,x(e),this._[e])}}),N.nest=function(){var h,d,f={},p=[],e=[];function g(n,t,i){if(i>=p.length)return d?d.call(f,t):h?t.sort(h):t;for(var e,a,r,s,o=-1,c=t.length,l=p[i++],u=new y;++o<c;)(s=u.get(e=l(a=t[o])))?s.push(a):u.set(e,[a]);return r=n?(a=n(),function(t,e){a.set(t,g(n,e,i))}):(a={},function(t,e){a[t]=g(n,e,i)}),u.forEach(r),a}return f.map=function(t,e){return g(e,t,0)},f.entries=function(t){return function n(t,i){if(i>=p.length)return t;var a=[],r=e[i++];return t.forEach(function(t,e){a.push({key:t,values:n(e,i)})}),r?a.sort(function(t,e){return r(t.key,e.key)}):a}(g(N.map,t,0),0)},f.key=function(t){return p.push(t),f},f.sortKeys=function(t){return e[p.length-1]=t,f},f.sortValues=function(t){return h=t,f},f.rollup=function(t){return d=t,f},f},N.set=function(t){var e=new M;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},p(M,{has:_,add:function(t){return this._[m(t+="")]=!0,t},remove:w,values:k,size:S,empty:C,forEach:function(t){for(var e in this._)t.call(this,x(e))}}),N.behavior={},N.rebind=function(t,e){for(var n,i=1,a=arguments.length;++i<a;)t[n=arguments[i]]=T(t,e,e[n]);return t};var A=["webkit","ms","moz","Moz","o","O"];function O(){}function P(){}function D(a){var r=[],s=new y;function t(){for(var t,e=r,n=-1,i=e.length;++n<i;)(t=e[n].on)&&t.apply(this,arguments);return a}return t.on=function(t,e){var n,i=s.get(t);return arguments.length<2?i&&i.on:(i&&(i.on=null,r=r.slice(0,n=r.indexOf(i)).concat(r.slice(n+1)),s.remove(t)),e&&r.push(s.set(t,{on:e})),a)},t}function H(){N.event.preventDefault()}function L(){for(var t,e=N.event;t=e.sourceEvent;)e=t;return e}function R(a){for(var r=new P,t=0,e=arguments.length;++t<e;)r[arguments[t]]=D(r);return r.of=function(n,i){return function(t){try{var e=t.sourceEvent=N.event;t.target=a,N.event=t,r[t.type].apply(n,i)}finally{N.event=e}}},r}N.dispatch=function(){for(var t=new P,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=D(t);return t},P.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(0<=n&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},N.event=null,N.requote=function(t){return t.replace(W,"\\$&")};var W=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,F={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function $(t){return F(t,U),t}var B=function(t,e){return e.querySelector(t)},V=function(t,e){return e.querySelectorAll(t)},q=function(t,e){var n=t.matches||t[E(t,"matchesSelector")];return(q=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(B=function(t,e){return Sizzle(t,e)[0]||null},V=Sizzle,q=Sizzle.matchesSelector),N.selection=function(){return N.select(b.documentElement)};var U=N.selection.prototype=[];function Y(t){return"function"==typeof t?t:function(){return B(t,this)}}function G(t){return"function"==typeof t?t:function(){return V(t,this)}}U.select=function(t){var e,n,i,a,r=[];t=Y(t);for(var s=-1,o=this.length;++s<o;){r.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var c=-1,l=i.length;++c<l;)(a=i[c])?(e.push(n=t.call(a,a.__data__,c,s)),n&&"__data__"in a&&(n.__data__=a.__data__)):e.push(null)}return $(r)},U.selectAll=function(t){var e,n,i=[];t=G(t);for(var a=-1,r=this.length;++a<r;)for(var s=this[a],o=-1,c=s.length;++o<c;)(n=s[o])&&(i.push(e=d(t.call(n,n.__data__,o,a))),e.parentNode=n);return $(i)};var K="http://www.w3.org/1999/xhtml",X={svg:"http://www.w3.org/2000/svg",xhtml:K,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Z(e,n){return e=N.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function Q(t){return t.trim().replace(/\s+/g," ")}function J(t){return new RegExp("(?:^|\\s+)"+N.requote(t)+"(?:\\s+|$)","g")}function tt(t){return(t+"").trim().split(/^|\s+/)}function et(n,i){var a=(n=tt(n).map(nt)).length;return"function"==typeof i?function(){for(var t=-1,e=i.apply(this,arguments);++t<a;)n[t](this,e)}:function(){for(var t=-1;++t<a;)n[t](this,i)}}function nt(i){var a=J(i);return function(t,e){if(n=t.classList)return e?n.add(i):n.remove(i);var n=t.getAttribute("class")||"";e?(a.lastIndex=0,a.test(n)||t.setAttribute("class",Q(n+" "+i))):t.setAttribute("class",Q(n.replace(a," ")))}}function it(e,n,i){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}:function(){this.style.setProperty(e,n,i)}}function at(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function rt(n){return"function"==typeof n?n:(n=N.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var t=this.ownerDocument,e=this.namespaceURI;return e===K&&t.documentElement.namespaceURI===K?t.createElement(n):t.createElementNS(e,n)}}function st(){var t=this.parentNode;t&&t.removeChild(this)}function ot(t){return{__data__:t}}function ct(t){return function(){return q(this,t)}}function lt(t,e){for(var n=0,i=t.length;n<i;n++)for(var a,r=t[n],s=0,o=r.length;s<o;s++)(a=r[s])&&e(a,s,n);return t}function ut(t){return F(t,ht),t}N.ns={prefix:X,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),X.hasOwnProperty(n)?{space:X[n],local:t}:t}},U.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=N.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(Z(e,t[e]));return this}return this.each(Z(t,e))},U.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=tt(t)).length,a=-1;if(e=n.classList){for(;++a<i;)if(!e.contains(t[a]))return!1}else for(e=n.getAttribute("class");++a<i;)if(!J(t[a]).test(e))return!1;return!0}for(e in t)this.each(et(e,t[e]));return this}return this.each(et(t,e))},U.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(it(n,t[n],e));return this}if(i<2){var a=this.node();return j(a).getComputedStyle(a,null).getPropertyValue(t)}n=""}return this.each(it(t,e,n))},U.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(at(e,t[e]));return this}return this.each(at(t,e))},U.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},U.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},U.append=function(t){return t=rt(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},U.insert=function(t,e){return t=rt(t),e=Y(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},U.remove=function(){return this.each(st)},U.data=function(t,p){var e,n,i=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(e=this[0]).length);++i<a;)(n=e[i])&&(t[i]=n.__data__);return t}function r(t,e){var n,i,a,r=t.length,s=e.length,o=Math.min(r,s),c=new Array(s),l=new Array(s),u=new Array(r);if(p){var h,d=new y,f=new Array(r);for(n=-1;++n<r;)(i=t[n])&&(d.has(h=p.call(i,i.__data__,n))?u[n]=i:d.set(h,i),f[n]=h);for(n=-1;++n<s;)(i=d.get(h=p.call(e,a=e[n],n)))?!0!==i&&((c[n]=i).__data__=a):l[n]=ot(a),d.set(h,!0);for(n=-1;++n<r;)n in f&&!0!==d.get(f[n])&&(u[n]=t[n])}else{for(n=-1;++n<o;)i=t[n],a=e[n],i?(i.__data__=a,c[n]=i):l[n]=ot(a);for(;n<s;++n)l[n]=ot(e[n]);for(;n<r;++n)u[n]=t[n]}l.update=c,l.parentNode=c.parentNode=u.parentNode=t.parentNode,g.push(l),v.push(c),m.push(u)}var g=ut([]),v=$([]),m=$([]);if("function"==typeof t)for(;++i<a;)r(e=this[i],t.call(e,e.parentNode.__data__,i));else for(;++i<a;)r(e=this[i],t);return v.enter=function(){return g},v.exit=function(){return m},v},U.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},U.filter=function(t){var e,n,i,a=[];"function"!=typeof t&&(t=ct(t));for(var r=0,s=this.length;r<s;r++){a.push(e=[]),e.parentNode=(n=this[r]).parentNode;for(var o=0,c=n.length;o<c;o++)(i=n[o])&&t.call(i,i.__data__,o,r)&&e.push(i)}return $(a)},U.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],a=i.length-1,r=i[a];0<=--a;)(n=i[a])&&(r&&r!==n.nextSibling&&r.parentNode.insertBefore(n,r),r=n);return this},U.sort=function(t){t=function(n){arguments.length||(n=c);return function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},U.each=function(i){return lt(this,function(t,e,n){i.call(t,t.__data__,e,n)})},U.call=function(t){var e=d(arguments);return t.apply(e[0]=this,e),this},U.empty=function(){return!this.node()},U.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,a=n.length;i<a;i++){var r=n[i];if(r)return r}return null},U.size=function(){var t=0;return lt(this,function(){++t}),t};var ht=[];function dt(a,e,n){var i="__on"+a,t=a.indexOf("."),r=pt;0<t&&(a=a.slice(0,t));var s=ft.get(a);function o(){var t=this[i];t&&(this.removeEventListener(a,t,t.$),delete this[i])}return s&&(a=s,r=gt),t?e?function(){var t=r(e,d(arguments));o.call(this),this.addEventListener(a,this[i]=t,t.$=n),t._=e}:o:e?O:function(){var t,e=new RegExp("^__on([^.]+)"+N.requote(a)+"$");for(var n in this)if(t=n.match(e)){var i=this[n];this.removeEventListener(t[1],i,i.$),delete this[n]}}}N.selection.enter=ut,(N.selection.enter.prototype=ht).append=U.append,ht.empty=U.empty,ht.node=U.node,ht.call=U.call,ht.size=U.size,ht.select=function(t){for(var e,n,i,a,r,s=[],o=-1,c=this.length;++o<c;){i=(a=this[o]).update,s.push(e=[]),e.parentNode=a.parentNode;for(var l=-1,u=a.length;++l<u;)(r=a[l])?(e.push(i[l]=n=t.call(a.parentNode,r.__data__,l,o)),n.__data__=r.__data__):e.push(null)}return $(s)},ht.insert=function(t,e){var s,o,c;return arguments.length<2&&(s=this,e=function(t,e,n){var i,a=s[n].update,r=a.length;for(n!=c&&(c=n,o=0),o<=e&&(o=e+1);!(i=a[o])&&++o<r;);return i}),U.insert.call(this,t,e)},N.select=function(t){var e;return"string"==typeof t?(e=[B(t,b)]).parentNode=b.documentElement:(e=[t]).parentNode=o(t),$([e])},N.selectAll=function(t){var e;return"string"==typeof t?(e=d(V(t,b))).parentNode=b.documentElement:(e=d(t)).parentNode=null,$([e])},U.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(dt(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(dt(t,e,n))};var ft=N.map({mouseenter:"mouseover",mouseleave:"mouseout"});function pt(n,i){return function(t){var e=N.event;N.event=t,i[0]=this.__data__;try{n.apply(this,i)}finally{N.event=e}}}function gt(t,e){var n=pt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}b&&ft.forEach(function(t){"on"+t in b&&ft.remove(t)});var vt,mt=0;function yt(t){var n=".dragsuppress-"+ ++mt,i="click"+n,a=N.select(j(t)).on("touchmove"+n,H).on("dragstart"+n,H).on("selectstart"+n,H);if(null==vt&&(vt=!("onselectstart"in t)&&E(t.style,"userSelect")),vt){var r=o(t).style,s=r[vt];r[vt]="none"}return function(t){if(a.on(n,null),vt&&(r[vt]=s),t){var e=function(){a.on(i,null)};a.on(i,function(){H(),e()},!0),setTimeout(e,0)}}}N.mouse=function(t){return xt(t,L())};var bt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function xt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(bt<0){var a=j(t);if(a.scrollX||a.scrollY){var r=(n=N.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();bt=!(r.f||r.e),n.remove()}}return i.y=bt?(i.x=e.pageX,e.pageY):(i.x=e.clientX,e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function _t(){return N.event.changedTouches[0].identifier}N.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=L().changedTouches),e)for(var i,a=0,r=e.length;a<r;++a)if((i=e[a]).identifier===n)return xt(t,i)},N.behavior.drag=function(){var g=R(n,"drag","dragstart","dragend"),v=null,t=i(O,N.mouse,j,"mousemove","mouseup"),e=i(_t,N.touch,z,"touchmove","touchend");function n(){this.on("mousedown.drag",t).on("touchstart.drag",e)}function i(u,h,d,f,p){return function(){var i,t=N.event.target.correspondingElement||N.event.target,a=this.parentNode,r=g.of(this,arguments),s=0,o=u(),e=".drag"+(null==o?"":"-"+o),n=N.select(d(t)).on(f+e,function(){var t,e,n=h(a,o);if(!n)return;t=n[0]-l[0],e=n[1]-l[1],s|=t|e,r({type:"drag",x:(l=n)[0]+i[0],y:n[1]+i[1],dx:t,dy:e})}).on(p+e,function(){if(!h(a,o))return;n.on(f+e,null).on(p+e,null),c(s),r({type:"dragend"})}),c=yt(t),l=h(a,o);i=v?[(i=v.apply(this,arguments)).x-l[0],i.y-l[1]]:[0,0],r({type:"dragstart"})}}return n.origin=function(t){return arguments.length?(v=t,n):v},N.rebind(n,g,"on")},N.touches=function(n,t){return arguments.length<2&&(t=L().touches),t?d(t).map(function(t){var e=xt(n,t);return e.identifier=t.identifier,e}):[]};var wt=1e-6,kt=wt*wt,St=Math.PI,Ct=2*St,Mt=Ct-wt,Tt=St/2,Et=St/180,At=180/St;function Ot(t){return 0<t?1:t<0?-1:0}function Pt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Dt(t){return 1<t?0:t<-1?St:Math.acos(t)}function It(t){return 1<t?Tt:t<-1?-Tt:Math.asin(t)}function Nt(t){return((t=Math.exp(t))+1/t)/2}function jt(t){return(t=Math.sin(t/2))*t}var zt=Math.SQRT2;N.interpolateZoom=function(t,e){var n,s,o=t[0],c=t[1],l=t[2],i=e[0],a=e[1],r=e[2],u=i-o,h=a-c,d=u*u+h*h;if(d<kt)s=Math.log(r/l)/zt,n=function(t){return[o+t*u,c+t*h,l*Math.exp(zt*t*s)]};else{var f=Math.sqrt(d),p=(r*r-l*l+4*d)/(2*l*2*f),g=(r*r-l*l-4*d)/(2*r*2*f),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);s=(m-v)/zt,n=function(t){var e,n,i=t*s,a=Nt(v),r=l/(2*f)*(a*(n=zt*i+v,((n=Math.exp(2*n))-1)/(n+1))-(e=v,((e=Math.exp(e))-1/e)/2));return[o+r*u,c+r*h,l*a/Nt(zt*i+v)]}}return n.duration=1e3*s,n},N.behavior.zoom=function(){var e,c,n,i,x,a,r,s,o,_={x:0,y:0,k:1},l=[960,500],u=Rt,h=250,d=0,w="mousedown.zoom",f="mousemove.zoom",p="mouseup.zoom",k="touchstart.zoom",S=R(g,"zoomstart","zoom","zoomend");function g(t){t.on(w,D).on(Lt+".zoom",m).on("dblclick.zoom",y).on(k,I)}function C(t){return[(t[0]-_.x)/_.k,(t[1]-_.y)/_.k]}function M(t){_.k=Math.max(u[0],Math.min(u[1],t))}function T(t,e){var n;e=[(n=e)[0]*_.k+_.x,n[1]*_.k+_.y],_.x+=t[0]-e[0],_.y+=t[1]-e[1]}function E(t,e,n,i){t.__chart__={x:_.x,y:_.y,k:_.k},M(Math.pow(2,i)),T(c=e,n),t=N.select(t),0<h&&(t=t.transition().duration(h)),t.call(g.event)}function v(){r&&r.domain(a.range().map(function(t){return(t-_.x)/_.k}).map(a.invert)),o&&o.domain(s.range().map(function(t){return(t-_.y)/_.k}).map(s.invert))}function A(t){d++||t({type:"zoomstart"})}function O(t){v(),t({type:"zoom",scale:_.k,translate:[_.x,_.y]})}function P(t){--d||(t({type:"zoomend"}),c=null)}function D(){var t=this,e=S.of(t,arguments),n=0,i=N.select(j(t)).on(f,function(){n=1,T(N.mouse(t),a),O(e)}).on(p,function(){i.on(f,null).on(p,null),r(n),P(e)}),a=C(N.mouse(t)),r=yt(t);co.call(t),A(e)}function I(){var l,u=this,h=S.of(u,arguments),d={},f=0,a=".zoom-"+N.event.changedTouches[0].identifier,p="touchmove"+a,g="touchend"+a,v=[],r=N.select(u),s=yt(u);function m(){var t=N.touches(u);return l=_.k,t.forEach(function(t){t.identifier in d&&(d[t.identifier]=C(t))}),t}function t(){var t=N.event.target;N.select(t).on(p,y).on(g,b),v.push(t);for(var e=N.event.changedTouches,n=0,i=e.length;n<i;++n)d[e[n].identifier]=null;var a=m(),r=Date.now();if(1===a.length){if(r-x<500){var s=a[0];E(u,s,d[s.identifier],Math.floor(Math.log(_.k)/Math.LN2)+1),H()}x=r}else if(1<a.length){s=a[0];var o=a[1],c=s[0]-o[0],l=s[1]-o[1];f=c*c+l*l}}function y(){var t,e,n,i,a=N.touches(u);co.call(u);for(var r=0,s=a.length;r<s;++r,i=null)if(n=a[r],i=d[n.identifier]){if(e)break;t=n,e=i}if(i){var o=(o=n[0]-t[0])*o+(o=n[1]-t[1])*o,c=f&&Math.sqrt(o/f);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],M(c*l)}x=null,T(t,e),O(h)}function b(){if(N.event.touches.length){for(var t=N.event.changedTouches,e=0,n=t.length;e<n;++e)delete d[t[e].identifier];for(var i in d)return void m()}N.selectAll(v).on(a,null),r.on(w,D).on(k,I),s(),P(h)}t(),A(h),r.on(w,null).on(k,t)}function m(){var t=S.of(this,arguments);i?clearTimeout(i):(co.call(this),e=C(c=n||N.mouse(this)),A(t)),i=setTimeout(function(){i=null,P(t)},50),H(),M(Math.pow(2,.002*Ht())*_.k),T(c,e),O(t)}function y(){var t=N.mouse(this),e=Math.log(_.k)/Math.LN2;E(this,t,C(t),N.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return Lt||(Lt="onwheel"in b?(Ht=function(){return-N.event.deltaY*(N.event.deltaMode?120:1)},"wheel"):"onmousewheel"in b?(Ht=function(){return N.event.wheelDelta},"mousewheel"):(Ht=function(){return-N.event.detail},"MozMousePixelScroll")),g.event=function(t){t.each(function(){var o=S.of(this,arguments),e=_;ho?N.select(this).transition().each("start.zoom",function(){_=this.__chart__||{x:0,y:0,k:1},A(o)}).tween("zoom:zoom",function(){var i=l[0],t=l[1],a=c?c[0]:i/2,r=c?c[1]:t/2,s=N.interpolateZoom([(a-_.x)/_.k,(r-_.y)/_.k,i/_.k],[(a-e.x)/e.k,(r-e.y)/e.k,i/e.k]);return function(t){var e=s(t),n=i/e[2];this.__chart__=_={x:a-e[0]*n,y:r-e[1]*n,k:n},O(o)}}).each("interrupt.zoom",function(){P(o)}).each("end.zoom",function(){P(o)}):(this.__chart__=_,A(o),O(o),P(o))})},g.translate=function(t){return arguments.length?(_={x:+t[0],y:+t[1],k:_.k},v(),g):[_.x,_.y]},g.scale=function(t){return arguments.length?(_={x:_.x,y:_.y,k:null},M(+t),v(),g):_.k},g.scaleExtent=function(t){return arguments.length?(u=null==t?Rt:[+t[0],+t[1]],g):u},g.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],g):n},g.size=function(t){return arguments.length?(l=t&&[+t[0],+t[1]],g):l},g.duration=function(t){return arguments.length?(h=+t,g):h},g.x=function(t){return arguments.length?(a=(r=t).copy(),_={x:0,y:0,k:1},g):r},g.y=function(t){return arguments.length?(s=(o=t).copy(),_={x:0,y:0,k:1},g):o},N.rebind(g,S,"on")};var Ht,Lt,Rt=[0,1/0];function Wt(){}function Ft(t,e,n){return this instanceof Ft?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Ft?new Ft(t.h,t.s,t.l):le(""+t,ue,Ft):new Ft(t,e,n)}(N.color=Wt).prototype.toString=function(){return this.rgb()+""};var $t=(N.hsl=Ft).prototype=new Wt;function Bt(t,e,n){var i,a;function r(t){return Math.round(255*(360<(e=t)?e-=360:e<0&&(e+=360),e<60?i+(a-i)*e/60:e<180?a:e<240?i+(a-i)*(240-e)/60:i));var e}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:1<e?1:e,i=2*(n=n<0?0:1<n?1:n)-(a=n<=.5?n*(1+e):n+e-n*e),new ae(r(t+120),r(t),r(t-120))}function Vt(t,e,n){return this instanceof Vt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Vt?new Vt(t.h,t.c,t.l):te(t instanceof Yt?t.l:(t=he((t=N.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Vt(t,e,n)}$t.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ft(this.h,this.s,this.l/t)},$t.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ft(this.h,this.s,t*this.l)},$t.rgb=function(){return Bt(this.h,this.s,this.l)};var qt=(N.hcl=Vt).prototype=new Wt;function Ut(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Yt(n,Math.cos(t*=Et)*e,Math.sin(t)*e)}function Yt(t,e,n){return this instanceof Yt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Yt?new Yt(t.l,t.a,t.b):t instanceof Vt?Ut(t.h,t.c,t.l):he((t=ae(t)).r,t.g,t.b):new Yt(t,e,n)}qt.brighter=function(t){return new Vt(this.h,this.c,Math.min(100,this.l+Gt*(arguments.length?t:1)))},qt.darker=function(t){return new Vt(this.h,this.c,Math.max(0,this.l-Gt*(arguments.length?t:1)))},qt.rgb=function(){return Ut(this.h,this.c,this.l).rgb()},N.lab=Yt;var Gt=18,Kt=.95047,Xt=1,Zt=1.08883,Qt=Yt.prototype=new Wt;function Jt(t,e,n){var i=(t+16)/116,a=i+e/500,r=i-n/200;return new ae(ie(3.2404542*(a=ee(a)*Kt)-1.5371385*(i=ee(i)*Xt)-.4985314*(r=ee(r)*Zt)),ie(-.969266*a+1.8760108*i+.041556*r),ie(.0556434*a-.2040259*i+1.0572252*r))}function te(t,e,n){return 0<t?new Vt(Math.atan2(n,e)*At,Math.sqrt(e*e+n*n),t):new Vt(NaN,NaN,t)}function ee(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function ne(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function ie(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ae(t,e,n){return this instanceof ae?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ae?new ae(t.r,t.g,t.b):le(""+t,ae,Bt):new ae(t,e,n)}function re(t){return new ae(t>>16,t>>8&255,255&t)}function se(t){return re(t)+""}Qt.brighter=function(t){return new Yt(Math.min(100,this.l+Gt*(arguments.length?t:1)),this.a,this.b)},Qt.darker=function(t){return new Yt(Math.max(0,this.l-Gt*(arguments.length?t:1)),this.a,this.b)},Qt.rgb=function(){return Jt(this.l,this.a,this.b)};var oe=(N.rgb=ae).prototype=new Wt;function ce(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function le(t,e,n){var i,a,r,s=0,o=0,c=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(a=i[2].split(","),i[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return e(fe(a[0]),fe(a[1]),fe(a[2]))}return(r=pe.get(t))?e(r.r,r.g,r.b):(null==t||"#"!==t.charAt(0)||isNaN(r=parseInt(t.slice(1),16))||(4===t.length?(s=(3840&r)>>4,s|=s>>4,o=240&r,o|=o>>4,c=15&r,c|=c<<4):7===t.length&&(s=(16711680&r)>>16,o=(65280&r)>>8,c=255&r)),e(s,o,c))}function ue(t,e,n){var i,a,r=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),o=s-r,c=(s+r)/2;return o?(a=c<.5?o/(s+r):o/(2-s-r),i=t==s?(e-n)/o+(e<n?6:0):e==s?(n-t)/o+2:(t-e)/o+4,i*=60):(i=NaN,a=0<c&&c<1?0:i),new Ft(i,a,c)}function he(t,e,n){var i=ne((.4124564*(t=de(t))+.3575761*(e=de(e))+.1804375*(n=de(n)))/Kt),a=ne((.2126729*t+.7151522*e+.072175*n)/Xt);return Yt(116*a-16,500*(i-a),200*(a-ne((.0193339*t+.119192*e+.9503041*n)/Zt)))}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fe(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}oe.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b;return e||n||i?(e&&e<30&&(e=30),n&&n<30&&(n=30),i&&i<30&&(i=30),new ae(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new ae(30,30,30)},oe.darker=function(t){return new ae((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},oe.hsl=function(){return ue(this.r,this.g,this.b)},oe.toString=function(){return"#"+ce(this.r)+ce(this.g)+ce(this.b)};var pe=N.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ge(t){return"function"==typeof t?t:function(){return t}}function ve(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),me(t,e,i,n)}}function me(a,r,s,t){var n,o={},c=N.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,h=null;function e(){var t,e,n,i=u.status;if(!i&&((n=(e=u).responseType)&&"text"!==n?e.response:e.responseText)||200<=i&&i<300||304===i){try{t=s.call(o,u)}catch(t){return void c.error.call(o,t)}c.load.call(o,t)}else c.error.call(o,u)}return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(a)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=e:u.onreadystatechange=function(){3<u.readyState&&e()},u.onprogress=function(t){var e=N.event;N.event=t;try{c.progress.call(o,u)}finally{N.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(r=null==t?null:t+"",o):r},o.responseType=function(t){return arguments.length?(h=t,o):h},o.response=function(t){return s=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(d(arguments)))}}),o.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),u.open(t,a,!0),null==r||"accept"in l||(l.accept=r+",*/*"),u.setRequestHeader)for(var i in l)u.setRequestHeader(i,l[i]);return null!=r&&u.overrideMimeType&&u.overrideMimeType(r),null!=h&&(u.responseType=h),null!=n&&o.on("error",n).on("load",function(t){n(null,t)}),c.beforesend.call(o,u),u.send(null==e?null:e),o},o.abort=function(){return u.abort(),o},N.rebind(o,c,"on"),null==t?o:o.get(1===(n=t).length?function(t,e){n(null==t?e:null)}:n)}pe.forEach(function(t,e){pe.set(t,re(e))}),N.functor=ge,N.xhr=ve(z),N.dsv=function(a,r){var e=new RegExp('["'+a+"\n]"),d=a.charCodeAt(0);function s(t,e,n){arguments.length<3&&(n=e,e=null);var i=me(t,r,null==e?o:c(e),n);return i.row=function(t){return arguments.length?i.response(null==(e=t)?o:c(t)):e},i}function o(t){return s.parse(t.responseText)}function c(e){return function(t){return s.parse(t.responseText,e)}}function n(t){return t.map(l).join(a)}function l(t){return e.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return s.parse=function(t,i){var a;return s.parseRows(t,function(t,e){if(a)return a(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");a=i?function(t,e){return i(n(t),e)}:n})},s.parseRows=function(a,t){var e,r,s={},o={},n=[],c=a.length,l=0,i=0;function u(){if(c<=l)return o;if(r)return r=!1,s;var t=l;if(34===a.charCodeAt(t)){for(var e=t;e++<c;)if(34===a.charCodeAt(e)){if(34!==a.charCodeAt(e+1))break;++e}return l=e+2,13===(n=a.charCodeAt(e+1))?(r=!0,10===a.charCodeAt(e+2)&&++l):10===n&&(r=!0),a.slice(t+1,e).replace(/""/g,'"')}for(;l<c;){var n,i=1;if(10===(n=a.charCodeAt(l++)))r=!0;else if(13===n)r=!0,10===a.charCodeAt(l)&&(++l,++i);else if(n!==d)continue;return a.slice(t,l-i)}return a.slice(t)}for(;(e=u())!==o;){for(var h=[];e!==s&&e!==o;)h.push(e),e=u();t&&null==(h=t(h,i++))||n.push(h)}return n},s.format=function(t){if(Array.isArray(t[0]))return s.formatRows(t);var n=new M,i=[];return t.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(l).join(a)].concat(t.map(function(e){return i.map(function(t){return l(e[t])}).join(a)})).join("\n")},s.formatRows=function(t){return t.map(n).join("\n")},s},N.csv=N.dsv(",","text/csv"),N.tsv=N.dsv("\t","text/tab-separated-values");var ye,be,xe,_e,we=this[E(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function ke(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var a={c:t,t:n+e,n:null};return be?be.n=a:ye=a,be=a,xe||(_e=clearTimeout(_e),xe=1,we(Se)),a}function Se(){var t=Ce(),e=Me()-t;24<e?(isFinite(e)&&(clearTimeout(_e),_e=setTimeout(Se,e)),xe=0):(xe=1,we(Se))}function Ce(){for(var t=Date.now(),e=ye;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Me(){for(var t,e=ye,n=1/0;e;)e=e.c?(e.t<n&&(n=e.t),(t=e).n):t?t.n=e.n:ye=e.n;return be=t,n}function Te(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}N.timer=function(){ke.apply(this,arguments)},N.timer.flush=function(){Ce(),Me()},N.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ee=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*I(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}});N.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=N.round(t,Te(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ee[8+n/3]};var Ae=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Oe=N.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=N.round(t,Te(t,e))).toFixed(Math.max(0,Math.min(20,Te(t*(1+1e-15),e))))}});function Pe(t){return t+""}var De=N.time={},Ie=Date;function Ne(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}Ne.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){je.setUTCDate.apply(this._,arguments)},setDay:function(){je.setUTCDay.apply(this._,arguments)},setFullYear:function(){je.setUTCFullYear.apply(this._,arguments)},setHours:function(){je.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){je.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){je.setUTCMinutes.apply(this._,arguments)},setMonth:function(){je.setUTCMonth.apply(this._,arguments)},setSeconds:function(){je.setUTCSeconds.apply(this._,arguments)},setTime:function(){je.setTime.apply(this._,arguments)}};var je=Date.prototype;function ze(i,r,s){function t(t){var e=i(t),n=a(e,1);return t-e<n-t?e:n}function o(t){return r(t=i(new Ie(t-1)),1),t}function a(t,e){return r(t=new Ie(+t),e),t}function c(t,e,n){var i=o(t),a=[];if(1<n)for(;i<e;)s(i)%n||a.push(new Date(+i)),r(i,1);else for(;i<e;)a.push(new Date(+i)),r(i,1);return a}(i.floor=i).round=t,i.ceil=o,i.offset=a,i.range=c;var e=i.utc=He(i);return(e.floor=e).round=He(t),e.ceil=He(o),e.offset=He(a),e.range=function(t,e,n){try{var i=new(Ie=Ne);return i._=t,c(i,e,n)}finally{Ie=Date}},i}function He(i){return function(t,e){try{var n=new(Ie=Ne);return n._=t,i(n,e)._}finally{Ie=Date}}}De.year=ze(function(t){return(t=De.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),De.years=De.year.range,De.years.utc=De.year.utc.range,De.day=ze(function(t){var e=new Ie(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),De.days=De.day.range,De.days.utc=De.day.utc.range,De.dayOfYear=function(t){var e=De.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=De[t]=ze(function(t){return(t=De.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=De.year(t).getDay();return Math.floor((De.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});De[t+"s"]=e.range,De[t+"s"].utc=e.utc.range,De[t+"OfYear"]=function(t){var e=De.year(t).getDay();return Math.floor((De.dayOfYear(t)+(e+n)%7)/7)}}),De.week=De.sunday,De.weeks=De.sunday.range,De.weeks.utc=De.sunday.utc.range,De.weekOfYear=De.sundayOfYear;var Le={"-":"",_:" ",0:"0"},Re=/^\s*\d+/,We=/^%/;function Fe(t,e,n){var i=t<0?"-":"",a=(i?-t:t)+"",r=a.length;return i+(r<n?new Array(n-r+1).join(e)+a:a)}function $e(t){return new RegExp("^(?:"+t.map(N.requote).join("|")+")","i")}function Be(t){for(var e=new y,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Ve(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function qe(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Ue(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Ye(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ge(t,e,n){Re.lastIndex=0;var i,a=Re.exec(e.slice(n,n+2));return a?(t.y=(i=+a[0])+(68<i?1900:2e3),n+a[0].length):-1}function Ke(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Xe(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Ze(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Qe(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function Je(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function tn(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function en(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function nn(t,e,n){Re.lastIndex=0;var i=Re.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function an(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",i=I(e)/60|0,a=I(e)%60;return n+Fe(i,"0",2)+Fe(a,"0",2)}function rn(t,e,n){We.lastIndex=0;var i=We.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function sn(i){for(var t=i.length,e=-1;++e<t;)i[e][0]=this(i[e][0]);return function(t){for(var e=0,n=i[e];!n[1](t);)n=i[++e];return n[0](t)}}N.locale=function(t){return{numberFormat:(e=t,S=e.decimal,o=e.thousands,c=e.grouping,i=e.currency,C=c&&o?function(t,e){for(var n=t.length,i=[],a=0,r=c[0],s=0;0<n&&0<r&&(e<s+r+1&&(r=Math.max(1,e-s)),i.push(t.substring(n-=r,n+r)),!((s+=r+1)>e));)r=c[a=(a+1)%c.length];return i.reverse().join(o)}:z,function(t){var e=Ae.exec(t),u=e[1]||" ",h=e[2]||">",d=e[3]||"-",n=e[4]||"",f=e[5],p=+e[6],g=e[7],v=e[8],m=e[9],y=1,b="",x="",_=!1,w=!0;switch(v&&(v=+v.substring(1)),(f||"0"===u&&"="===h)&&(f=u="0",h="="),m){case"n":g=!0,m="g";break;case"%":y=100,x="%",m="f";break;case"p":y=100,x="%",m="r";break;case"b":case"o":case"x":case"X":"#"===n&&(b="0"+m.toLowerCase());case"c":w=!1;case"d":_=!0,v=0;break;case"s":y=-1,m="r"}"$"===n&&(b=i[0],x=i[1]),"r"!=m||v||(m="g"),null!=v&&("g"==m?v=Math.max(1,Math.min(21,v)):"e"!=m&&"f"!=m||(v=Math.max(0,Math.min(20,v)))),m=Oe.get(m)||Pe;var k=f&&g;return function(t){var e=x;if(_&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===d?"":d;if(y<0){var i=N.formatPrefix(t,v);t=i.scale(t),e=i.symbol+x}else t*=y;var a,r,s=(t=m(t,v)).lastIndexOf(".");if(s<0){var o=w?t.lastIndexOf("e"):-1;r=o<0?(a=t,""):(a=t.substring(0,o),t.substring(o))}else a=t.substring(0,s),r=S+t.substring(s+1);!f&&g&&(a=C(a,1/0));var c=b.length+a.length+r.length+(k?0:n.length),l=c<p?new Array(c=p-c+1).join(u):"";return k&&(a=C(l+a,l.length?p-r.length:1/0)),n+=b,t=a+r,("<"===h?n+t+l:">"===h?l+n+t:"^"===h?l.substring(0,c>>=1)+n+t+l.substring(c):n+(k?t:l+t))+e}}),timeFormat:function(t){var e=t.dateTime,n=t.date,i=t.time,a=t.periods,r=t.days,s=t.shortDays,o=t.months,c=t.shortMonths;function l(o){var c=o.length;function t(t){for(var e,n,i,a=[],r=-1,s=0;++r<c;)37===o.charCodeAt(r)&&(a.push(o.slice(s,r)),null!=(n=Le[e=o.charAt(++r)])&&(e=o.charAt(++r)),(i=x[e])&&(e=i(t,null==n?"e"===e?" ":"0":n)),a.push(e),s=r+1);return a.push(o.slice(s,r)),a.join("")}return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(u(e,o,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&Ie!==Ne,i=new(n?Ne:Ie);return"j"in e?i.setFullYear(e.y,0,e.j):"W"in e||"U"in e?("w"in e||(e.w="W"in e?1:0),i.setFullYear(e.y,0,1),i.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(i.getDay()+5)%7:e.w+7*e.U-(i.getDay()+6)%7)):i.setFullYear(e.y,e.m,e.d),i.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L),n?i._:i},t.toString=function(){return o},t}function u(t,e,n,i){for(var a,r,s,o=0,c=e.length,l=n.length;o<c;){if(l<=i)return-1;if(37===(a=e.charCodeAt(o++))){if(s=e.charAt(o++),!(r=_[s in Le?e.charAt(o++):s])||(i=r(t,n,i))<0)return-1}else if(a!=n.charCodeAt(i++))return-1}return i}l.multi=(l.utc=function(t){var n=l(t);function e(t){try{var e=new(Ie=Ne);return e._=t,n(e)}finally{Ie=Date}}return e.parse=function(t){try{Ie=Ne;var e=n.parse(t);return e&&e._}finally{Ie=Date}},e.toString=n.toString,e}).multi=sn;var h=N.map(),d=$e(r),f=Be(r),p=$e(s),g=Be(s),v=$e(o),m=Be(o),y=$e(c),b=Be(c);a.forEach(function(t,e){h.set(t.toLowerCase(),e)});var x={a:function(t){return s[t.getDay()]},A:function(t){return r[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:l(e),d:function(t,e){return Fe(t.getDate(),e,2)},e:function(t,e){return Fe(t.getDate(),e,2)},H:function(t,e){return Fe(t.getHours(),e,2)},I:function(t,e){return Fe(t.getHours()%12||12,e,2)},j:function(t,e){return Fe(1+De.dayOfYear(t),e,3)},L:function(t,e){return Fe(t.getMilliseconds(),e,3)},m:function(t,e){return Fe(t.getMonth()+1,e,2)},M:function(t,e){return Fe(t.getMinutes(),e,2)},p:function(t){return a[+(12<=t.getHours())]},S:function(t,e){return Fe(t.getSeconds(),e,2)},U:function(t,e){return Fe(De.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Fe(De.mondayOfYear(t),e,2)},x:l(n),X:l(i),y:function(t,e){return Fe(t.getFullYear()%100,e,2)},Y:function(t,e){return Fe(t.getFullYear()%1e4,e,4)},Z:an,"%":function(){return"%"}},_={a:function(t,e,n){p.lastIndex=0;var i=p.exec(e.slice(n));return i?(t.w=g.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){d.lastIndex=0;var i=d.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){y.lastIndex=0;var i=y.exec(e.slice(n));return i?(t.m=b.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){v.lastIndex=0;var i=v.exec(e.slice(n));return i?(t.m=m.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return u(t,x.c.toString(),e,n)},d:Ze,e:Ze,H:Je,I:Je,j:Qe,L:nn,m:Xe,M:tn,p:function(t,e,n){var i=h.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:en,U:qe,w:Ve,W:Ue,x:function(t,e,n){return u(t,x.x.toString(),e,n)},X:function(t,e,n){return u(t,x.X.toString(),e,n)},y:Ge,Y:Ye,Z:Ke,"%":rn};return l}(t)};var e,S,o,c,i,C};var on=N.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cn(){}N.format=on.numberFormat,N.geo={},cn.prototype={s:0,t:0,add:function(t){un(t,this.t,ln),un(ln.s,this.s,this),this.s?this.t+=ln.t:this.s=ln.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ln=new cn;function un(t,e,n){var i=n.s=t+e,a=i-t,r=i-a;n.t=t-r+(e-a)}function hn(t,e){t&&fn.hasOwnProperty(t.type)&&fn[t.type](t,e)}N.geo.stream=function(t,e){t&&dn.hasOwnProperty(t.type)?dn[t.type](t,e):hn(t,e)};var dn={Feature:function(t,e){hn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)hn(n[i].geometry,e)}},fn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){pn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)pn(n[i],e,0)},Polygon:function(t,e){gn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,a=n.length;++i<a;)gn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)hn(n[i],e)}};function pn(t,e,n){var i,a=-1,r=t.length-n;for(e.lineStart();++a<r;)i=t[a],e.point(i[0],i[1],i[2]);e.lineEnd()}function gn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)pn(t[n],e,1);e.polygonEnd()}N.geo.area=function(t){return vn=0,N.geo.stream(t,An),vn};var vn,mn,yn,bn,xn,_n,wn,kn,Sn,Cn,Mn,Tn,En=new cn,An={sphere:function(){vn+=4*St},point:O,lineStart:O,lineEnd:O,polygonStart:function(){En.reset(),An.lineStart=On},polygonEnd:function(){var t=2*En;vn+=t<0?4*St+t:t,An.lineStart=An.lineEnd=An.point=O}};function On(){var n,i,u,h,d;function a(t,e){e=e*Et/2+St/4;var n=(t*=Et)-u,i=0<=n?1:-1,a=i*n,r=Math.cos(e),s=Math.sin(e),o=d*s,c=h*r+o*Math.cos(a),l=o*i*Math.sin(a);En.add(Math.atan2(l,c)),u=t,h=r,d=s}An.point=function(t,e){An.point=a,u=(n=t)*Et,h=Math.cos(e=(i=e)*Et/2+St/4),d=Math.sin(e)},An.lineEnd=function(){a(n,i)}}function Pn(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Dn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function In(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Nn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function jn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function zn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Hn(t){return[Math.atan2(t[1],t[0]),It(t[2])]}function Ln(t,e){return I(t[0]-e[0])<wt&&I(t[1]-e[1])<wt}N.geo.bounds=function(){var u,h,d,f,p,i,a,g,r,c,l,v={point:m,lineStart:t,lineEnd:e,polygonStart:function(){v.point=n,v.lineStart=o,v.lineEnd=y,r=0,An.polygonStart()},polygonEnd:function(){An.polygonEnd(),v.point=m,v.lineStart=t,v.lineEnd=e,En<0?(u=-(d=180),h=-(f=90)):wt<r?f=90:r<-wt&&(h=-90),l[0]=u,l[1]=d}};function m(t,e){c.push(l=[u=t,d=t]),e<h&&(h=e),f<e&&(f=e)}function s(t,e){var n=Pn([t*Et,e*Et]);if(g){var i=In(g,n),a=In([i[1],-i[0],0],i);zn(a),a=Hn(a);var r=t-p,s=0<r?1:-1,o=a[0]*At*s,c=180<I(r);if(c^(s*p<o&&o<s*t)){var l=a[1]*At;f<l&&(f=l)}else if(c^(s*p<(o=(o+360)%360-180)&&o<s*t)){(l=-a[1]*At)<h&&(h=l)}else e<h&&(h=e),f<e&&(f=e);c?t<p?b(u,t)>b(u,d)&&(d=t):b(t,d)>b(u,d)&&(u=t):u<=d?(t<u&&(u=t),d<t&&(d=t)):p<t?b(u,t)>b(u,d)&&(d=t):b(t,d)>b(u,d)&&(u=t)}else m(t,e);g=n,p=t}function t(){v.point=s}function e(){l[0]=u,l[1]=d,v.point=m,g=null}function n(t,e){if(g){var n=t-p;r+=180<I(n)?n+(0<n?360:-360):n}else i=t,a=e;An.point(t,e),s(t,e)}function o(){An.lineStart()}function y(){n(i,a),An.lineEnd(),I(r)>wt&&(u=-(d=180)),l[0]=u,l[1]=d,g=null}function b(t,e){return(e-=t)<0?e+360:e}function x(t,e){return t[0]-e[0]}function _(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(t){if(f=d=-(u=h=1/0),c=[],N.geo.stream(t,v),a=c.length){c.sort(x);for(var e=1,n=[o=c[0]];e<a;++e)_((r=c[e])[0],o)||_(r[1],o)?(b(o[0],r[1])>b(o[0],o[1])&&(o[1]=r[1]),b(r[0],o[1])>b(o[0],o[1])&&(o[0]=r[0])):n.push(o=r);for(var i,a,r,s=-1/0,o=(e=0,n[a=n.length-1]);e<=a;o=r,++e)r=n[e],(i=b(o[1],r[0]))>s&&(s=i,u=r[0],d=o[1])}return c=l=null,u===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[u,h],[d,f]]}}(),N.geo.centroid=function(t){mn=yn=bn=xn=_n=wn=kn=Sn=Cn=Mn=Tn=0,N.geo.stream(t,Rn);var e=Cn,n=Mn,i=Tn,a=e*e+n*n+i*i;return a<kt&&(e=wn,n=kn,i=Sn,yn<wt&&(e=bn,n=xn,i=_n),(a=e*e+n*n+i*i)<kt)?[NaN,NaN]:[Math.atan2(n,e)*At,It(i/Math.sqrt(a))*At]};var Rn={sphere:O,point:Wn,lineStart:$n,lineEnd:Bn,polygonStart:function(){Rn.lineStart=Vn},polygonEnd:function(){Rn.lineStart=$n}};function Wn(t,e){t*=Et;var n=Math.cos(e*=Et);Fn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Fn(t,e,n){bn+=(t-bn)/++mn,xn+=(e-xn)/mn,_n+=(n-_n)/mn}function $n(){var o,c,l;function i(t,e){t*=Et;var n=Math.cos(e*=Et),i=n*Math.cos(t),a=n*Math.sin(t),r=Math.sin(e),s=Math.atan2(Math.sqrt((s=c*r-l*a)*s+(s=l*i-o*r)*s+(s=o*a-c*i)*s),o*i+c*a+l*r);yn+=s,wn+=s*(o+(o=i)),kn+=s*(c+(c=a)),Sn+=s*(l+(l=r)),Fn(o,c,l)}Rn.point=function(t,e){t*=Et;var n=Math.cos(e*=Et);o=n*Math.cos(t),c=n*Math.sin(t),l=Math.sin(e),Rn.point=i,Fn(o,c,l)}}function Bn(){Rn.point=Wn}function Vn(){var i,a,f,p,g;function r(t,e){t*=Et;var n=Math.cos(e*=Et),i=n*Math.cos(t),a=n*Math.sin(t),r=Math.sin(e),s=p*r-g*a,o=g*i-f*r,c=f*a-p*i,l=Math.sqrt(s*s+o*o+c*c),u=f*i+p*a+g*r,h=l&&-Dt(u)/l,d=Math.atan2(l,u);Cn+=h*s,Mn+=h*o,Tn+=h*c,yn+=d,wn+=d*(f+(f=i)),kn+=d*(p+(p=a)),Sn+=d*(g+(g=r)),Fn(f,p,g)}Rn.point=function(t,e){i=t,a=e,Rn.point=r,t*=Et;var n=Math.cos(e*=Et);f=n*Math.cos(t),p=n*Math.sin(t),g=Math.sin(e),Fn(f,p,g)},Rn.lineEnd=function(){r(i,a),Rn.lineEnd=Bn,Rn.point=Wn}}function qn(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function Un(){return!0}function Yn(t,e,n,i,o){var c=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Ln(n,i)){o.lineStart();for(var a=0;a<e;++a)o.point((n=t[a])[0],n[1]);o.lineEnd()}else{var r=new Kn(n,t,null,!0),s=new Kn(n,null,r,!1);r.o=s,c.push(r),l.push(s),s=new Kn(i,null,r=new Kn(i,t,null,!1),!0),r.o=s,c.push(r),l.push(s)}}}),l.sort(e),Gn(c),Gn(l),c.length){for(var a=0,r=n,s=l.length;a<s;++a)l[a].e=r=!r;for(var u,h,d=c[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;u=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(a=0,s=u.length;a<s;++a)o.point((h=u[a])[0],h[1]);else i(f.x,f.n.x,1,o);f=f.n}else{if(p)for(a=(u=f.p.z).length-1;0<=a;--a)o.point((h=u[a])[0],h[1]);else i(f.x,f.p.x,-1,o);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);o.lineEnd()}}}function Gn(t){if(e=t.length){for(var e,n,i=0,a=t[0];++i<e;)a.n=n=t[i],n.p=a,a=n;a.n=n=t[0],n.p=a}}function Kn(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Xn(y,b,x,_){return function(i,s){var o,a=b(s),e=i.invert(_[0],_[1]),n={point:r,lineStart:c,lineEnd:l,polygonStart:function(){n.point=g,n.lineStart=v,n.lineEnd=m,o=[],u=[]},polygonEnd:function(){n.point=r,n.lineStart=c,n.lineEnd=l,o=N.merge(o);var t=function(t,e){var n=t[0],i=t[1],a=[Math.sin(n),-Math.cos(n),0],r=0,s=0;En.reset();for(var o=0,c=e.length;o<c;++o){var l=e[o],u=l.length;if(u)for(var h=l[0],d=h[0],f=h[1]/2+St/4,p=Math.sin(f),g=Math.cos(f),v=1;;){v===u&&(v=0);var m=(t=l[v])[0],y=t[1]/2+St/4,b=Math.sin(y),x=Math.cos(y),_=m-d,w=0<=_?1:-1,k=w*_,S=St<k,C=p*b;if(En.add(Math.atan2(C*w*Math.sin(k),g*x+C*Math.cos(k))),r+=S?_+w*Ct:_,S^n<=d^n<=m){var M=In(Pn(h),Pn(t));zn(M);var T=In(a,M);zn(T);var E=(S^0<=_?-1:1)*It(T[2]);(E<i||i===E&&(M[0]||M[1]))&&(s+=S^0<=_?1:-1)}if(!v++)break;d=m,p=b,g=x,h=t}}return(r<-wt||r<wt&&En<-wt)^1&s}(e,u);o.length?(p||(s.polygonStart(),p=!0),Yn(o,Jn,t,x,s)):t&&(p||(s.polygonStart(),p=!0),s.lineStart(),x(null,null,1,s),s.lineEnd()),p&&(s.polygonEnd(),p=!1),o=u=null},sphere:function(){s.polygonStart(),s.lineStart(),x(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function r(t,e){var n=i(t,e);y(t=n[0],e=n[1])&&s.point(t,e)}function t(t,e){var n=i(t,e);a.point(n[0],n[1])}function c(){n.point=t,a.lineStart()}function l(){n.point=r,a.lineEnd()}var u,h,d=Qn(),f=b(d),p=!1;function g(t,e){h.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function v(){f.lineStart(),h=[]}function m(){g(h[0][0],h[0][1]),f.lineEnd();var t,e=f.clean(),n=d.buffer(),i=n.length;if(h.pop(),u.push(h),h=null,i)if(1&e){var a,r=-1;if(0<(i=(t=n[0]).length-1)){for(p||(s.polygonStart(),p=!0),s.lineStart();++r<i;)s.point((a=t[r])[0],a[1]);s.lineEnd()}}else 1<i&&2&e&&n.push(n.pop().concat(n.shift())),o.push(n.filter(Zn))}return n}}function Zn(t){return 1<t.length}function Qn(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:O,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function Jn(t,e){return((t=t.x)[0]<0?t[1]-Tt-wt:Tt-t[1])-((e=e.x)[0]<0?e[1]-Tt-wt:Tt-e[1])}var ti=Xn(Un,function(h){var d,f=NaN,p=NaN,g=NaN;return{lineStart:function(){h.lineStart(),d=1},point:function(t,e){var n,i,a,r,s,o,c,l=0<t?St:-St,u=I(t-f);I(u-St)<wt?(h.point(f,p=0<(p+e)/2?Tt:-Tt),h.point(g,p),h.lineEnd(),h.lineStart(),h.point(l,p),h.point(t,p),d=0):g!==l&&St<=u&&(I(f-g)<wt&&(f-=g*wt),I(t-l)<wt&&(t-=l*wt),n=f,i=p,a=t,r=e,c=Math.sin(n-a),p=I(c)>wt?Math.atan((Math.sin(i)*(o=Math.cos(r))*Math.sin(a)-Math.sin(r)*(s=Math.cos(i))*Math.sin(n))/(s*o*c)):(i+r)/2,h.point(g,p),h.lineEnd(),h.lineStart(),h.point(l,p),d=0),h.point(f=t,p=e),g=l},lineEnd:function(){h.lineEnd(),f=p=NaN},clean:function(){return 2-d}}},function(t,e,n,i){var a;if(null==t)a=n*Tt,i.point(-St,a),i.point(0,a),i.point(St,a),i.point(St,0),i.point(St,-a),i.point(0,-a),i.point(-St,-a),i.point(-St,0),i.point(-St,a);else if(I(t[0]-e[0])>wt){var r=t[0]<e[0]?St:-St;a=n*r/2,i.point(-r,a),i.point(0,a),i.point(r,a)}else i.point(e[0],e[1])},[-St,-St/2]);function ei(u,h,d,f){return function(t){var e,n=t.a,i=t.b,a=n.x,r=n.y,s=0,o=1,c=i.x-a,l=i.y-r;if(e=u-a,c||!(0<e)){if(e/=c,c<0){if(e<s)return;e<o&&(o=e)}else if(0<c){if(o<e)return;s<e&&(s=e)}if(e=d-a,c||!(e<0)){if(e/=c,c<0){if(o<e)return;s<e&&(s=e)}else if(0<c){if(e<s)return;e<o&&(o=e)}if(e=h-r,l||!(0<e)){if(e/=l,l<0){if(e<s)return;e<o&&(o=e)}else if(0<l){if(o<e)return;s<e&&(s=e)}if(e=f-r,l||!(e<0)){if(e/=l,l<0){if(o<e)return;s<e&&(s=e)}else if(0<l){if(e<s)return;e<o&&(o=e)}return 0<s&&(t.a={x:a+s*c,y:r+s*l}),o<1&&(t.b={x:a+o*c,y:r+o*l}),t}}}}}}var ni=1e9;function ii(x,_,w,k){return function(a){var i,u,r,s,o,c,l,h,d,f,p,g=a,t=Qn(),v=ei(x,_,w,k),e={point:n,lineStart:function(){e.point=b,u&&u.push(r=[]);f=!0,d=!1,l=h=NaN},lineEnd:function(){i&&(b(s,o),c&&d&&t.rejoin(),i.push(t.buffer()));e.point=n,d&&a.lineEnd()},polygonStart:function(){a=t,i=[],u=[],p=!0},polygonEnd:function(){a=g,i=N.merge(i);var t=function(t){for(var e=0,n=u.length,i=t[1],a=0;a<n;++a)for(var r,s=1,o=u[a],c=o.length,l=o[0];s<c;++s)r=o[s],l[1]<=i?r[1]>i&&0<Pt(l,r,t)&&++e:r[1]<=i&&Pt(l,r,t)<0&&--e,l=r;return 0!==e}([x,k]),e=p&&t,n=i.length;(e||n)&&(a.polygonStart(),e&&(a.lineStart(),m(null,null,1,a),a.lineEnd()),n&&Yn(i,C,t,m,a),a.polygonEnd()),i=u=r=null}};function m(t,e,n,i){var a=0,r=0;if(null==t||(a=S(t,n))!==(r=S(e,n))||M(t,e)<0^0<n)for(;i.point(0===a||3===a?x:w,1<a?k:_),(a=(a+n+4)%4)!==r;);else i.point(e[0],e[1])}function y(t,e){return x<=t&&t<=w&&_<=e&&e<=k}function n(t,e){y(t,e)&&a.point(t,e)}function b(t,e){var n=y(t=Math.max(-ni,Math.min(ni,t)),e=Math.max(-ni,Math.min(ni,e)));if(u&&r.push([t,e]),f)s=t,o=e,f=!1,(c=n)&&(a.lineStart(),a.point(t,e));else if(n&&d)a.point(t,e);else{var i={a:{x:l,y:h},b:{x:t,y:e}};v(i)?(d||(a.lineStart(),a.point(i.a.x,i.a.y)),a.point(i.b.x,i.b.y),n||a.lineEnd(),p=!1):n&&(a.lineStart(),a.point(t,e),p=!1)}l=t,h=e,d=n}return e};function S(t,e){return I(t[0]-x)<wt?0<e?0:3:I(t[0]-w)<wt?0<e?2:1:I(t[1]-_)<wt?0<e?1:0:0<e?3:2}function C(t,e){return M(t.x,e.x)}function M(t,e){var n=S(t,1),i=S(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function ai(t){var e=0,n=St/3,i=Ei(t),a=i(e,n);return a.parallels=function(t){return arguments.length?i(e=t[0]*St/180,n=t[1]*St/180):[e/St*180,n/St*180]},a}function ri(t,e){var n=Math.sin(t),i=(n+Math.sin(e))/2,a=1+n*(2*i-n),r=Math.sqrt(a)/i;function s(t,e){var n=Math.sqrt(a-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),r-n*Math.cos(t)]}return s.invert=function(t,e){var n=r-e;return[Math.atan2(t,n)/i,It((a-(t*t+n*n)*i*i)/(2*i))]},s}N.geo.clipExtent=function(){var e,n,i,a,r,s,o={stream:function(t){return r&&(r.valid=!1),(r=s(t)).valid=!0,r},extent:function(t){return arguments.length?(s=ii(e=+t[0][0],n=+t[0][1],i=+t[1][0],a=+t[1][1]),r&&(r.valid=!1,r=null),o):[[e,n],[i,a]]}};return o.extent([[0,0],[960,500]])},(N.geo.conicEqualArea=function(){return ai(ri)}).raw=ri,N.geo.albers=function(){return N.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},N.geo.albersUsa=function(){var i,a,r,s,o=N.geo.albers(),c=N.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=N.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){i=[t,e]}};function h(t){var e=t[0],n=t[1];return i=null,a(e,n),i||(r(e,n),i)||s(e,n),i}return h.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,a=(t[1]-n[1])/e;return(.12<=a&&a<.234&&-.425<=i&&i<-.214?c:.166<=a&&a<.234&&-.214<=i&&i<-.115?l:o).invert(t)},h.stream=function(t){var n=o.stream(t),i=c.stream(t),a=l.stream(t);return{point:function(t,e){n.point(t,e),i.point(t,e),a.point(t,e)},sphere:function(){n.sphere(),i.sphere(),a.sphere()},lineStart:function(){n.lineStart(),i.lineStart(),a.lineStart()},lineEnd:function(){n.lineEnd(),i.lineEnd(),a.lineEnd()},polygonStart:function(){n.polygonStart(),i.polygonStart(),a.polygonStart()},polygonEnd:function(){n.polygonEnd(),i.polygonEnd(),a.polygonEnd()}}},h.precision=function(t){return arguments.length?(o.precision(t),c.precision(t),l.precision(t),h):o.precision()},h.scale=function(t){return arguments.length?(o.scale(t),c.scale(.35*t),l.scale(t),h.translate(o.translate())):o.scale()},h.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),n=+t[0],i=+t[1];return a=o.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(u).point,r=c.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+wt,i+.12*e+wt],[n-.214*e-wt,i+.234*e-wt]]).stream(u).point,s=l.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+wt,i+.166*e+wt],[n-.115*e-wt,i+.234*e-wt]]).stream(u).point,h},h.scale(1070)};var si,oi,ci,li,ui,hi,di={point:O,lineStart:O,lineEnd:O,polygonStart:function(){oi=0,di.lineStart=fi},polygonEnd:function(){di.lineStart=di.lineEnd=di.point=O,si+=I(oi/2)}};function fi(){var n,i,a,r;function s(t,e){oi+=r*t-a*e,a=t,r=e}di.point=function(t,e){di.point=s,n=a=t,i=r=e},di.lineEnd=function(){s(n,i)}}var pi={point:function(t,e){t<ci&&(ci=t);ui<t&&(ui=t);e<li&&(li=e);hi<e&&(hi=e)},lineStart:O,lineEnd:O,polygonStart:O,polygonEnd:O};function gi(){var n=vi(4.5),i=[],a={point:t,lineStart:function(){a.point=e},lineEnd:s,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=s,a.point=t},pointRadius:function(t){return n=vi(t),a},result:function(){if(i.length){var t=i.join("");return i=[],t}}};function t(t,e){i.push("M",t,",",e,n)}function e(t,e){i.push("M",t,",",e),a.point=r}function r(t,e){i.push("L",t,",",e)}function s(){a.point=t}function o(){i.push("Z")}return a}function vi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var mi,yi={point:bi,lineStart:xi,lineEnd:_i,polygonStart:function(){yi.lineStart=wi},polygonEnd:function(){yi.point=bi,yi.lineStart=xi,yi.lineEnd=_i}};function bi(t,e){bn+=t,xn+=e,++_n}function xi(){var r,s;function n(t,e){var n=t-r,i=e-s,a=Math.sqrt(n*n+i*i);wn+=a*(r+t)/2,kn+=a*(s+e)/2,Sn+=a,bi(r=t,s=e)}yi.point=function(t,e){yi.point=n,bi(r=t,s=e)}}function _i(){yi.point=bi}function wi(){var n,i,r,s;function a(t,e){var n=t-r,i=e-s,a=Math.sqrt(n*n+i*i);wn+=a*(r+t)/2,kn+=a*(s+e)/2,Sn+=a,Cn+=(a=s*t-r*e)*(r+t),Mn+=a*(s+e),Tn+=3*a,bi(r=t,s=e)}yi.point=function(t,e){yi.point=a,bi(n=r=t,i=s=e)},yi.lineEnd=function(){a(n,i)}}function ki(n){var i=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:s,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=s,a.point=t},pointRadius:function(t){return i=t,a},result:O};function t(t,e){n.moveTo(t+i,e),n.arc(t,e,i,0,Ct)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function s(){a.point=t}function o(){n.closePath()}return a}function Si(A){var O=.5,P=Math.cos(30*Et),_=16;function e(t){return(_?function(a){var n,i,r,s,o,c,l,u,h,d,f,p,g={point:t,lineStart:e,lineEnd:m,polygonStart:function(){a.polygonStart(),g.lineStart=y},polygonEnd:function(){a.polygonEnd(),g.lineStart=e}};function t(t,e){t=A(t,e),a.point(t[0],t[1])}function e(){u=NaN,g.point=v,a.lineStart()}function v(t,e){var n=Pn([t,e]),i=A(t,e);D(u,h,l,d,f,p,u=i[0],h=i[1],l=t,d=n[0],f=n[1],p=n[2],_,a),a.point(u,h)}function m(){g.point=t,a.lineEnd()}function y(){e(),g.point=b,g.lineEnd=x}function b(t,e){v(n=t,e),i=u,r=h,s=d,o=f,c=p,g.point=v}function x(){D(u,h,l,d,f,p,i,r,n,s,o,c,_,a),(g.lineEnd=m)()}return g}:function(n){return Mi(n,function(t,e){t=A(t,e),n.point(t[0],t[1])})})(t)}function D(t,e,n,i,a,r,s,o,c,l,u,h,d,f){var p=s-t,g=o-e,v=p*p+g*g;if(4*O<v&&d--){var m=i+l,y=a+u,b=r+h,x=Math.sqrt(m*m+y*y+b*b),_=Math.asin(b/=x),w=I(I(b)-1)<wt||I(n-c)<wt?(n+c)/2:Math.atan2(y,m),k=A(w,_),S=k[0],C=k[1],M=S-t,T=C-e,E=g*M-p*T;(O<E*E/v||.3<I((p*M+g*T)/v-.5)||i*l+a*u+r*h<P)&&(D(t,e,n,i,a,r,S,C,w,m/=x,y/=x,b,d,f),f.point(S,C),D(S,C,w,m,y,b,s,o,c,l,u,h,d,f))}}return e.precision=function(t){return arguments.length?(_=0<(O=t*t)&&16,e):Math.sqrt(O)},e}function Ci(t){this.stream=t}function Mi(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Ti(t){return Ei(function(){return t})()}function Ei(t){var n,e,i,a,r,s,o=Si(function(t,e){return[(t=n(t,e))[0]*c+a,r-t[1]*c]}),c=150,l=480,u=250,h=0,d=0,f=0,p=0,g=0,v=ti,m=z,y=null,b=null;function x(t){return[(t=i(t[0]*Et,t[1]*Et))[0]*c+a,r-t[1]*c]}function _(t){return(t=i.invert((t[0]-a)/c,(r-t[1])/c))&&[t[0]*At,t[1]*At]}function w(){i=qn(e=Di(f,p,g),n);var t=n(h,d);return a=l-t[0]*c,r=u+t[1]*c,k()}function k(){return s&&(s.valid=!1,s=null),x}return x.stream=function(t){return s&&(s.valid=!1),(s=Ai(v(e,o(m(t))))).valid=!0,s},x.clipAngle=function(t){return arguments.length?(v=null==t?(y=t,ti):function(a){var M=Math.cos(a),f=0<M,p=I(M)>wt;return Xn(g,function(o){var c,l,u,h,d;return{lineStart:function(){h=u=!1,d=1},point:function(t,e){var n,i=[t,e],a=g(t,e),r=f?a?0:m(t,e):a?m(t+(t<0?St:-St),e):0;if(!c&&(h=u=a)&&o.lineStart(),a!==u&&(n=v(c,i),(Ln(c,n)||Ln(i,n))&&(i[0]+=wt,i[1]+=wt,a=g(i[0],i[1]))),a!==u)d=0,a?(o.lineStart(),n=v(i,c),o.point(n[0],n[1])):(n=v(c,i),o.point(n[0],n[1]),o.lineEnd()),c=n;else if(p&&c&&f^a){var s;r&l||!(s=v(i,c,!0))||(d=0,f?(o.lineStart(),o.point(s[0][0],s[0][1]),o.point(s[1][0],s[1][1]),o.lineEnd()):(o.point(s[1][0],s[1][1]),o.lineEnd(),o.lineStart(),o.point(s[0][0],s[0][1])))}!a||c&&Ln(c,i)||o.point(i[0],i[1]),c=i,u=a,l=r},lineEnd:function(){u&&o.lineEnd(),c=null},clean:function(){return d|(h&&u)<<1}}},zi(a,6*Et),f?[0,-a]:[-St,a-St]);function g(t,e){return Math.cos(t)*Math.cos(e)>M}function v(t,e,n){var i=[1,0,0],a=In(Pn(t),Pn(e)),r=Dn(a,a),s=a[0],o=r-s*s;if(!o)return!n&&t;var c=M*r/o,l=-M*s/o,u=In(i,a),h=jn(i,c);Nn(h,jn(a,l));var d=u,f=Dn(h,d),p=Dn(d,d),g=f*f-p*(Dn(h,h)-1);if(!(g<0)){var v=Math.sqrt(g),m=jn(d,(-f-v)/p);if(Nn(m,h),m=Hn(m),!n)return m;var y,b=t[0],x=e[0],_=t[1],w=e[1];x<b&&(y=b,b=x,x=y);var k=x-b,S=I(k-St)<wt;if(!S&&w<_&&(y=_,_=w,w=y),S||k<wt?S?0<_+w^m[1]<(I(m[0]-b)<wt?_:w):_<=m[1]&&m[1]<=w:St<k^(b<=m[0]&&m[0]<=x)){var C=jn(d,(-f+v)/p);return Nn(C,h),[m,Hn(C)]}}}function m(t,e){var n=f?a:St-a,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}}((y=+t)*Et),k()):y},x.clipExtent=function(t){return arguments.length?(m=(b=t)?ii(t[0][0],t[0][1],t[1][0],t[1][1]):z,k()):b},x.scale=function(t){return arguments.length?(c=+t,w()):c},x.translate=function(t){return arguments.length?(l=+t[0],u=+t[1],w()):[l,u]},x.center=function(t){return arguments.length?(h=t[0]%360*Et,d=t[1]%360*Et,w()):[h*At,d*At]},x.rotate=function(t){return arguments.length?(f=t[0]%360*Et,p=t[1]%360*Et,g=2<t.length?t[2]%360*Et:0,w()):[f*At,p*At,g*At]},N.rebind(x,o,"precision"),function(){return n=t.apply(this,arguments),x.invert=n.invert&&_,w()}}function Ai(n){return Mi(n,function(t,e){n.point(t*Et,e*Et)})}function Oi(t,e){return[t,e]}function Pi(t,e){return[St<t?t-Ct:t<-St?t+Ct:t,e]}function Di(t,e,n){return t?e||n?qn(Ni(t),ji(e,n)):Ni(t):e||n?ji(e,n):Pi}function Ii(n){return function(t,e){return[St<(t+=n)?t-Ct:t<-St?t+Ct:t,e]}}function Ni(t){var e=Ii(t);return e.invert=Ii(-t),e}function ji(t,e){var o=Math.cos(t),c=Math.sin(t),l=Math.cos(e),u=Math.sin(e);function n(t,e){var n=Math.cos(e),i=Math.cos(t)*n,a=Math.sin(t)*n,r=Math.sin(e),s=r*o+i*c;return[Math.atan2(a*l-s*u,i*o-r*c),It(s*l+a*u)]}return n.invert=function(t,e){var n=Math.cos(e),i=Math.cos(t)*n,a=Math.sin(t)*n,r=Math.sin(e),s=r*l-a*u;return[Math.atan2(a*l+r*u,i*o+s*c),It(s*o-i*c)]},n}function zi(o,c){var l=Math.cos(o),u=Math.sin(o);return function(t,e,n,i){var a=n*c;null!=t?(t=Hi(l,t),e=Hi(l,e),(0<n?t<e:e<t)&&(t+=n*Ct)):(t=o+n*Ct,e=o-.5*a);for(var r,s=t;0<n?e<s:s<e;s-=a)i.point((r=Hn([l,-u*Math.cos(s),-u*Math.sin(s)]))[0],r[1])}}function Hi(t,e){var n=Pn(e);n[0]-=t,zn(n);var i=Dt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-wt)%(2*Math.PI)}function Li(t,e,n){var i=N.range(t,e-wt,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function Ri(t,e,n){var i=N.range(t,e-wt,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function Wi(t){return t.source}function Fi(t){return t.target}N.geo.path=function(){var i,e,a,n,r,s=4.5;function o(t){return t&&("function"==typeof s&&n.pointRadius(+s.apply(this,arguments)),r&&r.valid||(r=a(n)),N.geo.stream(t,r)),n.result()}function c(){return r=null,o}return o.area=function(t){return si=0,N.geo.stream(t,a(di)),si},o.centroid=function(t){return bn=xn=_n=wn=kn=Sn=Cn=Mn=Tn=0,N.geo.stream(t,a(yi)),Tn?[Cn/Tn,Mn/Tn]:Sn?[wn/Sn,kn/Sn]:_n?[bn/_n,xn/_n]:[NaN,NaN]},o.bounds=function(t){return ui=hi=-(ci=li=1/0),N.geo.stream(t,a(pi)),[[ci,li],[ui,hi]]},o.projection=function(t){return arguments.length?(a=(i=t)?t.stream||(n=t,e=Si(function(t,e){return n([t*At,e*At])}),function(t){return Ai(e(t))}):z,c()):i;var n,e},o.context=function(t){return arguments.length?(n=null==(e=t)?new gi:new ki(t),"function"!=typeof s&&n.pointRadius(s),c()):e},o.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(n.pointRadius(+t),+t),o):s},o.projection(N.geo.albersUsa()).context(null)},N.geo.transform=function(i){return{stream:function(t){var e=new Ci(t);for(var n in i)e[n]=i[n];return e}}},Ci.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},N.geo.projection=Ti,N.geo.projectionMutator=Ei,(N.geo.equirectangular=function(){return Ti(Oi)}).raw=Oi.invert=Oi,N.geo.rotation=function(e){function t(t){return(t=e(t[0]*Et,t[1]*Et))[0]*=At,t[1]*=At,t}return e=Di(e[0]%360*Et,e[1]*Et,2<e.length?e[2]*Et:0),t.invert=function(t){return(t=e.invert(t[0]*Et,t[1]*Et))[0]*=At,t[1]*=At,t},t},Pi.invert=Oi,N.geo.circle=function(){var e,a,r=[0,0],n=6;function i(){var t="function"==typeof r?r.apply(this,arguments):r,n=Di(-t[0]*Et,-t[1]*Et,0).invert,i=[];return a(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=At,t[1]*=At}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(r=t,i):r},i.angle=function(t){return arguments.length?(a=zi((e=+t)*Et,n*Et),i):e},i.precision=function(t){return arguments.length?(a=zi(e*Et,(n=+t)*Et),i):n},i.angle(90)},N.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Et,a=t[1]*Et,r=e[1]*Et,s=Math.sin(i),o=Math.cos(i),c=Math.sin(a),l=Math.cos(a),u=Math.sin(r),h=Math.cos(r);return Math.atan2(Math.sqrt((n=h*s)*n+(n=l*u-c*h*o)*n),c*u+l*h*o)},N.geo.graticule=function(){var e,n,i,a,r,s,o,c,l,u,h,d,f=10,p=f,g=90,v=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:t()}}function t(){return N.range(Math.ceil(a/g)*g,i,g).map(h).concat(N.range(Math.ceil(c/v)*v,o,v).map(d)).concat(N.range(Math.ceil(n/f)*f,e,f).filter(function(t){return I(t%g)>wt}).map(l)).concat(N.range(Math.ceil(s/p)*p,r,p).filter(function(t){return I(t%v)>wt}).map(u))}return y.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(d(o).slice(1),h(i).reverse().slice(1),d(c).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.majorExtent(t).minorExtent(t):y.minorExtent()},y.majorExtent=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],c=+t[0][1],o=+t[1][1],i<a&&(t=a,a=i,i=t),o<c&&(t=c,c=o,o=t),y.precision(m)):[[a,c],[i,o]]},y.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],s=+t[0][1],r=+t[1][1],e<n&&(t=n,n=e,e=t),r<s&&(t=s,s=r,r=t),y.precision(m)):[[n,s],[e,r]]},y.step=function(t){return arguments.length?y.majorStep(t).minorStep(t):y.minorStep()},y.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],y):[g,v]},y.minorStep=function(t){return arguments.length?(f=+t[0],p=+t[1],y):[f,p]},y.precision=function(t){return arguments.length?(m=+t,l=Li(s,r,90),u=Ri(n,e,m),h=Li(c,o,90),d=Ri(a,i,m),y):m},y.majorExtent([[-180,-90+wt],[180,90-wt]]).minorExtent([[-180,-80-wt],[180,80+wt]])},N.geo.greatArc=function(){var e,n,i=Wi,a=Fi;function r(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||a.apply(this,arguments)]}}return r.distance=function(){return N.geo.distance(e||i.apply(this,arguments),n||a.apply(this,arguments))},r.source=function(t){return arguments.length?(e="function"==typeof(i=t)?null:t,r):i},r.target=function(t){return arguments.length?(n="function"==typeof(a=t)?null:t,r):a},r.precision=function(){return arguments.length?r:0},r},N.geo.interpolate=function(t,e){return n=t[0]*Et,i=t[1]*Et,a=e[0]*Et,r=e[1]*Et,s=Math.cos(i),o=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=s*Math.cos(n),h=s*Math.sin(n),d=c*Math.cos(a),f=c*Math.sin(a),p=2*Math.asin(Math.sqrt(jt(r-i)+s*c*jt(a-n))),g=1/Math.sin(p),(v=p?function(t){var e=Math.sin(t*=p)*g,n=Math.sin(p-t)*g,i=n*u+e*d,a=n*h+e*f,r=n*o+e*l;return[Math.atan2(a,i)*At,Math.atan2(r,Math.sqrt(i*i+a*a))*At]}:function(){return[n*At,i*At]}).distance=p,v;var n,i,a,r,s,o,c,l,u,h,d,f,p,g,v},N.geo.length=function(t){return mi=0,N.geo.stream(t,$i),mi};var $i={sphere:O,point:O,lineStart:function(){var s,o,c;function n(t,e){var n=Math.sin(e*=Et),i=Math.cos(e),a=I((t*=Et)-s),r=Math.cos(a);mi+=Math.atan2(Math.sqrt((a=i*Math.sin(a))*a+(a=c*n-o*i*r)*a),o*n+c*i*r),s=t,o=n,c=i}$i.point=function(t,e){s=t*Et,o=Math.sin(e*=Et),c=Math.cos(e),$i.point=n},$i.lineEnd=function(){$i.point=$i.lineEnd=O}},lineEnd:O,polygonStart:O,polygonEnd:O};function Bi(r,s){function t(t,e){var n=Math.cos(t),i=Math.cos(e),a=r(n*i);return[a*i*Math.sin(t),a*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),i=s(n),a=Math.sin(i),r=Math.cos(i);return[Math.atan2(t*a,n*r),Math.asin(n&&e*a/n)]},t}var Vi=Bi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(N.geo.azimuthalEqualArea=function(){return Ti(Vi)}).raw=Vi;var qi=Bi(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},z);function Ui(t,e){var n=Math.cos(t),i=function(t){return Math.tan(St/4+t/2)},a=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(i(e)/i(t)),r=n*Math.pow(i(t),a)/a;if(!a)return Ki;function s(t,e){0<r?e<-Tt+wt&&(e=-Tt+wt):Tt-wt<e&&(e=Tt-wt);var n=r/Math.pow(i(e),a);return[n*Math.sin(a*t),r-n*Math.cos(a*t)]}return s.invert=function(t,e){var n=r-e,i=Ot(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(r/i,1/a))-Tt]},s}function Yi(t,e){var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),a=n/i+t;if(I(i)<wt)return Oi;function r(t,e){var n=a-e;return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}return r.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,a-Ot(i)*Math.sqrt(t*t+n*n)]},r}(N.geo.azimuthalEquidistant=function(){return Ti(qi)}).raw=qi,(N.geo.conicConformal=function(){return ai(Ui)}).raw=Ui,(N.geo.conicEquidistant=function(){return ai(Yi)}).raw=Yi;var Gi=Bi(function(t){return 1/t},Math.atan);function Ki(t,e){return[t,Math.log(Math.tan(St/4+e/2))]}function Xi(t){var a,r=Ti(t),s=r.scale,o=r.translate,c=r.clipExtent;return r.scale=function(){var t=s.apply(r,arguments);return t===r?a?r.clipExtent(null):r:t},r.translate=function(){var t=o.apply(r,arguments);return t===r?a?r.clipExtent(null):r:t},r.clipExtent=function(t){var e=c.apply(r,arguments);if(e===r){if(a=null==t){var n=St*s(),i=o();c([[i[0]-n,i[1]-n],[i[0]+n,i[1]+n]])}}else a&&(e=null);return e},r.clipExtent(null)}(N.geo.gnomonic=function(){return Ti(Gi)}).raw=Gi,Ki.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Tt]},(N.geo.mercator=function(){return Xi(Ki)}).raw=Ki;var Zi=Bi(function(){return 1},Math.asin);(N.geo.orthographic=function(){return Ti(Zi)}).raw=Zi;var Qi=Bi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function Ji(t,e){return[Math.log(Math.tan(St/4+e/2)),-t]}function ta(t){return t[0]}function ea(t){return t[1]}function na(t){for(var e=t.length,n=[0,1],i=2,a=2;a<e;a++){for(;1<i&&Pt(t[n[i-2]],t[n[i-1]],t[a])<=0;)--i;n[i++]=a}return n.slice(0,i)}function ia(t,e){return t[0]-e[0]||t[1]-e[1]}(N.geo.stereographic=function(){return Ti(Qi)}).raw=Qi,Ji.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Tt]},(N.geo.transverseMercator=function(){var t=Xi(Ji),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=Ji,N.geom={},N.geom.hull=function(t){var d=ta,f=ea;if(arguments.length)return e(t);function e(t){if(t.length<3)return[];var e,n=ge(d),i=ge(f),a=t.length,r=[],s=[];for(e=0;e<a;e++)r.push([+n.call(this,t[e],e),+i.call(this,t[e],e),e]);for(r.sort(ia),e=0;e<a;e++)s.push([r[e][0],-r[e][1]]);var o=na(r),c=na(s),l=c[0]===o[0],u=c[c.length-1]===o[o.length-1],h=[];for(e=o.length-1;0<=e;--e)h.push(t[r[o[e]][2]]);for(e=+l;e<c.length-u;++e)h.push(t[r[c[e]][2]]);return h}return e.x=function(t){return arguments.length?(d=t,e):d},e.y=function(t){return arguments.length?(f=t,e):f},e},N.geom.polygon=function(t){return F(t,aa),t};var aa=N.geom.polygon.prototype=[];function ra(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function sa(t,e,n,i){var a=t[0],r=n[0],s=e[0]-a,o=i[0]-r,c=t[1],l=n[1],u=e[1]-c,h=i[1]-l,d=(o*(c-l)-h*(a-r))/(h*s-o*u);return[a+d*s,c+d*u]}function oa(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}aa.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],a=0;++e<n;)t=i,i=this[e],a+=t[1]*i[0]-t[0]*i[1];return.5*a},aa.centroid=function(t){var e,n,i=-1,a=this.length,r=0,s=0,o=this[a-1];for(arguments.length||(t=-1/(6*this.area()));++i<a;)e=o,o=this[i],n=e[0]*o[1]-o[0]*e[1],r+=(e[0]+o[0])*n,s+=(e[1]+o[1])*n;return[r*t,s*t]},aa.clip=function(t){for(var e,n,i,a,r,s,o=oa(t),c=-1,l=this.length-oa(this),u=this[l-1];++c<l;){for(e=t.slice(),t.length=0,a=this[c],r=e[(i=e.length-o)-1],n=-1;++n<i;)ra(s=e[n],u,a)?(ra(r,u,a)||t.push(sa(r,s,u,a)),t.push(s)):ra(r,u,a)&&t.push(sa(r,s,u,a)),r=s;o&&t.push(t[0]),u=a}return t};var ca,la,ua,ha,da,fa=[],pa=[];function ga(){Ia(this),this.edge=this.site=this.circle=null}function va(t){var e=fa.pop()||new ga;return e.site=t,e}function ma(t){Ma(t),ua.remove(t),fa.push(t),Ia(t)}function ya(t){var e=t.circle,n=e.x,i=e.cy,a={x:n,y:i},r=t.P,s=t.N,o=[t];ma(t);for(var c=r;c.circle&&I(n-c.circle.x)<wt&&I(i-c.circle.cy)<wt;)r=c.P,o.unshift(c),ma(c),c=r;o.unshift(c),Ma(c);for(var l=s;l.circle&&I(n-l.circle.x)<wt&&I(i-l.circle.cy)<wt;)s=l.N,o.push(l),ma(l),l=s;o.push(l),Ma(l);var u,h=o.length;for(u=1;u<h;++u)l=o[u],c=o[u-1],Oa(l.edge,c.site,l.site,a);c=o[0],(l=o[h-1]).edge=Aa(c.site,l.site,null,a),Ca(c),Ca(l)}function ba(t){for(var e,n,i,a,r=t.x,s=t.y,o=ua._;o;)if(i=xa(o,s)-r,wt<i)o=o.L;else{if(a=r-_a(o,s),!(wt<a)){-wt<i?(e=o.P,n=o):-wt<a?n=(e=o).N:e=n=o;break}if(!o.R){e=o;break}o=o.R}var c=va(t);if(ua.insert(e,c),e||n){if(e===n)return Ma(e),n=va(e.site),ua.insert(c,n),c.edge=n.edge=Aa(e.site,c.site),Ca(e),void Ca(n);if(n){Ma(e),Ma(n);var l=e.site,u=l.x,h=l.y,d=t.x-u,f=t.y-h,p=n.site,g=p.x-u,v=p.y-h,m=2*(d*v-f*g),y=d*d+f*f,b=g*g+v*v,x={x:(v*y-f*b)/m+u,y:(d*b-g*y)/m+h};Oa(n.edge,l,p,x),c.edge=Aa(l,t,null,x),n.edge=Aa(t,p,null,x),Ca(e),Ca(n)}else c.edge=Aa(e.site,c.site)}}function xa(t,e){var n=t.site,i=n.x,a=n.y,r=a-e;if(!r)return i;var s=t.P;if(!s)return-1/0;var o=(n=s.site).x,c=n.y,l=c-e;if(!l)return o;var u=o-i,h=1/r-1/l,d=u/l;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*l)-c+l/2+a-r/2)))/h+i:(i+o)/2}function _a(t,e){var n=t.N;if(n)return xa(n,e);var i=t.site;return i.y===e?i.x:1/0}function wa(t){this.site=t,this.edges=[]}function ka(t,e){return e.angle-t.angle}function Sa(){Ia(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ca(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,a=t.site,r=n.site;if(i!==r){var s=a.x,o=a.y,c=i.x-s,l=i.y-o,u=r.x-s,h=2*(c*(v=r.y-o)-l*u);if(!(-kt<=h)){var d=c*c+l*l,f=u*u+v*v,p=(v*d-l*f)/h,g=(c*f-u*d)/h,v=g+o,m=pa.pop()||new Sa;m.arc=t,m.site=a,m.x=p+s,m.y=v+Math.sqrt(p*p+g*g),m.cy=v,t.circle=m;for(var y=null,b=da._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}da.insert(y,m),y||(ha=m)}}}}function Ma(t){var e=t.circle;e&&(e.P||(ha=e.N),da.remove(e),pa.push(e),Ia(e),t.circle=null)}function Ta(t,e){var n=t.b;if(n)return!0;var i,a,r=t.a,s=e[0][0],o=e[1][0],c=e[0][1],l=e[1][1],u=t.l,h=t.r,d=u.x,f=u.y,p=h.x,g=h.y,v=(d+p)/2,m=(f+g)/2;if(g===f){if(v<s||o<=v)return;if(p<d){if(r){if(r.y>=l)return}else r={x:v,y:c};n={x:v,y:l}}else{if(r){if(r.y<c)return}else r={x:v,y:l};n={x:v,y:c}}}else if(a=m-(i=(d-p)/(g-f))*v,i<-1||1<i)if(p<d){if(r){if(r.y>=l)return}else r={x:(c-a)/i,y:c};n={x:(l-a)/i,y:l}}else{if(r){if(r.y<c)return}else r={x:(l-a)/i,y:l};n={x:(c-a)/i,y:c}}else if(f<g){if(r){if(r.x>=o)return}else r={x:s,y:i*s+a};n={x:o,y:i*o+a}}else{if(r){if(r.x<s)return}else r={x:o,y:i*o+a};n={x:s,y:i*s+a}}return t.a=r,t.b=n,!0}function Ea(t,e){this.l=t,this.r=e,this.a=this.b=null}function Aa(t,e,n,i){var a=new Ea(t,e);return ca.push(a),n&&Oa(a,t,e,n),i&&Oa(a,e,t,i),la[t.i].edges.push(new Pa(a,t,e)),la[e.i].edges.push(new Pa(a,e,t)),a}function Oa(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Pa(t,e,n){var i=t.a,a=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(a.x-i.x,i.y-a.y):Math.atan2(i.x-a.x,a.y-i.y)}function Da(){this._=null}function Ia(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Na(t,e){var n=e,i=e.R,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function ja(t,e){var n=e,i=e.L,a=n.U;a?a.L===n?a.L=i:a.R=i:t._=i,i.U=a,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function za(t){for(;t.L;)t=t.L;return t}function Ha(t,e){var n,i,a,r=t.sort(La).pop();for(ca=[],la=new Array(t.length),ua=new Da,da=new Da;;)if(a=ha,r&&(!a||r.y<a.y||r.y===a.y&&r.x<a.x))r.x===n&&r.y===i||(la[r.i]=new wa(r),ba(r),n=r.x,i=r.y),r=t.pop();else{if(!a)break;ya(a.arc)}e&&(function(t){for(var e,n=ca,i=ei(t[0][0],t[0][1],t[1][0],t[1][1]),a=n.length;a--;)(!Ta(e=n[a],t)||!i(e)||I(e.a.x-e.b.x)<wt&&I(e.a.y-e.b.y)<wt)&&(e.a=e.b=null,n.splice(a,1))}(e),function(t){for(var e,n,i,a,r,s,o,c,l,u,h=t[0][0],d=t[1][0],f=t[0][1],p=t[1][1],g=la,v=g.length;v--;)if((r=g[v])&&r.prepare())for(c=(o=r.edges).length,s=0;s<c;)i=(u=o[s].end()).x,a=u.y,e=(l=o[++s%c].start()).x,n=l.y,(I(i-e)>wt||I(a-n)>wt)&&(o.splice(s,0,new Pa((m=r.site,y=u,b=I(i-h)<wt&&wt<p-a?{x:h,y:I(e-h)<wt?n:p}:I(a-p)<wt&&wt<d-i?{x:I(n-p)<wt?e:d,y:p}:I(i-d)<wt&&wt<a-f?{x:d,y:I(e-d)<wt?n:f}:I(a-f)<wt&&wt<i-h?{x:I(n-f)<wt?e:h,y:f}:null,x=void 0,x=new Ea(m,null),x.a=y,x.b=b,ca.push(x),x),r.site,null)),++c);var m,y,b,x}(e));var s={cells:la,edges:ca};return ua=da=ca=la=null,s}function La(t,e){return e.y-t.y||e.x-t.x}wa.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(ka),e.length},Pa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Da.prototype={insert:function(t,e){var n,i,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=za(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(a=i.R)&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.R&&(Na(this,n),n=(t=n).U),n.C=!1,i.C=!0,ja(this,i)):(a=i.L)&&a.C?(n.C=a.C=!1,i.C=!0,t=i):(t===n.L&&(ja(this,n),n=(t=n).U),n.C=!1,i.C=!0,Na(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,a=t.U,r=t.L,s=t.R;if(n=r?s?za(s):r:s,a?a.L===t?a.L=n:a.R=n:this._=n,r&&s?(i=n.C,n.C=t.C,((n.L=r).U=n)!==s?(a=n.U,n.U=t.U,t=n.R,a.L=t,(n.R=s).U=n):(n.U=a,t=(a=n).R)):(i=t.C,t=n),t&&(t.U=a),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===a.L){if((e=a.R).C&&(e.C=!1,a.C=!0,Na(this,a),e=a.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ja(this,e),e=a.R),e.C=a.C,a.C=e.R.C=!1,Na(this,a),t=this._;break}}else if((e=a.L).C&&(e.C=!1,a.C=!0,ja(this,a),e=a.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Na(this,e),e=a.L),e.C=a.C,a.C=e.L.C=!1,ja(this,a),t=this._;break}e.C=!0,a=(t=a).U}while(!t.C);t&&(t.C=!1)}}},N.geom.voronoi=function(t){var e=ta,n=ea,i=e,a=n,u=Ra;if(t)return r(t);function r(a){var r=new Array(a.length),s=u[0][0],o=u[0][1],c=u[1][0],l=u[1][1];return Ha(h(a),u).cells.forEach(function(t,e){var n=t.edges,i=t.site;(r[e]=n.length?n.map(function(t){var e=t.start();return[e.x,e.y]}):i.x>=s&&i.x<=c&&i.y>=o&&i.y<=l?[[s,l],[c,l],[c,o],[s,o]]:[]).point=a[e]}),r}function h(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/wt)*wt,y:Math.round(a(t,e)/wt)*wt,i:e}})}return r.links=function(e){return Ha(h(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},r.triangles=function(d){var f=[];return Ha(h(d)).cells.forEach(function(t,e){for(var n,i,a,r,s=t.site,o=t.edges.sort(ka),c=-1,l=o.length,u=o[l-1].edge,h=u.l===s?u.r:u.l;++c<l;)u,n=h,h=(u=o[c].edge).l===s?u.r:u.l,e<n.i&&e<h.i&&(a=n,r=h,((i=s).x-r.x)*(a.y-i.y)-(i.x-a.x)*(r.y-i.y)<0)&&f.push([d[e],d[n.i],d[h.i]])}),f},r.x=function(t){return arguments.length?(i=ge(e=t),r):e},r.y=function(t){return arguments.length?(a=ge(n=t),r):n},r.clipExtent=function(t){return arguments.length?(u=null==t?Ra:t,r):u===Ra?null:u},r.size=function(t){return arguments.length?r.clipExtent(t&&[[0,0],t]):u===Ra?null:u&&u[1]},r};var Ra=[[-1e6,-1e6],[1e6,1e6]];function Wa(t){return t.x}function Fa(t){return t.y}function $a(t,e){t=N.rgb(t),e=N.rgb(e);var n=t.r,i=t.g,a=t.b,r=e.r-n,s=e.g-i,o=e.b-a;return function(t){return"#"+ce(Math.round(n+r*t))+ce(Math.round(i+s*t))+ce(Math.round(a+o*t))}}function Ba(t,e){var n,i={},a={};for(n in t)n in e?i[n]=Ga(t[n],e[n]):a[n]=t[n];for(n in e)n in t||(a[n]=e[n]);return function(t){for(n in i)a[n]=i[n](t);return a}}function Va(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function qa(t,i){var e,n,a,r=Ua.lastIndex=Ya.lastIndex=0,s=-1,o=[],c=[];for(t+="",i+="";(e=Ua.exec(t))&&(n=Ya.exec(i));)(a=n.index)>r&&(a=i.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(e=e[0])===(n=n[0])?o[s]?o[s]+=n:o[++s]=n:(o[++s]=null,c.push({i:s,x:Va(e,n)})),r=Ya.lastIndex;return r<i.length&&(a=i.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?(i=c[0].x,function(t){return i(t)+""}):function(){return i}:(i=c.length,function(t){for(var e,n=0;n<i;++n)o[(e=c[n]).i]=e.x(t);return o.join("")})}N.geom.delaunay=function(t){return N.geom.voronoi().triangles(t)},N.geom.quadtree=function(t,y,b,x,_){var w,k=ta,C=ea;if(w=arguments.length)return k=Wa,C=Fa,3===w&&(_=b,x=y,b=y=0),e(t);function e(t){var e,n,i,a,r,s,o,c,l,u=ge(k),h=ge(C);if(null!=y)s=y,o=b,c=x,l=_;else if(c=l=-(s=o=1/0),n=[],i=[],r=t.length,w)for(a=0;a<r;++a)(e=t[a]).x<s&&(s=e.x),e.y<o&&(o=e.y),e.x>c&&(c=e.x),e.y>l&&(l=e.y),n.push(e.x),i.push(e.y);else for(a=0;a<r;++a){var d=+u(e=t[a],a),f=+h(e,a);d<s&&(s=d),f<o&&(o=f),c<d&&(c=d),l<f&&(l=f),n.push(d),i.push(f)}var p=c-s,g=l-o;function v(t,e,n,i,a,r,s,o){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var c=t.x,l=t.y;if(null!=c)if(I(c-n)+I(l-i)<.01)m(t,e,n,i,a,r,s,o);else{var u=t.point;t.x=t.y=t.point=null,m(t,u,c,l,a,r,s,o),m(t,e,n,i,a,r,s,o)}else t.x=n,t.y=i,t.point=e}else m(t,e,n,i,a,r,s,o)}function m(t,e,n,i,a,r,s,o){var c=.5*(a+s),l=.5*(r+o),u=c<=n,h=l<=i,d=h<<1|u;t.leaf=!1,u?a=c:s=c,h?r=l:o=l,v(t=t.nodes[d]||(t.nodes[d]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,i,a,r,s,o)}g<p?l=o+p:c=s+g;var S={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){v(S,t,+u(t,++a),+h(t,a),s,o,c,l)}};if(S.visit=function(t){!function t(e,n,i,a,r,s){if(!e(n,i,a,r,s)){var o=.5*(i+r),c=.5*(a+s),l=n.nodes;l[0]&&t(e,l[0],i,a,o,c),l[1]&&t(e,l[1],o,a,r,c),l[2]&&t(e,l[2],i,c,o,s),l[3]&&t(e,l[3],o,c,r,s)}}(t,S,s,o,c,l)},S.find=function(t){return e=S,v=t[0],m=t[1],k=1/0,function t(e,n,i,a,r){if(!(x<n||_<i||a<y||r<b)){if(s=e.point){var s,o=v-e.x,c=m-e.y,l=o*o+c*c;if(l<k){var u=Math.sqrt(k=l);y=v-u,b=m-u,x=v+u,_=m+u,w=s}}for(var h=e.nodes,d=.5*(n+a),f=.5*(i+r),p=(f<=m)<<1|d<=v,g=p+4;p<g;++p)if(e=h[3&p])switch(3&p){case 0:t(e,n,i,d,f);break;case 1:t(e,d,i,a,f);break;case 2:t(e,n,f,d,r);break;case 3:t(e,d,f,a,r)}}}(e,y=s,b=o,x=c,_=l),w;var e,v,m,y,b,x,_,w,k},a=-1,null==y){for(;++a<r;)v(S,t[a],n[a],i[a],s,o,c,l);--a}else t.forEach(S.add);return n=i=t=e=null,S}return e.x=function(t){return arguments.length?(k=t,e):k},e.y=function(t){return arguments.length?(C=t,e):C},e.extent=function(t){return arguments.length?(null==t?y=b=x=_=null:(y=+t[0][0],b=+t[0][1],x=+t[1][0],_=+t[1][1]),e):null==y?null:[[y,b],[x,_]]},e.size=function(t){return arguments.length?(null==t?y=b=x=_=null:(y=b=0,x=+t[0],_=+t[1]),e):null==y?null:[x-y,_-b]},e},N.interpolateRgb=$a,N.interpolateObject=Ba,N.interpolateNumber=Va,N.interpolateString=qa;var Ua=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ya=new RegExp(Ua.source,"g");function Ga(t,e){for(var n,i=N.interpolators.length;0<=--i&&!(n=N.interpolators[i](t,e)););return n}function Ka(t,e){var n,i=[],a=[],r=t.length,s=e.length,o=Math.min(t.length,e.length);for(n=0;n<o;++n)i.push(Ga(t[n],e[n]));for(;n<r;++n)a[n]=t[n];for(;n<s;++n)a[n]=e[n];return function(t){for(n=0;n<o;++n)a[n]=i[n](t);return a}}N.interpolate=Ga,N.interpolators=[function(t,e){var n=typeof e;return("string"===n?pe.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?$a:qa:e instanceof Wt?$a:Array.isArray(e)?Ka:"object"===n&&isNaN(e)?Ba:Va)(t,e)}],N.interpolateArray=Ka;var Xa=function(){return z},Za=N.map({linear:Xa,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return er},cubic:function(){return nr},sin:function(){return ar},exp:function(){return rr},circle:function(){return sr},elastic:function(e,n){var i;arguments.length<2&&(n=.45);i=arguments.length?n/Ct*Math.asin(1/e):(e=1,n/4);return function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-i)*Ct/n)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return or}}),Qa=N.map({in:z,out:Ja,"in-out":tr,"out-in":function(t){return tr(Ja(t))}});function Ja(e){return function(t){return 1-e(1-t)}}function tr(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function er(t){return t*t}function nr(t){return t*t*t}function ir(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function ar(t){return 1-Math.cos(t*Tt)}function rr(t){return Math.pow(2,10*(t-1))}function sr(t){return 1-Math.sqrt(1-t*t)}function or(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function cr(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function lr(t){var e,n,i,a=[t.a,t.b],r=[t.c,t.d],s=hr(a),o=ur(a,r),c=hr(((e=r)[0]+=(i=-o)*(n=a)[0],e[1]+=i*n[1],e))||0;a[0]*r[1]<r[0]*a[1]&&(a[0]*=-1,a[1]*=-1,s*=-1,o*=-1),this.rotate=(s?Math.atan2(a[1],a[0]):Math.atan2(-r[0],r[1]))*At,this.translate=[t.e,t.f],this.scale=[s,c],this.skew=c?Math.atan2(o,c)*At:0}function ur(t,e){return t[0]*e[0]+t[1]*e[1]}function hr(t){var e=Math.sqrt(ur(t,t));return e&&(t[0]/=e,t[1]/=e),e}N.ease=function(t){var e,n=t.indexOf("-"),i=0<=n?t.slice(0,n):t,a=0<=n?t.slice(n+1):"in";return i=Za.get(i)||Xa,a=Qa.get(a)||z,e=a(i.apply(null,r.call(arguments,1))),function(t){return t<=0?0:1<=t?1:e(t)}},N.interpolateHcl=function(t,e){t=N.hcl(t),e=N.hcl(e);var n=t.h,i=t.c,a=t.l,r=e.h-n,s=e.c-i,o=e.l-a;isNaN(s)&&(s=0,i=isNaN(i)?e.c:i);isNaN(r)?(r=0,n=isNaN(n)?e.h:n):180<r?r-=360:r<-180&&(r+=360);return function(t){return Ut(n+r*t,i+s*t,a+o*t)+""}},N.interpolateHsl=function(t,e){t=N.hsl(t),e=N.hsl(e);var n=t.h,i=t.s,a=t.l,r=e.h-n,s=e.s-i,o=e.l-a;isNaN(s)&&(s=0,i=isNaN(i)?e.s:i);isNaN(r)?(r=0,n=isNaN(n)?e.h:n):180<r?r-=360:r<-180&&(r+=360);return function(t){return Bt(n+r*t,i+s*t,a+o*t)+""}},N.interpolateLab=function(t,e){t=N.lab(t),e=N.lab(e);var n=t.l,i=t.a,a=t.b,r=e.l-n,s=e.a-i,o=e.b-a;return function(t){return Jt(n+r*t,i+s*t,a+o*t)+""}},N.interpolateRound=cr,N.transform=function(t){var n=b.createElementNS(N.ns.prefix.svg,"g");return(N.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new lr(e?e.matrix:dr)})(t)},lr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var dr={a:1,b:0,c:0,d:1,e:0,f:0};function fr(t){return t.length?t.pop()+",":""}function pr(t,e){var n,i,a,r,s,o,c,l,u=[],h=[];return t=N.transform(t),e=N.transform(e),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var a=n.push("translate(",null,",",null,")");i.push({i:a-4,x:Va(t[0],e[0])},{i:a-2,x:Va(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,u,h),n=t.rotate,i=e.rotate,a=u,r=h,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),r.push({i:a.push(fr(a)+"rotate(",null,")")-2,x:Va(n,i)})):i&&a.push(fr(a)+"rotate("+i+")"),s=t.skew,o=e.skew,c=u,l=h,s!==o?l.push({i:c.push(fr(c)+"skewX(",null,")")-2,x:Va(s,o)}):o&&c.push(fr(c)+"skewX("+o+")"),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var a=n.push(fr(n)+"scale(",null,",",null,")");i.push({i:a-4,x:Va(t[0],e[0])},{i:a-2,x:Va(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(fr(n)+"scale("+e+")")}(t.scale,e.scale,u,h),t=e=null,function(t){for(var e,n=-1,i=h.length;++n<i;)u[(e=h[n]).i]=e.x(t);return u.join("")}}function gr(e,n){return n=(n-=e=+e)||1/n,function(t){return(t-e)/n}}function vr(e,n){return n=(n-=e=+e)||1/n,function(t){return Math.max(0,Math.min(1,(t-e)/n))}}function mr(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;var n=yr(t),i=yr(e),a=n.pop(),r=i.pop(),s=null;for(;a===r;)s=a,a=n.pop(),r=i.pop();return s}(e,n),a=[e];e!==i;)e=e.parent,a.push(e);for(var r=a.length;n!==i;)a.splice(r,0,n),n=n.parent;return a}function yr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function br(t){t.fixed|=2}function xr(t){t.fixed&=-7}function _r(t){t.fixed|=4,t.px=t.x,t.py=t.y}function wr(t){t.fixed&=-5}N.interpolateTransform=pr,N.layout={},N.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(mr(t[n]));return e}},N.layout.chord=function(){var v,m,y,b,x,_,w,e={},k=0;function t(){var t,e,n,i,a,r={},s=[],o=N.range(b),c=[];for(v=[],m=[],t=0,i=-1;++i<b;){for(e=0,a=-1;++a<b;)e+=y[i][a];s.push(e),c.push(N.range(b)),t+=e}for(x&&o.sort(function(t,e){return x(s[t],s[e])}),_&&c.forEach(function(t,n){t.sort(function(t,e){return _(y[n][t],y[n][e])})}),t=(Ct-k*b)/t,e=0,i=-1;++i<b;){for(n=e,a=-1;++a<b;){var l=o[i],u=c[l][a],h=y[l][u],d=e,f=e+=h*t;r[l+"-"+u]={index:l,subindex:u,startAngle:d,endAngle:f,value:h}}m[l]={index:l,startAngle:n,endAngle:e,value:s[l]},e+=k}for(i=-1;++i<b;)for(a=i-1;++a<b;){var p=r[i+"-"+a],g=r[a+"-"+i];(p.value||g.value)&&v.push(p.value<g.value?{source:g,target:p}:{source:p,target:g})}w&&S()}function S(){v.sort(function(t,e){return w((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return e.matrix=function(t){return arguments.length?(b=(y=t)&&y.length,v=m=null,e):y},e.padding=function(t){return arguments.length?(k=t,v=m=null,e):k},e.sortGroups=function(t){return arguments.length?(x=t,v=m=null,e):x},e.sortSubgroups=function(t){return arguments.length?(_=t,v=null,e):_},e.sortChords=function(t){return arguments.length?(w=t,v&&S(),e):w},e.chords=function(){return v||t(),v},e.groups=function(){return m||t(),m},e},N.layout.force=function(){var h,t,d,f,p,g,a={},v=N.dispatch("start","tick","end"),m=[1,1],y=.9,r=kr,s=Sr,b=-30,u=Cr,x=.1,_=.64,w=[],k=[];function S(l){return function(t,e,n,i){if(t.point!==l){var a=t.cx-l.x,r=t.cy-l.y,s=i-e,o=a*a+r*r;if(s*s/_<o){if(o<u){var c=t.charge/o;l.px-=a*c,l.py-=r*c}return!0}if(t.point&&o&&o<u){c=t.pointCharge/o;l.px-=a*c,l.py-=r*c}}return!t.charge}}function e(t){t.px=N.event.x,t.py=N.event.y,a.resume()}return a.tick=function(){if((d*=.99)<.005)return h=null,v.end({type:"end",alpha:d=0}),!0;var t,e,n,i,a,r,s,o,c,l=w.length,u=k.length;for(e=0;e<u;++e)i=(n=k[e]).source,(r=(o=(a=n.target).x-i.x)*o+(c=a.y-i.y)*c)&&(o*=r=d*p[e]*((r=Math.sqrt(r))-f[e])/r,c*=r,a.x-=o*(s=i.weight+a.weight?i.weight/(i.weight+a.weight):.5),a.y-=c*s,i.x+=o*(s=1-s),i.y+=c*s);if((s=d*x)&&(o=m[0]/2,c=m[1]/2,e=-1,s))for(;++e<l;)(n=w[e]).x+=(o-n.x)*s,n.y+=(c-n.y)*s;if(b)for(!function t(e,n,i){var a=0,r=0;e.charge=0;if(!e.leaf)for(var s,o=e.nodes,c=o.length,l=-1;++l<c;)null!=(s=o[l])&&(t(s,n,i),e.charge+=s.charge,a+=s.charge*s.cx,r+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=n*i[e.point.index];e.charge+=e.pointCharge=u,a+=u*e.point.x,r+=u*e.point.y}e.cx=a/e.charge;e.cy=r/e.charge}(t=N.geom.quadtree(w),d,g),e=-1;++e<l;)(n=w[e]).fixed||t.visit(S(n));for(e=-1;++e<l;)(n=w[e]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*y,n.y-=(n.py-(n.py=n.y))*y);v.tick({type:"tick",alpha:d})},a.nodes=function(t){return arguments.length?(w=t,a):w},a.links=function(t){return arguments.length?(k=t,a):k},a.size=function(t){return arguments.length?(m=t,a):m},a.linkDistance=function(t){return arguments.length?(r="function"==typeof t?t:+t,a):r},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(s="function"==typeof t?t:+t,a):s},a.friction=function(t){return arguments.length?(y=+t,a):y},a.charge=function(t){return arguments.length?(b="function"==typeof t?t:+t,a):b},a.chargeDistance=function(t){return arguments.length?(u=t*t,a):Math.sqrt(u)},a.gravity=function(t){return arguments.length?(x=+t,a):x},a.theta=function(t){return arguments.length?(_=t*t,a):Math.sqrt(_)},a.alpha=function(t){return arguments.length?(t=+t,d?0<t?d=t:(h.c=null,h.t=NaN,h=null,v.end({type:"end",alpha:d=0})):0<t&&(v.start({type:"start",alpha:d=t}),h=ke(a.tick)),a):d},a.start=function(){var o,c,t,l=w.length,u=k.length,e=m[0],n=m[1];for(o=0;o<l;++o)(t=w[o]).index=o,t.weight=0;for(o=0;o<u;++o)"number"==typeof(t=k[o]).source&&(t.source=w[t.source]),"number"==typeof t.target&&(t.target=w[t.target]),++t.source.weight,++t.target.weight;for(o=0;o<l;++o)t=w[o],isNaN(t.x)&&(t.x=i("x",e)),isNaN(t.y)&&(t.y=i("y",n)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);if(f=[],"function"==typeof r)for(o=0;o<u;++o)f[o]=+r.call(this,k[o],o);else for(o=0;o<u;++o)f[o]=r;if(p=[],"function"==typeof s)for(o=0;o<u;++o)p[o]=+s.call(this,k[o],o);else for(o=0;o<u;++o)p[o]=s;if(g=[],"function"==typeof b)for(o=0;o<l;++o)g[o]=+b.call(this,w[o],o);else for(o=0;o<l;++o)g[o]=b;function i(t,e){if(!c){for(c=new Array(l),r=0;r<l;++r)c[r]=[];for(r=0;r<u;++r){var n=k[r];c[n.source.index].push(n.target),c[n.target.index].push(n.source)}}for(var i,a=c[o],r=-1,s=a.length;++r<s;)if(!isNaN(i=a[r][t]))return i;return Math.random()*e}return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){if(t||(t=N.behavior.drag().origin(z).on("dragstart.force",br).on("drag.force",e).on("dragend.force",xr)),!arguments.length)return t;this.on("mouseover.force",_r).on("mouseout.force",wr).call(t)},N.rebind(a,v,"on")};var kr=20,Sr=1,Cr=1/0;function Mr(t,e){return N.rebind(t,e,"sort","children","value"),(t.nodes=t).links=Dr,t}function Tr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(a=t.children)&&(i=a.length))for(var i,a;0<=--i;)n.push(a[i])}function Er(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(r=t.children)&&(a=r.length))for(var a,r,s=-1;++s<a;)n.push(r[s]);for(;null!=(t=i.pop());)e(t)}function Ar(t){return t.children}function Or(t){return t.value}function Pr(t,e){return e.value-t.value}function Dr(t){return N.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}N.layout.hierarchy=function(){var o=Pr,c=Ar,l=Or;function u(t){var e,n=[t],i=[];for(t.depth=0;null!=(e=n.pop());)if(i.push(e),(r=c.call(u,e,e.depth))&&(a=r.length)){for(var a,r,s;0<=--a;)n.push(s=r[a]),s.parent=e,s.depth=e.depth+1;l&&(e.value=0),e.children=r}else l&&(e.value=+l.call(u,e,e.depth)||0),delete e.children;return Er(t,function(t){var e,n;o&&(e=t.children)&&e.sort(o),l&&(n=t.parent)&&(n.value+=t.value)}),i}return u.sort=function(t){return arguments.length?(o=t,u):o},u.children=function(t){return arguments.length?(c=t,u):c},u.value=function(t){return arguments.length?(l=t,u):l},u.revalue=function(t){return l&&(Tr(t,function(t){t.children&&(t.value=0)}),Er(t,function(t){var e;t.children||(t.value=+l.call(u,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},u},N.layout.partition=function(){var i=N.layout.hierarchy(),a=[1,1];function e(t,e){var n=i.call(this,t,e);return function t(e,n,i,a){var r=e.children;if(e.x=n,e.y=e.depth*a,e.dx=i,e.dy=a,r&&(s=r.length)){var s,o,c,l=-1;for(i=e.value?i/e.value:0;++l<s;)t(o=r[l],n,c=o.value*i,a),n+=c}}(n[0],0,a[0],a[1]/function t(e){var n=e.children,i=0;if(n&&(a=n.length))for(var a,r=-1;++r<a;)i=Math.max(i,t(n[r]));return 1+i}(n[0])),n}return e.size=function(t){return arguments.length?(a=t,e):a},Mr(e,i)},N.layout.pie=function(){var d=Number,f=Ir,p=0,g=Ct,v=0;function m(n){var e,t=n.length,i=n.map(function(t,e){return+d.call(m,t,e)}),a=+("function"==typeof p?p.apply(this,arguments):p),r=("function"==typeof g?g.apply(this,arguments):g)-a,s=Math.min(Math.abs(r)/t,+("function"==typeof v?v.apply(this,arguments):v)),o=s*(r<0?-1:1),c=N.sum(i),l=c?(r-t*o)/c:0,u=N.range(t),h=[];return null!=f&&u.sort(f===Ir?function(t,e){return i[e]-i[t]}:function(t,e){return f(n[t],n[e])}),u.forEach(function(t){h[t]={data:n[t],value:e=i[t],startAngle:a,endAngle:a+=e*l+o,padAngle:s}}),h}return m.value=function(t){return arguments.length?(d=t,m):d},m.sort=function(t){return arguments.length?(f=t,m):f},m.startAngle=function(t){return arguments.length?(p=t,m):p},m.endAngle=function(t){return arguments.length?(g=t,m):g},m.padAngle=function(t){return arguments.length?(v=t,m):v},m};var Ir={};function Nr(t){return t.x}function jr(t){return t.y}function zr(t,e,n){t.y0=e,t.y=n}N.layout.stack=function(){var h=z,d=Rr,f=Wr,p=zr,g=Nr,v=jr;function m(t,e){if(!(r=t.length))return t;var n=t.map(function(t,e){return h.call(m,t,e)}),i=n.map(function(t){return t.map(function(t,e){return[g.call(m,t,e),v.call(m,t,e)]})}),a=d.call(m,i,e);n=N.permute(n,a),i=N.permute(i,a);var r,s,o,c,l=f.call(m,i,e),u=n[0].length;for(o=0;o<u;++o)for(p.call(m,n[0][o],c=l[o],i[0][o][1]),s=1;s<r;++s)p.call(m,n[s][o],c+=i[s-1][o][1],i[s][o][1]);return t}return m.values=function(t){return arguments.length?(h=t,m):h},m.order=function(t){return arguments.length?(d="function"==typeof t?t:Hr.get(t)||Rr,m):d},m.offset=function(t){return arguments.length?(f="function"==typeof t?t:Lr.get(t)||Wr,m):f},m.x=function(t){return arguments.length?(g=t,m):g},m.y=function(t){return arguments.length?(v=t,m):v},m.out=function(t){return arguments.length?(p=t,m):p},m};var Hr=N.map({"inside-out":function(t){var e,n,i=t.length,a=t.map(Fr),r=t.map($r),s=N.range(i).sort(function(t,e){return a[t]-a[e]}),o=0,c=0,l=[],u=[];for(e=0;e<i;++e)n=s[e],o<c?(o+=r[n],l.push(n)):(c+=r[n],u.push(n));return u.reverse().concat(l)},reverse:function(t){return N.range(t.length).reverse()},default:Rr}),Lr=N.map({silhouette:function(t){var e,n,i,a=t.length,r=t[0].length,s=[],o=0,c=[];for(n=0;n<r;++n){for(i=e=0;e<a;e++)i+=t[e][n][1];o<i&&(o=i),s.push(i)}for(n=0;n<r;++n)c[n]=(o-s[n])/2;return c},wiggle:function(t){var e,n,i,a,r,s,o,c,l,u=t.length,h=t[0],d=h.length,f=[];for(f[0]=c=l=0,n=1;n<d;++n){for(a=e=0;e<u;++e)a+=t[e][n][1];for(r=e=0,o=h[n][0]-h[n-1][0];e<u;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*o);i<e;++i)s+=(t[i][n][1]-t[i][n-1][1])/o;r+=s*t[e][n][1]}f[n]=c-=a?r/a*o:0,c<l&&(l=c)}for(n=0;n<d;++n)f[n]-=l;return f},expand:function(t){var e,n,i,a=t.length,r=t[0].length,s=1/a,o=[];for(n=0;n<r;++n){for(i=e=0;e<a;e++)i+=t[e][n][1];if(i)for(e=0;e<a;e++)t[e][n][1]/=i;else for(e=0;e<a;e++)t[e][n][1]=s}for(n=0;n<r;++n)o[n]=0;return o},zero:Wr});function Rr(t){return N.range(t.length)}function Wr(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Fr(t){for(var e,n=1,i=0,a=t[0][1],r=t.length;n<r;++n)(e=t[n][1])>a&&(i=n,a=e);return i}function $r(t){return t.reduce(Br,0)}function Br(t,e){return t+e[1]}function Vr(t,e){return qr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function qr(t,e){for(var n=-1,i=+t[0],a=(t[1]-i)/e,r=[];++n<=e;)r[n]=a*n+i;return r}function Ur(t){return[N.min(t),N.max(t)]}function Yr(t,e){return t.value-e.value}function Gr(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function Kr(t,e){(t._pack_next=e)._pack_prev=t}function Xr(t,e){var n=e.x-t.x,i=e.y-t.y,a=t.r+e.r;return n*n+i*i<.999*a*a}function Zr(t){if((e=t.children)&&(c=e.length)){var e,n,i,a,r,s,o,c,l=1/0,u=-1/0,h=1/0,d=-1/0;if(e.forEach(Qr),(n=e[0]).x=-n.r,n.y=0,b(n),1<c&&((i=e[1]).x=i.r,i.y=0,b(i),2<c))for(ts(n,i,a=e[2]),b(a),Gr(n,a),Gr(n._pack_prev=a,i),i=n._pack_next,r=3;r<c;r++){ts(n,i,a=e[r]);var f=0,p=1,g=1;for(s=i._pack_next;s!==i;s=s._pack_next,p++)if(Xr(s,a)){f=1;break}if(1==f)for(o=n._pack_prev;o!==s._pack_prev&&!Xr(o,a);o=o._pack_prev,g++);f?(p<g||p==g&&i.r<n.r?Kr(n,i=s):Kr(n=o,i),r--):(Gr(n,a),b(i=a))}var v=(l+u)/2,m=(h+d)/2,y=0;for(r=0;r<c;r++)(a=e[r]).x-=v,a.y-=m,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=y,e.forEach(Jr)}function b(t){l=Math.min(t.x-t.r,l),u=Math.max(t.x+t.r,u),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}}function Qr(t){t._pack_next=t._pack_prev=t}function Jr(t){delete t._pack_next,delete t._pack_prev}function ts(t,e,n){var i=t.r+n.r,a=e.x-t.x,r=e.y-t.y;if(i&&(a||r)){var s=e.r+n.r,o=a*a+r*r,c=.5+((i*=i)-(s*=s))/(2*o),l=Math.sqrt(Math.max(0,2*s*(i+o)-(i-=o)*i-s*s))/(2*o);n.x=t.x+c*a+l*r,n.y=t.y+c*r-l*a}else n.x=t.x+i,n.y=t.y}function es(t,e){return t.parent==e.parent?1:2}function ns(t){var e=t.children;return e.length?e[0]:t.t}function is(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function as(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function rs(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ss(t,e){var n=t.x+e[3],i=t.y+e[0],a=t.dx-e[1]-e[3],r=t.dy-e[0]-e[2];return a<0&&(n+=a/2,a=0),r<0&&(i+=r/2,r=0),{x:n,y:i,dx:a,dy:r}}function os(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function cs(t){return t.rangeExtent?t.rangeExtent():os(t.range())}function ls(t,e,n,i){var a=n(t[0],t[1]),r=i(e[0],e[1]);return function(t){return r(a(t))}}function us(t,e){var n,i=0,a=t.length-1,r=t[i],s=t[a];return s<r&&(n=i,i=a,a=n,n=r,r=s,s=n),t[i]=e.floor(r),t[a]=e.ceil(s),t}function hs(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:ds}N.layout.histogram=function(){var h=!0,d=Number,f=Ur,p=Vr;function n(t,e){for(var n,i,a=[],r=t.map(d,this),s=f.call(this,r,e),o=p.call(this,s,r,e),c=(e=-1,r.length),l=o.length-1,u=h?1:1/c;++e<l;)(n=a[e]=[]).dx=o[e+1]-(n.x=o[e]),n.y=0;if(0<l)for(e=-1;++e<c;)(i=r[e])>=s[0]&&i<=s[1]&&((n=a[N.bisect(o,i,1,l)-1]).y+=u,n.push(t[e]));return a}return n.value=function(t){return arguments.length?(d=t,n):d},n.range=function(t){return arguments.length?(f=ge(t),n):f},n.bins=function(e){return arguments.length?(p="number"==typeof e?function(t){return qr(t,e)}:ge(e),n):p},n.frequency=function(t){return arguments.length?(h=!!t,n):h},n},N.layout.pack=function(){var c,l=N.layout.hierarchy().sort(Yr),u=0,h=[1,1];function e(t,e){var n=l.call(this,t,e),i=n[0],a=h[0],r=h[1],s=null==c?Math.sqrt:"function"==typeof c?c:function(){return c};if(i.x=i.y=0,Er(i,function(t){t.r=+s(t.value)}),Er(i,Zr),u){var o=u*(c?1:Math.max(2*i.r/a,2*i.r/r))/2;Er(i,function(t){t.r+=o}),Er(i,Zr),Er(i,function(t){t.r-=o})}return function t(e,n,i,a){var r=e.children;e.x=n+=a*e.x;e.y=i+=a*e.y;e.r*=a;if(r)for(var s=-1,o=r.length;++s<o;)t(r[s],n,i,a)}(i,a/2,r/2,c?1:1/Math.max(2*i.r/a,2*i.r/r)),n}return e.size=function(t){return arguments.length?(h=t,e):h},e.radius=function(t){return arguments.length?(c=null==t||"function"==typeof t?t:+t,e):c},e.padding=function(t){return arguments.length?(u=+t,e):u},Mr(e,l)},N.layout.tree=function(){var h=N.layout.hierarchy().sort(null).value(null),g=es,d=[1,1],f=null;function e(t,e){var n=h.call(this,t,e),i=n[0],a=function(t){var e,n={A:null,children:[t]},i=[n];for(;null!=(e=i.pop());)for(var a,r=e.children,s=0,o=r.length;s<o;++s)i.push((r[s]=a={_:r[s],parent:e,children:(a=r[s].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=a);return n.children[0]}(i);if(Er(a,p),a.parent.m=-a.z,Tr(a,v),f)Tr(i,m);else{var r=i,s=i,o=i;Tr(i,function(t){t.x<r.x&&(r=t),t.x>s.x&&(s=t),t.depth>o.depth&&(o=t)});var c=g(r,s)/2-r.x,l=d[0]/(s.x+g(s,r)/2+c),u=d[1]/(o.depth||1);Tr(i,function(t){t.x=(t.x+c)*l,t.y=t.depth*u})}return n}function p(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,n=0,i=0,a=t.children,r=a.length;for(;0<=--r;)(e=a[r]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+g(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+g(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,a=t,r=t,s=e,o=a.parent.children[0],c=a.m,l=r.m,u=s.m,h=o.m;s=is(s),a=ns(a),s&&a;)o=ns(o),(r=is(r)).a=t,0<(i=s.z+u-a.z-c+g(s._,a._))&&(as((f=t,p=n,(d=s).a.parent===f.parent?d.a:p),t,i),c+=i,l+=i),u+=s.m,c+=a.m,h+=o.m,l+=r.m;s&&!is(r)&&(r.t=s,r.m+=u-l),a&&!ns(o)&&(o.t=a,o.m+=c-h,n=t)}var d,f,p;return n}(t,i,t.parent.A||n[0])}function v(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function m(t){t.x*=d[0],t.y=t.depth*d[1]}return e.separation=function(t){return arguments.length?(g=t,e):g},e.size=function(t){return arguments.length?(f=null==(d=t)?m:null,e):f?null:d},e.nodeSize=function(t){return arguments.length?(f=null==(d=t)?null:m,e):f?d:null},Mr(e,h)},N.layout.cluster=function(){var u=N.layout.hierarchy().sort(null).value(null),h=es,d=[1,1],f=!1;function e(t,e){var a,n=u.call(this,t,e),i=n[0],r=0;Er(i,function(t){var e,n,i=t.children;i&&i.length?(t.x=(n=i).reduce(function(t,e){return t+e.x},0)/n.length,t.y=(e=i,1+N.max(e,function(t){return t.y}))):(t.x=a?r+=h(t,a):0,t.y=0,a=t)});var s=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(i),o=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(i),c=s.x-h(s,o)/2,l=o.x+h(o,s)/2;return Er(i,f?function(t){t.x=(t.x-i.x)*d[0],t.y=(i.y-t.y)*d[1]}:function(t){t.x=(t.x-c)/(l-c)*d[0],t.y=(1-(i.y?t.y/i.y:1))*d[1]}),n}return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(f=null==(d=t),e):f?null:d},e.nodeSize=function(t){return arguments.length?(f=null!=(d=t),e):f?d:null},Mr(e,u)},N.layout.treemap=function(){var i,a=N.layout.hierarchy(),u=Math.round,r=[1,1],s=null,h=rs,o=!1,d="squarify",c=.5*(1+Math.sqrt(5));function f(t,e){for(var n,i,a=-1,r=t.length;++a<r;)i=(n=t[a]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function p(t){var e=t.children;if(e&&e.length){var n,i,a,r=h(t),s=[],o=e.slice(),c=1/0,l="slice"===d?r.dx:"dice"===d?r.dy:"slice-dice"===d?1&t.depth?r.dy:r.dx:Math.min(r.dx,r.dy);for(f(o,r.dx*r.dy/t.value),s.area=0;0<(a=o.length);)s.push(n=o[a-1]),s.area+=n.area,c="squarify"!==d||(i=g(s,l))<=c?(o.pop(),i):(s.area-=s.pop().area,v(s,l,r,!1),l=Math.min(r.dx,r.dy),s.length=s.area=0,1/0);s.length&&(v(s,l,r,!0),s.length=s.area=0),e.forEach(p)}}function l(t){var e=t.children;if(e&&e.length){var n,i=h(t),a=e.slice(),r=[];for(f(a,i.dx*i.dy/t.value),r.area=0;n=a.pop();)r.push(n),r.area+=n.area,null!=n.z&&(v(r,n.z?i.dx:i.dy,i,!a.length),r.length=r.area=0);e.forEach(l)}}function g(t,e){for(var n,i=t.area,a=0,r=1/0,s=-1,o=t.length;++s<o;)(n=t[s].area)&&(n<r&&(r=n),a<n&&(a=n));return e*=e,(i*=i)?Math.max(e*a*c/i,i/(e*r*c)):1/0}function v(t,e,n,i){var a,r=-1,s=t.length,o=n.x,c=n.y,l=e?u(t.area/e):0;if(e==n.dx){for((i||l>n.dy)&&(l=n.dy);++r<s;)(a=t[r]).x=o,a.y=c,a.dy=l,o+=a.dx=Math.min(n.x+n.dx-o,l?u(a.area/l):0);a.z=!0,a.dx+=n.x+n.dx-o,n.y+=l,n.dy-=l}else{for((i||l>n.dx)&&(l=n.dx);++r<s;)(a=t[r]).x=o,a.y=c,a.dx=l,c+=a.dy=Math.min(n.y+n.dy-c,l?u(a.area/l):0);a.z=!1,a.dy+=n.y+n.dy-c,n.x+=l,n.dx-=l}}function m(t){var e=i||a(t),n=e[0];return n.x=n.y=0,n.value?(n.dx=r[0],n.dy=r[1]):n.dx=n.dy=0,i&&a.revalue(n),f([n],n.dx*n.dy/n.value),(i?l:p)(n),o&&(i=e),e}return m.size=function(t){return arguments.length?(r=t,m):r},m.padding=function(n){if(!arguments.length)return s;function t(t){return ss(t,n)}var e;return h=null==(s=n)?rs:"function"==(e=typeof n)?function(t){var e=n.call(m,t,t.depth);return null==e?rs(t):ss(t,"number"==typeof e?[e,e,e,e]:e)}:("number"===e&&(n=[n,n,n,n]),t),m},m.round=function(t){return arguments.length?(u=t?Math.round:Number,m):u!=Number},m.sticky=function(t){return arguments.length?(o=t,i=null,m):o},m.ratio=function(t){return arguments.length?(c=t,m):c},m.mode=function(t){return arguments.length?(d=t+"",m):d},Mr(m,a)},N.random={normal:function(i,a){var t=arguments.length;return t<2&&(a=1),t<1&&(i=0),function(){for(var t,e,n;!(n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e)||1<n;);return i+a*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=N.random.normal.apply(N,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=N.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},N.scale={};var ds={floor:z,ceil:z};function fs(n,t,e,i){var a=[],r=[],s=0,o=Math.min(n.length,t.length)-1;for(n[o]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++s<=o;)a.push(e(n[s-1],n[s])),r.push(i(t[s-1],t[s]));return function(t){var e=N.bisect(n,t,1,o)-1;return r[e](a[e](t))}}function ps(t,e){return N.rebind(t,e,"range","rangeRound","interpolate","clamp")}function gs(t,e){return us(t,hs(vs(t,e)[2])),us(t,hs(vs(t,e)[2])),t}function vs(t,e){null==e&&(e=10);var n=os(t),i=n[1]-n[0],a=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),r=e/i*a;return r<=.15?a*=10:r<=.35?a*=5:r<=.75&&(a*=2),n[0]=Math.ceil(n[0]/a)*a,n[1]=Math.floor(n[1]/a)*a+.5*a,n[2]=a,n}function ms(t,e){return N.range.apply(N,vs(t,e))}function ys(t,e,n){var i,a,r,s=vs(t,e);if(n){var o=Ae.exec(n);if(o.shift(),"s"===o[8]){var c=N.formatPrefix(Math.max(I(s[0]),I(s[1])));return o[7]||(o[7]="."+xs(c.scale(s[2]))),o[8]="f",n=N.format(o.join("")),function(t){return n(c.scale(t))+c.symbol}}o[7]||(o[7]="."+(i=o[8],r=xs((a=s)[2]),i in bs?Math.abs(r-xs(Math.max(I(a[0]),I(a[1]))))+ +("e"!==i):r-2*("%"===i))),n=o.join("")}else n=",."+xs(s[2])+"f";return N.format(n)}N.scale.linear=function(){return function t(n,i,a,r){var s,o;function e(){var t=2<Math.min(n.length,i.length)?fs:ls,e=r?vr:gr;return s=t(n,i,e,a),o=t(i,n,e,Ga),c}function c(t){return s(t)}c.invert=function(t){return o(t)};c.domain=function(t){return arguments.length?(n=t.map(Number),e()):n};c.range=function(t){return arguments.length?(i=t,e()):i};c.rangeRound=function(t){return c.range(t).interpolate(cr)};c.clamp=function(t){return arguments.length?(r=t,e()):r};c.interpolate=function(t){return arguments.length?(a=t,e()):a};c.ticks=function(t){return ms(n,t)};c.tickFormat=function(t,e){return ys(n,t,e)};c.nice=function(t){return gs(n,t),e()};c.copy=function(){return t(n,i,a,r)};return e()}([0,1],[0,1],Ga,!1)};var bs={s:1,g:1,p:1,r:1,e:1};function xs(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}N.scale.log=function(){return function t(e,c,l,u){function h(t){return(l?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(c)}function d(t){return l?Math.pow(c,t):-Math.pow(c,-t)}function a(t){return e(h(t))}a.invert=function(t){return d(e.invert(t))};a.domain=function(t){return arguments.length?(l=0<=t[0],e.domain((u=t.map(Number)).map(h)),a):u};a.base=function(t){return arguments.length?(c=+t,e.domain(u.map(h)),a):c};a.nice=function(){var t=us(u.map(h),l?Math:ws);return e.domain(t),u=t.map(d),a};a.ticks=function(){var t=os(u),e=[],n=t[0],i=t[1],a=Math.floor(h(n)),r=Math.ceil(h(i)),s=c%1?2:c;if(isFinite(r-a)){if(l){for(;a<r;a++)for(var o=1;o<s;o++)e.push(d(a)*o);e.push(d(a))}else for(e.push(d(a));a++<r;)for(var o=s-1;0<o;o--)e.push(d(a)*o);for(a=0;e[a]<n;a++);for(r=e.length;e[r-1]>i;r--);e=e.slice(a,r)}return e};a.tickFormat=function(t,n){if(!arguments.length)return _s;arguments.length<2?n=_s:"function"!=typeof n&&(n=N.format(n));var i=Math.max(1,c*t/a.ticks().length);return function(t){var e=t/d(Math.round(h(t)));return e*c<c-.5&&(e*=c),e<=i?n(t):""}};a.copy=function(){return t(e.copy(),c,l,u)};return ps(a,e)}(N.scale.linear().domain([0,1]),10,!0,[1,10])};var _s=N.format(".0e"),ws={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function ks(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}N.scale.pow=function(){return function t(e,n,i){var a=ks(n),r=ks(1/n);function s(t){return e(a(t))}s.invert=function(t){return r(e.invert(t))};s.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(a)),s):i};s.ticks=function(t){return ms(i,t)};s.tickFormat=function(t,e){return ys(i,t,e)};s.nice=function(t){return s.domain(gs(i,t))};s.exponent=function(t){return arguments.length?(a=ks(n=t),r=ks(1/n),e.domain(i.map(a)),s):n};s.copy=function(){return t(e.copy(),n,i)};return ps(s,e)}(N.scale.linear(),1,[0,1])},N.scale.sqrt=function(){return N.scale.pow().exponent(.5)},N.scale.ordinal=function(){return function t(o,c){var a,l,u;function h(t){return l[((a.get(t)||("range"===c.t?a.set(t,o.push(t)):NaN))-1)%l.length]}function d(e,n){return N.range(o.length).map(function(t){return e+n*t})}h.domain=function(t){if(!arguments.length)return o;o=[],a=new y;for(var e,n=-1,i=t.length;++n<i;)a.has(e=t[n])||a.set(e,o.push(e));return h[c.t].apply(h,c.a)};h.range=function(t){return arguments.length?(l=t,u=0,c={t:"range",a:arguments},h):l};h.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],a=o.length<2?(n=(n+i)/2,0):(i-n)/(o.length-1+e);return l=d(n+a*e/2,a),u=0,c={t:"rangePoints",a:arguments},h};h.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],a=o.length<2?(n=i=Math.round((n+i)/2),0):(i-n)/(o.length-1+e)|0;return l=d(n+Math.round(a*e/2+(i-n-(o.length-1+e)*a)/2),a),u=0,c={t:"rangeRoundPoints",a:arguments},h};h.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],a=t[i-0],r=t[1-i],s=(r-a)/(o.length-e+2*n);return l=d(a+s*n,s),i&&l.reverse(),u=s*(1-e),c={t:"rangeBands",a:arguments},h};h.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],a=t[i-0],r=t[1-i],s=Math.floor((r-a)/(o.length-e+2*n));return l=d(a+Math.round((r-a-(o.length-e)*s)/2),s),i&&l.reverse(),u=Math.round(s*(1-e)),c={t:"rangeRoundBands",a:arguments},h};h.rangeBand=function(){return u};h.rangeExtent=function(){return os(c.a[0])};h.copy=function(){return t(o,c)};return h.domain(o)}([],{t:"range",a:[[]]})},N.scale.category10=function(){return N.scale.ordinal().range(Ss)},N.scale.category20=function(){return N.scale.ordinal().range(Cs)},N.scale.category20b=function(){return N.scale.ordinal().range(Ms)},N.scale.category20c=function(){return N.scale.ordinal().range(Ts)};var Ss=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(se),Cs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(se),Ms=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(se),Ts=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(se);function Es(){return 0}N.scale.quantile=function(){return function t(n,i){var a;function e(){var t=0,e=i.length;for(a=[];++t<e;)a[t-1]=N.quantile(n,t/e);return r}function r(t){if(!isNaN(t=+t))return i[N.bisect(a,t)]}r.domain=function(t){return arguments.length?(n=t.map(l).filter(u).sort(c),e()):n};r.range=function(t){return arguments.length?(i=t,e()):i};r.quantiles=function(){return a};r.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?a[t-1]:n[0],t<a.length?a[t]:n[n.length-1]]};r.copy=function(){return t(n,i)};return e()}([],[])},N.scale.quantize=function(){return function t(e,n,i){var a,r;function s(t){return i[Math.max(0,Math.min(r,Math.floor(a*(t-e))))]}function o(){return a=i.length/(n-e),r=i.length-1,s}s.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],o()):[e,n]};s.range=function(t){return arguments.length?(i=t,o()):i};s.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/a+e,t+1/a]};s.copy=function(){return t(e,n,i)};return o()}(0,1,[0,1])},N.scale.threshold=function(){return function t(e,n){function i(t){if(t<=t)return n[N.bisect(e,t)]}i.domain=function(t){return arguments.length?(e=t,i):e};i.range=function(t){return arguments.length?(n=t,i):n};i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};i.copy=function(){return t(e,n)};return i}([.5],[0,1])},N.scale.identity=function(){return function t(n){function e(t){return+t}e.invert=e;e.domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n};e.ticks=function(t){return ms(n,t)};e.tickFormat=function(t,e){return ys(n,t,e)};e.copy=function(){return t(n)};return e}([0,1])},N.svg={},N.svg.arc=function(){var L=Os,R=Ps,W=Es,F=As,$=Ds,B=Is,V=Ns;function e(){var t=Math.max(0,+L.apply(this,arguments)),e=Math.max(0,+R.apply(this,arguments)),n=$.apply(this,arguments)-Tt,i=B.apply(this,arguments)-Tt,a=Math.abs(i-n),r=i<n?0:1;if(e<t&&(s=e,e=t,t=s),Mt<=a)return q(e,r)+(t?q(t,1-r):"")+"Z";var s,o,c,l,u,h,d,f,p,g,v,m,y=0,b=0,x=[];if((l=(+V.apply(this,arguments)||0)/2)&&(c=F===As?Math.sqrt(t*t+e*e):+F.apply(this,arguments),r||(b*=-1),e&&(b=It(c/e*Math.sin(l))),t&&(y=It(c/t*Math.sin(l)))),e){u=e*Math.cos(n+b),h=e*Math.sin(n+b),d=e*Math.cos(i-b),f=e*Math.sin(i-b);var _=Math.abs(i-n-2*b)<=St?0:1;if(b&&js(u,h,d,f)===r^_){var w=(n+i)/2;u=e*Math.cos(w),h=e*Math.sin(w),d=f=null}}else u=h=0;if(t){p=t*Math.cos(i-y),g=t*Math.sin(i-y),v=t*Math.cos(n+y),m=t*Math.sin(n+y);var k=Math.abs(n-i+2*y)<=St?0:1;if(y&&js(p,g,v,m)===1-r^k){var S=(n+i)/2;p=t*Math.cos(S),g=t*Math.sin(S),v=m=null}}else p=g=0;if(wt<a&&.001<(s=Math.min(Math.abs(e-t)/2,+W.apply(this,arguments)))){o=t<e^r?0:1;var C=s,M=s;if(a<St){var T=null==v?[p,g]:null==d?[u,h]:sa([u,h],[v,m],[d,f],[p,g]),E=u-T[0],A=h-T[1],O=d-T[0],P=f-T[1],D=1/Math.sin(Math.acos((E*O+A*P)/(Math.sqrt(E*E+A*A)*Math.sqrt(O*O+P*P)))/2),I=Math.sqrt(T[0]*T[0]+T[1]*T[1]);M=Math.min(s,(t-I)/(D-1)),C=Math.min(s,(e-I)/(D+1))}if(null!=d){var N=zs(null==v?[p,g]:[v,m],[u,h],e,C,r),j=zs([d,f],[p,g],e,C,r);s===C?x.push("M",N[0],"A",C,",",C," 0 0,",o," ",N[1],"A",e,",",e," 0 ",1-r^js(N[1][0],N[1][1],j[1][0],j[1][1]),",",r," ",j[1],"A",C,",",C," 0 0,",o," ",j[0]):x.push("M",N[0],"A",C,",",C," 0 1,",o," ",j[0])}else x.push("M",u,",",h);if(null!=v){var z=zs([u,h],[v,m],t,-M,r),H=zs([p,g],null==d?[u,h]:[d,f],t,-M,r);s===M?x.push("L",H[0],"A",M,",",M," 0 0,",o," ",H[1],"A",t,",",t," 0 ",r^js(H[1][0],H[1][1],z[1][0],z[1][1]),",",1-r," ",z[1],"A",M,",",M," 0 0,",o," ",z[0]):x.push("L",H[0],"A",M,",",M," 0 0,",o," ",z[0])}else x.push("L",p,",",g)}else x.push("M",u,",",h),null!=d&&x.push("A",e,",",e," 0 ",_,",",r," ",d,",",f),x.push("L",p,",",g),null!=v&&x.push("A",t,",",t," 0 ",k,",",1-r," ",v,",",m);return x.push("Z"),x.join("")}function q(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return e.innerRadius=function(t){return arguments.length?(L=ge(t),e):L},e.outerRadius=function(t){return arguments.length?(R=ge(t),e):R},e.cornerRadius=function(t){return arguments.length?(W=ge(t),e):W},e.padRadius=function(t){return arguments.length?(F=t==As?As:ge(t),e):F},e.startAngle=function(t){return arguments.length?($=ge(t),e):$},e.endAngle=function(t){return arguments.length?(B=ge(t),e):B},e.padAngle=function(t){return arguments.length?(V=ge(t),e):V},e.centroid=function(){var t=(+L.apply(this,arguments)+ +R.apply(this,arguments))/2,e=(+$.apply(this,arguments)+ +B.apply(this,arguments))/2-Tt;return[Math.cos(e)*t,Math.sin(e)*t]},e};var As="auto";function Os(t){return t.innerRadius}function Ps(t){return t.outerRadius}function Ds(t){return t.startAngle}function Is(t){return t.endAngle}function Ns(t){return t&&t.padAngle}function js(t,e,n,i){return 0<(t-n)*e-(e-i)*t?0:1}function zs(t,e,n,i,a){var r=t[0]-e[0],s=t[1]-e[1],o=(a?i:-i)/Math.sqrt(r*r+s*s),c=o*s,l=-o*r,u=t[0]+c,h=t[1]+l,d=e[0]+c,f=e[1]+l,p=(u+d)/2,g=(h+f)/2,v=d-u,m=f-h,y=v*v+m*m,b=n-i,x=u*f-d*h,_=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),w=(x*m-v*_)/y,k=(-x*v-m*_)/y,S=(x*m+v*_)/y,C=(-x*v+m*_)/y,M=w-p,T=k-g,E=S-p,A=C-g;return E*E+A*A<M*M+T*T&&(w=S,k=C),[[w-c,k-l],[w*n/b,k*n/b]]}function Hs(l){var u=ta,h=ea,d=Un,f=Rs,e=f.key,p=.7;function n(t){var e,n=[],i=[],a=-1,r=t.length,s=ge(u),o=ge(h);function c(){n.push("M",f(l(i),p))}for(;++a<r;)d.call(this,e=t[a],a)?i.push([+s.call(this,e,a),+o.call(this,e,a)]):i.length&&(c(),i=[]);return i.length&&c(),n.length?n.join(""):null}return n.x=function(t){return arguments.length?(u=t,n):u},n.y=function(t){return arguments.length?(h=t,n):h},n.defined=function(t){return arguments.length?(d=t,n):d},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?f=t:(f=Ls.get(t)||Rs).key,n):e},n.tension=function(t){return arguments.length?(p=t,n):p},n}N.svg.line=function(){return Hs(z)};var Ls=N.map({linear:Rs,"linear-closed":Ws,step:function(t){var e=0,n=t.length,i=t[0],a=[i[0],",",i[1]];for(;++e<n;)a.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);1<n&&a.push("H",i[0]);return a.join("")},"step-before":Fs,"step-after":$s,basis:qs,"basis-open":function(t){if(t.length<4)return Rs(t);var e,n=[],i=-1,a=t.length,r=[0],s=[0];for(;++i<3;)e=t[i],r.push(e[0]),s.push(e[1]);n.push(Us(Ks,r)+","+Us(Ks,s)),--i;for(;++i<a;)e=t[i],r.shift(),r.push(e[0]),s.shift(),s.push(e[1]),Xs(n,r,s);return n.join("")},"basis-closed":function(t){var e,n,i=-1,a=t.length,r=a+4,s=[],o=[];for(;++i<4;)n=t[i%a],s.push(n[0]),o.push(n[1]);e=[Us(Ks,s),",",Us(Ks,o)],--i;for(;++i<r;)n=t[i%a],s.shift(),s.push(n[0]),o.shift(),o.push(n[1]),Xs(e,s,o);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,a,r=t[0][0],s=t[0][1],o=t[n][0]-r,c=t[n][1]-s,l=-1;++l<=n;)i=t[l],a=l/n,i[0]=e*i[0]+(1-e)*(r+a*o),i[1]=e*i[1]+(1-e)*(s+a*c);return qs(t)},cardinal:function(t,e){return t.length<3?Rs(t):t[0]+Bs(t,Vs(t,e))},"cardinal-open":function(t,e){return t.length<4?Rs(t):t[1]+Bs(t.slice(1,-1),Vs(t,e))},"cardinal-closed":function(t,e){return t.length<3?Ws(t):t[0]+Bs((t.push(t[0]),t),Vs([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Rs(t):t[0]+Bs(t,function(t){var e,n,i,a,r=[],s=function(t){var e=0,n=t.length-1,i=[],a=t[0],r=t[1],s=i[0]=Zs(a,r);for(;++e<n;)i[e]=(s+(s=Zs(a=r,r=t[e+1])))/2;return i[e]=s,i}(t),o=-1,c=t.length-1;for(;++o<c;)e=Zs(t[o],t[o+1]),I(e)<wt?s[o]=s[o+1]=0:(n=s[o]/e,i=s[o+1]/e,9<(a=n*n+i*i)&&(a=3*e/Math.sqrt(a),s[o]=a*n,s[o+1]=a*i));o=-1;for(;++o<=c;)a=(t[Math.min(c,o+1)][0]-t[Math.max(0,o-1)][0])/(6*(1+s[o]*s[o])),r.push([a||0,s[o]*a||0]);return r}(t))}});function Rs(t){return 1<t.length?t.join("L"):t+"Z"}function Ws(t){return t.join("L")+"Z"}function Fs(t){for(var e=0,n=t.length,i=t[0],a=[i[0],",",i[1]];++e<n;)a.push("V",(i=t[e])[1],"H",i[0]);return a.join("")}function $s(t){for(var e=0,n=t.length,i=t[0],a=[i[0],",",i[1]];++e<n;)a.push("H",(i=t[e])[0],"V",i[1]);return a.join("")}function Bs(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Rs(t);var n=t.length!=e.length,i="",a=t[0],r=t[1],s=e[0],o=s,c=1;if(n&&(i+="Q"+(r[0]-2*s[0]/3)+","+(r[1]-2*s[1]/3)+","+r[0]+","+r[1],a=t[1],c=2),1<e.length){o=e[1],r=t[c],c++,i+="C"+(a[0]+s[0])+","+(a[1]+s[1])+","+(r[0]-o[0])+","+(r[1]-o[1])+","+r[0]+","+r[1];for(var l=2;l<e.length;l++,c++)r=t[c],o=e[l],i+="S"+(r[0]-o[0])+","+(r[1]-o[1])+","+r[0]+","+r[1]}if(n){var u=t[c];i+="Q"+(r[0]+2*o[0]/3)+","+(r[1]+2*o[1]/3)+","+u[0]+","+u[1]}return i}function Vs(t,e){for(var n,i=[],a=(1-e)/2,r=t[0],s=t[1],o=1,c=t.length;++o<c;)n=r,r=s,s=t[o],i.push([a*(s[0]-n[0]),a*(s[1]-n[1])]);return i}function qs(t){if(t.length<3)return Rs(t);var e=1,n=t.length,i=t[0],a=i[0],r=i[1],s=[a,a,a,(i=t[1])[0]],o=[r,r,r,i[1]],c=[a,",",r,"L",Us(Ks,s),",",Us(Ks,o)];for(t.push(t[n-1]);++e<=n;)i=t[e],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),Xs(c,s,o);return t.pop(),c.push("L",i),c.join("")}function Us(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Ls.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Ys=[0,2/3,1/3,0],Gs=[0,1/3,2/3,0],Ks=[0,1/6,2/3,1/6];function Xs(t,e,n){t.push("C",Us(Ys,e),",",Us(Ys,n),",",Us(Gs,e),",",Us(Gs,n),",",Us(Ks,e),",",Us(Ks,n))}function Zs(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Qs(t){for(var e,n,i,a=-1,r=t.length;++a<r;)n=(e=t[a])[0],i=e[1]-Tt,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function Js(p){var g=ta,v=ta,m=0,y=ea,b=Un,x=Rs,e=x.key,_=x,w="L",k=.7;function n(t){var e,n,i,a=[],r=[],s=[],o=-1,c=t.length,l=ge(g),u=ge(m),h=g===v?function(){return n}:ge(v),d=m===y?function(){return i}:ge(y);function f(){a.push("M",x(p(s),k),w,_(p(r.reverse()),k),"Z")}for(;++o<c;)b.call(this,e=t[o],o)?(r.push([n=+l.call(this,e,o),i=+u.call(this,e,o)]),s.push([+h.call(this,e,o),+d.call(this,e,o)])):r.length&&(f(),r=[],s=[]);return r.length&&f(),a.length?a.join(""):null}return n.x=function(t){return arguments.length?(g=v=t,n):v},n.x0=function(t){return arguments.length?(g=t,n):g},n.x1=function(t){return arguments.length?(v=t,n):v},n.y=function(t){return arguments.length?(m=y=t,n):y},n.y0=function(t){return arguments.length?(m=t,n):m},n.y1=function(t){return arguments.length?(y=t,n):y},n.defined=function(t){return arguments.length?(b=t,n):b},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?x=t:(x=Ls.get(t)||Rs).key,_=x.reverse||x,w=x.closed?"M":"L",n):e},n.tension=function(t){return arguments.length?(k=t,n):k},n}function to(t){return t.radius}function eo(t){return[t.x,t.y]}function no(){return 64}function io(){return"circle"}function ao(t){var e=Math.sqrt(t/St);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}N.svg.line.radial=function(){var t=Hs(Qs);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(Fs.reverse=$s).reverse=Fs,N.svg.area=function(){return Js(z)},N.svg.area.radial=function(){var t=Js(Qs);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},N.svg.chord=function(){var s=Wi,o=Fi,c=to,l=Ds,u=Is;function e(t,e){var n,i,a=h(this,s,t,e),r=h(this,o,t,e);return"M"+a.p0+d(a.r,a.p1,a.a1-a.a0)+(i=r,(n=a).a0==i.a0&&n.a1==i.a1?f(a.r,a.p1,a.r,a.p0):f(a.r,a.p1,r.r,r.p0)+d(r.r,r.p1,r.a1-r.a0)+f(r.r,r.p1,a.r,a.p0))+"Z"}function h(t,e,n,i){var a=e.call(t,n,i),r=c.call(t,a,i),s=l.call(t,a,i)-Tt,o=u.call(t,a,i)-Tt;return{r:r,a0:s,a1:o,p0:[r*Math.cos(s),r*Math.sin(s)],p1:[r*Math.cos(o),r*Math.sin(o)]}}function d(t,e,n){return"A"+t+","+t+" 0 "+ +(St<n)+",1 "+e}function f(t,e,n,i){return"Q 0,0 "+i}return e.radius=function(t){return arguments.length?(c=ge(t),e):c},e.source=function(t){return arguments.length?(s=ge(t),e):s},e.target=function(t){return arguments.length?(o=ge(t),e):o},e.startAngle=function(t){return arguments.length?(l=ge(t),e):l},e.endAngle=function(t){return arguments.length?(u=ge(t),e):u},e},N.svg.diagonal=function(){var s=Wi,o=Fi,c=eo;function e(t,e){var n=s.call(this,t,e),i=o.call(this,t,e),a=(n.y+i.y)/2,r=[n,{x:n.x,y:a},{x:i.x,y:a},i];return"M"+(r=r.map(c))[0]+"C"+r[1]+" "+r[2]+" "+r[3]}return e.source=function(t){return arguments.length?(s=ge(t),e):s},e.target=function(t){return arguments.length?(o=ge(t),e):o},e.projection=function(t){return arguments.length?(c=t,e):c},e},N.svg.diagonal.radial=function(){var t=N.svg.diagonal(),e=eo,n=t.projection;return t.projection=function(t){return arguments.length?n((i=e=t,function(){var t=i.apply(this,arguments),e=t[0],n=t[1]-Tt;return[e*Math.cos(n),e*Math.sin(n)]})):e;var i},t},N.svg.symbol=function(){var n=io,i=no;function e(t,e){return(ro.get(n.call(this,t,e))||ao)(i.call(this,t,e))}return e.type=function(t){return arguments.length?(n=ge(t),e):n},e.size=function(t){return arguments.length?(i=ge(t),e):i},e};var ro=N.map({circle:ao,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*oo)),n=e*oo;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/so),n=e*so/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/so),n=e*so/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});N.svg.symbolTypes=ro.keys();var so=Math.sqrt(3),oo=Math.tan(30*Et);U.transition=function(t){for(var e,n,i=ho||++go,a=yo(t),r=[],s=fo||{time:Date.now(),ease:ir,delay:0,duration:250},o=-1,c=this.length;++o<c;){r.push(e=[]);for(var l=this[o],u=-1,h=l.length;++u<h;)(n=l[u])&&bo(n,u,a,i,s),e.push(n)}return uo(r,a,i)},U.interrupt=function(t){return this.each(null==t?co:lo(yo(t)))};var co=lo(yo());function lo(i){return function(){var t,e,n;(t=this[i])&&(n=t[e=t.active])&&(n.timer.c=null,n.timer.t=NaN,--t.count?delete t[e]:delete this[i],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function uo(t,e,n){return F(t,po),t.namespace=e,t.id=n,t}var ho,fo,po=[],go=0;function vo(t,i,a,r){var s=t.id,o=t.namespace;return lt(t,"function"==typeof a?function(t,e,n){t[o][s].tween.set(i,r(a.call(t,t.__data__,e,n)))}:(a=r(a),function(t){t[o][s].tween.set(i,a)}))}function mo(t){return null==t&&(t=""),function(){this.textContent=t}}function yo(t){return null==t?"__transition__":"__transition_"+t+"__"}function bo(r,s,a,o,t){var c,l,u,h,d,f=r[a]||(r[a]={active:0,count:0}),p=f[o];function n(t){var e=f.active,n=f[e];for(var i in n&&(n.timer.c=null,n.timer.t=NaN,--f.count,delete f[e],n.event&&n.event.interrupt.call(r,r.__data__,n.index)),f)if(+i<o){var a=f[i];a.timer.c=null,a.timer.t=NaN,--f.count,delete f[i]}l.c=g,ke(function(){return l.c&&g(t||1)&&(l.c=null,l.t=NaN),1},0,c),f.active=o,p.event&&p.event.start.call(r,r.__data__,s),d=[],p.tween.forEach(function(t,e){(e=e.call(r,r.__data__,s))&&d.push(e)}),h=p.ease,u=p.duration}function g(t){for(var e=t/u,n=h(e),i=d.length;0<i;)d[--i].call(r,n);if(1<=e)return p.event&&p.event.end.call(r,r.__data__,s),--f.count?delete f[o]:delete r[a],1}p||(c=t.time,l=ke(function(t){var e=p.delay;if(l.t=e+c,e<=t)return n(t-e);l.c=n},0,c),p=f[o]={tween:new y,time:c,timer:l,delay:t.delay,duration:t.duration,ease:t.ease,index:s},t=null,++f.count)}po.call=U.call,po.empty=U.empty,po.node=U.node,po.size=U.size,N.transition=function(t,e){return t&&t.transition?ho?t.transition(e):t:N.selection().transition(t)},(N.transition.prototype=po).select=function(t){var e,n,i,a=this.id,r=this.namespace,s=[];t=Y(t);for(var o=-1,c=this.length;++o<c;){s.push(e=[]);for(var l=this[o],u=-1,h=l.length;++u<h;)(i=l[u])&&(n=t.call(i,i.__data__,u,o))?("__data__"in i&&(n.__data__=i.__data__),bo(n,u,r,a,i[r][a]),e.push(n)):e.push(null)}return uo(s,r,a)},po.selectAll=function(t){var e,n,i,a,r,s=this.id,o=this.namespace,c=[];t=G(t);for(var l=-1,u=this.length;++l<u;)for(var h=this[l],d=-1,f=h.length;++d<f;)if(i=h[d]){r=i[o][s],n=t.call(i,i.__data__,d,l),c.push(e=[]);for(var p=-1,g=n.length;++p<g;)(a=n[p])&&bo(a,p,o,s,r),e.push(a)}return uo(c,o,s)},po.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=ct(t));for(var a=0,r=this.length;a<r;a++){i.push(e=[]);for(var s,o=0,c=(s=this[a]).length;o<c;o++)(n=s[o])&&t.call(n,n.__data__,o,a)&&e.push(n)}return uo(i,this.namespace,this.id)},po.tween=function(e,n){var i=this.id,a=this.namespace;return arguments.length<2?this.node()[a][i].tween.get(e):lt(this,null==n?function(t){t[a][i].tween.remove(e)}:function(t){t[a][i].tween.set(e,n)})},po.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i="transform"==t?pr:Ga,a=N.ns.qualify(t);function r(){this.removeAttribute(a)}function s(){this.removeAttributeNS(a.space,a.local)}return vo(this,"attr."+t,e,a.local?function(n){return null==n?s:(n+="",function(){var e,t=this.getAttributeNS(a.space,a.local);return t!==n&&(e=i(t,n),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}:function(n){return null==n?r:(n+="",function(){var e,t=this.getAttribute(a);return t!==n&&(e=i(t,n),function(t){this.setAttribute(a,e(t))})})})},po.attrTween=function(t,i){var a=N.ns.qualify(t);return this.tween("attr."+t,a.local?function(t,e){var n=i.call(this,t,e,this.getAttributeNS(a.space,a.local));return n&&function(t){this.setAttributeNS(a.space,a.local,n(t))}}:function(t,e){var n=i.call(this,t,e,this.getAttribute(a));return n&&function(t){this.setAttribute(a,n(t))}})},po.style=function(i,t,a){var e=arguments.length;if(e<3){if("string"!=typeof i){for(a in e<2&&(t=""),i)this.style(a,i[a],t);return this}a=""}function r(){this.style.removeProperty(i)}return vo(this,"style."+i,t,function(n){return null==n?r:(n+="",function(){var e,t=j(this).getComputedStyle(this,null).getPropertyValue(i);return t!==n&&(e=Ga(t,n),function(t){this.style.setProperty(i,e(t),a)})})})},po.styleTween=function(i,a,r){return arguments.length<3&&(r=""),this.tween("style."+i,function(t,e){var n=a.call(this,t,e,j(this).getComputedStyle(this,null).getPropertyValue(i));return n&&function(t){this.style.setProperty(i,n(t),r)}})},po.text=function(t){return vo(this,"text",t,mo)},po.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},po.ease=function(e){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof e&&(e=N.ease.apply(N,arguments)),lt(this,function(t){t[i][n].ease=e}))},po.delay=function(i){var a=this.id,r=this.namespace;return arguments.length<1?this.node()[r][a].delay:lt(this,"function"==typeof i?function(t,e,n){t[r][a].delay=+i.call(t,t.__data__,e,n)}:(i=+i,function(t){t[r][a].delay=i}))},po.duration=function(i){var a=this.id,r=this.namespace;return arguments.length<1?this.node()[r][a].duration:lt(this,"function"==typeof i?function(t,e,n){t[r][a].duration=Math.max(1,i.call(t,t.__data__,e,n))}:(i=Math.max(1,i),function(t){t[r][a].duration=i}))},po.each=function(i,n){var a=this.id,r=this.namespace;if(arguments.length<2){var t=fo,e=ho;try{ho=a,lt(this,function(t,e,n){fo=t[r][a],i.call(t,t.__data__,e,n)})}finally{fo=t,ho=e}}else lt(this,function(t){var e=t[r][a];(e.event||(e.event=N.dispatch("start","end","interrupt"))).on(i,n)});return this},po.transition=function(){for(var t,e,n,i=this.id,a=++go,r=this.namespace,s=[],o=0,c=this.length;o<c;o++){s.push(t=[]);for(var l,u=0,h=(l=this[o]).length;u<h;u++)(e=l[u])&&bo(e,u,r,a,{time:(n=e[r][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return uo(s,r,a)},N.svg.axis=function(){var M,T=N.scale.linear(),E=xo,A=6,O=6,P=3,D=[10],I=null;function n(t){t.each(function(){var t,e=N.select(this),n=this.__chart__||T,i=this.__chart__=T.copy(),a=null==I?i.ticks?i.ticks.apply(i,D):i.domain():I,r=null==M?i.tickFormat?i.tickFormat.apply(i,D):z:M,s=e.selectAll(".tick").data(a,i),o=s.enter().insert("g",".domain").attr("class","tick").style("opacity",wt),c=N.transition(s.exit()).style("opacity",wt).remove(),l=N.transition(s.order()).style("opacity",1),u=Math.max(A,0)+P,h=cs(i),d=e.selectAll(".domain").data([0]),f=(d.enter().append("path").attr("class","domain"),N.transition(d));o.append("line"),o.append("text");var p,g,v,m,y=o.select("line"),b=l.select("line"),x=s.select("text").text(r),_=o.select("text"),w=l.select("text"),k="top"===E||"left"===E?-1:1;if("bottom"===E||"top"===E?(t=wo,p="x",v="y",g="x2",m="y2",x.attr("dy",k<0?"0em":".71em").style("text-anchor","middle"),f.attr("d","M"+h[0]+","+k*O+"V0H"+h[1]+"V"+k*O)):(t=ko,p="y",v="x",g="y2",m="x2",x.attr("dy",".32em").style("text-anchor",k<0?"end":"start"),f.attr("d","M"+k*O+","+h[0]+"H0V"+h[1]+"H"+k*O)),y.attr(m,k*A),_.attr(v,k*u),b.attr(g,0).attr(m,k*A),w.attr(p,0).attr(v,k*u),i.rangeBand){var S=i,C=S.rangeBand()/2;n=i=function(t){return S(t)+C}}else n.rangeBand?n=i:c.call(t,i,n);o.call(t,n,i),l.call(t,i,i)})}return n.scale=function(t){return arguments.length?(T=t,n):T},n.orient=function(t){return arguments.length?(E=t in _o?t+"":xo,n):E},n.ticks=function(){return arguments.length?(D=d(arguments),n):D},n.tickValues=function(t){return arguments.length?(I=t,n):I},n.tickFormat=function(t){return arguments.length?(M=t,n):M},n.tickSize=function(t){var e=arguments.length;return e?(A=+t,O=+arguments[e-1],n):A},n.innerTickSize=function(t){return arguments.length?(A=+t,n):A},n.outerTickSize=function(t){return arguments.length?(O=+t,n):O},n.tickPadding=function(t){return arguments.length?(P=+t,n):P},n.tickSubdivide=function(){return arguments.length&&n},n};var xo="bottom",_o={top:1,right:1,bottom:1,left:1};function wo(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate("+(isFinite(e)?e:i(t))+",0)"})}function ko(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate(0,"+(isFinite(e)?e:i(t))+")"})}N.svg.brush=function(){var y,b,x=R(T,"brushstart","brush","brushend"),_=null,w=null,k=[0,0],S=[0,0],C=!0,M=!0,s=Co[0];function T(t){t.each(function(){var t=N.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(s,z);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return So[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",T.empty()?"none":null);var i,a=N.transition(t),r=N.transition(e);_&&(i=cs(_),r.attr("x",i[0]).attr("width",i[1]-i[0]),A(a)),w&&(i=cs(w),r.attr("y",i[0]).attr("height",i[1]-i[0]),O(a)),E(a)})}function E(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+k[+/e$/.test(t)]+","+S[+/^s/.test(t)]+")"})}function A(t){t.select(".extent").attr("x",k[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function O(t){t.select(".extent").attr("y",S[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",S[1]-S[0])}function o(){var h,n,i=this,t=N.select(N.event.target),a=x.of(i,arguments),r=N.select(i),e=t.datum(),s=!/^(n|s)$/.test(e)&&_,o=!/^(e|w)$/.test(e)&&w,d=t.classed("extent"),c=yt(i),f=N.mouse(i),l=N.select(j(i)).on("keydown.brush",function(){32==N.event.keyCode&&(d||(h=null,f[0]-=k[1],f[1]-=S[1],d=2),H())}).on("keyup.brush",function(){32==N.event.keyCode&&2==d&&(f[0]+=k[1],f[1]+=S[1],d=0,H())});if(N.event.changedTouches?l.on("touchmove.brush",g).on("touchend.brush",m):l.on("mousemove.brush",g).on("mouseup.brush",m),r.interrupt().selectAll("*").interrupt(),d)f[0]=k[0]-f[0],f[1]=S[0]-f[1];else if(e){var u=+/w$/.test(e),p=+/^n/.test(e);n=[k[1-u]-f[0],S[1-p]-f[1]],f[0]=k[u],f[1]=S[p]}else N.event.altKey&&(h=f.slice());function g(){var t=N.mouse(i),e=!1;n&&(t[0]+=n[0],t[1]+=n[1]),d||(N.event.altKey?(h||(h=[(k[0]+k[1])/2,(S[0]+S[1])/2]),f[0]=k[+(t[0]<h[0])],f[1]=S[+(t[1]<h[1])]):h=null),s&&v(t,_,0)&&(A(r),e=!0),o&&v(t,w,1)&&(O(r),e=!0),e&&(E(r),a({type:"brush",mode:d?"move":"resize"}))}function v(t,e,n){var i,a,r=cs(e),s=r[0],o=r[1],c=f[n],l=n?S:k,u=l[1]-l[0];if(d&&(s-=c,o-=u+c),i=(n?M:C)?Math.max(s,Math.min(o,t[n])):t[n],d?a=(i+=c)+u:(h&&(c=Math.max(s,Math.min(o,2*h[n]-i))),c<i?(a=i,i=c):a=c),l[0]!=i||l[1]!=a)return n?b=null:y=null,l[0]=i,l[1]=a,!0}function m(){g(),r.style("pointer-events","all").selectAll(".resize").style("display",T.empty()?"none":null),N.select("body").style("cursor",null),l.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),c(),a({type:"brushend"})}r.style("pointer-events","none").selectAll(".resize").style("display",null),N.select("body").style("cursor",t.style("cursor")),a({type:"brushstart"}),g()}return T.event=function(t){t.each(function(){var i=x.of(this,arguments),a={x:k,y:S,i:y,j:b},t=this.__chart__||a;this.__chart__=a,ho?N.select(this).transition().each("start.brush",function(){y=t.i,b=t.j,k=t.x,S=t.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=Ka(k,a.x),n=Ka(S,a.y);return y=b=null,function(t){k=a.x=e(t),S=a.y=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=a.i,b=a.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},T.x=function(t){return arguments.length?(s=Co[!(_=t)<<1|!w],T):_},T.y=function(t){return arguments.length?(s=Co[!_<<1|!(w=t)],T):w},T.clamp=function(t){return arguments.length?(_&&w?(C=!!t[0],M=!!t[1]):_?C=!!t:w&&(M=!!t),T):_&&w?[C,M]:_?C:w?M:null},T.extent=function(t){var e,n,i,a,r;return arguments.length?(_&&(e=t[0],n=t[1],w&&(e=e[0],n=n[0]),y=[e,n],_.invert&&(e=_(e),n=_(n)),n<e&&(r=e,e=n,n=r),e==k[0]&&n==k[1]||(k=[e,n])),w&&(i=t[0],a=t[1],_&&(i=i[1],a=a[1]),b=[i,a],w.invert&&(i=w(i),a=w(a)),a<i&&(r=i,i=a,a=r),i==S[0]&&a==S[1]||(S=[i,a])),T):(_&&(y?(e=y[0],n=y[1]):(e=k[0],n=k[1],_.invert&&(e=_.invert(e),n=_.invert(n)),n<e&&(r=e,e=n,n=r))),w&&(b?(i=b[0],a=b[1]):(i=S[0],a=S[1],w.invert&&(i=w.invert(i),a=w.invert(a)),a<i&&(r=i,i=a,a=r))),_&&w?[[e,i],[n,a]]:_?[e,n]:w&&[i,a])},T.clear=function(){return T.empty()||(k=[0,0],S=[0,0],y=b=null),T},T.empty=function(){return!!_&&k[0]==k[1]||!!w&&S[0]==S[1]},N.rebind(T,x,"on")};var So={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Co=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Mo=De.format=on.timeFormat,To=Mo.utc,Eo=To("%Y-%m-%dT%H:%M:%S.%LZ");function Ao(t){return t.toISOString()}function Oo(e,a,t){function s(t){return e(t)}function o(t,e){var n=(t[1]-t[0])/e,i=N.bisect(Do,n);return i==Do.length?[a.year,vs(t.map(function(t){return t/31536e6}),e)[2]]:i?a[n/Do[i-1]<Do[i]/n?i-1:i]:[jo,vs(t,e)[2]]}return s.invert=function(t){return Po(e.invert(t))},s.domain=function(t){return arguments.length?(e.domain(t),s):e.domain().map(Po)},s.nice=function(e,n){var t=s.domain(),i=os(t),a=null==e?o(i,10):"number"==typeof e&&o(i,e);function r(t){return!isNaN(t)&&!e.range(t,Po(+t+1),n).length}return a&&(e=a[0],n=a[1]),s.domain(us(t,1<n?{floor:function(t){for(;r(t=e.floor(t));)t=Po(t-1);return t},ceil:function(t){for(;r(t=e.ceil(t));)t=Po(+t+1);return t}}:e))},s.ticks=function(t,e){var n=os(s.domain()),i=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],Po(+n[1]+1),e<1?1:e)},s.tickFormat=function(){return t},s.copy=function(){return Oo(e.copy(),a,t)},ps(s,e)}function Po(t){return new Date(t)}Mo.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ao:Eo,Ao.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ao.toString=Eo.toString,De.second=ze(function(t){return new Ie(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),De.seconds=De.second.range,De.seconds.utc=De.second.utc.range,De.minute=ze(function(t){return new Ie(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),De.minutes=De.minute.range,De.minutes.utc=De.minute.utc.range,De.hour=ze(function(t){var e=t.getTimezoneOffset()/60;return new Ie(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),De.hours=De.hour.range,De.hours.utc=De.hour.utc.range,De.month=ze(function(t){return(t=De.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),De.months=De.month.range,De.months.utc=De.month.utc.range;var Do=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Io=[[De.second,1],[De.second,5],[De.second,15],[De.second,30],[De.minute,1],[De.minute,5],[De.minute,15],[De.minute,30],[De.hour,1],[De.hour,3],[De.hour,6],[De.hour,12],[De.day,1],[De.day,2],[De.week,1],[De.month,1],[De.month,3],[De.year,1]],No=Mo.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Un]]),jo={range:function(t,e,n){return N.range(Math.ceil(t/n)*n,+e,n).map(Po)},floor:z,ceil:z};Io.year=De.year,De.scale=function(){return Oo(N.scale.linear(),Io,No)};var zo=Io.map(function(t){return[t[0].utc,t[1]]}),Ho=To.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Un]]);function Lo(t){return JSON.parse(t.responseText)}function Ro(t){var e=b.createRange();return e.selectNode(b.body),e.createContextualFragment(t.responseText)}zo.year=De.year.utc,De.scale.utc=function(){return Oo(N.scale.linear(),zo,Ho)},N.text=ve(function(t){return t.responseText}),N.json=function(t,e){return me(t,"application/json",Lo,e)},N.html=function(t,e){return me(t,"text/html",Ro,e)},N.xml=ve(function(t){return t.responseXML}),this.d3=N,void 0===(Vo="function"==typeof(Bo=N)?Bo.call(Fo,$o,Fo,Wo):Bo)||(Wo.exports=Vo)}()},function(t,$,B){(function(R,W){var F;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var es,ns="Expected a function",is="__lodash_hash_undefined__",as="__lodash_placeholder__",rs=9007199254740991,ss=NaN,os=4294967295,cs=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],ls="[object Arguments]",us="[object Array]",hs="[object Boolean]",ds="[object Date]",fs="[object Error]",ps="[object Function]",gs="[object GeneratorFunction]",vs="[object Map]",ms="[object Number]",ys="[object Object]",bs="[object Promise]",xs="[object RegExp]",_s="[object Set]",ws="[object String]",ks="[object Symbol]",Ss="[object WeakMap]",Cs="[object ArrayBuffer]",Ms="[object DataView]",Ts="[object Float32Array]",Es="[object Float64Array]",As="[object Int8Array]",Os="[object Int16Array]",Ps="[object Int32Array]",Ds="[object Uint8Array]",Is="[object Uint8ClampedArray]",Ns="[object Uint16Array]",js="[object Uint32Array]",zs=/\b__p \+= '';/g,Hs=/\b(__p \+=) '' \+/g,Ls=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rs=/&(?:amp|lt|gt|quot|#39);/g,Ws=/[&<>"']/g,Fs=RegExp(Rs.source),$s=RegExp(Ws.source),Bs=/<%-([\s\S]+?)%>/g,Vs=/<%([\s\S]+?)%>/g,qs=/<%=([\s\S]+?)%>/g,Us=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ys=/^\w*$/,Gs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ks=/[\\^$.*+?()[\]{}|]/g,Xs=RegExp(Ks.source),Zs=/^\s+|\s+$/g,Qs=/^\s+/,Js=/\s+$/,to=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eo=/\{\n\/\* \[wrapped with (.+)\] \*/,no=/,? & /,io=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ao=/\\(\\)?/g,ro=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,so=/\w*$/,oo=/^[-+]0x[0-9a-f]+$/i,co=/^0b[01]+$/i,lo=/^\[object .+?Constructor\]$/,uo=/^0o[0-7]+$/i,ho=/^(?:0|[1-9]\d*)$/,fo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,po=/($^)/,go=/['\n\r\u2028\u2029\\]/g,t="\\ud800-\\udfff",e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",n="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",a="A-Z\\xc0-\\xd6\\xd8-\\xde",r="\\ufe0e\\ufe0f",s="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+t+"]",c="["+s+"]",l="["+e+"]",u="\\d+",h="["+n+"]",d="["+i+"]",f="[^"+t+s+u+n+i+a+"]",p="\\ud83c[\\udffb-\\udfff]",g="[^"+t+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",y="["+a+"]",b="(?:"+d+"|"+f+")",x="(?:"+y+"|"+f+")",_="(?:['’](?:d|ll|m|re|s|t|ve))?",w="(?:['’](?:D|LL|M|RE|S|T|VE))?",k="(?:"+l+"|"+p+")"+"?",S="["+r+"]?",C=S+k+("(?:\\u200d(?:"+[g,v,m].join("|")+")"+S+k+")*"),M="(?:"+[h,v,m].join("|")+")"+C,T="(?:"+[g+l+"?",l,v,m,o].join("|")+")",vo=RegExp("['’]","g"),mo=RegExp(l,"g"),E=RegExp(p+"(?="+p+")|"+T+C,"g"),yo=RegExp([y+"?"+d+"+"+_+"(?="+[c,y,"$"].join("|")+")",x+"+"+w+"(?="+[c,y+b,"$"].join("|")+")",y+"?"+b+"+"+_,y+"+"+w,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",u,M].join("|"),"g"),A=RegExp("[\\u200d"+t+e+r+"]"),bo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_o=-1,wo={};wo[Ts]=wo[Es]=wo[As]=wo[Os]=wo[Ps]=wo[Ds]=wo[Is]=wo[Ns]=wo[js]=!0,wo[ls]=wo[us]=wo[Cs]=wo[hs]=wo[Ms]=wo[ds]=wo[fs]=wo[ps]=wo[vs]=wo[ms]=wo[ys]=wo[xs]=wo[_s]=wo[ws]=wo[Ss]=!1;var ko={};ko[ls]=ko[us]=ko[Cs]=ko[Ms]=ko[hs]=ko[ds]=ko[Ts]=ko[Es]=ko[As]=ko[Os]=ko[Ps]=ko[vs]=ko[ms]=ko[ys]=ko[xs]=ko[_s]=ko[ws]=ko[ks]=ko[Ds]=ko[Is]=ko[Ns]=ko[js]=!0,ko[fs]=ko[ps]=ko[Ss]=!1;var O={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},So=parseFloat,Co=parseInt,P="object"==typeof R&&R&&R.Object===Object&&R,D="object"==typeof self&&self&&self.Object===Object&&self,Mo=P||D||Function("return this")(),I=$&&!$.nodeType&&$,N=I&&"object"==typeof W&&W&&!W.nodeType&&W,To=N&&N.exports===I,j=To&&P.process,z=function(){try{var t=N&&N.require&&N.require("util").types;return t||j&&j.binding&&j.binding("util")}catch(t){}}(),Eo=z&&z.isArrayBuffer,Ao=z&&z.isDate,Oo=z&&z.isMap,Po=z&&z.isRegExp,Do=z&&z.isSet,Io=z&&z.isTypedArray;function No(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function jo(t,e,n,i){for(var a=-1,r=null==t?0:t.length;++a<r;){var s=t[a];e(i,s,n(s),t)}return i}function zo(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function Ho(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Lo(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Ro(t,e){for(var n=-1,i=null==t?0:t.length,a=0,r=[];++n<i;){var s=t[n];e(s,n,t)&&(r[a++]=s)}return r}function Wo(t,e){return!!(null==t?0:t.length)&&-1<Ko(t,e,0)}function Fo(t,e,n){for(var i=-1,a=null==t?0:t.length;++i<a;)if(n(e,t[i]))return!0;return!1}function $o(t,e){for(var n=-1,i=null==t?0:t.length,a=Array(i);++n<i;)a[n]=e(t[n],n,t);return a}function Bo(t,e){for(var n=-1,i=e.length,a=t.length;++n<i;)t[a+n]=e[n];return t}function Vo(t,e,n,i){var a=-1,r=null==t?0:t.length;for(i&&r&&(n=t[++a]);++a<r;)n=e(n,t[a],a,t);return n}function qo(t,e,n,i){var a=null==t?0:t.length;for(i&&a&&(n=t[--a]);a--;)n=e(n,t[a],a,t);return n}function Uo(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var H=Jo("length");function Yo(t,i,e){var a;return e(t,function(t,e,n){if(i(t,e,n))return a=e,!1}),a}function Go(t,e,n,i){for(var a=t.length,r=n+(i?1:-1);i?r--:++r<a;)if(e(t[r],r,t))return r;return-1}function Ko(t,e,n){return e==e?function(t,e,n){var i=n-1,a=t.length;for(;++i<a;)if(t[i]===e)return i;return-1}(t,e,n):Go(t,Zo,n)}function Xo(t,e,n,i){for(var a=n-1,r=t.length;++a<r;)if(i(t[a],e))return a;return-1}function Zo(t){return t!=t}function Qo(t,e){var n=null==t?0:t.length;return n?ec(t,e)/n:ss}function Jo(e){return function(t){return null==t?es:t[e]}}function L(e){return function(t){return null==e?es:e[t]}}function tc(t,i,a,r,e){return e(t,function(t,e,n){a=r?(r=!1,t):i(a,t,e,n)}),a}function ec(t,e){for(var n,i=-1,a=t.length;++i<a;){var r=e(t[i]);r!==es&&(n=n===es?r:n+r)}return n}function nc(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function ic(e){return function(t){return e(t)}}function ac(e,t){return $o(t,function(t){return e[t]})}function rc(t,e){return t.has(e)}function sc(t,e){for(var n=-1,i=t.length;++n<i&&-1<Ko(e,t[n],0););return n}function oc(t,e){for(var n=t.length;n--&&-1<Ko(e,t[n],0););return n}var cc=L({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),lc=L({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function uc(t){return"\\"+O[t]}function hc(t){return A.test(t)}function dc(t){var n=-1,i=Array(t.size);return t.forEach(function(t,e){i[++n]=[e,t]}),i}function fc(e,n){return function(t){return e(n(t))}}function pc(t,e){for(var n=-1,i=t.length,a=0,r=[];++n<i;){var s=t[n];s!==e&&s!==as||(t[n]=as,r[a++]=n)}return r}function gc(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function vc(t){return hc(t)?function(t){var e=E.lastIndex=0;for(;E.test(t);)++e;return e}(t):H(t)}function mc(t){return hc(t)?t.match(E)||[]:t.split("")}var yc=L({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var bc=function t(e){var n,E=(e=null==e?Mo:bc.defaults(Mo.Object(),e,bc.pick(Mo,xo))).Array,i=e.Date,a=e.Error,v=e.Function,r=e.Math,S=e.Object,m=e.RegExp,u=e.String,A=e.TypeError,s=E.prototype,o=v.prototype,h=S.prototype,c=e["__core-js_shared__"],l=o.toString,C=h.hasOwnProperty,d=0,f=(n=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",p=h.toString,g=l.call(S),y=Mo._,b=m("^"+l.call(C).replace(Ks,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=To?e.Buffer:es,_=e.Symbol,w=e.Uint8Array,k=x?x.allocUnsafe:es,M=fc(S.getPrototypeOf,S),T=S.create,O=h.propertyIsEnumerable,P=s.splice,D=_?_.isConcatSpreadable:es,I=_?_.iterator:es,N=_?_.toStringTag:es,j=function(){try{var t=Wn(S,"defineProperty");return t({},"",{}),t}catch(t){}}(),z=e.clearTimeout!==Mo.clearTimeout&&e.clearTimeout,H=i&&i.now!==Mo.Date.now&&i.now,L=e.setTimeout!==Mo.setTimeout&&e.setTimeout,R=r.ceil,W=r.floor,F=S.getOwnPropertySymbols,$=x?x.isBuffer:es,B=e.isFinite,V=s.join,q=fc(S.keys,S),U=r.max,Y=r.min,G=i.now,K=e.parseInt,X=r.random,Z=s.reverse,Q=Wn(e,"DataView"),J=Wn(e,"Map"),tt=Wn(e,"Promise"),et=Wn(e,"Set"),nt=Wn(e,"WeakMap"),it=Wn(S,"create"),at=nt&&new nt,rt={},st=pi(Q),ot=pi(J),ct=pi(tt),lt=pi(et),ut=pi(nt),ht=_?_.prototype:es,dt=ht?ht.valueOf:es,ft=ht?ht.toString:es;function pt(t){if(Pa(t)&&!xa(t)&&!(t instanceof yt)){if(t instanceof mt)return t;if(C.call(t,"__wrapped__"))return gi(t)}return new mt(t)}var gt=function(){function n(){}return function(t){if(!Oa(t))return{};if(T)return T(t);n.prototype=t;var e=new n;return n.prototype=es,e}}();function vt(){}function mt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=es}function yt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=os,this.__views__=[]}function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function _t(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new _t;++e<n;)this.add(t[e])}function kt(t){var e=this.__data__=new xt(t);this.size=e.size}function St(t,e){var n=xa(t),i=!n&&ba(t),a=!n&&!i&&Sa(t),r=!n&&!i&&!a&&Ra(t),s=n||i||a||r,o=s?nc(t.length,u):[],c=o.length;for(var l in t)!e&&!C.call(t,l)||s&&("length"==l||a&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Yn(l,c))||o.push(l);return o}function Ct(t){var e=t.length;return e?t[we(0,e-1)]:es}function Mt(t,e){return li(an(t),jt(e,0,t.length))}function Tt(t){return li(an(t))}function Et(t,e,n){(n===es||va(t[e],n))&&(n!==es||e in t)||It(t,e,n)}function At(t,e,n){var i=t[e];C.call(t,e)&&va(i,n)&&(n!==es||e in t)||It(t,e,n)}function Ot(t,e){for(var n=t.length;n--;)if(va(t[n][0],e))return n;return-1}function Pt(t,i,a,r){return Wt(t,function(t,e,n){i(r,t,a(t),n)}),r}function Dt(t,e){return t&&rn(e,or(e),t)}function It(t,e,n){"__proto__"==e&&j?j(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Nt(t,e){for(var n=-1,i=e.length,a=E(i),r=null==t;++n<i;)a[n]=r?es:nr(t,e[n]);return a}function jt(t,e,n){return t==t&&(n!==es&&(t=t<=n?t:n),e!==es&&(t=e<=t?t:e)),t}function zt(n,i,a,t,e,r){var s,o=1&i,c=2&i,l=4&i;if(a&&(s=e?a(n,t,e,r):a(n)),s!==es)return s;if(!Oa(n))return n;var u,h,d,f,p,g,v,m,y,b=xa(n);if(b){if(m=(v=n).length,y=new v.constructor(m),m&&"string"==typeof v[0]&&C.call(v,"index")&&(y.index=v.index,y.input=v.input),s=y,!o)return an(n,s)}else{var x=Bn(n),_=x==ps||x==gs;if(Sa(n))return Ze(n,o);if(x==ys||x==ls||_&&!e){if(s=c||_?{}:qn(n),!o)return c?(g=d=n,f=(p=s)&&rn(g,cr(g),p),rn(d,$n(d),f)):(h=Dt(s,u=n),rn(u,Fn(u),h))}else{if(!ko[x])return e?n:{};s=function(t,e,n){var i,a,r,s,o,c=t.constructor;switch(e){case Cs:return Qe(t);case hs:case ds:return new c(+t);case Ms:return s=t,o=n?Qe(s.buffer):s.buffer,new s.constructor(o,s.byteOffset,s.byteLength);case Ts:case Es:case As:case Os:case Ps:case Ds:case Is:case Ns:case js:return Je(t,n);case vs:return new c;case ms:case ws:return new c(t);case xs:return(r=new(a=t).constructor(a.source,so.exec(a))).lastIndex=a.lastIndex,r;case _s:return new c;case ks:return i=t,dt?S(dt.call(i)):{}}}(n,x,o)}}r||(r=new kt);var w=r.get(n);if(w)return w;if(r.set(n,s),za(n))return n.forEach(function(t){s.add(zt(t,i,a,t,n,r))}),s;if(Da(n))return n.forEach(function(t,e){s.set(e,zt(t,i,a,e,n,r))}),s;var k=b?es:(l?c?In:Dn:c?cr:or)(n);return zo(k||n,function(t,e){k&&(t=n[e=t]),At(s,e,zt(t,i,a,e,n,r))}),s}function Ht(t,e,n){var i=n.length;if(null==t)return!i;for(t=S(t);i--;){var a=n[i],r=e[a],s=t[a];if(s===es&&!(a in t)||!r(s))return!1}return!0}function Lt(t,e,n){if("function"!=typeof t)throw new A(ns);return ri(function(){t.apply(es,n)},e)}function Rt(t,e,n,i){var a=-1,r=Wo,s=!0,o=t.length,c=[],l=e.length;if(!o)return c;n&&(e=$o(e,ic(n))),i?(r=Fo,s=!1):200<=e.length&&(r=rc,s=!1,e=new wt(e));t:for(;++a<o;){var u=t[a],h=null==n?u:n(u);if(u=i||0!==u?u:0,s&&h==h){for(var d=l;d--;)if(e[d]===h)continue t;c.push(u)}else r(e,h,i)||c.push(u)}return c}pt.templateSettings={escape:Bs,evaluate:Vs,interpolate:qs,variable:"",imports:{_:pt}},(pt.prototype=vt.prototype).constructor=pt,(mt.prototype=gt(vt.prototype)).constructor=mt,(yt.prototype=gt(vt.prototype)).constructor=yt,bt.prototype.clear=function(){this.__data__=it?it(null):{},this.size=0},bt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},bt.prototype.get=function(t){var e=this.__data__;if(it){var n=e[t];return n===is?es:n}return C.call(e,t)?e[t]:es},bt.prototype.has=function(t){var e=this.__data__;return it?e[t]!==es:C.call(e,t)},bt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=it&&e===es?is:e,this},xt.prototype.clear=function(){this.__data__=[],this.size=0},xt.prototype.delete=function(t){var e=this.__data__,n=Ot(e,t);return!(n<0||(n==e.length-1?e.pop():P.call(e,n,1),--this.size,0))},xt.prototype.get=function(t){var e=this.__data__,n=Ot(e,t);return n<0?es:e[n][1]},xt.prototype.has=function(t){return-1<Ot(this.__data__,t)},xt.prototype.set=function(t,e){var n=this.__data__,i=Ot(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},_t.prototype.clear=function(){this.size=0,this.__data__={hash:new bt,map:new(J||xt),string:new bt}},_t.prototype.delete=function(t){var e=Ln(this,t).delete(t);return this.size-=e?1:0,e},_t.prototype.get=function(t){return Ln(this,t).get(t)},_t.prototype.has=function(t){return Ln(this,t).has(t)},_t.prototype.set=function(t,e){var n=Ln(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},wt.prototype.add=wt.prototype.push=function(t){return this.__data__.set(t,is),this},wt.prototype.has=function(t){return this.__data__.has(t)},kt.prototype.clear=function(){this.__data__=new xt,this.size=0},kt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},kt.prototype.get=function(t){return this.__data__.get(t)},kt.prototype.has=function(t){return this.__data__.has(t)},kt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof xt){var i=n.__data__;if(!J||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new _t(i)}return n.set(t,e),this.size=n.size,this};var Wt=cn(Gt),Ft=cn(Kt,!0);function $t(t,i){var a=!0;return Wt(t,function(t,e,n){return a=!!i(t,e,n)}),a}function Bt(t,e,n){for(var i=-1,a=t.length;++i<a;){var r=t[i],s=e(r);if(null!=s&&(o===es?s==s&&!La(s):n(s,o)))var o=s,c=r}return c}function Vt(t,i){var a=[];return Wt(t,function(t,e,n){i(t,e,n)&&a.push(t)}),a}function qt(t,e,n,i,a){var r=-1,s=t.length;for(n||(n=Un),a||(a=[]);++r<s;){var o=t[r];0<e&&n(o)?1<e?qt(o,e-1,n,i,a):Bo(a,o):i||(a[a.length]=o)}return a}var Ut=ln(),Yt=ln(!0);function Gt(t,e){return t&&Ut(t,e,or)}function Kt(t,e){return t&&Yt(t,e,or)}function Xt(e,t){return Ro(t,function(t){return Ta(e[t])})}function Zt(t,e){for(var n=0,i=(e=Ye(e,t)).length;null!=t&&n<i;)t=t[fi(e[n++])];return n&&n==i?t:es}function Qt(t,e,n){var i=e(t);return xa(t)?i:Bo(i,n(t))}function Jt(t){return null==t?t===es?"[object Undefined]":"[object Null]":N&&N in S(t)?function(t){var e=C.call(t,N),n=t[N];try{t[N]=es;var i=!0}catch(t){}var a=p.call(t);return i&&(e?t[N]=n:delete t[N]),a}(t):(e=t,p.call(e));var e}function te(t,e){return e<t}function ee(t,e){return null!=t&&C.call(t,e)}function ne(t,e){return null!=t&&e in S(t)}function ie(t,e,n){for(var i=n?Fo:Wo,a=t[0].length,r=t.length,s=r,o=E(r),c=1/0,l=[];s--;){var u=t[s];s&&e&&(u=$o(u,ic(e))),c=Y(u.length,c),o[s]=!n&&(e||120<=a&&120<=u.length)?new wt(s&&u):es}u=t[0];var h=-1,d=o[0];t:for(;++h<a&&l.length<c;){var f=u[h],p=e?e(f):f;if(f=n||0!==f?f:0,!(d?rc(d,p):i(l,p,n))){for(s=r;--s;){var g=o[s];if(!(g?rc(g,p):i(t[s],p,n)))continue t}d&&d.push(p),l.push(f)}}return l}function ae(t,e,n){var i=null==(t=ni(t,e=Ye(e,t)))?t:t[fi(Mi(e))];return null==i?es:No(i,t,n)}function re(t){return Pa(t)&&Jt(t)==ls}function se(t,e,n,i,a){return t===e||(null==t||null==e||!Pa(t)&&!Pa(e)?t!=t&&e!=e:function(t,e,n,i,a,r){var s=xa(t),o=xa(e),c=s?us:Bn(t),l=o?us:Bn(e),u=(c=c==ls?ys:c)==ys,h=(l=l==ls?ys:l)==ys,d=c==l;if(d&&Sa(t)){if(!Sa(e))return!1;u=!(s=!0)}if(d&&!u)return r||(r=new kt),s||Ra(t)?On(t,e,n,i,a,r):function(t,e,n,i,a,r,s){switch(n){case Ms:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Cs:return!(t.byteLength!=e.byteLength||!r(new w(t),new w(e)));case hs:case ds:case ms:return va(+t,+e);case fs:return t.name==e.name&&t.message==e.message;case xs:case ws:return t==e+"";case vs:var o=dc;case _s:var c=1&i;if(o||(o=gc),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;i|=2,s.set(t,e);var u=On(o(t),o(e),i,a,r,s);return s.delete(t),u;case ks:if(dt)return dt.call(t)==dt.call(e)}return!1}(t,e,c,n,i,a,r);if(!(1&n)){var f=u&&C.call(t,"__wrapped__"),p=h&&C.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,v=p?e.value():e;return r||(r=new kt),a(g,v,n,i,r)}}return!!d&&(r||(r=new kt),function(t,e,n,i,a,r){var s=1&n,o=Dn(t),c=o.length,l=Dn(e).length;if(c!=l&&!s)return!1;for(var u=c;u--;){var h=o[u];if(!(s?h in e:C.call(e,h)))return!1}var d=r.get(t);if(d&&r.get(e))return d==e;var f=!0;r.set(t,e),r.set(e,t);for(var p=s;++u<c;){h=o[u];var g=t[h],v=e[h];if(i)var m=s?i(v,g,h,e,t,r):i(g,v,h,t,e,r);if(!(m===es?g===v||a(g,v,n,i,r):m)){f=!1;break}p||(p="constructor"==h)}if(f&&!p){var y=t.constructor,b=e.constructor;y!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(f=!1)}return r.delete(t),r.delete(e),f}(t,e,n,i,a,r))}(t,e,n,i,se,a))}function oe(t,e,n,i){var a=n.length,r=a,s=!i;if(null==t)return!r;for(t=S(t);a--;){var o=n[a];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++a<r;){var c=(o=n[a])[0],l=t[c],u=o[1];if(s&&o[2]){if(l===es&&!(c in t))return!1}else{var h=new kt;if(i)var d=i(l,u,c,t,e,h);if(!(d===es?se(u,l,3,i,h):d))return!1}}return!0}function ce(t){return!(!Oa(t)||(e=t,f&&f in e))&&(Ta(t)?b:lo).test(pi(t));var e}function le(t){return"function"==typeof t?t:null==t?Ir:"object"==typeof t?xa(t)?ge(t[0],t[1]):pe(t):$r(t)}function ue(t){if(!Qn(t))return q(t);var e=[];for(var n in S(t))C.call(t,n)&&"constructor"!=n&&e.push(n);return e}function he(t){if(!Oa(t))return function(t){var e=[];if(null!=t)for(var n in S(t))e.push(n);return e}(t);var e=Qn(t),n=[];for(var i in t)("constructor"!=i||!e&&C.call(t,i))&&n.push(i);return n}function de(t,e){return t<e}function fe(t,i){var a=-1,r=wa(t)?E(t.length):[];return Wt(t,function(t,e,n){r[++a]=i(t,e,n)}),r}function pe(e){var n=Rn(e);return 1==n.length&&n[0][2]?ti(n[0][0],n[0][1]):function(t){return t===e||oe(t,e,n)}}function ge(n,i){return Kn(n)&&Jn(i)?ti(fi(n),i):function(t){var e=nr(t,n);return e===es&&e===i?ir(t,n):se(i,e,3)}}function ve(i,a,r,s,o){i!==a&&Ut(a,function(t,e){if(Oa(t))o||(o=new kt),function(t,e,n,i,a,r,s){var o=ii(t,n),c=ii(e,n),l=s.get(c);if(l)return Et(t,n,l);var u=r?r(o,c,n+"",t,e,s):es,h=u===es;if(h){var d=xa(c),f=!d&&Sa(c),p=!d&&!f&&Ra(c);u=c,d||f||p?u=xa(o)?o:ka(o)?an(o):f?Ze(c,!(h=!1)):p?Je(c,!(h=!1)):[]:Na(c)||ba(c)?ba(u=o)?u=Ya(o):Oa(o)&&!Ta(o)||(u=qn(c)):h=!1}h&&(s.set(c,u),a(u,c,i,r,s),s.delete(c)),Et(t,n,u)}(i,a,e,r,ve,s,o);else{var n=s?s(ii(i,e),t,e+"",i,a,o):es;n===es&&(n=t),Et(i,e,n)}},cr)}function me(t,e){var n=t.length;if(n)return Yn(e+=e<0?n:0,n)?t[e]:es}function ye(t,i,n){var a=-1;return i=$o(i.length?i:[Ir],ic(Hn())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(fe(t,function(e,t,n){return{criteria:$o(i,function(t){return t(e)}),index:++a,value:e}}),function(t,e){return function(t,e,n){for(var i=-1,a=t.criteria,r=e.criteria,s=a.length,o=n.length;++i<s;){var c=tn(a[i],r[i]);if(c){if(o<=i)return c;var l=n[i];return c*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function be(t,e,n){for(var i=-1,a=e.length,r={};++i<a;){var s=e[i],o=Zt(t,s);n(o,s)&&Te(r,Ye(s,t),o)}return r}function xe(t,e,n,i){var a=i?Xo:Ko,r=-1,s=e.length,o=t;for(t===e&&(e=an(e)),n&&(o=$o(t,ic(n)));++r<s;)for(var c=0,l=e[r],u=n?n(l):l;-1<(c=a(o,u,c,i));)o!==t&&P.call(o,c,1),P.call(t,c,1);return t}function _e(t,e){for(var n=t?e.length:0,i=n-1;n--;){var a=e[n];if(n==i||a!==r){var r=a;Yn(a)?P.call(t,a,1):Re(t,a)}}return t}function we(t,e){return t+W(X()*(e-t+1))}function ke(t,e){var n="";if(!t||e<1||rs<e)return n;for(;e%2&&(n+=t),(e=W(e/2))&&(t+=t),e;);return n}function Se(t,e){return si(ei(t,e,Ir),t+"")}function Ce(t){return Ct(vr(t))}function Me(t,e){var n=vr(t);return li(n,jt(e,0,n.length))}function Te(t,e,n,i){if(!Oa(t))return t;for(var a=-1,r=(e=Ye(e,t)).length,s=r-1,o=t;null!=o&&++a<r;){var c=fi(e[a]),l=n;if(a!=s){var u=o[c];(l=i?i(u,c,o):es)===es&&(l=Oa(u)?u:Yn(e[a+1])?[]:{})}At(o,c,l),o=o[c]}return t}var Ee=at?function(t,e){return at.set(t,e),t}:Ir,Ae=j?function(t,e){return j(t,"toString",{configurable:!0,enumerable:!1,value:Or(e),writable:!0})}:Ir;function Oe(t){return li(vr(t))}function Pe(t,e,n){var i=-1,a=t.length;e<0&&(e=a<-e?0:a+e),(n=a<n?a:n)<0&&(n+=a),a=n<e?0:n-e>>>0,e>>>=0;for(var r=E(a);++i<a;)r[i]=t[i+e];return r}function De(t,i){var a;return Wt(t,function(t,e,n){return!(a=i(t,e,n))}),!!a}function Ie(t,e,n){var i=0,a=null==t?i:t.length;if("number"==typeof e&&e==e&&a<=2147483647){for(;i<a;){var r=i+a>>>1,s=t[r];null!==s&&!La(s)&&(n?s<=e:s<e)?i=r+1:a=r}return a}return Ne(t,e,Ir,n)}function Ne(t,e,n,i){e=n(e);for(var a=0,r=null==t?0:t.length,s=e!=e,o=null===e,c=La(e),l=e===es;a<r;){var u=W((a+r)/2),h=n(t[u]),d=h!==es,f=null===h,p=h==h,g=La(h);if(s)var v=i||p;else v=l?p&&(i||d):o?p&&d&&(i||!f):c?p&&d&&!f&&(i||!g):!f&&!g&&(i?h<=e:h<e);v?a=u+1:r=u}return Y(r,4294967294)}function je(t,e){for(var n=-1,i=t.length,a=0,r=[];++n<i;){var s=t[n],o=e?e(s):s;if(!n||!va(o,c)){var c=o;r[a++]=0===s?0:s}}return r}function ze(t){return"number"==typeof t?t:La(t)?ss:+t}function He(t){if("string"==typeof t)return t;if(xa(t))return $o(t,He)+"";if(La(t))return ft?ft.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Le(t,e,n){var i=-1,a=Wo,r=t.length,s=!0,o=[],c=o;if(n)s=!1,a=Fo;else if(200<=r){var l=e?null:Sn(t);if(l)return gc(l);s=!1,a=rc,c=new wt}else c=e?[]:o;t:for(;++i<r;){var u=t[i],h=e?e(u):u;if(u=n||0!==u?u:0,s&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue t;e&&c.push(h),o.push(u)}else a(c,h,n)||(c!==o&&c.push(h),o.push(u))}return o}function Re(t,e){return null==(t=ni(t,e=Ye(e,t)))||delete t[fi(Mi(e))]}function We(t,e,n,i){return Te(t,e,n(Zt(t,e)),i)}function Fe(t,e,n,i){for(var a=t.length,r=i?a:-1;(i?r--:++r<a)&&e(t[r],r,t););return n?Pe(t,i?0:r,i?r+1:a):Pe(t,i?r+1:0,i?a:r)}function $e(t,e){var n=t;return n instanceof yt&&(n=n.value()),Vo(e,function(t,e){return e.func.apply(e.thisArg,Bo([t],e.args))},n)}function Be(t,e,n){var i=t.length;if(i<2)return i?Le(t[0]):[];for(var a=-1,r=E(i);++a<i;)for(var s=t[a],o=-1;++o<i;)o!=a&&(r[a]=Rt(r[a]||s,t[o],e,n));return Le(qt(r,1),e,n)}function Ve(t,e,n){for(var i=-1,a=t.length,r=e.length,s={};++i<a;){var o=i<r?e[i]:es;n(s,t[i],o)}return s}function qe(t){return ka(t)?t:[]}function Ue(t){return"function"==typeof t?t:Ir}function Ye(t,e){return xa(t)?t:Kn(t,e)?[t]:di(Ga(t))}var Ge=Se;function Ke(t,e,n){var i=t.length;return n=n===es?i:n,!e&&i<=n?t:Pe(t,e,n)}var Xe=z||function(t){return Mo.clearTimeout(t)};function Ze(t,e){if(e)return t.slice();var n=t.length,i=k?k(n):new t.constructor(n);return t.copy(i),i}function Qe(t){var e=new t.constructor(t.byteLength);return new w(e).set(new w(t)),e}function Je(t,e){var n=e?Qe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function tn(t,e){if(t!==e){var n=t!==es,i=null===t,a=t==t,r=La(t),s=e!==es,o=null===e,c=e==e,l=La(e);if(!o&&!l&&!r&&e<t||r&&s&&c&&!o&&!l||i&&s&&c||!n&&c||!a)return 1;if(!i&&!r&&!l&&t<e||l&&n&&a&&!i&&!r||o&&n&&a||!s&&a||!c)return-1}return 0}function en(t,e,n,i){for(var a=-1,r=t.length,s=n.length,o=-1,c=e.length,l=U(r-s,0),u=E(c+l),h=!i;++o<c;)u[o]=e[o];for(;++a<s;)(h||a<r)&&(u[n[a]]=t[a]);for(;l--;)u[o++]=t[a++];return u}function nn(t,e,n,i){for(var a=-1,r=t.length,s=-1,o=n.length,c=-1,l=e.length,u=U(r-o,0),h=E(u+l),d=!i;++a<u;)h[a]=t[a];for(var f=a;++c<l;)h[f+c]=e[c];for(;++s<o;)(d||a<r)&&(h[f+n[s]]=t[a++]);return h}function an(t,e){var n=-1,i=t.length;for(e||(e=E(i));++n<i;)e[n]=t[n];return e}function rn(t,e,n,i){var a=!n;n||(n={});for(var r=-1,s=e.length;++r<s;){var o=e[r],c=i?i(n[o],t[o],o,n,t):es;c===es&&(c=t[o]),a?It(n,o,c):At(n,o,c)}return n}function sn(a,r){return function(t,e){var n=xa(t)?jo:Pt,i=r?r():{};return n(t,a,Hn(e,2),i)}}function on(o){return Se(function(t,e){var n=-1,i=e.length,a=1<i?e[i-1]:es,r=2<i?e[2]:es;for(a=3<o.length&&"function"==typeof a?(i--,a):es,r&&Gn(e[0],e[1],r)&&(a=i<3?es:a,i=1),t=S(t);++n<i;){var s=e[n];s&&o(t,s,n,a)}return t})}function cn(r,s){return function(t,e){if(null==t)return t;if(!wa(t))return r(t,e);for(var n=t.length,i=s?n:-1,a=S(t);(s?i--:++i<n)&&!1!==e(a[i],i,a););return t}}function ln(c){return function(t,e,n){for(var i=-1,a=S(t),r=n(t),s=r.length;s--;){var o=r[c?s:++i];if(!1===e(a[o],o,a))break}return t}}function un(a){return function(t){var e=hc(t=Ga(t))?mc(t):es,n=e?e[0]:t.charAt(0),i=e?Ke(e,1).join(""):t.slice(1);return n[a]()+i}}function hn(e){return function(t){return Vo(Tr(br(t).replace(vo,"")),e,"")}}function dn(i){return function(){var t=arguments;switch(t.length){case 0:return new i;case 1:return new i(t[0]);case 2:return new i(t[0],t[1]);case 3:return new i(t[0],t[1],t[2]);case 4:return new i(t[0],t[1],t[2],t[3]);case 5:return new i(t[0],t[1],t[2],t[3],t[4]);case 6:return new i(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new i(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=gt(i.prototype),n=i.apply(e,t);return Oa(n)?n:e}}function fn(s){return function(t,e,n){var i=S(t);if(!wa(t)){var a=Hn(e,3);t=or(t),e=function(t){return a(i[t],t,i)}}var r=s(t,e,n);return-1<r?i[a?t[r]:r]:es}}function pn(c){return Pn(function(a){var r=a.length,t=r,e=mt.prototype.thru;for(c&&a.reverse();t--;){var n=a[t];if("function"!=typeof n)throw new A(ns);if(e&&!s&&"wrapper"==jn(n))var s=new mt([],!0)}for(t=s?t:r;++t<r;){var i=jn(n=a[t]),o="wrapper"==i?Nn(n):es;s=o&&Xn(o[0])&&424==o[1]&&!o[4].length&&1==o[9]?s[jn(o[0])].apply(s,o[3]):1==n.length&&Xn(n)?s[i]():s.thru(n)}return function(){var t=arguments,e=t[0];if(s&&1==t.length&&xa(e))return s.plant(e).value();for(var n=0,i=r?a[n].apply(this,t):e;++n<r;)i=a[n].call(this,i);return i}})}function gn(l,u,h,d,f,p,g,v,m,y){var b=128&u,x=1&u,_=2&u,w=24&u,k=512&u,S=_?es:dn(l);return function t(){for(var e=arguments.length,n=E(e),i=e;i--;)n[i]=arguments[i];if(w)var a=zn(t),r=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(n,a);if(d&&(n=en(n,d,f,w)),p&&(n=nn(n,p,g,w)),e-=r,w&&e<y){var s=pc(n,a);return wn(l,u,gn,t.placeholder,h,n,s,v,m,y-e)}var o=x?h:this,c=_?o[l]:l;return e=n.length,v?n=function(t,e){for(var n=t.length,i=Y(e.length,n),a=an(t);i--;){var r=e[i];t[i]=Yn(r,n)?a[r]:es}return t}(n,v):k&&1<e&&n.reverse(),b&&m<e&&(n.length=m),this&&this!==Mo&&this instanceof t&&(c=S||dn(c)),c.apply(o,n)}}function vn(s,o){return function(t,e){return n=t,i=s,a=o(e),r={},Gt(n,function(t,e,n){i(r,a(t),e,n)}),r;var n,i,a,r}}function mn(i,a){return function(t,e){var n;if(t===es&&e===es)return a;if(t!==es&&(n=t),e!==es){if(n===es)return e;e="string"==typeof t||"string"==typeof e?(t=He(t),He(e)):(t=ze(t),ze(e)),n=i(t,e)}return n}}function yn(i){return Pn(function(t){return t=$o(t,ic(Hn())),Se(function(e){var n=this;return i(t,function(t){return No(t,n,e)})})})}function bn(t,e){var n=(e=e===es?" ":He(e)).length;if(n<2)return n?ke(e,t):e;var i=ke(e,R(t/vc(e)));return hc(e)?Ke(mc(i),0,t).join(""):i.slice(0,t)}function xn(i){return function(t,e,n){return n&&"number"!=typeof n&&Gn(t,e,n)&&(e=n=es),t=Ba(t),e===es?(e=t,t=0):e=Ba(e),function(t,e,n,i){for(var a=-1,r=U(R((e-t)/(n||1)),0),s=E(r);r--;)s[i?r:++a]=t,t+=n;return s}(t,e,n=n===es?t<e?1:-1:Ba(n),i)}}function _n(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=Ua(t),e=Ua(e)),n(t,e)}}function wn(t,e,n,i,a,r,s,o,c,l){var u=8&e;e|=u?32:64,4&(e&=~(u?64:32))||(e&=-4);var h=[t,e,a,u?r:es,u?s:es,u?es:r,u?es:s,o,c,l],d=n.apply(es,h);return Xn(t)&&ai(d,h),d.placeholder=i,oi(d,t,e)}function kn(t){var i=r[t];return function(t,e){if(t=Ua(t),e=null==e?0:Y(Va(e),292)){var n=(Ga(t)+"e").split("e");return+((n=(Ga(i(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return i(t)}}var Sn=et&&1/gc(new et([,-0]))[1]==1/0?function(t){return new et(t)}:Lr;function Cn(s){return function(t){var e,n,i,a,r=Bn(t);return r==vs?dc(t):r==_s?(e=t,n=-1,i=Array(e.size),e.forEach(function(t){i[++n]=[t,t]}),i):$o(s(a=t),function(t){return[t,a[t]]})}}function Mn(t,e,n,i,a,r,s,o){var c=2&e;if(!c&&"function"!=typeof t)throw new A(ns);var l=i?i.length:0;if(l||(e&=-97,i=a=es),s=s===es?s:U(Va(s),0),o=o===es?o:Va(o),l-=a?a.length:0,64&e){var u=i,h=a;i=a=es}var d,f,p,g,v,m,y,b,x,_,w,k,S,C=c?es:Nn(t),M=[t,e,n,i,a,u,h,r,s,o];if(C&&function(t,e){var n=t[1],i=e[1],a=n|i,r=a<131,s=128==i&&8==n||128==i&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(r||s){1&i&&(t[2]=e[2],a|=1&n?0:4);var o=e[3];if(o){var c=t[3];t[3]=c?en(c,o,e[4]):o,t[4]=c?pc(t[3],as):e[4]}(o=e[5])&&(c=t[5],t[5]=c?nn(c,o,e[6]):o,t[6]=c?pc(t[5],as):e[6]),(o=e[7])&&(t[7]=o),128&i&&(t[8]=null==t[8]?e[8]:Y(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=a}}(M,C),t=M[0],e=M[1],n=M[2],i=M[3],a=M[4],!(o=M[9]=M[9]===es?c?0:t.length:U(M[9]-l,0))&&24&e&&(e&=-25),e&&1!=e)T=8==e||16==e?(y=e,b=o,x=dn(m=t),function t(){for(var e=arguments.length,n=E(e),i=e,a=zn(t);i--;)n[i]=arguments[i];var r=e<3&&n[0]!==a&&n[e-1]!==a?[]:pc(n,a);return(e-=r.length)<b?wn(m,y,gn,t.placeholder,es,n,r,es,es,b-e):No(this&&this!==Mo&&this instanceof t?x:m,this,n)}):32!=e&&33!=e||a.length?gn.apply(es,M):(f=n,p=i,g=1&e,v=dn(d=t),function t(){for(var e=-1,n=arguments.length,i=-1,a=p.length,r=E(a+n),s=this&&this!==Mo&&this instanceof t?v:d;++i<a;)r[i]=p[i];for(;n--;)r[i++]=arguments[++e];return No(s,g?f:this,r)});else var T=(w=n,k=1&e,S=dn(_=t),function t(){return(this&&this!==Mo&&this instanceof t?S:_).apply(k?w:this,arguments)});return oi((C?Ee:ai)(T,M),t,e)}function Tn(t,e,n,i){return t===es||va(t,h[n])&&!C.call(i,n)?e:t}function En(t,e,n,i,a,r){return Oa(t)&&Oa(e)&&(r.set(e,t),ve(t,e,es,En,r),r.delete(e)),t}function An(t){return Na(t)?es:t}function On(t,e,n,i,a,r){var s=1&n,o=t.length,c=e.length;if(o!=c&&!(s&&o<c))return!1;var l=r.get(t);if(l&&r.get(e))return l==e;var u=-1,h=!0,d=2&n?new wt:es;for(r.set(t,e),r.set(e,t);++u<o;){var f=t[u],p=e[u];if(i)var g=s?i(p,f,u,e,t,r):i(f,p,u,t,e,r);if(g!==es){if(g)continue;h=!1;break}if(d){if(!Uo(e,function(t,e){if(!rc(d,e)&&(f===t||a(f,t,n,i,r)))return d.push(e)})){h=!1;break}}else if(f!==p&&!a(f,p,n,i,r)){h=!1;break}}return r.delete(t),r.delete(e),h}function Pn(t){return si(ei(t,es,_i),t+"")}function Dn(t){return Qt(t,or,Fn)}function In(t){return Qt(t,cr,$n)}var Nn=at?function(t){return at.get(t)}:Lr;function jn(t){for(var e=t.name+"",n=rt[e],i=C.call(rt,e)?n.length:0;i--;){var a=n[i],r=a.func;if(null==r||r==t)return a.name}return e}function zn(t){return(C.call(pt,"placeholder")?pt:t).placeholder}function Hn(){var t=pt.iteratee||Nr;return t=t===Nr?le:t,arguments.length?t(arguments[0],arguments[1]):t}function Ln(t,e){var n,i,a=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?a["string"==typeof e?"string":"hash"]:a.map}function Rn(t){for(var e=or(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,Jn(a)]}return e}function Wn(t,e){var n,i,a=(i=e,null==(n=t)?es:n[i]);return ce(a)?a:es}var Fn=F?function(e){return null==e?[]:(e=S(e),Ro(F(e),function(t){return O.call(e,t)}))}:qr,$n=F?function(t){for(var e=[];t;)Bo(e,Fn(t)),t=M(t);return e}:qr,Bn=Jt;function Vn(t,e,n){for(var i=-1,a=(e=Ye(e,t)).length,r=!1;++i<a;){var s=fi(e[i]);if(!(r=null!=t&&n(t,s)))break;t=t[s]}return r||++i!=a?r:!!(a=null==t?0:t.length)&&Aa(a)&&Yn(s,a)&&(xa(t)||ba(t))}function qn(t){return"function"!=typeof t.constructor||Qn(t)?{}:gt(M(t))}function Un(t){return xa(t)||ba(t)||!!(D&&t&&t[D])}function Yn(t,e){var n=typeof t;return!!(e=null==e?rs:e)&&("number"==n||"symbol"!=n&&ho.test(t))&&-1<t&&t%1==0&&t<e}function Gn(t,e,n){if(!Oa(n))return!1;var i=typeof e;return!!("number"==i?wa(n)&&Yn(e,n.length):"string"==i&&e in n)&&va(n[e],t)}function Kn(t,e){if(xa(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!La(t))||Ys.test(t)||!Us.test(t)||null!=e&&t in S(e)}function Xn(t){var e=jn(t),n=pt[e];if("function"!=typeof n||!(e in yt.prototype))return!1;if(t===n)return!0;var i=Nn(n);return!!i&&t===i[0]}(Q&&Bn(new Q(new ArrayBuffer(1)))!=Ms||J&&Bn(new J)!=vs||tt&&Bn(tt.resolve())!=bs||et&&Bn(new et)!=_s||nt&&Bn(new nt)!=Ss)&&(Bn=function(t){var e=Jt(t),n=e==ys?t.constructor:es,i=n?pi(n):"";if(i)switch(i){case st:return Ms;case ot:return vs;case ct:return bs;case lt:return _s;case ut:return Ss}return e});var Zn=c?Ta:Ur;function Qn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||h)}function Jn(t){return t==t&&!Oa(t)}function ti(e,n){return function(t){return null!=t&&t[e]===n&&(n!==es||e in S(t))}}function ei(r,s,o){return s=U(s===es?r.length-1:s,0),function(){for(var t=arguments,e=-1,n=U(t.length-s,0),i=E(n);++e<n;)i[e]=t[s+e];e=-1;for(var a=E(s+1);++e<s;)a[e]=t[e];return a[s]=o(i),No(r,this,a)}}function ni(t,e){return e.length<2?t:Zt(t,Pe(e,0,-1))}function ii(t,e){if("__proto__"!=e)return t[e]}var ai=ci(Ee),ri=L||function(t,e){return Mo.setTimeout(t,e)},si=ci(Ae);function oi(t,e,n){var i,a,r,s=e+"";return si(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(1<n?"& ":"")+e[i],e=e.join(2<n?", ":" "),t.replace(to,"{\n/* [wrapped with "+e+"] */\n")}(s,(r=s.match(eo),i=r?r[1].split(no):[],a=n,zo(cs,function(t){var e="_."+t[0];a&t[1]&&!Wo(i,e)&&i.push(e)}),i.sort())))}function ci(n){var i=0,a=0;return function(){var t=G(),e=16-(t-a);if(a=t,0<e){if(800<=++i)return arguments[0]}else i=0;return n.apply(es,arguments)}}function li(t,e){var n=-1,i=t.length,a=i-1;for(e=e===es?i:e;++n<e;){var r=we(n,a),s=t[r];t[r]=t[n],t[n]=s}return t.length=e,t}var ui,hi,di=(hi=(ui=ua(function(t){var a=[];return 46===t.charCodeAt(0)&&a.push(""),t.replace(Gs,function(t,e,n,i){a.push(n?i.replace(ao,"$1"):e||t)}),a},function(t){return 500===hi.size&&hi.clear(),t})).cache,ui);function fi(t){if("string"==typeof t||La(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function pi(t){if(null!=t){try{return l.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function gi(t){if(t instanceof yt)return t.clone();var e=new mt(t.__wrapped__,t.__chain__);return e.__actions__=an(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var vi=Se(function(t,e){return ka(t)?Rt(t,qt(e,1,ka,!0)):[]}),mi=Se(function(t,e){var n=Mi(e);return ka(n)&&(n=es),ka(t)?Rt(t,qt(e,1,ka,!0),Hn(n,2)):[]}),yi=Se(function(t,e){var n=Mi(e);return ka(n)&&(n=es),ka(t)?Rt(t,qt(e,1,ka,!0),es,n):[]});function bi(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=null==n?0:Va(n);return a<0&&(a=U(i+a,0)),Go(t,Hn(e,3),a)}function xi(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=i-1;return n!==es&&(a=Va(n),a=n<0?U(i+a,0):Y(a,i-1)),Go(t,Hn(e,3),a,!0)}function _i(t){return null!=t&&t.length?qt(t,1):[]}function wi(t){return t&&t.length?t[0]:es}var ki=Se(function(t){var e=$o(t,qe);return e.length&&e[0]===t[0]?ie(e):[]}),Si=Se(function(t){var e=Mi(t),n=$o(t,qe);return e===Mi(n)?e=es:n.pop(),n.length&&n[0]===t[0]?ie(n,Hn(e,2)):[]}),Ci=Se(function(t){var e=Mi(t),n=$o(t,qe);return(e="function"==typeof e?e:es)&&n.pop(),n.length&&n[0]===t[0]?ie(n,es,e):[]});function Mi(t){var e=null==t?0:t.length;return e?t[e-1]:es}var Ti=Se(Ei);function Ei(t,e){return t&&t.length&&e&&e.length?xe(t,e):t}var Ai=Pn(function(t,e){var n=null==t?0:t.length,i=Nt(t,e);return _e(t,$o(e,function(t){return Yn(t,n)?+t:t}).sort(tn)),i});function Oi(t){return null==t?t:Z.call(t)}var Pi=Se(function(t){return Le(qt(t,1,ka,!0))}),Di=Se(function(t){var e=Mi(t);return ka(e)&&(e=es),Le(qt(t,1,ka,!0),Hn(e,2))}),Ii=Se(function(t){var e=Mi(t);return e="function"==typeof e?e:es,Le(qt(t,1,ka,!0),es,e)});function Ni(e){if(!e||!e.length)return[];var n=0;return e=Ro(e,function(t){if(ka(t))return n=U(t.length,n),!0}),nc(n,function(t){return $o(e,Jo(t))})}function ji(t,e){if(!t||!t.length)return[];var n=Ni(t);return null==e?n:$o(n,function(t){return No(e,es,t)})}var zi=Se(function(t,e){return ka(t)?Rt(t,e):[]}),Hi=Se(function(t){return Be(Ro(t,ka))}),Li=Se(function(t){var e=Mi(t);return ka(e)&&(e=es),Be(Ro(t,ka),Hn(e,2))}),Ri=Se(function(t){var e=Mi(t);return e="function"==typeof e?e:es,Be(Ro(t,ka),es,e)}),Wi=Se(Ni);var Fi=Se(function(t){var e=t.length,n=1<e?t[e-1]:es;return ji(t,n="function"==typeof n?(t.pop(),n):es)});function $i(t){var e=pt(t);return e.__chain__=!0,e}function Bi(t,e){return e(t)}var Vi=Pn(function(e){var n=e.length,t=n?e[0]:0,i=this.__wrapped__,a=function(t){return Nt(t,e)};return!(1<n||this.__actions__.length)&&i instanceof yt&&Yn(t)?((i=i.slice(t,+t+(n?1:0))).__actions__.push({func:Bi,args:[a],thisArg:es}),new mt(i,this.__chain__).thru(function(t){return n&&!t.length&&t.push(es),t})):this.thru(a)});var qi=sn(function(t,e,n){C.call(t,n)?++t[n]:It(t,n,1)});var Ui=fn(bi),Yi=fn(xi);function Gi(t,e){return(xa(t)?zo:Wt)(t,Hn(e,3))}function Ki(t,e){return(xa(t)?Ho:Ft)(t,Hn(e,3))}var Xi=sn(function(t,e,n){C.call(t,n)?t[n].push(e):It(t,n,[e])});var Zi=Se(function(t,e,n){var i=-1,a="function"==typeof e,r=wa(t)?E(t.length):[];return Wt(t,function(t){r[++i]=a?No(e,t,n):ae(t,e,n)}),r}),Qi=sn(function(t,e,n){It(t,n,e)});function Ji(t,e){return(xa(t)?$o:fe)(t,Hn(e,3))}var ta=sn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var ea=Se(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&Gn(t,e[0],e[1])?e=[]:2<n&&Gn(e[0],e[1],e[2])&&(e=[e[0]]),ye(t,qt(e,1),[])}),na=H||function(){return Mo.Date.now()};function ia(t,e,n){return e=n?es:e,e=t&&null==e?t.length:e,Mn(t,128,es,es,es,es,e)}function aa(t,e){var n;if("function"!=typeof e)throw new A(ns);return t=Va(t),function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=es),n}}var ra=Se(function(t,e,n){var i=1;if(n.length){var a=pc(n,zn(ra));i|=32}return Mn(t,i,e,n,a)}),sa=Se(function(t,e,n){var i=3;if(n.length){var a=pc(n,zn(sa));i|=32}return Mn(e,i,t,n,a)});function oa(i,a,t){var r,s,o,c,l,u,h=0,d=!1,f=!1,e=!0;if("function"!=typeof i)throw new A(ns);function p(t){var e=r,n=s;return r=s=es,h=t,c=i.apply(n,e)}function g(t){var e=t-u;return u===es||a<=e||e<0||f&&o<=t-h}function v(){var t,e,n=na();if(g(n))return m(n);l=ri(v,(e=a-((t=n)-u),f?Y(e,o-(t-h)):e))}function m(t){return l=es,e&&r?p(t):(r=s=es,c)}function n(){var t,e=na(),n=g(e);if(r=arguments,s=this,u=e,n){if(l===es)return h=t=u,l=ri(v,a),d?p(t):c;if(f)return l=ri(v,a),p(u)}return l===es&&(l=ri(v,a)),c}return a=Ua(a)||0,Oa(t)&&(d=!!t.leading,o=(f="maxWait"in t)?U(Ua(t.maxWait)||0,a):o,e="trailing"in t?!!t.trailing:e),n.cancel=function(){l!==es&&Xe(l),h=0,r=u=s=l=es},n.flush=function(){return l===es?c:m(na())},n}var ca=Se(function(t,e){return Lt(t,1,e)}),la=Se(function(t,e,n){return Lt(t,Ua(e)||0,n)});function ua(a,r){if("function"!=typeof a||null!=r&&"function"!=typeof r)throw new A(ns);var s=function(){var t=arguments,e=r?r.apply(this,t):t[0],n=s.cache;if(n.has(e))return n.get(e);var i=a.apply(this,t);return s.cache=n.set(e,i)||n,i};return s.cache=new(ua.Cache||_t),s}function ha(e){if("function"!=typeof e)throw new A(ns);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}ua.Cache=_t;var da=Ge(function(i,a){var r=(a=1==a.length&&xa(a[0])?$o(a[0],ic(Hn())):$o(qt(a,1),ic(Hn()))).length;return Se(function(t){for(var e=-1,n=Y(t.length,r);++e<n;)t[e]=a[e].call(this,t[e]);return No(i,this,t)})}),fa=Se(function(t,e){var n=pc(e,zn(fa));return Mn(t,32,es,e,n)}),pa=Se(function(t,e){var n=pc(e,zn(pa));return Mn(t,64,es,e,n)}),ga=Pn(function(t,e){return Mn(t,256,es,es,es,e)});function va(t,e){return t===e||t!=t&&e!=e}var ma=_n(te),ya=_n(function(t,e){return e<=t}),ba=re(function(){return arguments}())?re:function(t){return Pa(t)&&C.call(t,"callee")&&!O.call(t,"callee")},xa=E.isArray,_a=Eo?ic(Eo):function(t){return Pa(t)&&Jt(t)==Cs};function wa(t){return null!=t&&Aa(t.length)&&!Ta(t)}function ka(t){return Pa(t)&&wa(t)}var Sa=$||Ur,Ca=Ao?ic(Ao):function(t){return Pa(t)&&Jt(t)==ds};function Ma(t){if(!Pa(t))return!1;var e=Jt(t);return e==fs||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Na(t)}function Ta(t){if(!Oa(t))return!1;var e=Jt(t);return e==ps||e==gs||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ea(t){return"number"==typeof t&&t==Va(t)}function Aa(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=rs}function Oa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Pa(t){return null!=t&&"object"==typeof t}var Da=Oo?ic(Oo):function(t){return Pa(t)&&Bn(t)==vs};function Ia(t){return"number"==typeof t||Pa(t)&&Jt(t)==ms}function Na(t){if(!Pa(t)||Jt(t)!=ys)return!1;var e=M(t);if(null===e)return!0;var n=C.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==g}var ja=Po?ic(Po):function(t){return Pa(t)&&Jt(t)==xs};var za=Do?ic(Do):function(t){return Pa(t)&&Bn(t)==_s};function Ha(t){return"string"==typeof t||!xa(t)&&Pa(t)&&Jt(t)==ws}function La(t){return"symbol"==typeof t||Pa(t)&&Jt(t)==ks}var Ra=Io?ic(Io):function(t){return Pa(t)&&Aa(t.length)&&!!wo[Jt(t)]};var Wa=_n(de),Fa=_n(function(t,e){return t<=e});function $a(t){if(!t)return[];if(wa(t))return Ha(t)?mc(t):an(t);if(I&&t[I])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[I]());var e=Bn(t);return(e==vs?dc:e==_s?gc:vr)(t)}function Ba(t){return t?(t=Ua(t))!==1/0&&t!==-1/0?t==t?t:0:17976931348623157e292*(t<0?-1:1):0===t?t:0}function Va(t){var e=Ba(t),n=e%1;return e==e?n?e-n:e:0}function qa(t){return t?jt(Va(t),0,os):0}function Ua(t){if("number"==typeof t)return t;if(La(t))return ss;if(Oa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Oa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Zs,"");var n=co.test(t);return n||uo.test(t)?Co(t.slice(2),n?2:8):oo.test(t)?ss:+t}function Ya(t){return rn(t,cr(t))}function Ga(t){return null==t?"":He(t)}var Ka=on(function(t,e){if(Qn(e)||wa(e))rn(e,or(e),t);else for(var n in e)C.call(e,n)&&At(t,n,e[n])}),Xa=on(function(t,e){rn(e,cr(e),t)}),Za=on(function(t,e,n,i){rn(e,cr(e),t,i)}),Qa=on(function(t,e,n,i){rn(e,or(e),t,i)}),Ja=Pn(Nt);var tr=Se(function(t,e){t=S(t);var n=-1,i=e.length,a=2<i?e[2]:es;for(a&&Gn(e[0],e[1],a)&&(i=1);++n<i;)for(var r=e[n],s=cr(r),o=-1,c=s.length;++o<c;){var l=s[o],u=t[l];(u===es||va(u,h[l])&&!C.call(t,l))&&(t[l]=r[l])}return t}),er=Se(function(t){return t.push(es,En),No(ur,es,t)});function nr(t,e,n){var i=null==t?es:Zt(t,e);return i===es?n:i}function ir(t,e){return null!=t&&Vn(t,e,ne)}var ar=vn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=p.call(e)),t[e]=n},Or(Ir)),rr=vn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=p.call(e)),C.call(t,e)?t[e].push(n):t[e]=[n]},Hn),sr=Se(ae);function or(t){return wa(t)?St(t):ue(t)}function cr(t){return wa(t)?St(t,!0):he(t)}var lr=on(function(t,e,n){ve(t,e,n)}),ur=on(function(t,e,n,i){ve(t,e,n,i)}),hr=Pn(function(e,t){var n={};if(null==e)return n;var i=!1;t=$o(t,function(t){return t=Ye(t,e),i||(i=1<t.length),t}),rn(e,In(e),n),i&&(n=zt(n,7,An));for(var a=t.length;a--;)Re(n,t[a]);return n});var dr=Pn(function(t,e){return null==t?{}:be(n=t,e,function(t,e){return ir(n,e)});var n});function fr(t,n){if(null==t)return{};var e=$o(In(t),function(t){return[t]});return n=Hn(n),be(t,e,function(t,e){return n(t,e[0])})}var pr=Cn(or),gr=Cn(cr);function vr(t){return null==t?[]:ac(t,or(t))}var mr=hn(function(t,e,n){return e=e.toLowerCase(),t+(n?yr(e):e)});function yr(t){return Mr(Ga(t).toLowerCase())}function br(t){return(t=Ga(t))&&t.replace(fo,cc).replace(mo,"")}var xr=hn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),_r=hn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),wr=un("toLowerCase");var kr=hn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var Sr=hn(function(t,e,n){return t+(n?" ":"")+Mr(e)});var Cr=hn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Mr=un("toUpperCase");function Tr(t,e,n){return t=Ga(t),(e=n?es:e)===es?(i=t,bo.test(i)?t.match(yo)||[]:t.match(io)||[]):t.match(e)||[];var i}var Er=Se(function(t,e){try{return No(t,es,e)}catch(t){return Ma(t)?t:new a(t)}}),Ar=Pn(function(e,t){return zo(t,function(t){t=fi(t),It(e,t,ra(e[t],e))}),e});function Or(t){return function(){return t}}var Pr=pn(),Dr=pn(!0);function Ir(t){return t}function Nr(t){return le("function"==typeof t?t:zt(t,1))}var jr=Se(function(e,n){return function(t){return ae(t,e,n)}}),zr=Se(function(e,n){return function(t){return ae(e,t,n)}});function Hr(i,e,t){var n=or(e),a=Xt(e,n);null!=t||Oa(e)&&(a.length||!n.length)||(t=e,e=i,i=this,a=Xt(e,or(e)));var r=!(Oa(t)&&"chain"in t&&!t.chain),s=Ta(i);return zo(a,function(t){var n=e[t];i[t]=n,s&&(i.prototype[t]=function(){var t=this.__chain__;if(r||t){var e=i(this.__wrapped__);return(e.__actions__=an(this.__actions__)).push({func:n,args:arguments,thisArg:i}),e.__chain__=t,e}return n.apply(i,Bo([this.value()],arguments))})}),i}function Lr(){}var Rr=yn($o),Wr=yn(Lo),Fr=yn(Uo);function $r(t){return Kn(t)?Jo(fi(t)):(e=t,function(t){return Zt(t,e)});var e}var Br=xn(),Vr=xn(!0);function qr(){return[]}function Ur(){return!1}var Yr=mn(function(t,e){return t+e},0),Gr=kn("ceil"),Kr=mn(function(t,e){return t/e},1),Xr=kn("floor");var Zr,Qr=mn(function(t,e){return t*e},1),Jr=kn("round"),ts=mn(function(t,e){return t-e},0);return pt.after=function(t,e){if("function"!=typeof e)throw new A(ns);return t=Va(t),function(){if(--t<1)return e.apply(this,arguments)}},pt.ary=ia,pt.assign=Ka,pt.assignIn=Xa,pt.assignInWith=Za,pt.assignWith=Qa,pt.at=Ja,pt.before=aa,pt.bind=ra,pt.bindAll=Ar,pt.bindKey=sa,pt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return xa(t)?t:[t]},pt.chain=$i,pt.chunk=function(t,e,n){e=(n?Gn(t,e,n):e===es)?1:U(Va(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,r=0,s=E(R(i/e));a<i;)s[r++]=Pe(t,a,a+=e);return s},pt.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,a=[];++e<n;){var r=t[e];r&&(a[i++]=r)}return a},pt.concat=function(){var t=arguments.length;if(!t)return[];for(var e=E(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Bo(xa(n)?an(n):[n],qt(e,1))},pt.cond=function(i){var a=null==i?0:i.length,e=Hn();return i=a?$o(i,function(t){if("function"!=typeof t[1])throw new A(ns);return[e(t[0]),t[1]]}):[],Se(function(t){for(var e=-1;++e<a;){var n=i[e];if(No(n[0],this,t))return No(n[1],this,t)}})},pt.conforms=function(t){return e=zt(t,1),n=or(e),function(t){return Ht(t,e,n)};var e,n},pt.constant=Or,pt.countBy=qi,pt.create=function(t,e){var n=gt(t);return null==e?n:Dt(n,e)},pt.curry=function t(e,n,i){var a=Mn(e,8,es,es,es,es,es,n=i?es:n);return a.placeholder=t.placeholder,a},pt.curryRight=function t(e,n,i){var a=Mn(e,16,es,es,es,es,es,n=i?es:n);return a.placeholder=t.placeholder,a},pt.debounce=oa,pt.defaults=tr,pt.defaultsDeep=er,pt.defer=ca,pt.delay=la,pt.difference=vi,pt.differenceBy=mi,pt.differenceWith=yi,pt.drop=function(t,e,n){var i=null==t?0:t.length;return i?Pe(t,(e=n||e===es?1:Va(e))<0?0:e,i):[]},pt.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Pe(t,0,(e=i-(e=n||e===es?1:Va(e)))<0?0:e):[]},pt.dropRightWhile=function(t,e){return t&&t.length?Fe(t,Hn(e,3),!0,!0):[]},pt.dropWhile=function(t,e){return t&&t.length?Fe(t,Hn(e,3),!0):[]},pt.fill=function(t,e,n,i){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&Gn(t,e,n)&&(n=0,i=a),function(t,e,n,i){var a=t.length;for((n=Va(n))<0&&(n=a<-n?0:a+n),(i=i===es||a<i?a:Va(i))<0&&(i+=a),i=i<n?0:qa(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},pt.filter=function(t,e){return(xa(t)?Ro:Vt)(t,Hn(e,3))},pt.flatMap=function(t,e){return qt(Ji(t,e),1)},pt.flatMapDeep=function(t,e){return qt(Ji(t,e),1/0)},pt.flatMapDepth=function(t,e,n){return n=n===es?1:Va(n),qt(Ji(t,e),n)},pt.flatten=_i,pt.flattenDeep=function(t){return null!=t&&t.length?qt(t,1/0):[]},pt.flattenDepth=function(t,e){return null!=t&&t.length?qt(t,e=e===es?1:Va(e)):[]},pt.flip=function(t){return Mn(t,512)},pt.flow=Pr,pt.flowRight=Dr,pt.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var a=t[e];i[a[0]]=a[1]}return i},pt.functions=function(t){return null==t?[]:Xt(t,or(t))},pt.functionsIn=function(t){return null==t?[]:Xt(t,cr(t))},pt.groupBy=Xi,pt.initial=function(t){return null!=t&&t.length?Pe(t,0,-1):[]},pt.intersection=ki,pt.intersectionBy=Si,pt.intersectionWith=Ci,pt.invert=ar,pt.invertBy=rr,pt.invokeMap=Zi,pt.iteratee=Nr,pt.keyBy=Qi,pt.keys=or,pt.keysIn=cr,pt.map=Ji,pt.mapKeys=function(t,i){var a={};return i=Hn(i,3),Gt(t,function(t,e,n){It(a,i(t,e,n),t)}),a},pt.mapValues=function(t,i){var a={};return i=Hn(i,3),Gt(t,function(t,e,n){It(a,e,i(t,e,n))}),a},pt.matches=function(t){return pe(zt(t,1))},pt.matchesProperty=function(t,e){return ge(t,zt(e,1))},pt.memoize=ua,pt.merge=lr,pt.mergeWith=ur,pt.method=jr,pt.methodOf=zr,pt.mixin=Hr,pt.negate=ha,pt.nthArg=function(e){return e=Va(e),Se(function(t){return me(t,e)})},pt.omit=hr,pt.omitBy=function(t,e){return fr(t,ha(Hn(e)))},pt.once=function(t){return aa(2,t)},pt.orderBy=function(t,e,n,i){return null==t?[]:(xa(e)||(e=null==e?[]:[e]),xa(n=i?es:n)||(n=null==n?[]:[n]),ye(t,e,n))},pt.over=Rr,pt.overArgs=da,pt.overEvery=Wr,pt.overSome=Fr,pt.partial=fa,pt.partialRight=pa,pt.partition=ta,pt.pick=dr,pt.pickBy=fr,pt.property=$r,pt.propertyOf=function(e){return function(t){return null==e?es:Zt(e,t)}},pt.pull=Ti,pt.pullAll=Ei,pt.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?xe(t,e,Hn(n,2)):t},pt.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?xe(t,e,es,n):t},pt.pullAt=Ai,pt.range=Br,pt.rangeRight=Vr,pt.rearg=ga,pt.reject=function(t,e){return(xa(t)?Ro:Vt)(t,ha(Hn(e,3)))},pt.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,a=[],r=t.length;for(e=Hn(e,3);++i<r;){var s=t[i];e(s,i,t)&&(n.push(s),a.push(i))}return _e(t,a),n},pt.rest=function(t,e){if("function"!=typeof t)throw new A(ns);return Se(t,e=e===es?e:Va(e))},pt.reverse=Oi,pt.sampleSize=function(t,e,n){return e=(n?Gn(t,e,n):e===es)?1:Va(e),(xa(t)?Mt:Me)(t,e)},pt.set=function(t,e,n){return null==t?t:Te(t,e,n)},pt.setWith=function(t,e,n,i){return i="function"==typeof i?i:es,null==t?t:Te(t,e,n,i)},pt.shuffle=function(t){return(xa(t)?Tt:Oe)(t)},pt.slice=function(t,e,n){var i=null==t?0:t.length;return i?Pe(t,e,n=n&&"number"!=typeof n&&Gn(t,e,n)?(e=0,i):(e=null==e?0:Va(e),n===es?i:Va(n))):[]},pt.sortBy=ea,pt.sortedUniq=function(t){return t&&t.length?je(t):[]},pt.sortedUniqBy=function(t,e){return t&&t.length?je(t,Hn(e,2)):[]},pt.split=function(t,e,n){return n&&"number"!=typeof n&&Gn(t,e,n)&&(e=n=es),(n=n===es?os:n>>>0)?(t=Ga(t))&&("string"==typeof e||null!=e&&!ja(e))&&!(e=He(e))&&hc(t)?Ke(mc(t),0,n):t.split(e,n):[]},pt.spread=function(i,a){if("function"!=typeof i)throw new A(ns);return a=null==a?0:U(Va(a),0),Se(function(t){var e=t[a],n=Ke(t,0,a);return e&&Bo(n,e),No(i,this,n)})},pt.tail=function(t){var e=null==t?0:t.length;return e?Pe(t,1,e):[]},pt.take=function(t,e,n){return t&&t.length?Pe(t,0,(e=n||e===es?1:Va(e))<0?0:e):[]},pt.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Pe(t,(e=i-(e=n||e===es?1:Va(e)))<0?0:e,i):[]},pt.takeRightWhile=function(t,e){return t&&t.length?Fe(t,Hn(e,3),!1,!0):[]},pt.takeWhile=function(t,e){return t&&t.length?Fe(t,Hn(e,3)):[]},pt.tap=function(t,e){return e(t),t},pt.throttle=function(t,e,n){var i=!0,a=!0;if("function"!=typeof t)throw new A(ns);return Oa(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),oa(t,e,{leading:i,maxWait:e,trailing:a})},pt.thru=Bi,pt.toArray=$a,pt.toPairs=pr,pt.toPairsIn=gr,pt.toPath=function(t){return xa(t)?$o(t,fi):La(t)?[t]:an(di(Ga(t)))},pt.toPlainObject=Ya,pt.transform=function(t,i,a){var e=xa(t),n=e||Sa(t)||Ra(t);if(i=Hn(i,4),null==a){var r=t&&t.constructor;a=n?e?new r:[]:Oa(t)&&Ta(r)?gt(M(t)):{}}return(n?zo:Gt)(t,function(t,e,n){return i(a,t,e,n)}),a},pt.unary=function(t){return ia(t,1)},pt.union=Pi,pt.unionBy=Di,pt.unionWith=Ii,pt.uniq=function(t){return t&&t.length?Le(t):[]},pt.uniqBy=function(t,e){return t&&t.length?Le(t,Hn(e,2)):[]},pt.uniqWith=function(t,e){return e="function"==typeof e?e:es,t&&t.length?Le(t,es,e):[]},pt.unset=function(t,e){return null==t||Re(t,e)},pt.unzip=Ni,pt.unzipWith=ji,pt.update=function(t,e,n){return null==t?t:We(t,e,Ue(n))},pt.updateWith=function(t,e,n,i){return i="function"==typeof i?i:es,null==t?t:We(t,e,Ue(n),i)},pt.values=vr,pt.valuesIn=function(t){return null==t?[]:ac(t,cr(t))},pt.without=zi,pt.words=Tr,pt.wrap=function(t,e){return fa(Ue(e),t)},pt.xor=Hi,pt.xorBy=Li,pt.xorWith=Ri,pt.zip=Wi,pt.zipObject=function(t,e){return Ve(t||[],e||[],At)},pt.zipObjectDeep=function(t,e){return Ve(t||[],e||[],Te)},pt.zipWith=Fi,pt.entries=pr,pt.entriesIn=gr,pt.extend=Xa,pt.extendWith=Za,Hr(pt,pt),pt.add=Yr,pt.attempt=Er,pt.camelCase=mr,pt.capitalize=yr,pt.ceil=Gr,pt.clamp=function(t,e,n){return n===es&&(n=e,e=es),n!==es&&(n=(n=Ua(n))==n?n:0),e!==es&&(e=(e=Ua(e))==e?e:0),jt(Ua(t),e,n)},pt.clone=function(t){return zt(t,4)},pt.cloneDeep=function(t){return zt(t,5)},pt.cloneDeepWith=function(t,e){return zt(t,5,e="function"==typeof e?e:es)},pt.cloneWith=function(t,e){return zt(t,4,e="function"==typeof e?e:es)},pt.conformsTo=function(t,e){return null==e||Ht(t,e,or(e))},pt.deburr=br,pt.defaultTo=function(t,e){return null==t||t!=t?e:t},pt.divide=Kr,pt.endsWith=function(t,e,n){t=Ga(t),e=He(e);var i=t.length,a=n=n===es?i:jt(Va(n),0,i);return 0<=(n-=e.length)&&t.slice(n,a)==e},pt.eq=va,pt.escape=function(t){return(t=Ga(t))&&$s.test(t)?t.replace(Ws,lc):t},pt.escapeRegExp=function(t){return(t=Ga(t))&&Xs.test(t)?t.replace(Ks,"\\$&"):t},pt.every=function(t,e,n){var i=xa(t)?Lo:$t;return n&&Gn(t,e,n)&&(e=es),i(t,Hn(e,3))},pt.find=Ui,pt.findIndex=bi,pt.findKey=function(t,e){return Yo(t,Hn(e,3),Gt)},pt.findLast=Yi,pt.findLastIndex=xi,pt.findLastKey=function(t,e){return Yo(t,Hn(e,3),Kt)},pt.floor=Xr,pt.forEach=Gi,pt.forEachRight=Ki,pt.forIn=function(t,e){return null==t?t:Ut(t,Hn(e,3),cr)},pt.forInRight=function(t,e){return null==t?t:Yt(t,Hn(e,3),cr)},pt.forOwn=function(t,e){return t&&Gt(t,Hn(e,3))},pt.forOwnRight=function(t,e){return t&&Kt(t,Hn(e,3))},pt.get=nr,pt.gt=ma,pt.gte=ya,pt.has=function(t,e){return null!=t&&Vn(t,e,ee)},pt.hasIn=ir,pt.head=wi,pt.identity=Ir,pt.includes=function(t,e,n,i){t=wa(t)?t:vr(t),n=n&&!i?Va(n):0;var a=t.length;return n<0&&(n=U(a+n,0)),Ha(t)?n<=a&&-1<t.indexOf(e,n):!!a&&-1<Ko(t,e,n)},pt.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=null==n?0:Va(n);return a<0&&(a=U(i+a,0)),Ko(t,e,a)},pt.inRange=function(t,e,n){return e=Ba(e),n===es?(n=e,e=0):n=Ba(n),t=Ua(t),(i=t)>=Y(a=e,r=n)&&i<U(a,r);var i,a,r},pt.invoke=sr,pt.isArguments=ba,pt.isArray=xa,pt.isArrayBuffer=_a,pt.isArrayLike=wa,pt.isArrayLikeObject=ka,pt.isBoolean=function(t){return!0===t||!1===t||Pa(t)&&Jt(t)==hs},pt.isBuffer=Sa,pt.isDate=Ca,pt.isElement=function(t){return Pa(t)&&1===t.nodeType&&!Na(t)},pt.isEmpty=function(t){if(null==t)return!0;if(wa(t)&&(xa(t)||"string"==typeof t||"function"==typeof t.splice||Sa(t)||Ra(t)||ba(t)))return!t.length;var e=Bn(t);if(e==vs||e==_s)return!t.size;if(Qn(t))return!ue(t).length;for(var n in t)if(C.call(t,n))return!1;return!0},pt.isEqual=function(t,e){return se(t,e)},pt.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:es)?n(t,e):es;return i===es?se(t,e,es,n):!!i},pt.isError=Ma,pt.isFinite=function(t){return"number"==typeof t&&B(t)},pt.isFunction=Ta,pt.isInteger=Ea,pt.isLength=Aa,pt.isMap=Da,pt.isMatch=function(t,e){return t===e||oe(t,e,Rn(e))},pt.isMatchWith=function(t,e,n){return n="function"==typeof n?n:es,oe(t,e,Rn(e),n)},pt.isNaN=function(t){return Ia(t)&&t!=+t},pt.isNative=function(t){if(Zn(t))throw new a("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ce(t)},pt.isNil=function(t){return null==t},pt.isNull=function(t){return null===t},pt.isNumber=Ia,pt.isObject=Oa,pt.isObjectLike=Pa,pt.isPlainObject=Na,pt.isRegExp=ja,pt.isSafeInteger=function(t){return Ea(t)&&-rs<=t&&t<=rs},pt.isSet=za,pt.isString=Ha,pt.isSymbol=La,pt.isTypedArray=Ra,pt.isUndefined=function(t){return t===es},pt.isWeakMap=function(t){return Pa(t)&&Bn(t)==Ss},pt.isWeakSet=function(t){return Pa(t)&&"[object WeakSet]"==Jt(t)},pt.join=function(t,e){return null==t?"":V.call(t,e)},pt.kebabCase=xr,pt.last=Mi,pt.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var a=i;return n!==es&&(a=(a=Va(n))<0?U(i+a,0):Y(a,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,a):Go(t,Zo,a,!0)},pt.lowerCase=_r,pt.lowerFirst=wr,pt.lt=Wa,pt.lte=Fa,pt.max=function(t){return t&&t.length?Bt(t,Ir,te):es},pt.maxBy=function(t,e){return t&&t.length?Bt(t,Hn(e,2),te):es},pt.mean=function(t){return Qo(t,Ir)},pt.meanBy=function(t,e){return Qo(t,Hn(e,2))},pt.min=function(t){return t&&t.length?Bt(t,Ir,de):es},pt.minBy=function(t,e){return t&&t.length?Bt(t,Hn(e,2),de):es},pt.stubArray=qr,pt.stubFalse=Ur,pt.stubObject=function(){return{}},pt.stubString=function(){return""},pt.stubTrue=function(){return!0},pt.multiply=Qr,pt.nth=function(t,e){return t&&t.length?me(t,Va(e)):es},pt.noConflict=function(){return Mo._===this&&(Mo._=y),this},pt.noop=Lr,pt.now=na,pt.pad=function(t,e,n){t=Ga(t);var i=(e=Va(e))?vc(t):0;if(!e||e<=i)return t;var a=(e-i)/2;return bn(W(a),n)+t+bn(R(a),n)},pt.padEnd=function(t,e,n){t=Ga(t);var i=(e=Va(e))?vc(t):0;return e&&i<e?t+bn(e-i,n):t},pt.padStart=function(t,e,n){t=Ga(t);var i=(e=Va(e))?vc(t):0;return e&&i<e?bn(e-i,n)+t:t},pt.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),K(Ga(t).replace(Qs,""),e||0)},pt.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Gn(t,e,n)&&(e=n=es),n===es&&("boolean"==typeof e?(n=e,e=es):"boolean"==typeof t&&(n=t,t=es)),t===es&&e===es?(t=0,e=1):(t=Ba(t),e===es?(e=t,t=0):e=Ba(e)),e<t){var i=t;t=e,e=i}if(n||t%1||e%1){var a=X();return Y(t+a*(e-t+So("1e-"+((a+"").length-1))),e)}return we(t,e)},pt.reduce=function(t,e,n){var i=xa(t)?Vo:tc,a=arguments.length<3;return i(t,Hn(e,4),n,a,Wt)},pt.reduceRight=function(t,e,n){var i=xa(t)?qo:tc,a=arguments.length<3;return i(t,Hn(e,4),n,a,Ft)},pt.repeat=function(t,e,n){return e=(n?Gn(t,e,n):e===es)?1:Va(e),ke(Ga(t),e)},pt.replace=function(){var t=arguments,e=Ga(t[0]);return t.length<3?e:e.replace(t[1],t[2])},pt.result=function(t,e,n){var i=-1,a=(e=Ye(e,t)).length;for(a||(a=1,t=es);++i<a;){var r=null==t?es:t[fi(e[i])];r===es&&(i=a,r=n),t=Ta(r)?r.call(t):r}return t},pt.round=Jr,pt.runInContext=t,pt.sample=function(t){return(xa(t)?Ct:Ce)(t)},pt.size=function(t){if(null==t)return 0;if(wa(t))return Ha(t)?vc(t):t.length;var e=Bn(t);return e==vs||e==_s?t.size:ue(t).length},pt.snakeCase=kr,pt.some=function(t,e,n){var i=xa(t)?Uo:De;return n&&Gn(t,e,n)&&(e=es),i(t,Hn(e,3))},pt.sortedIndex=function(t,e){return Ie(t,e)},pt.sortedIndexBy=function(t,e,n){return Ne(t,e,Hn(n,2))},pt.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Ie(t,e);if(i<n&&va(t[i],e))return i}return-1},pt.sortedLastIndex=function(t,e){return Ie(t,e,!0)},pt.sortedLastIndexBy=function(t,e,n){return Ne(t,e,Hn(n,2),!0)},pt.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Ie(t,e,!0)-1;if(va(t[n],e))return n}return-1},pt.startCase=Sr,pt.startsWith=function(t,e,n){return t=Ga(t),n=null==n?0:jt(Va(n),0,t.length),e=He(e),t.slice(n,n+e.length)==e},pt.subtract=ts,pt.sum=function(t){return t&&t.length?ec(t,Ir):0},pt.sumBy=function(t,e){return t&&t.length?ec(t,Hn(e,2)):0},pt.template=function(s,t,e){var n=pt.templateSettings;e&&Gn(s,t,e)&&(t=es),s=Ga(s),t=Za({},t,n,Tn);var o,c,i=Za({},t.imports,n.imports,Tn),a=or(i),r=ac(i,a),l=0,u=t.interpolate||po,h="__p += '",d=m((t.escape||po).source+"|"+u.source+"|"+(u===qs?ro:po).source+"|"+(t.evaluate||po).source+"|$","g"),f="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++_o+"]")+"\n";s.replace(d,function(t,e,n,i,a,r){return n||(n=i),h+=s.slice(l,r).replace(go,uc),e&&(o=!0,h+="' +\n__e("+e+") +\n'"),a&&(c=!0,h+="';\n"+a+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=r+t.length,t}),h+="';\n";var p=t.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(c?h.replace(zs,""):h).replace(Hs,"$1").replace(Ls,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Er(function(){return v(a,f+"return "+h).apply(es,r)});if(g.source=h,Ma(g))throw g;return g},pt.times=function(t,e){if((t=Va(t))<1||rs<t)return[];var n=os,i=Y(t,os);e=Hn(e),t-=os;for(var a=nc(i,e);++n<t;)e(n);return a},pt.toFinite=Ba,pt.toInteger=Va,pt.toLength=qa,pt.toLower=function(t){return Ga(t).toLowerCase()},pt.toNumber=Ua,pt.toSafeInteger=function(t){return t?jt(Va(t),-rs,rs):0===t?t:0},pt.toString=Ga,pt.toUpper=function(t){return Ga(t).toUpperCase()},pt.trim=function(t,e,n){if((t=Ga(t))&&(n||e===es))return t.replace(Zs,"");if(!t||!(e=He(e)))return t;var i=mc(t),a=mc(e);return Ke(i,sc(i,a),oc(i,a)+1).join("")},pt.trimEnd=function(t,e,n){if((t=Ga(t))&&(n||e===es))return t.replace(Js,"");if(!t||!(e=He(e)))return t;var i=mc(t);return Ke(i,0,oc(i,mc(e))+1).join("")},pt.trimStart=function(t,e,n){if((t=Ga(t))&&(n||e===es))return t.replace(Qs,"");if(!t||!(e=He(e)))return t;var i=mc(t);return Ke(i,sc(i,mc(e))).join("")},pt.truncate=function(t,e){var n=30,i="...";if(Oa(e)){var a="separator"in e?e.separator:a;n="length"in e?Va(e.length):n,i="omission"in e?He(e.omission):i}var r=(t=Ga(t)).length;if(hc(t)){var s=mc(t);r=s.length}if(r<=n)return t;var o=n-vc(i);if(o<1)return i;var c=s?Ke(s,0,o).join(""):t.slice(0,o);if(a===es)return c+i;if(s&&(o+=c.length-o),ja(a)){if(t.slice(o).search(a)){var l,u=c;for(a.global||(a=m(a.source,Ga(so.exec(a))+"g")),a.lastIndex=0;l=a.exec(u);)var h=l.index;c=c.slice(0,h===es?o:h)}}else if(t.indexOf(He(a),o)!=o){var d=c.lastIndexOf(a);-1<d&&(c=c.slice(0,d))}return c+i},pt.unescape=function(t){return(t=Ga(t))&&Fs.test(t)?t.replace(Rs,yc):t},pt.uniqueId=function(t){var e=++d;return Ga(t)+e},pt.upperCase=Cr,pt.upperFirst=Mr,pt.each=Gi,pt.eachRight=Ki,pt.first=wi,Hr(pt,(Zr={},Gt(pt,function(t,e){C.call(pt.prototype,e)||(Zr[e]=t)}),Zr),{chain:!1}),pt.VERSION="4.17.11",zo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){pt[t].placeholder=pt}),zo(["drop","take"],function(n,i){yt.prototype[n]=function(t){t=t===es?1:U(Va(t),0);var e=this.__filtered__&&!i?new yt(this):this.clone();return e.__filtered__?e.__takeCount__=Y(t,e.__takeCount__):e.__views__.push({size:Y(t,os),type:n+(e.__dir__<0?"Right":"")}),e},yt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),zo(["filter","map","takeWhile"],function(t,e){var n=e+1,i=1==n||3==n;yt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Hn(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),zo(["head","last"],function(t,e){var n="take"+(e?"Right":"");yt.prototype[t]=function(){return this[n](1).value()[0]}}),zo(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");yt.prototype[t]=function(){return this.__filtered__?new yt(this):this[n](1)}}),yt.prototype.compact=function(){return this.filter(Ir)},yt.prototype.find=function(t){return this.filter(t).head()},yt.prototype.findLast=function(t){return this.reverse().find(t)},yt.prototype.invokeMap=Se(function(e,n){return"function"==typeof e?new yt(this):this.map(function(t){return ae(t,e,n)})}),yt.prototype.reject=function(t){return this.filter(ha(Hn(t)))},yt.prototype.slice=function(t,e){t=Va(t);var n=this;return n.__filtered__&&(0<t||e<0)?new yt(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==es&&(n=(e=Va(e))<0?n.dropRight(-e):n.take(e-t)),n)},yt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},yt.prototype.toArray=function(){return this.take(os)},Gt(yt.prototype,function(h,t){var d=/^(?:filter|find|map|reject)|While$/.test(t),f=/^(?:head|last)$/.test(t),p=pt[f?"take"+("last"==t?"Right":""):t],g=f||/^find/.test(t);p&&(pt.prototype[t]=function(){var t=this.__wrapped__,n=f?[1]:arguments,e=t instanceof yt,i=n[0],a=e||xa(t),r=function(t){var e=p.apply(pt,Bo([t],n));return f&&s?e[0]:e};a&&d&&"function"==typeof i&&1!=i.length&&(e=a=!1);var s=this.__chain__,o=!!this.__actions__.length,c=g&&!s,l=e&&!o;if(g||!a)return c&&l?h.apply(this,n):(u=this.thru(r),c?f?u.value()[0]:u.value():u);t=l?t:new yt(this);var u=h.apply(t,n);return u.__actions__.push({func:Bi,args:[r],thisArg:es}),new mt(u,s)})}),zo(["pop","push","shift","sort","splice","unshift"],function(t){var n=s[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",a=/^(?:pop|shift)$/.test(t);pt.prototype[t]=function(){var e=arguments;if(!a||this.__chain__)return this[i](function(t){return n.apply(xa(t)?t:[],e)});var t=this.value();return n.apply(xa(t)?t:[],e)}}),Gt(yt.prototype,function(t,e){var n=pt[e];if(n){var i=n.name+"";(rt[i]||(rt[i]=[])).push({name:e,func:n})}}),rt[gn(es,2).name]=[{name:"wrapper",func:es}],yt.prototype.clone=function(){var t=new yt(this.__wrapped__);return t.__actions__=an(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=an(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=an(this.__views__),t},yt.prototype.reverse=function(){if(this.__filtered__){var t=new yt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},yt.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=xa(t),i=e<0,a=n?t.length:0,r=function(t,e,n){for(var i=-1,a=n.length;++i<a;){var r=n[i],s=r.size;switch(r.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=Y(e,t+s);break;case"takeRight":t=U(t,e-s)}}return{start:t,end:e}}(0,a,this.__views__),s=r.start,o=r.end,c=o-s,l=i?o:s-1,u=this.__iteratees__,h=u.length,d=0,f=Y(c,this.__takeCount__);if(!n||!i&&a==c&&f==c)return $e(t,this.__actions__);var p=[];t:for(;c--&&d<f;){for(var g=-1,v=t[l+=e];++g<h;){var m=u[g],y=m.iteratee,b=m.type,x=y(v);if(2==b)v=x;else if(!x){if(1==b)continue t;break t}}p[d++]=v}return p},pt.prototype.at=Vi,pt.prototype.chain=function(){return $i(this)},pt.prototype.commit=function(){return new mt(this.value(),this.__chain__)},pt.prototype.next=function(){this.__values__===es&&(this.__values__=$a(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?es:this.__values__[this.__index__++]}},pt.prototype.plant=function(t){for(var e,n=this;n instanceof vt;){var i=gi(n);i.__index__=0,i.__values__=es,e?a.__wrapped__=i:e=i;var a=i;n=n.__wrapped__}return a.__wrapped__=t,e},pt.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof yt){var e=t;return this.__actions__.length&&(e=new yt(this)),(e=e.reverse()).__actions__.push({func:Bi,args:[Oi],thisArg:es}),new mt(e,this.__chain__)}return this.thru(Oi)},pt.prototype.toJSON=pt.prototype.valueOf=pt.prototype.value=function(){return $e(this.__wrapped__,this.__actions__)},pt.prototype.first=pt.prototype.head,I&&(pt.prototype[I]=function(){return this}),pt}();Mo._=bc,(F=function(){return bc}.call($,B,$,W))===es||(W.exports=F)}).call(this)}).call(this,B(116),B(117)(t))},function(t,e,n){for(var i=n(4),a=n(39),r=n(29),s=n(20),o=n(28),c=n(38),l=n(12),u=l("iterator"),h=l("toStringTag"),d=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=a(f),g=0;g<p.length;g++){var v,m=p[g],y=f[m],b=s[m],x=b&&b.prototype;if(x&&(x[u]||o(x,u,d),x[h]||o(x,h,m),c[m]=d,y))for(v in i)x[v]||r(x,v,i[v],!0)}},function(t,e,n){"use strict";var i=n(47),a=n(106),r=n(38),s=n(32);t.exports=n(67)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,a(1)):a(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},function(t,e,n){n(76)("asyncIterator")},function(t,e,n){"use strict";var i=n(20),s=n(27),a=n(23),r=n(16),o=n(29),c=n(103).KEY,l=n(21),u=n(56),h=n(58),d=n(37),f=n(12),p=n(77),g=n(76),v=n(104),m=n(79),y=n(26),b=n(24),x=n(32),_=n(42),w=n(36),k=n(54),S=n(105),C=n(46),M=n(22),T=n(39),E=C.f,A=M.f,O=S.f,P=i.Symbol,D=i.JSON,I=D&&D.stringify,N="prototype",j=f("_hidden"),z=f("toPrimitive"),H={}.propertyIsEnumerable,L=u("symbol-registry"),R=u("symbols"),W=u("op-symbols"),F=Object[N],$="function"==typeof P,B=i.QObject,V=!B||!B[N]||!B[N].findChild,q=a&&l(function(){return 7!=k(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=E(F,e);i&&delete F[e],A(t,e,n),i&&t!==F&&A(F,e,i)}:A,U=function(t){var e=R[t]=k(P[N]);return e._k=t,e},Y=$&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},G=function(t,e,n){return t===F&&G(W,e,n),y(t),e=_(e,!0),y(n),s(R,e)?(n.enumerable?(s(t,j)&&t[j][e]&&(t[j][e]=!1),n=k(n,{enumerable:w(0,!1)})):(s(t,j)||A(t,j,w(1,{})),t[j][e]=!0),q(t,e,n)):A(t,e,n)},K=function(t,e){y(t);for(var n,i=v(e=x(e)),a=0,r=i.length;a<r;)G(t,n=i[a++],e[n]);return t},X=function(t){var e=H.call(this,t=_(t,!0));return!(this===F&&s(R,t)&&!s(W,t))&&(!(e||!s(this,t)||!s(R,t)||s(this,j)&&this[j][t])||e)},Z=function(t,e){if(t=x(t),e=_(e,!0),t!==F||!s(R,e)||s(W,e)){var n=E(t,e);return!n||!s(R,e)||s(t,j)&&t[j][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=O(x(t)),i=[],a=0;n.length>a;)s(R,e=n[a++])||e==j||e==c||i.push(e);return i},J=function(t){for(var e,n=t===F,i=O(n?W:x(t)),a=[],r=0;i.length>r;)!s(R,e=i[r++])||n&&!s(F,e)||a.push(R[e]);return a};$||(o((P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=d(0<arguments.length?arguments[0]:void 0),n=function(t){this===F&&n.call(W,t),s(this,j)&&s(this[j],e)&&(this[j][e]=!1),q(this,e,w(1,t))};return a&&V&&q(F,e,{configurable:!0,set:n}),U(e)})[N],"toString",function(){return this._k}),C.f=Z,M.f=G,n(45).f=S.f=Q,n(60).f=X,n(78).f=J,a&&!n(41)&&o(F,"propertyIsEnumerable",X,!0),p.f=function(t){return U(f(t))}),r(r.G+r.W+r.F*!$,{Symbol:P});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)f(tt[et++]);for(var nt=T(f.store),it=0;nt.length>it;)g(nt[it++]);r(r.S+r.F*!$,"Symbol",{for:function(t){return s(L,t+="")?L[t]:L[t]=P(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in L)if(L[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),r(r.S+r.F*!$,"Object",{create:function(t,e){return void 0===e?k(t):K(k(t),e)},defineProperty:G,defineProperties:K,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:J}),D&&r(r.S+r.F*(!$||l(function(){var t=P();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],a=1;arguments.length>a;)i.push(arguments[a++]);if(n=e=i[1],(b(e)||void 0!==t)&&!Y(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Y(e))return e}),i[1]=e,I.apply(D,i)}}),P[N][z]||n(28)(P[N],z,P[N].valueOf),h(P,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e,n){"use strict";var i=n(16),a=n(73)(!0);i(i.P,"Array",{includes:function(t){return a(this,t,1<arguments.length?arguments[1]:void 0)}}),n(47)("includes")},function(t,e,n){n(61)("replace",2,function(a,r,s){return[function(t,e){"use strict";var n=a(this),i=null==t?void 0:t[r];return void 0!==i?i.call(t,n,e):s.call(String(n),t,e)},s]})},function(t,e,n){"use strict";var i=n(16),a=n(113);i(i.P+i.F*n(114)("includes"),"String",{includes:function(t){return!!~a(this,t,"includes").indexOf(t,1<arguments.length?arguments[1]:void 0)}})},function(t,e,n){var i,a;void 0===(a="function"==typeof(i={schemeGroups:{sequential:["BuGn","BuPu","GnBu","OrRd","PuBu","PuBuGn","PuRd","RdPu","YlGn","YlGnBu","YlOrBr","YlOrRd"],singlehue:["Blues","Greens","Greys","Oranges","Purples","Reds"],diverging:["BrBG","PiYG","PRGn","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral"],qualitative:["Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3"]},YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}})?i.call(e,n,e,t):i)||(t.exports=a)},function(t,e,n){"use strict";n(102);var i=n(26),a=n(59),r=n(23),s="toString",o=/./[s],c=function(t){n(29)(RegExp.prototype,s,t,!0)};n(21)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?c(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?a.call(t):void 0)}):o.name!=s&&c(function(){return o.call(this)})},function(t,e,n){var i=n(56)("wks"),a=n(37),r=n(20).Symbol,s="function"==typeof r;(t.exports=function(t){return i[t]||(i[t]=s&&r[t]||(s?r:a)("Symbol."+t))}).store=i},function(t,e,n){"use strict";var i=n(16),a=n(70),r=n(33),s=n(21),o=[].sort,c=[1,2,3];i(i.P+i.F*(s(function(){c.sort(void 0)})||!s(function(){c.sort(null)})||!n(115)(o)),"Array",{sort:function(t){return void 0===t?o.call(r(this)):o.call(r(this),a(t))}})},function(t,e,n){"use strict";var i=n(92)(!0);n(67)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var d=n(43),i=n(16),f=n(33),p=n(96),g=n(97),v=n(44),m=n(98),y=n(99);i(i.S+i.F*!n(101)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,a,r=f(t),s="function"==typeof this?this:Array,o=arguments.length,c=1<o?arguments[1]:void 0,l=void 0!==c,u=0,h=y(r);if(l&&(c=d(c,2<o?arguments[2]:void 0,2)),null==h||s==Array&&g(h))for(n=new s(e=v(r.length));u<e;u++)m(n,u,l?c(r[u],u):r[u]);else for(a=h.call(r),n=new s;!(i=a.next()).done;u++)m(n,u,l?p(a,c,[i.value,u],!0):i.value);return n.length=u,n}})},function(t,e,n){var g=n(20),v=n(31),m=n(28),y=n(29),b=n(43),x="prototype",_=function(t,e,n){var i,a,r,s,o=t&_.F,c=t&_.G,l=t&_.S,u=t&_.P,h=t&_.B,d=c?g:l?g[e]||(g[e]={}):(g[e]||{})[x],f=c?v:v[e]||(v[e]={}),p=f[x]||(f[x]={});for(i in c&&(n=e),n)r=((a=!o&&d&&void 0!==d[i])?d:n)[i],s=h&&a?b(r,g):u&&"function"==typeof r?b(Function.call,r):r,d&&y(d,i,r,t&_.U),f[i]!=r&&m(f,i,s),u&&p[i]!=r&&(p[i]=r)};g.core=v,_.F=1,_.G=2,_.S=4,_.P=8,_.B=16,_.W=32,_.U=64,_.R=128,t.exports=_},function(t,e,n){var i=n(33),a=n(39);n(110)("keys",function(){return function(t){return a(i(t))}})},function(t,e,n){var i=n(22).f,a=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in a||n(23)&&i(a,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var i=n(20),a=n(27),r=n(40),s=n(81),u=n(42),o=n(21),c=n(45).f,l=n(46).f,h=n(22).f,d=n(111).trim,f="Number",p=i[f],g=p,v=p.prototype,m=r(n(54)(v))==f,y="trim"in String.prototype,b=function(t){var e=u(t,!1);if("string"==typeof e&&2<e.length){var n,i,a,r=(e=y?e.trim():d(e,3)).charCodeAt(0);if(43===r||45===r){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+e}for(var s,o=e.slice(2),c=0,l=o.length;c<l;c++)if((s=o.charCodeAt(c))<48||a<s)return NaN;return parseInt(o,i)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(m?o(function(){v.valueOf.call(n)}):r(n)!=f)?s(new g(b(e)),n,p):b(e)};for(var x,_=n(23)?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;_.length>w;w++)a(g,x=_[w])&&!a(p,x)&&h(p,x,l(g,x));(p.prototype=v).constructor=p,n(29)(i,f,p)}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var i=n(26),a=n(68),r=n(42),s=Object.defineProperty;e.f=n(23)?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),a)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(21)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(16);i(i.P,"Array",{fill:n(132)}),n(47)("fill")},function(t,e,n){var i=n(24);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(22),a=n(36);t.exports=n(23)?function(t,e,n){return i.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(20),s=n(28),o=n(27),c=n(37)("src"),i="toString",a=Function[i],l=(""+a).split(i);n(31).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,i){var a="function"==typeof n;a&&(o(n,"name")||s(n,"name",e)),t[e]!==n&&(a&&(o(n,c)||s(n,c,t[e]?""+t[e]:l.join(String(e)))),t===r?t[e]=n:i?t[e]?t[e]=n:s(t,e,n):(delete t[e],s(t,e,n)))})(Function.prototype,i,function(){return"function"==typeof this&&this[c]||a.call(this)})},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(72),a=n(30);t.exports=function(t){return i(a(t))}},function(t,e,n){var i=n(30);t.exports=function(t){return Object(i(t))}},function(t,e,n){n(61)("split",2,function(a,r,s){"use strict";var f=n(62),p=s,g=[].push,t="split",v="length";if("c"=="abbc"[t](/(b)*/)[1]||4!="test"[t](/(?:)/,-1)[v]||2!="ab"[t](/(?:ab)*/)[v]||4!="."[t](/(.?)(.?)/)[v]||1<"."[t](/()()/)[v]||""[t](/.?/)[v]){var m=void 0===/()??/.exec("")[1];s=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!f(t))return p.call(n,t,e);var i,a,r,s,o,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,h=void 0===e?4294967295:e>>>0,d=new RegExp(t.source,l+"g");for(m||(i=new RegExp("^"+d.source+"$(?!\\s)",l));(a=d.exec(n))&&!(u<(r=a.index+a[0][v])&&(c.push(n.slice(u,a.index)),!m&&1<a[v]&&a[0].replace(i,function(){for(o=1;o<arguments[v]-2;o++)void 0===arguments[o]&&(a[o]=void 0)}),1<a[v]&&a.index<n[v]&&g.apply(c,a.slice(1)),s=a[0][v],u=r,c[v]>=h));)d.lastIndex===a.index&&d.lastIndex++;return u===n[v]?!s&&d.test("")||c.push(""):c.push(n.slice(u)),c[v]>h?c.slice(0,h):c}}else"0"[t](void 0,0)[v]&&(s=function(t,e){return void 0===t&&0===e?[]:p.call(this,t,e)});return[function(t,e){var n=a(this),i=null==t?void 0:t[r];return void 0!==i?i.call(t,n,e):s.call(String(n),t,e)},s]})},function(t,e,n){var i=n(16);i(i.S,"Object",{setPrototypeOf:n(82).set})},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports={}},function(t,e,n){var i=n(71),a=n(57);t.exports=Object.keys||function(t){return i(t,a)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=!1},function(t,e,n){var a=n(24);t.exports=function(t,e){if(!a(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!a(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!a(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!a(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(70);t.exports=function(i,a,t){if(r(i),void 0===a)return i;switch(t){case 1:return function(t){return i.call(a,t)};case 2:return function(t,e){return i.call(a,t,e)};case 3:return function(t,e,n){return i.call(a,t,e,n)}}return function(){return i.apply(a,arguments)}}},function(t,e,n){var i=n(53),a=Math.min;t.exports=function(t){return 0<t?a(i(t),9007199254740991):0}},function(t,e,n){var i=n(71),a=n(57).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,a)}},function(t,e,n){var i=n(60),a=n(36),r=n(32),s=n(42),o=n(27),c=n(68),l=Object.getOwnPropertyDescriptor;e.f=n(23)?l:function(t,e){if(t=r(t),e=s(e,!0),c)try{return l(t,e)}catch(t){}if(o(t,e))return a(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(12)("unscopables"),a=Array.prototype;null==a[i]&&n(28)(a,i,{}),t.exports=function(t){a[i][t]=!0}},function(t,e,n){n(61)("match",1,function(i,a,t){return[function(t){"use strict";var e=i(this),n=null==t?void 0:t[a];return void 0!==n?n.call(t,e):new RegExp(t)[a](String(e))},t]})},function(t,e,n){var i=n(16),a=n(20).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&a(t)}})},function(t,e,n){var i=n(16);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){"use strict";n(142)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(t){return"function"==typeof t}function l(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,n,i,a,r,s;if(this._events||(this._events={}),"error"===t&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var o=new Error('Uncaught, unspecified "error" event. ('+e+")");throw o.context=e,o}if(u(n=this._events[t]))return!1;if(c(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(l(n))for(a=Array.prototype.slice.call(arguments,1),i=(s=n.slice()).length,r=0;r<i;r++)s[r].apply(this,a);return!0},i.prototype.on=i.prototype.addListener=function(t,e){var n;if(!c(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,c(e.listener)?e.listener:e),this._events[t]?l(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,l(this._events[t])&&!this._events[t].warned&&(n=u(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.once=function(t,e){if(!c(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var n,i,a,r;if(!c(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,i=-1,n===e||c(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(l(n)){for(r=a;0<r--;)if(n[r]===e||n[r].listener&&n[r].listener===e){i=r;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(c(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?c(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(c(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?i:n)(t)}},function(t,e,i){var a=i(26),r=i(94),s=i(57),o=i(55)("IE_PROTO"),c=function(){},l="prototype",u=function(){var t,e=i(69)("iframe"),n=s.length;for(e.style.display="none",i(95).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u[l][s[n]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(c[l]=a(t),n=new c,c[l]=null,n[o]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(56)("keys"),a=n(37);t.exports=function(t){return i[t]||(i[t]=a(t))}},function(t,e,n){var i=n(31),a=n(20),r="__core-js_shared__",s=a[r]||(a[r]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(41)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(22).f,a=n(27),r=n(12)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,r)&&i(t,r,{configurable:!0,value:e})}},function(t,e,n){"use strict";var i=n(26);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var o=n(28),c=n(29),l=n(21),u=n(30),h=n(12);t.exports=function(e,t,n){var i=h(e),a=n(u,i,""[e]),r=a[0],s=a[1];l(function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})&&(c(String.prototype,e,r),o(RegExp.prototype,i,2==t?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)}))}},function(t,e,n){var i=n(24),a=n(40),r=n(12)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},function(t,e,n){var i,a=a||function(o){"use strict";if(!(void 0===o||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=o.document,c=function(){return o.URL||o.webkitURL||o},l=t.createElementNS("http://www.w3.org/1999/xhtml","a"),u="download"in l,h=/constructor/i.test(o.HTMLElement)||o.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(t){(o.setImmediate||o.setTimeout)(function(){throw t},0)},p=function(t){setTimeout(function(){"string"==typeof t?c().revokeObjectURL(t):t.remove()},4e4)},g=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},i=function(t,n,e){e||(t=g(t));var i,a=this,r="application/octet-stream"===t.type,s=function(){!function(t,e,n){for(var i=(e=[].concat(e)).length;i--;){var a=t["on"+e[i]];if("function"==typeof a)try{a.call(t,n||t)}catch(t){f(t)}}}(a,"writestart progress write writeend".split(" "))};if(a.readyState=a.INIT,u)return i=c().createObjectURL(t),void setTimeout(function(){var t,e;l.href=i,l.download=n,t=l,e=new MouseEvent("click"),t.dispatchEvent(e),s(),p(i),a.readyState=a.DONE});!function(){if((d||r&&h)&&o.FileReader){var e=new FileReader;return e.onloadend=function(){var t=d?e.result:e.result.replace(/^data:[^;]*;/,"data:attachment/file;");o.open(t,"_blank")||(o.location.href=t),t=void 0,a.readyState=a.DONE,s()},e.readAsDataURL(t),a.readyState=a.INIT}i||(i=c().createObjectURL(t)),r?o.location.href=i:o.open(i,"_blank")||(o.location.href=i);a.readyState=a.DONE,s(),p(i)}()},e=i.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=g(t)),navigator.msSaveOrOpenBlob(t,e)}:(e.abort=function(){},e.readyState=e.INIT=0,e.WRITING=1,e.DONE=2,e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null,function(t,e,n){return new i(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */t.exports?t.exports.saveAs=a:null!==n(118)&&null!==n(119)&&(void 0===(i=function(){return a}.call(e,n,e,t))||(t.exports=i))},function(t,e){var i=void 0!==i?i:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),a=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),r=i&&i.prototype.append&&i.prototype.getBlob;function s(t){return t.map(function(t){if(t.buffer instanceof ArrayBuffer){var e=t.buffer;if(t.byteLength!==e.byteLength){var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(e,t.byteOffset,t.byteLength)),e=n.buffer}return e}return t})}function o(t,e){e=e||{};var n=new i;return s(t).forEach(function(t){n.append(t)}),e.type?n.getBlob(e.type):n.getBlob()}function c(t,e){return new Blob(s(t),e||{})}"undefined"!=typeof Blob&&(o.prototype=Blob.prototype,c.prototype=Blob.prototype),t.exports=n?a?Blob:c:r?o:void 0},function(t,e,n){"use strict";var b=n(83).forEach,o=n(120),c=n(121),l=n(122),u=n(123),h=n(124),d=n(84),x=n(125),_=n(127),w=n(128),k=n(129);function S(t){return Array.isArray(t)||void 0!==t.length}function C(t){if(Array.isArray(t))return t;var e=[];return b(t,function(t){e.push(t)}),e}function M(t){return t&&1===t.nodeType}function T(t,e,n){var i=t[e];return null==i&&void 0!==n?n:i}t.exports=function(e){var n;if((e=e||{}).idHandler)n={get:function(t){return e.idHandler.get(t,!0)},set:e.idHandler.set};else{var t=l(),i=u({idGenerator:t,stateHandler:_});n=i}var f=e.reporter;f||(f=h(!1===f));var a=T(e,"batchProcessor",x({reporter:f})),p={};p.callOnAdd=!!T(e,"callOnAdd",!0),p.debug=!!T(e,"debug",!1);var g,v=c(n),m=o({stateHandler:_}),r=T(e,"strategy","object"),s={reporter:f,batchProcessor:a,stateHandler:_,idHandler:n};if("scroll"===r&&(d.isLegacyOpera()?(f.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),r="object"):d.isIE(9)&&(f.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),r="object")),"scroll"===r)g=k(s);else{if("object"!==r)throw new Error("Invalid strategy name: "+r);g=w(s)}var y={};return{listenTo:function(t,r,s){function o(e){var t=v.get(e);b(t,function(t){t(e)})}function c(t,e,n){v.add(e,n),t&&n(e)}if(s||(s=r,r=t,t={}),!r)throw new Error("At least one element required.");if(!s)throw new Error("Listener required.");if(M(r))r=[r];else{if(!S(r))return f.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");r=C(r)}var l=0,u=T(t,"callOnAdd",p.callOnAdd),h=T(t,"onReady",function(){}),d=T(t,"debug",p.debug);b(r,function(t){_.getState(t)||(_.initState(t),n.set(t));var a=n.get(t);if(d&&f.log("Attaching listener to element",a,t),!m.isDetectable(t))return d&&f.log(a,"Not detectable."),m.isBusy(t)?(d&&f.log(a,"System busy making it detectable"),c(u,t,s),y[a]=y[a]||[],void y[a].push(function(){++l===r.length&&h()})):(d&&f.log(a,"Making detectable..."),m.markBusy(t,!0),g.makeDetectable({debug:d},t,function(t){if(d&&f.log(a,"onElementDetectable"),_.getState(t)){m.markAsDetectable(t),m.markBusy(t,!1),g.addListener(t,o),c(u,t,s);var e=_.getState(t);if(e&&e.startSize){var n=t.offsetWidth,i=t.offsetHeight;e.startSize.width===n&&e.startSize.height===i||o(t)}y[a]&&b(y[a],function(t){t()})}else d&&f.log(a,"Element uninstalled before being detectable.");delete y[a],++l===r.length&&h()}));d&&f.log(a,"Already detecable, adding listener."),c(u,t,s),l++}),l===r.length&&h()},removeListener:v.removeListener,removeAllListeners:v.removeAllListeners,uninstall:function(t){if(!t)return f.error("At least one element is required.");if(M(t))t=[t];else{if(!S(t))return f.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=C(t)}b(t,function(t){v.removeAllListeners(t),g.uninstall(t),_.cleanState(t)})}}}},function(t,e,n){!function(t,d){"use strict";function c(t,e){var r=[],s=[];return t.length&&function t(e,n){if(1===e.length)r.push(e[0]),s.push(e[0]);else{for(var i=Array(e.length-1),a=0;a<i.length;a++)0===a&&r.push(e[0]),a===i.length-1&&s.push(e[a+1]),i[a]=[(1-n)*e[a][0]+n*e[a+1][0],(1-n)*e[a][1]+n*e[a+1][1]];t(i,n)}}(t,e),{left:r,right:s.reverse()}}function a(t){var e={};return 4===t.length&&(e.x2=t[2][0],e.y2=t[2][1]),3<=t.length&&(e.x1=t[1][0],e.y1=t[1][1]),e.x=t[t.length-1][0],e.y=t[t.length-1][1],4===t.length?e.type="C":3===t.length?e.type="Q":e.type="L",e}function u(t,e,n){var i=[[t.x,t.y]];return null!=e.x1&&i.push([e.x1,e.y1]),null!=e.x2&&i.push([e.x2,e.y2]),i.push([e.x,e.y]),function(t,e){for(var n=[],i=t,a=1/(e=e||2),r=0;r<e-1;r++){var s=a/(1-a*r),o=c(i,s);n.push(o.left),i=o.right}return n.push(i),n}(i,n).map(a)}var h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},r={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"]};function f(t,e){for(var n=Array(t),i=0;i<t;i++)n[i]=e;return n}function p(t){var e=(t=t.trim().replace(/ /g,","))[0],i=t.substring(1).split(",");return r[e.toUpperCase()].reduce(function(t,e,n){return t[e]=+i[n],t},{type:e})}function g(e){var t=e.type,n=r[t.toUpperCase()];return""+t+n.map(function(t){return e[t]}).join(",")}function v(i,a){var r,s={x1:"x",y1:"y",x2:"x",y2:"y"},o=["xAxisRotation","largeArcFlag","sweepFlag"];return i.type!==a.type&&"M"!==a.type.toUpperCase()&&(r={},Object.keys(a).forEach(function(t){var e=a[t],n=i[t];void 0===n&&(o.includes(t)?n=e:(void 0===n&&s[t]&&(n=i[s[t]]),void 0===n&&(n=0))),r[t]=n}),r.type=a.type,i=r),i}function m(l,t,r){var e=l.length-1,n=t.length-1,s=e/n,i=f(n).reduce(function(t,e,n){var i=Math.floor(s*n);if(r&&i<l.length-1&&r(l[i],l[i+1])){var a=s*n%1<.5;t[i]&&(a?0<i?i-=1:i<l.length-1&&(i+=1):i<l.length-1?i+=1:0<i&&(i-=1))}return t[i]=(t[i]||0)+1,t},[]),a=i.reduce(function(t,e,n){if(n!==l.length-1)return t.concat((i=l[n],a=l[n+1],r=e,o=[],"L"===a.type||"Q"===a.type||"C"===a.type?o=o.concat(u(i,a,r)):("M"===(s=h({},i)).type&&(s.type="L"),(o=o.concat(f(r-1).map(function(){return s}))).push(a)),o));var i,a,r,s,o,c=f(e,h({},l[l.length-1]));return"M"===c[0].type&&c.forEach(function(t){t.type="L"}),t.concat(c)},[]);return a.unshift(l[0]),a}function y(t){return null==t?"":t.trim().replace(/[Z]/gi,"").replace(/\s+/," ").replace(/([MLCSTQAHV])\s*/gi,"$1")}t.interpolatePath=function(t,e,n){var i=y(t),a=y(e),r=""===i?[]:i.split(/(?=[MLCSTQAHV])/gi),s=""===a?[]:a.split(/(?=[MLCSTQAHV])/gi);if(!r.length&&!s.length)return function(){return""};r.length?s.length||s.push(r[0]):r.push(s[0]);var o=r.map(p),c=s.map(p);0!==Math.abs(s.length-r.length)&&(c.length>o.length?o=m(o,c,n):c.length<o.length&&(c=m(c,o,n)));var l=(o=o.map(function(t,e){return v(t,c[e])})).map(g).join(""),u=c.map(g).join("");null!=t&&"Z"!==t[t.length-1]||null!=e&&"Z"!==e[e.length-1]||(l+="Z",u+="Z");var h=d.interpolateString(l,u);return function(t){return 1===t?null==e?"":e:h(t)}},Object.defineProperty(t,"__esModule",{value:!0})}(e,n(160))},function(t,e,n){"use strict";var b=n(41),x=n(16),_=n(29),w=n(28),k=n(38),S=n(93),C=n(58),M=n(75),T=n(12)("iterator"),E=!([].keys&&"next"in[].keys()),A="values",O=function(){return this};t.exports=function(t,e,n,i,a,r,s){S(n,e,i);var o,c,l,u=function(t){if(!E&&t in p)return p[t];switch(t){case"keys":case A:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",d=a==A,f=!1,p=t.prototype,g=p[T]||p["@@iterator"]||a&&p[a],v=g||u(a),m=a?d?u("entries"):v:void 0,y="Array"==e&&p.entries||g;if(y&&(l=M(y.call(new t)))!==Object.prototype&&l.next&&(C(l,h,!0),b||"function"==typeof l[T]||w(l,T,O)),d&&g&&g.name!==A&&(f=!0,v=function(){return g.call(this)}),b&&!s||!E&&!f&&p[T]||w(p,T,v),k[e]=v,k[h]=O,a)if(o={values:d?v:u(A),keys:r?v:u("keys"),entries:m},s)for(c in o)c in p||_(p,c,o[c]);else x(x.P+x.F*(E||f),e,o);return o}},function(t,e,n){t.exports=!n(23)&&!n(21)(function(){return 7!=Object.defineProperty(n(69)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(24),a=n(20).document,r=i(a)&&i(a.createElement);t.exports=function(t){return r?a.createElement(t):{}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var s=n(27),o=n(32),c=n(73)(!1),l=n(55)("IE_PROTO");t.exports=function(t,e){var n,i=o(t),a=0,r=[];for(n in i)n!=l&&s(i,n)&&r.push(n);for(;e.length>a;)s(i,n=e[a++])&&(~c(r,n)||r.push(n));return r}},function(t,e,n){var i=n(40);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){var c=n(32),l=n(44),u=n(74);t.exports=function(o){return function(t,e,n){var i,a=c(t),r=l(a.length),s=u(n,r);if(o&&e!=e){for(;s<r;)if((i=a[s++])!=i)return!0}else for(;s<r;s++)if((o||s in a)&&a[s]===e)return o||s||0;return!o&&-1}}},function(t,e,n){var i=n(53),a=Math.max,r=Math.min;t.exports=function(t,e){return(t=i(t))<0?a(t+e,0):r(t,e)}},function(t,e,n){var i=n(27),a=n(33),r=n(55)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),i(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var i=n(20),a=n(31),r=n(41),s=n(77),o=n(22).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=r?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:s.f(t)})}},function(t,e,n){e.f=n(12)},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(40);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){"use strict";var i=n(16),a=n(107)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),i(i.P+i.F*r,"Array",{find:function(t){return a(this,t,1<arguments.length?arguments[1]:void 0)}}),n(47)("find")},function(t,e,n){var r=n(24),s=n(82).set;t.exports=function(t,e,n){var i,a=e.constructor;return a!==n&&"function"==typeof a&&(i=a.prototype)!==n.prototype&&r(i)&&s&&s(t,i),t}},function(t,e,a){var n=a(24),i=a(26),r=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,i){try{(i=a(43)(Function.call,a(46).f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return r(t,e),n?t.__proto__=e:i(t,e),t}}({},!1):void 0),check:r}},function(t,e,n){"use strict";(t.exports={}).forEach=function(t,e){for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}}},function(t,e,n){"use strict";var i=t.exports={};i.isIE=function(t){return(-1!==(e=navigator.userAgent.toLowerCase()).indexOf("msie")||-1!==e.indexOf("trident")||-1!==e.indexOf(" edge/"))&&(!t||t===function(){for(var t=3,e=document.createElement("div"),n=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",n[0];);return 4<t?t:void 0}());var e},i.isLegacyOpera=function(){return!!window.opera}},function(t,e,n){var i,a;!function(i){"use strict";i.fn.emulateTransitionEnd=function(t){var e=!1,n=this;i(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||i(n).trigger(i.support.transition.end)},t),this},i(function(){i.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),i.support.transition&&(i.event.special.bsTransitionEnd={bindType:i.support.transition.end,delegateType:i.support.transition.end,handle:function(t){if(i(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(g){"use strict";var v=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};v.VERSION="3.3.7",v.TRANSITION_DURATION=150,v.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},v.prototype.init=function(t,e,n){if(this.enabled=!0,this.type=t,this.$element=g(e),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&g(g.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),a=i.length;a--;){var r=i[a];if("click"==r)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",o="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},v.prototype.getDefaults=function(){return v.DEFAULTS},v.prototype.getOptions=function(t){return(t=g.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},v.prototype.getDelegateOptions=function(){var n={},i=this.getDefaults();return this._options&&g.each(this._options,function(t,e){i[t]!=e&&(n[t]=e)}),n},v.prototype.enter=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),t instanceof g.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState)e.hoverState="in";else{if(clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},v.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},v.prototype.leave=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),t instanceof g.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue()){if(clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)}},v.prototype.show=function(){var t=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var n=this,i=this.tip(),a=this.getUID(this.type);this.setContent(),i.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&i.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,o=s.test(r);o&&(r=r.replace(s,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),l=i[0].offsetWidth,u=i[0].offsetHeight;if(o){var h=r,d=this.getPosition(this.$viewport);r="bottom"==r&&c.bottom+u>d.bottom?"top":"top"==r&&c.top-u<d.top?"bottom":"right"==r&&c.right+l>d.width?"left":"left"==r&&c.left-l<d.left?"right":r,i.removeClass(h).addClass(r)}var f=this.getCalculatedOffset(r,c,l,u);this.applyPlacement(f,r);var p=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};g.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",p).emulateTransitionEnd(v.TRANSITION_DURATION):p()}},v.prototype.applyPlacement=function(t,e){var n=this.tip(),i=n[0].offsetWidth,a=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),t.top+=r,t.left+=s,g.offset.setOffset(n[0],g.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),n.addClass("in");var o=n[0].offsetWidth,c=n[0].offsetHeight;"top"==e&&c!=a&&(t.top=t.top+a-c);var l=this.getViewportAdjustedDelta(e,t,o,c);l.left?t.left+=l.left:t.top+=l.top;var u=/top|bottom/.test(e),h=u?2*l.left-i+o:2*l.top-a+c,d=u?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(h,n[0][d],u)},v.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},v.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},v.prototype.hide=function(t){var e=this,n=g(this.$tip),i=g.Event("hide.bs."+this.type);function a(){"in"!=e.hoverState&&n.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(i),!i.isDefaultPrevented())return n.removeClass("in"),g.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",a).emulateTransitionEnd(v.TRANSITION_DURATION):a(),this.hoverState=null,this},v.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},v.prototype.hasContent=function(){return this.getTitle()},v.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],n="BODY"==e.tagName,i=e.getBoundingClientRect();null==i.width&&(i=g.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var a=window.SVGElement&&e instanceof window.SVGElement,r=n?{top:0,left:0}:a?null:t.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=n?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},i,s,o,r)},v.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},v.prototype.getViewportAdjustedDelta=function(t,e,n,i){var a={top:0,left:0};if(!this.$viewport)return a;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var o=e.top-r-s.scroll,c=e.top+r-s.scroll+i;o<s.top?a.top=s.top-o:c>s.top+s.height&&(a.top=s.top+s.height-c)}else{var l=e.left-r,u=e.left+r+n;l<s.left?a.left=s.left-l:u>s.right&&(a.left=s.left+s.width-u)}return a},v.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},v.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},v.prototype.tip=function(){if(!this.$tip&&(this.$tip=g(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},v.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},v.prototype.enable=function(){this.enabled=!0},v.prototype.disable=function(){this.enabled=!1},v.prototype.toggleEnabled=function(){this.enabled=!this.enabled},v.prototype.toggle=function(t){var e=this;t&&((e=g(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},v.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null})};var t=g.fn.tooltip;g.fn.tooltip=function(i){return this.each(function(){var t=g(this),e=t.data("bs.tooltip"),n="object"==typeof i&&i;!e&&/destroy|hide/.test(i)||(e||t.data("bs.tooltip",e=new v(this,n)),"string"==typeof i&&e[i]())})},g.fn.tooltip.Constructor=v,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=t,this}}(jQuery),function(a){"use strict";var r=function(t,e){this.init("popover",t,e)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");r.VERSION="3.3.7",r.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((r.prototype=a.extend({},a.fn.tooltip.Constructor.prototype)).constructor=r).prototype.getDefaults=function(){return r.DEFAULTS},r.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},r.prototype.hasContent=function(){return this.getTitle()||this.getContent()},r.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},r.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var t=a.fn.popover;a.fn.popover=function(i){return this.each(function(){var t=a(this),e=t.data("bs.popover"),n="object"==typeof i&&i;!e&&/destroy|hide/.test(i)||(e||t.data("bs.popover",e=new r(this,n)),"string"==typeof i&&e[i]())})},a.fn.popover.Constructor=r,a.fn.popover.noConflict=function(){return a.fn.popover=t,this}}(jQuery);var r;r=window,i=[n(0)],void 0===(a=function(t){return r.Tour=(h=t,d=window.document,function(){function t(t){var e,n,i;this._showPopoverAndOverlay=(e=this._showPopoverAndOverlay,n=this,function(){return e.apply(n,arguments)});try{i=window.localStorage}catch(t){i=!1}this._options=h.extend({name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:i,debug:!1,backdrop:!1,backdropContainer:"body",backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; Prev</button> <button class="btn btn-sm btn-default" data-role="next">Next &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">Pause</button> </div> <button class="btn btn-sm btn-default" data-role="end">End tour</button> </div> </div>',afterSetState:function(t,e){},afterGetState:function(t,e){},afterRemoveState:function(t){},onStart:function(t){},onEnd:function(t){},onShow:function(t){},onShown:function(t){},onHide:function(t){},onHidden:function(t){},onNext:function(t){},onPrev:function(t){},onPause:function(t,e){},onResume:function(t,e){},onRedirectError:function(t){}},t),this._force=!1,this._inited=!1,this._current=null,this.backdrops=[]}return t.prototype.addSteps=function(t){var e,n,i;for(e=0,n=t.length;e<n;e++)i=t[e],this.addStep(i);return this},t.prototype.addStep=function(t){return this._options.steps.push(t),this},t.prototype.getStep=function(t){if(null!=this._options.steps[t])return h.extend({id:"step-"+t,path:"",host:"",placement:"right",title:"",content:"<p></p>",next:t===this._options.steps.length-1?-1:t+1,prev:t-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropContainer:this._options.backdropContainer,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,reflexElement:this._options.steps[t].element,backdropElement:this._options.steps[t].element,orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume,onRedirectError:this._options.onRedirectError},this._options.steps[t])},t.prototype.init=function(t){return this._force=t,this.ended()?this._debug("Tour ended, init prevented."):(this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation(),this._onResize((e=this,function(){return e.showStep(e._current)})),this._onScroll((n=this,function(){return n._showPopoverAndOverlay(n._current)})),null!==this._current&&this.showStep(this._current),this._inited=!0),this;var e,n},t.prototype.start=function(t){var e;return null==t&&(t=!1),this._inited||this.init(t),null===this._current&&(e=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0),this._callOnPromiseDone(e,this.showStep,0)),this},t.prototype.next=function(){var t;return t=this.hideStep(this._current,this._current+1),this._callOnPromiseDone(t,this._showNextStep)},t.prototype.prev=function(){var t;return t=this.hideStep(this._current,this._current-1),this._callOnPromiseDone(t,this._showPrevStep)},t.prototype.goTo=function(t){var e;return e=this.hideStep(this._current,t),this._callOnPromiseDone(e,this.showStep,t)},t.prototype.end=function(){var t,e,n;return t=function(t){if(h(d).off("click.tour-"+n._options.name),h(d).off("keyup.tour-"+n._options.name),h(window).off("resize.tour-"+n._options.name),h(window).off("scroll.tour-"+n._options.name),n._setState("end","yes"),n._inited=!1,n._force=!1,n._clearTimer(),null!=n._options.onEnd)return n._options.onEnd(n)},e=(n=this).hideStep(this._current),this._callOnPromiseDone(e,t)},t.prototype.ended=function(){return!this._force&&!!this._getState("end")},t.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this._removeState("redirect_to"),this.start()},t.prototype.pause=function(){var t;return(t=this.getStep(this._current))&&t.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,window.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=t.onPause?t.onPause(this,this._duration):void 0):this},t.prototype.resume=function(){var t,e;return(t=this.getStep(this._current))&&t.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||t.duration,this._timer=window.setTimeout((e=this,function(){return e._isLast()?e.next():e.end()}),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=t.onResume&&this._duration!==t.duration?t.onResume(this,this._duration):void 0):this},t.prototype.hideStep=function(i,a){var t,e,n,r,s,o;if(r=this.getStep(i))return this._clearTimer(),n=this._makePromise(null!=r.onHide?r.onHide(this,i):void 0),s=this,e=function(t){var e,n;if((e=h(r.element)).data("bs.popover")||e.data("popover")||(e=h("body")),e.popover("destroy").removeClass("tour-"+s._options.name+"-element tour-"+s._options.name+"-"+i+"-element").removeData("bs.popover"),r.reflex&&h(r.reflexElement).removeClass("tour-step-element-reflex").off(s._reflexEvent(r.reflex)+".tour-"+s._options.name),r.backdrop&&((n=null!=a&&s.getStep(a))&&n.backdrop&&n.backdropElement===r.backdropElement||s._hideOverlayElement(r)),null!=r.onHidden)return r.onHidden(s)},t=r.delay.hide||r.delay,"[object Number]"==={}.toString.call(t)&&0<t?(this._debug("Wait "+t+" milliseconds to hide the step "+(this._current+1)),window.setTimeout((o=this,function(){return o._callOnPromiseDone(n,e)}),t)):this._callOnPromiseDone(n,e),n},t.prototype.showStep=function(e){var t,n,i,a,r,s,o,c;return this.ended()?(this._debug("Tour ended, showStep prevented."),this):(s=this.getStep(e))&&(r=e<this._current,n=this._makePromise(null!=s.onShow?s.onShow(this,e):void 0),this.setCurrentStep(e),t=function(){switch({}.toString.call(s.path)){case"[object Function]":return s.path();case"[object String]":return this._options.basePath+s.path;default:return s.path}}.call(this),!s.redirect||!this._isRedirect(s.host,t,d.location)||(this._redirect(s,e,t),this._isJustPathHashDifferent(s.host,t,d.location)))?(o=this,a=function(t){if(o._isOrphan(s)){if(!1===s.orphan)return o._debug("Skip the orphan step "+(o._current+1)+".\nOrphan option is false and the element does not exist or is hidden."),void(r?o._showPrevStep():o._showNextStep());o._debug("Show the orphan step "+(o._current+1)+". Orphans option is true.")}if(s.autoscroll?o._scrollIntoView(e):o._showPopoverAndOverlay(e),s.duration)return o.resume()},i=s.delay.show||s.delay,"[object Number]"==={}.toString.call(i)&&0<i?(this._debug("Wait "+i+" milliseconds to show the step "+(this._current+1)),window.setTimeout((c=this,function(){return c._callOnPromiseDone(n,a)}),i)):this._callOnPromiseDone(n,a),n):void 0},t.prototype.getCurrentStep=function(){return this._current},t.prototype.setCurrentStep=function(t){return null!=t?(this._current=t,this._setState("current_step",t)):(this._current=this._getState("current_step"),this._current=null===this._current?null:parseInt(this._current,10)),this},t.prototype.redraw=function(){return this._showOverlayElement(this.getStep(this.getCurrentStep()))},t.prototype._setState=function(t,e){var n;if(this._options.storage){n=this._options.name+"_"+t;try{this._options.storage.setItem(n,e)}catch(t){t.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(n,e)}return null==this._state&&(this._state={}),this._state[t]=e},t.prototype._removeState=function(t){var e;return this._options.storage?(e=this._options.name+"_"+t,this._options.storage.removeItem(e),this._options.afterRemoveState(e)):null!=this._state?delete this._state[t]:void 0},t.prototype._getState=function(t){var e,n;return this._options.storage?(e=this._options.name+"_"+t,n=this._options.storage.getItem(e)):null!=this._state&&(n=this._state[t]),void 0!==n&&"null"!==n||(n=null),this._options.afterGetState(t,n),n},t.prototype._showNextStep=function(){var t,e,n,i;return n=this.getStep(this._current),e=function(t){return i.showStep(n.next)},t=(i=this)._makePromise(null!=n.onNext?n.onNext(this):void 0),this._callOnPromiseDone(t,e)},t.prototype._showPrevStep=function(){var t,e,n,i;return n=this.getStep(this._current),e=function(t){return i.showStep(n.prev)},t=(i=this)._makePromise(null!=n.onPrev?n.onPrev(this):void 0),this._callOnPromiseDone(t,e)},t.prototype._debug=function(t){if(this._options.debug)return window.console.log("Bootstrap Tour '"+this._options.name+"' | "+t)},t.prototype._isRedirect=function(t,e,n){var i;return!(null==t||""===t||!("[object RegExp]"==={}.toString.call(t)&&!t.test(n.origin)||"[object String]"==={}.toString.call(t)&&this._isHostDifferent(t,n)))||(i=[n.pathname,n.search,n.hash].join(""),null!=e&&""!==e&&("[object RegExp]"==={}.toString.call(e)&&!e.test(i)||"[object String]"==={}.toString.call(e)&&this._isPathDifferent(e,i)))},t.prototype._isHostDifferent=function(t,e){switch({}.toString.call(t)){case"[object RegExp]":return!t.test(e.origin);case"[object String]":return this._getProtocol(t)!==this._getProtocol(e.href)||this._getHost(t)!==this._getHost(e.href);default:return!0}},t.prototype._isPathDifferent=function(t,e){return this._getPath(t)!==this._getPath(e)||!this._equal(this._getQuery(t),this._getQuery(e))||!this._equal(this._getHash(t),this._getHash(e))},t.prototype._isJustPathHashDifferent=function(t,e,n){var i;return(null==t||""===t||!this._isHostDifferent(t,n))&&(i=[n.pathname,n.search,n.hash].join(""),"[object String]"==={}.toString.call(e)&&this._getPath(e)===this._getPath(i)&&this._equal(this._getQuery(e),this._getQuery(i))&&!this._equal(this._getHash(e),this._getHash(i)))},t.prototype._redirect=function(t,e,n){var i;return h.isFunction(t.redirect)?t.redirect.call(this,n):(i="[object String]"==={}.toString.call(t.host)?""+t.host+n:n,this._debug("Redirect to "+i),this._getState("redirect_to")!==""+e?(this._setState("redirect_to",""+e),d.location.href=i):(this._debug("Error redirection loop to "+n),this._removeState("redirect_to"),null!=t.onRedirectError?t.onRedirectError(this):void 0))},t.prototype._isOrphan=function(t){return null==t.element||!h(t.element).length||h(t.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==h(t.element)[0].namespaceURI},t.prototype._isLast=function(){return this._current<this._options.steps.length-1},t.prototype._showPopoverAndOverlay=function(t){var e;if(this.getCurrentStep()===t&&!this.ended())return(e=this.getStep(t)).backdrop&&this._showOverlayElement(e),this._showPopover(e,t),null!=e.onShown&&e.onShown(this),this._debug("Step "+(this._current+1)+" of "+this._options.steps.length)},t.prototype._showPopover=function(t,e){var n,i,a,r,s,o;if(h(".tour-"+this._options.name).remove(),r=h.extend({},this._options),a=this._isOrphan(t),t.template=this._template(t,e),a&&(t.element="body",t.placement="top"),(n=h(t.element)).addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+e+"-element"),t.options&&h.extend(r,t.options),t.reflex&&!a&&h(t.reflexElement).addClass("tour-step-element-reflex").off(this._reflexEvent(t.reflex)+".tour-"+this._options.name).on(this._reflexEvent(t.reflex)+".tour-"+this._options.name,(o=this,function(){return o._isLast()?o.next():o.end()})),s=!0===t.smartPlacement&&-1===t.placement.search(/auto/i),n.popover({placement:s?"auto "+t.placement:t.placement,trigger:"manual",title:t.title,content:t.content,html:!0,animation:t.animation,container:t.container,template:t.template,selector:t.element}).popover("show"),(i=n.data("bs.popover")?n.data("bs.popover").tip():n.data("popover").tip()).attr("id",t.id),"fixed"===n.css("position")&&i.css("position","fixed"),this._reposition(i,t),a)return this._center(i)},t.prototype._template=function(t,e){var n,i,a,r,s,o;return o=t.template,this._isOrphan(t)&&"[object Boolean]"!=={}.toString.call(t.orphan)&&(o=t.orphan),a=(n=(s=h.isFunction(o)?h(o(e,t)):h(o)).find(".popover-navigation")).find('[data-role="prev"]'),i=n.find('[data-role="next"]'),r=n.find('[data-role="pause-resume"]'),this._isOrphan(t)&&s.addClass("orphan"),s.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+e),t.reflex&&s.addClass("tour-"+this._options.name+"-reflex"),t.prev<0&&a.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),t.next<0&&i.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),t.duration||r.remove(),s.clone().wrap("<div>").parent().html()},t.prototype._reflexEvent=function(t){return"[object Boolean]"==={}.toString.call(t)?"click":t},t.prototype._reposition=function(t,e){var n,i,a,r,s,o,c;if(r=t[0].offsetWidth,i=t[0].offsetHeight,s=(c=t.offset()).left,o=c.top,(n=h(d).outerHeight()-c.top-t.outerHeight())<0&&(c.top=c.top+n),(a=h("html").outerWidth()-c.left-t.outerWidth())<0&&(c.left=c.left+a),c.top<0&&(c.top=0),c.left<0&&(c.left=0),t.offset(c),"bottom"===e.placement||"top"===e.placement){if(s!==c.left)return this._replaceArrow(t,2*(c.left-s),r,"left")}else if(o!==c.top)return this._replaceArrow(t,2*(c.top-o),i,"top")},t.prototype._center=function(t){return t.css("top",h(window).outerHeight()/2-t.outerHeight()/2)},t.prototype._replaceArrow=function(t,e,n,i){return t.find(".arrow").css(i,e?50*(1-e/n)+"%":"")},t.prototype._scrollIntoView=function(t){var e,n,i,a,r,s,o,c,l;if(o=this.getStep(t),!(e=h(o.element)).length)return this._showPopoverAndOverlay(t);switch(n=h(window),r=e.offset().top,a=e.outerHeight(),c=n.height(),s=0,o.placement){case"top":s=Math.max(0,r-c/2);break;case"left":case"right":s=Math.max(0,r+a/2-c/2);break;case"bottom":s=Math.max(0,r+a-c/2)}return this._debug("Scroll into view. ScrollTop: "+s+". Element offset: "+r+". Window height: "+c+"."),i=0,h("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(s)},(l=this,function(){if(2==++i)return l._showPopoverAndOverlay(t),l._debug("Scroll into view.\nAnimation end element offset: "+e.offset().top+".\nWindow height: "+n.height()+".")}))},t.prototype._onResize=function(t,e){return h(window).on("resize.tour-"+this._options.name,function(){return clearTimeout(e),e=setTimeout(t,100)})},t.prototype._onScroll=function(t,e){return h(window).on("scroll.tour-"+this._options.name,function(){return clearTimeout(e),e=setTimeout(t,100)})},t.prototype._initMouseNavigation=function(){var n,e,i,a;return n=this,h(d).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",(a=this,function(t){return t.preventDefault(),a.next()})).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",(i=this,function(t){if(t.preventDefault(),0<i._current)return i.prev()})).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",(e=this,function(t){return t.preventDefault(),e.end()})).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(t){var e;return t.preventDefault(),(e=h(this)).text(n._paused?e.data("pause-text"):e.data("resume-text")),n._paused?n.resume():n.pause()})},t.prototype._initKeyboardNavigation=function(){var e;if(this._options.keyboard)return h(d).on("keyup.tour-"+this._options.name,(e=this,function(t){if(t.which)switch(t.which){case 39:return t.preventDefault(),e._isLast()?e.next():e.end();case 37:if(t.preventDefault(),0<e._current)return e.prev()}}))},t.prototype._makePromise=function(t){return t&&h.isFunction(t.then)?t:null},t.prototype._callOnPromiseDone=function(t,e,n){return t?t.then((i=this,function(t){return e.call(i,n)})):e.call(this,n);var i},t.prototype._showBackground=function(t,e){var n,i,a,r,s,o,c,l,u;for(a=h(d).height(),u=h(d).width(),l=[],r=0,s=(c=["top","bottom","left","right"]).length;r<s;r++)switch(o=c[r],n=null!=(i=this.backdrops)[o]?i[o]:i[o]=h("<div>",{class:"tour-backdrop "+o}),h(t.backdropContainer).append(n),o){case"top":l.push(n.height(0<e.offset.top?e.offset.top:0).width(u).offset({top:0,left:0}));break;case"bottom":l.push(n.offset({top:e.offset.top+e.height,left:0}).height(a-(e.offset.top+e.height)).width(u));break;case"left":l.push(n.offset({top:e.offset.top,left:0}).height(e.height).width(0<e.offset.left?e.offset.left:0));break;case"right":l.push(n.offset({top:e.offset.top,left:e.offset.left+e.width}).height(e.height).width(u-(e.offset.left+e.width)));break;default:l.push(void 0)}return l},t.prototype._showOverlayElement=function(t){var e,n;return 0===(e=h(t.backdropElement)).length?n={width:0,height:0,offset:{top:0,left:0}}:(n={width:e.innerWidth(),height:e.innerHeight(),offset:e.offset()},e.addClass("tour-step-backdrop"),t.backdropPadding&&(n=this._applyBackdropPadding(t.backdropPadding,n))),this._showBackground(t,n)},t.prototype._hideOverlayElement=function(t){var e,n,i;for(n in h(t.backdropElement).removeClass("tour-step-backdrop"),i=this.backdrops)(e=i[n])&&void 0!==e.remove&&e.remove();return this.backdrops=[]},t.prototype._applyBackdropPadding=function(t,e){return e.height="object"==typeof t?(null==t.top&&(t.top=0),null==t.right&&(t.right=0),null==t.bottom&&(t.bottom=0),null==t.left&&(t.left=0),e.offset.top=e.offset.top-t.top,e.offset.left=e.offset.left-t.left,e.width=e.width+t.left+t.right,e.height+t.top+t.bottom):(e.offset.top=e.offset.top-t,e.offset.left=e.offset.left-t,e.width=e.width+2*t,e.height+2*t),e},t.prototype._clearTimer=function(){return window.clearTimeout(this._timer),this._timer=null,this._duration=null},t.prototype._getProtocol=function(t){return 1<(t=t.split("://")).length?t[0]:"http"},t.prototype._getHost=function(t){return(t=1<(t=t.split("//")).length?t[1]:t[0]).split("/")[0]},t.prototype._getPath=function(t){return t.replace(/\/?$/,"").split("?")[0].split("#")[0]},t.prototype._getQuery=function(t){return this._getParams(t,"?")},t.prototype._getHash=function(t){return this._getParams(t,"#")},t.prototype._getParams=function(t,e){var n,i,a,r,s;if(1===(r=t.split(e)).length)return{};for(s={},n=0,i=(r=r[1].split("&")).length;n<i;n++)s[(a=(a=r[n]).split("="))[0]]=a[1]||"";return s},t.prototype._equal=function(t,e){var n,i,a,r,s,o;if("[object Object]"==={}.toString.call(t)&&"[object Object]"==={}.toString.call(e)){if(r=Object.keys(t),s=Object.keys(e),r.length!==s.length)return!1;for(i in t)if(o=t[i],!this._equal(e[i],o))return!1;return!0}if("[object Array]"!=={}.toString.call(t)||"[object Array]"!=={}.toString.call(e))return t===e;if(t.length!==e.length)return!1;for(i=n=0,a=t.length;n<a;i=++n)if(o=t[i],!this._equal(o,e[i]))return!1;return!0},t}());var h,d}.apply(e,i))||(t.exports=a)},function(t,e,n){var u,o,i,c,a,r,s,b,l,h,d,f,p,g,v,m,y,x,_,w,k,S,C,M,T,E,A,O,P,D,I,N,j,z,H,L,R,W,F,$,B,V,q,U,Y,G,K,X,Z,Q,J=n(0);
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
/*! jQuery UI - v1.10.3 - 2013-05-03
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
!function(o,t){var i,e,n=0,a=/^ui-id-\d+$/;function r(t,e){var n,i,a,r=t.nodeName.toLowerCase();return"area"===r?(i=(n=t.parentNode).name,!(!t.href||!i||"map"!==n.nodeName.toLowerCase())&&(!!(a=o("img[usemap=#"+i+"]")[0])&&s(a))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r&&t.href||e)&&s(t)}function s(t){return o.expr.filters.visible(t)&&!o(t).parents().addBack().filter(function(){return"hidden"===o.css(this,"visibility")}).length}o.ui=o.ui||{},o.extend(o.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),o.fn.extend({focus:(i=o.fn.focus,function(e,n){return"number"==typeof e?this.each(function(){var t=this;setTimeout(function(){o(t).focus(),n&&n.call(t)},e)}):i.apply(this,arguments)}),scrollParent:function(){var t;return t=o.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(o.css(this,"position"))&&/(auto|scroll)/.test(o.css(this,"overflow")+o.css(this,"overflow-y")+o.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(o.css(this,"overflow")+o.css(this,"overflow-y")+o.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?o(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var e,n,i=o(this[0]);i.length&&i[0]!==document;){if(("absolute"===(e=i.css("position"))||"relative"===e||"fixed"===e)&&(n=parseInt(i.css("zIndex"),10),!isNaN(n)&&0!==n))return n;i=i.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&o(this).removeAttr("id")})}}),o.extend(o.expr[":"],{data:o.expr.createPseudo?o.expr.createPseudo(function(e){return function(t){return!!o.data(t,e)}}):function(t,e,n){return!!o.data(t,n[3])},focusable:function(t){return r(t,!isNaN(o.attr(t,"tabindex")))},tabbable:function(t){var e=o.attr(t,"tabindex"),n=isNaN(e);return(n||0<=e)&&r(t,!n)}}),o("<a>").outerWidth(1).jquery||o.each(["Width","Height"],function(t,n){var a="Width"===n?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),r={innerWidth:o.fn.innerWidth,innerHeight:o.fn.innerHeight,outerWidth:o.fn.outerWidth,outerHeight:o.fn.outerHeight};function s(t,e,n,i){return o.each(a,function(){e-=parseFloat(o.css(t,"padding"+this))||0,n&&(e-=parseFloat(o.css(t,"border"+this+"Width"))||0),i&&(e-=parseFloat(o.css(t,"margin"+this))||0)}),e}o.fn["inner"+n]=function(t){return void 0===t?r["inner"+n].call(this):this.each(function(){o(this).css(i,s(this,t)+"px")})},o.fn["outer"+n]=function(t,e){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){o(this).css(i,s(this,t,!0,e)+"px")})}}),o.fn.addBack||(o.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),o("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(o.fn.removeData=(e=o.fn.removeData,function(t){return arguments.length?e.call(this,o.camelCase(t)):e.call(this)})),o.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),o.support.selectstart="onselectstart"in document.createElement("div"),o.fn.extend({disableSelection:function(){return this.bind((o.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),o.extend(o.ui,{plugin:{add:function(t,e,n){var i,a=o.ui[t].prototype;for(i in n)a.plugins[i]=a.plugins[i]||[],a.plugins[i].push([e,n[i]])},call:function(t,e,n){var i,a=t.plugins[e];if(a&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<a.length;i++)t.options[a[i][0]]&&a[i][1].apply(t.element,n)}},hasScroll:function(t,e){if("hidden"===o(t).css("overflow"))return!1;var n,i=e&&"left"===e?"scrollLeft":"scrollTop";return 0<t[i]||(t[i]=1,n=0<t[i],t[i]=0,n)}})}(J),u=J,i=0,c=Array.prototype.slice,a=u.cleanData,u.cleanData=function(t){for(var e,n=0;null!=(e=t[n]);n++)try{u(e).triggerHandler("remove")}catch(t){}a(t)},u.widget=function(t,n,e){var i,a,r,s,o={},c=t.split(".")[0];t=t.split(".")[1],i=c+"-"+t,e||(e=n,n=u.Widget),u.expr[":"][i.toLowerCase()]=function(t){return!!u.data(t,i)},u[c]=u[c]||{},a=u[c][t],r=u[c][t]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},u.extend(r,a,{version:e.version,_proto:u.extend({},e),_childConstructors:[]}),(s=new n).options=u.widget.extend({},s.options),u.each(e,function(e,i){var a,r;u.isFunction(i)?o[e]=(a=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)},function(){var t,e=this._super,n=this._superApply;return this._super=a,this._superApply=r,t=i.apply(this,arguments),this._super=e,this._superApply=n,t}):o[e]=i}),r.prototype=u.widget.extend(s,{widgetEventPrefix:a?s.widgetEventPrefix:t},o,{constructor:r,namespace:c,widgetName:t,widgetFullName:i}),a?(u.each(a._childConstructors,function(t,e){var n=e.prototype;u.widget(n.namespace+"."+n.widgetName,r,e._proto)}),delete a._childConstructors):n._childConstructors.push(r),u.widget.bridge(t,r)},u.widget.extend=function(t){for(var e,n,i=c.call(arguments,1),a=0,r=i.length;a<r;a++)for(e in i[a])n=i[a][e],i[a].hasOwnProperty(e)&&n!==o&&(u.isPlainObject(n)?t[e]=u.isPlainObject(t[e])?u.widget.extend({},t[e],n):u.widget.extend({},n):t[e]=n);return t},u.widget.bridge=function(r,e){var s=e.prototype.widgetFullName||r;u.fn[r]=function(n){var t="string"==typeof n,i=c.call(arguments,1),a=this;return n=!t&&i.length?u.widget.extend.apply(null,[n].concat(i)):n,t?this.each(function(){var t,e=u.data(this,s);return e?u.isFunction(e[n])&&"_"!==n.charAt(0)?(t=e[n].apply(e,i))!==e&&t!==o?(a=t&&t.jquery?a.pushStack(t.get()):t,!1):void 0:u.error("no such method '"+n+"' for "+r+" widget instance"):u.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+n+"'")}):this.each(function(){var t=u.data(this,s);t?t.option(n||{})._init():u.data(this,s,new e(n,this))}),a}},u.Widget=function(){},u.Widget._childConstructors=[],u.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,e){e=u(e||this.defaultElement||this)[0],this.element=u(e),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=u.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=u(),this.hoverable=u(),this.focusable=u(),e!==this&&(u.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=u(e.style?e.ownerDocument:e.document||e),this.window=u(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:u.noop,_getCreateEventData:u.noop,_create:u.noop,_init:u.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(u.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:u.noop,widget:function(){return this.element},option:function(t,e){var n,i,a,r=t;if(0===arguments.length)return u.widget.extend({},this.options);if("string"==typeof t)if(r={},t=(n=t.split(".")).shift(),n.length){for(i=r[t]=u.widget.extend({},this.options[t]),a=0;a<n.length-1;a++)i[n[a]]=i[n[a]]||{},i=i[n[a]];if(t=n.pop(),e===o)return i[t]===o?null:i[t];i[t]=e}else{if(e===o)return this.options[t]===o?null:this.options[t];r[t]=e}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(s,o,t){var c,l=this;"boolean"!=typeof s&&(t=o,o=s,s=!1),t?(o=c=u(o),this.bindings=this.bindings.add(o)):(t=o,o=this.element,c=this.widget()),u.each(t,function(t,e){function n(){if(s||!0!==l.options.disabled&&!u(this).hasClass("ui-state-disabled"))return("string"==typeof e?l[e]:e).apply(l,arguments)}"string"!=typeof e&&(n.guid=e.guid=e.guid||n.guid||u.guid++);var i=t.match(/^(\w+)\s*(.*)$/),a=i[1]+l.eventNamespace,r=i[2];r?c.delegate(r,a,n):o.bind(a,n)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){u(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){u(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){u(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){u(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,e,n){var i,a,r=this.options[t];if(n=n||{},(e=u.Event(e)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],a=e.originalEvent)for(i in a)i in e||(e[i]=a[i]);return this.element.trigger(e,n),!(u.isFunction(r)&&!1===r.apply(this.element[0],[e].concat(n))||e.isDefaultPrevented())}},u.each({show:"fadeIn",hide:"fadeOut"},function(r,s){u.Widget.prototype["_"+r]=function(e,t,n){"string"==typeof t&&(t={effect:t});var i,a=t?!0===t||"number"==typeof t?s:t.effect||s:r;"number"==typeof(t=t||{})&&(t={duration:t}),i=!u.isEmptyObject(t),t.complete=n,t.delay&&e.delay(t.delay),i&&u.effects&&u.effects.effect[a]?e[r](t):a!==r&&e[a]?e[a](t.duration,t.easing,n):e.queue(function(t){u(this)[r](),n&&n.call(e[0]),t()})}}),s=!1,(r=J)(document).mouseup(function(){s=!1}),r.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){if(!0===r.data(t.target,e.widgetName+".preventClickEvent"))return r.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&r(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!s){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var e=this,n=1===t.which,i=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&r(t.target).closest(this.options.cancel).length;return!(n&&!i&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){e.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===r.data(t.target,this.widgetName+".preventClickEvent")&&r.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return e._mouseMove(t)},this._mouseUpDelegate=function(t){return e._mouseUp(t)},r(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),s=!0))}},_mouseMove:function(t){return r.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return r(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&r.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),(b=J).widget("ui.draggable",b.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var e=this.options;return!(this.helper||e.disabled||0<b(t.target).closest(".ui-resizable-handle").length||(this.handle=this._getHandle(t),!this.handle||(b(!0===e.iframeFix?"iframe":e.iframeFix).each(function(){b("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(b(this).offset()).appendTo("body")}),0)))},_mouseStart:function(t){var e=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),b.ui.ddmanager&&(b.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,b.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),b.ui.ddmanager&&!e.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,e){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!e){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),b.ui.ddmanager&&b.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var e=this,n=!1;return b.ui.ddmanager&&!this.options.dropBehaviour&&(n=b.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),("original"!==this.options.helper||b.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==e._trigger("stop",t)&&e._clear()}):!1!==this._trigger("stop",t)&&this._clear()),!1},_mouseUp:function(t){return b("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),b.ui.ddmanager&&b.ui.ddmanager.dragStop(this,t),b.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!b(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var e=this.options,n=b.isFunction(e.helper)?b(e.helper.apply(this.element[0],[t])):"clone"===e.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===e.appendTo?this.element[0].parentNode:e.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),b.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&b.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options;i.containment?"window"!==i.containment?"document"!==i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.helper[0].parentNode),(n=(e=b(i.containment))[0])&&(t="hidden"!==e.css("overflow"),this.containment=[(parseInt(e.css("borderLeftWidth"),10)||0)+(parseInt(e.css("paddingLeft"),10)||0),(parseInt(e.css("borderTopWidth"),10)||0)+(parseInt(e.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e.css("borderRightWidth"),10)||0)-(parseInt(e.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e.css("borderBottomWidth"),10)||0)-(parseInt(e.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=e)):this.containment=i.containment:this.containment=[0,0,b(document).width()-this.helperProportions.width-this.margins.left,(b(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,b(window).scrollLeft()+b(window).width()-this.helperProportions.width-this.margins.left,b(window).scrollTop()+(b(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:i.scrollTop(),left:i.scrollLeft()}),{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var e,n,i,a,r=this.options,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),this.originalPosition&&(this.containment&&(e=this.relative_container?(n=this.relative_container.offset(),[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):this.containment,t.pageX-this.offset.click.left<e[0]&&(o=e[0]+this.offset.click.left),t.pageY-this.offset.click.top<e[1]&&(c=e[1]+this.offset.click.top),t.pageX-this.offset.click.left>e[2]&&(o=e[2]+this.offset.click.left),t.pageY-this.offset.click.top>e[3]&&(c=e[3]+this.offset.click.top)),r.grid&&(i=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=e?i-this.offset.click.top>=e[1]||i-this.offset.click.top>e[3]?i:i-this.offset.click.top>=e[1]?i-r.grid[1]:i+r.grid[1]:i,a=r.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,o=e?a-this.offset.click.left>=e[0]||a-this.offset.click.left>e[2]?a:a-this.offset.click.left>=e[0]?a-r.grid[0]:a+r.grid[0]:a)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,e,n){return n=n||this._uiHash(),b.ui.plugin.call(this,t,[e,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),b.Widget.prototype._trigger.call(this,t,e,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),b.ui.plugin.add("draggable","connectToSortable",{start:function(e,t){var n=b(this).data("ui-draggable"),i=n.options,a=b.extend({},t,{item:n.element});n.sortables=[],b(i.connectToSortable).each(function(){var t=b.data(this,"ui-sortable");t&&!t.options.disabled&&(n.sortables.push({instance:t,shouldRevert:t.options.revert}),t.refreshPositions(),t._trigger("activate",e,a))})},stop:function(t,e){var n=b(this).data("ui-draggable"),i=b.extend({},e,{item:n.element});b.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(n,i){var a=b(this).data("ui-draggable"),r=this;b.each(a.sortables,function(){var t=!1,e=this;this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(t=!0,b.each(a.sortables,function(){return this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this!==e&&this.instance._intersectsWith(this.instance.containerCache)&&b.contains(e.instance.element[0],this.instance.element[0])&&(t=!1),t})),t?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=b(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},n.target=this.instance.currentItem[0],this.instance._mouseCapture(n,!0),this.instance._mouseStart(n,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,a._trigger("toSortable",n),a.dropped=this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(n)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",n,this.instance._uiHash(this.instance)),this.instance._mouseStop(n,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),a._trigger("fromSortable",n),a.dropped=!1)})}}),b.ui.plugin.add("draggable","cursor",{start:function(){var t=b("body"),e=b(this).data("ui-draggable").options;t.css("cursor")&&(e._cursor=t.css("cursor")),t.css("cursor",e.cursor)},stop:function(){var t=b(this).data("ui-draggable").options;t._cursor&&b("body").css("cursor",t._cursor)}}),b.ui.plugin.add("draggable","opacity",{start:function(t,e){var n=b(e.helper),i=b(this).data("ui-draggable").options;n.css("opacity")&&(i._opacity=n.css("opacity")),n.css("opacity",i.opacity)},stop:function(t,e){var n=b(this).data("ui-draggable").options;n._opacity&&b(e.helper).css("opacity",n._opacity)}}),b.ui.plugin.add("draggable","scroll",{start:function(){var t=b(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var e=b(this).data("ui-draggable"),n=e.options,i=!1;e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(e.overflowOffset.top+e.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?e.scrollParent[0].scrollTop=i=e.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-e.overflowOffset.top<n.scrollSensitivity&&(e.scrollParent[0].scrollTop=i=e.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(e.overflowOffset.left+e.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?e.scrollParent[0].scrollLeft=i=e.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-e.overflowOffset.left<n.scrollSensitivity&&(e.scrollParent[0].scrollLeft=i=e.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-b(document).scrollTop()<n.scrollSensitivity?i=b(document).scrollTop(b(document).scrollTop()-n.scrollSpeed):b(window).height()-(t.pageY-b(document).scrollTop())<n.scrollSensitivity&&(i=b(document).scrollTop(b(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-b(document).scrollLeft()<n.scrollSensitivity?i=b(document).scrollLeft(b(document).scrollLeft()-n.scrollSpeed):b(window).width()-(t.pageX-b(document).scrollLeft())<n.scrollSensitivity&&(i=b(document).scrollLeft(b(document).scrollLeft()+n.scrollSpeed)))),!1!==i&&b.ui.ddmanager&&!n.dropBehaviour&&b.ui.ddmanager.prepareOffsets(e,t)}}),b.ui.plugin.add("draggable","snap",{start:function(){var n=b(this).data("ui-draggable"),t=n.options;n.snapElements=[],b(t.snap.constructor!==String?t.snap.items||":data(ui-draggable)":t.snap).each(function(){var t=b(this),e=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:e.top,left:e.left})})},drag:function(t,e){var n,i,a,r,s,o,c,l,u,h,d=b(this).data("ui-draggable"),f=d.options,p=f.snapTolerance,g=e.offset.left,v=g+d.helperProportions.width,m=e.offset.top,y=m+d.helperProportions.height;for(u=d.snapElements.length-1;0<=u;u--)o=(s=d.snapElements[u].left)+d.snapElements[u].width,l=(c=d.snapElements[u].top)+d.snapElements[u].height,v<s-p||o+p<g||y<c-p||l+p<m||!b.contains(d.snapElements[u].item.ownerDocument,d.snapElements[u].item)?(d.snapElements[u].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,t,b.extend(d._uiHash(),{snapItem:d.snapElements[u].item})),d.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(n=Math.abs(c-y)<=p,i=Math.abs(l-m)<=p,a=Math.abs(s-v)<=p,r=Math.abs(o-g)<=p,n&&(e.position.top=d._convertPositionTo("relative",{top:c-d.helperProportions.height,left:0}).top-d.margins.top),i&&(e.position.top=d._convertPositionTo("relative",{top:l,left:0}).top-d.margins.top),a&&(e.position.left=d._convertPositionTo("relative",{top:0,left:s-d.helperProportions.width}).left-d.margins.left),r&&(e.position.left=d._convertPositionTo("relative",{top:0,left:o}).left-d.margins.left)),h=n||i||a||r,"outer"!==f.snapMode&&(n=Math.abs(c-m)<=p,i=Math.abs(l-y)<=p,a=Math.abs(s-g)<=p,r=Math.abs(o-v)<=p,n&&(e.position.top=d._convertPositionTo("relative",{top:c,left:0}).top-d.margins.top),i&&(e.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top-d.margins.top),a&&(e.position.left=d._convertPositionTo("relative",{top:0,left:s}).left-d.margins.left),r&&(e.position.left=d._convertPositionTo("relative",{top:0,left:o-d.helperProportions.width}).left-d.margins.left)),!d.snapElements[u].snapping&&(n||i||a||r||h)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,t,b.extend(d._uiHash(),{snapItem:d.snapElements[u].item})),d.snapElements[u].snapping=n||i||a||r||h)}}),b.ui.plugin.add("draggable","stack",{start:function(){var e,t=this.data("ui-draggable").options,n=b.makeArray(b(t.stack)).sort(function(t,e){return(parseInt(b(t).css("zIndex"),10)||0)-(parseInt(b(e).css("zIndex"),10)||0)});n.length&&(e=parseInt(b(n[0]).css("zIndex"),10)||0,b(n).each(function(t){b(this).css("zIndex",e+t)}),this.css("zIndex",e+n.length))}}),b.ui.plugin.add("draggable","zIndex",{start:function(t,e){var n=b(e.helper),i=b(this).data("ui-draggable").options;n.css("zIndex")&&(i._zIndex=n.css("zIndex")),n.css("zIndex",i.zIndex)},stop:function(t,e){var n=b(this).data("ui-draggable").options;n._zIndex&&b(e.helper).css("zIndex",n._zIndex)}}),function(o,t){function d(t,e,n){return e<t&&t<e+n}o.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,e=t.accept;this.isover=!1,this.isout=!0,this.accept=o.isFunction(e)?e:function(t){return t.is(e)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},o.ui.ddmanager.droppables[t.scope]=o.ui.ddmanager.droppables[t.scope]||[],o.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,e=o.ui.ddmanager.droppables[this.options.scope];t<e.length;t++)e[t]===this&&e.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,e){"accept"===t&&(this.accept=o.isFunction(e)?e:function(t){return t.is(e)}),o.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var e=o.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=o.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=o.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=o.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!==this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(e)))},_drop:function(t,e){var n=e||o.ui.ddmanager.current,i=!1;return!(!n||(n.currentItem||n.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=o.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&o.ui.intersect(n,o.extend(t,{offset:t.element.offset()}),t.options.tolerance))return!(i=!0)}),!i&&(!!this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element)))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),o.ui.intersect=function(t,e,n){if(!e.offset)return!1;var i,a=(t.positionAbs||t.position.absolute).left,r=a+t.helperProportions.width,s=(t.positionAbs||t.position.absolute).top,o=s+t.helperProportions.height,c=e.offset.left,l=c+e.proportions.width,u=e.offset.top,h=u+e.proportions.height;switch(n){case"fit":return c<=a&&r<=l&&u<=s&&o<=h;case"intersect":return c<a+t.helperProportions.width/2&&r-t.helperProportions.width/2<l&&u<s+t.helperProportions.height/2&&o-t.helperProportions.height/2<h;case"pointer":return i=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,d((t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,u,e.proportions.height)&&d(i,c,e.proportions.width);case"touch":return(u<=s&&s<=h||u<=o&&o<=h||s<u&&h<o)&&(c<=a&&a<=l||c<=r&&r<=l||a<c&&l<r);default:return!1}},o.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var n,i,a=o.ui.ddmanager.droppables[t.options.scope]||[],r=e?e.type:null,s=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();t:for(n=0;n<a.length;n++)if(!(a[n].options.disabled||t&&!a[n].accept.call(a[n].element[0],t.currentItem||t.element))){for(i=0;i<s.length;i++)if(s[i]===a[n].element[0]){a[n].proportions.height=0;continue t}a[n].visible="none"!==a[n].element.css("display"),a[n].visible&&("mousedown"===r&&a[n]._activate.call(a[n],e),a[n].offset=a[n].element.offset(),a[n].proportions={width:a[n].element[0].offsetWidth,height:a[n].element[0].offsetHeight})}},drop:function(t,e){var n=!1;return o.each((o.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&o.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,e)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),n},dragStart:function(t,e){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||o.ui.ddmanager.prepareOffsets(t,e)})},drag:function(r,s){r.options.refreshPositions&&o.ui.ddmanager.prepareOffsets(r,s),o.each(o.ui.ddmanager.droppables[r.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var t,e,n,i=o.ui.intersect(r,this,this.options.tolerance),a=!i&&this.isover?"isout":i&&!this.isover?"isover":null;a&&(this.options.greedy&&(e=this.options.scope,(n=this.element.parents(":data(ui-droppable)").filter(function(){return o.data(this,"ui-droppable").options.scope===e})).length&&((t=o.data(n[0],"ui-droppable")).greedyChild="isover"===a)),t&&"isover"===a&&(t.isover=!1,t.isout=!0,t._out.call(t,s)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,s),t&&"isout"===a&&(t.isout=!1,t.isover=!0,t._over.call(t,s)))}})},dragStop:function(t,e){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||o.ui.ddmanager.prepareOffsets(t,e)}}}(J),function(m,t){function d(t){return parseInt(t,10)||0}function h(t){return!isNaN(parseInt(t,10))}m.widget("ui.resizable",m.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,e,n,i,a=this,r=this.options;if(this.element.addClass("ui-resizable"),m.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(m("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(m(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},e=0;e<t.length;e++)n=m.trim(t[e]),(i=m("<div class='ui-resizable-handle "+("ui-resizable-"+n)+"'></div>")).css({zIndex:r.zIndex}),"se"===n&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(i);this._renderAxis=function(t){var e,n,i,a;for(e in t=t||this.element,this.handles)this.handles[e].constructor===String&&(this.handles[e]=m(this.handles[e],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=m(this.handles[e],this.element),a=/sw|ne|nw|se|n|s/.test(e)?n.outerHeight():n.outerWidth(),i=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(i,a),this._proportionallyResize()),m(this.handles[e]).length},this._renderAxis(this.element),this._handles=m(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=i&&i[1]?i[1]:"se")}),r.autoHide&&(this._handles.hide(),m(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(m(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(m(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,e=function(t){m(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(t){var e,n,i=!1;for(e in this.handles)((n=m(this.handles[e])[0])===t.target||m.contains(n,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var e,n,i,a=this.options,r=this.element.position(),s=this.element;return this.resizing=!0,/absolute/.test(s.css("position"))?s.css({position:"absolute",top:s.css("top"),left:s.css("left")}):s.is(".ui-draggable")&&s.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),e=d(this.helper.css("left")),n=d(this.helper.css("top")),a.containment&&(e+=m(a.containment).scrollLeft()||0,n+=m(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:e,top:n},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:e,top:n},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=m(".ui-resizable-"+this.axis).css("cursor"),m("body").css("cursor","auto"===i?this.axis+"-resize":i),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e,n=this.helper,i={},a=this.originalMousePosition,r=this.axis,s=this.position.top,o=this.position.left,c=this.size.width,l=this.size.height,u=t.pageX-a.left||0,h=t.pageY-a.top||0,d=this._change[r];return d&&(e=d.apply(this,[t,u,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(e=this._updateRatio(e,t)),e=this._respectSize(e,t),this._updateCache(e),this._propagate("resize",t),this.position.top!==s&&(i.top=this.position.top+"px"),this.position.left!==o&&(i.left=this.position.left+"px"),this.size.width!==c&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),n.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),m.isEmptyObject(i)||this._trigger("resize",t,this.ui())),!1},_mouseStop:function(t){this.resizing=!1;var e,n,i,a,r,s,o,c=this.options,l=this;return this._helper&&(i=(n=(e=this._proportionallyResizeElements).length&&/textarea/i.test(e[0].nodeName))&&m.ui.hasScroll(e[0],"left")?0:l.sizeDiff.height,a=n?0:l.sizeDiff.width,r={width:l.helper.width()-a,height:l.helper.height()-i},s=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,o=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,c.animate||this.element.css(m.extend(r,{top:o,left:s})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!c.animate&&this._proportionallyResize()),m("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,n,i,a,r,s=this.options;r={minWidth:h(s.minWidth)?s.minWidth:0,maxWidth:h(s.maxWidth)?s.maxWidth:1/0,minHeight:h(s.minHeight)?s.minHeight:0,maxHeight:h(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,i=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,a=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),i>r.minHeight&&(r.minHeight=i),n<r.maxWidth&&(r.maxWidth=n),a<r.maxHeight&&(r.maxHeight=a)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),h(t.left)&&(this.position.left=t.left),h(t.top)&&(this.position.top=t.top),h(t.height)&&(this.size.height=t.height),h(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,i=this.axis;return h(t.height)?t.width=t.height*this.aspectRatio:h(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===i&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===i&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,i=h(t.width)&&e.maxWidth&&e.maxWidth<t.width,a=h(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=h(t.width)&&e.minWidth&&e.minWidth>t.width,s=h(t.height)&&e.minHeight&&e.minHeight>t.height,o=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,l=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return r&&(t.width=e.minWidth),s&&(t.height=e.minHeight),i&&(t.width=e.maxWidth),a&&(t.height=e.maxHeight),r&&l&&(t.left=o-e.minWidth),i&&l&&(t.left=o-e.maxWidth),s&&u&&(t.top=c-e.minHeight),a&&u&&(t.top=c-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,n,i,a,r=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(a=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],n=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],i=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")],e=0;e<n.length;e++)this.borderDif[e]=(parseInt(n[e],10)||0)+(parseInt(i[e],10)||0);a.css({height:r.height()-this.borderDif[0]-this.borderDif[2]||0,width:r.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||m("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize;return{left:this.originalPosition.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize;return{top:this.originalPosition.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(t,e,n){return m.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,n]))},sw:function(t,e,n){return m.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,n]))},ne:function(t,e,n){return m.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,n]))},nw:function(t,e,n){return m.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,n]))}},_propagate:function(t,e){m.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),m.ui.plugin.add("resizable","animate",{stop:function(e){var n=m(this).data("ui-resizable"),t=n.options,i=n._proportionallyResizeElements,a=i.length&&/textarea/i.test(i[0].nodeName),r=a&&m.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,s=a?0:n.sizeDiff.width,o={width:n.size.width-s,height:n.size.height-r},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(m.extend(o,l&&c?{top:l,left:c}:{}),{duration:t.animateDuration,easing:t.animateEasing,step:function(){var t={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&m(i[0]).css({width:t.width,height:t.height}),n._updateCache(t),n._propagate("resize",e)}})}}),m.ui.plugin.add("resizable","containment",{start:function(){var n,i,t,e,a,r,s,o=m(this).data("ui-resizable"),c=o.options,l=o.element,u=c.containment,h=u instanceof m?u.get(0):/parent/.test(u)?l.parent().get(0):u;h&&(o.containerElement=m(h),/document/.test(u)||u===document?(o.containerOffset={left:0,top:0},o.containerPosition={left:0,top:0},o.parentData={element:m(document),left:0,top:0,width:m(document).width(),height:m(document).height()||document.body.parentNode.scrollHeight}):(n=m(h),i=[],m(["Top","Right","Left","Bottom"]).each(function(t,e){i[t]=d(n.css("padding"+e))}),o.containerOffset=n.offset(),o.containerPosition=n.position(),o.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},t=o.containerOffset,e=o.containerSize.height,a=o.containerSize.width,r=m.ui.hasScroll(h,"left")?h.scrollWidth:a,s=m.ui.hasScroll(h)?h.scrollHeight:e,o.parentData={element:h,left:t.left,top:t.top,width:r,height:s}))},resize:function(t){var e,n,i,a,r=m(this).data("ui-resizable"),s=r.options,o=r.containerOffset,c=r.position,l=r._aspectRatio||t.shiftKey,u={top:0,left:0},h=r.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(u=o),c.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-u.left),l&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=s.helper?o.left:0),c.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),l&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,e=Math.abs((r._helper,r.offset.left-u.left+r.sizeDiff.width)),n=Math.abs((r._helper?r.offset.top-u.top:r.offset.top-o.top)+r.sizeDiff.height),i=r.containerElement.get(0)===r.element.parent().get(0),a=/relative|absolute/.test(r.containerElement.css("position")),i&&a&&(e-=r.parentData.left),e+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-e,l&&(r.size.height=r.size.width/r.aspectRatio)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,l&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var t=m(this).data("ui-resizable"),e=t.options,n=t.containerOffset,i=t.containerPosition,a=t.containerElement,r=m(t.helper),s=r.offset(),o=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(a.css("position"))&&m(this).css({left:s.left-i.left-n.left,width:o,height:c}),t._helper&&!e.animate&&/static/.test(a.css("position"))&&m(this).css({left:s.left-i.left-n.left,width:o,height:c})}}),m.ui.plugin.add("resizable","alsoResize",{start:function(){var t=m(this).data("ui-resizable").options,e=function(t){m(t).each(function(){var t=m(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?e(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],e(t.alsoResize)):m.each(t.alsoResize,function(t){e(t)})},resize:function(t,r){var e=m(this).data("ui-resizable"),n=e.options,i=e.originalSize,a=e.originalPosition,s={height:e.size.height-i.height||0,width:e.size.width-i.width||0,top:e.position.top-a.top||0,left:e.position.left-a.left||0},o=function(t,n){m(t).each(function(){var t=m(this),i=m(this).data("ui-resizable-alsoresize"),a={},e=n&&n.length?n:t.parents(r.originalElement[0]).length?["width","height"]:["width","height","top","left"];m.each(e,function(t,e){var n=(i[e]||0)+(s[e]||0);n&&0<=n&&(a[e]=n||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?o(n.alsoResize):m.each(n.alsoResize,function(t,e){o(t,e)})},stop:function(){m(this).removeData("resizable-alsoresize")}}),m.ui.plugin.add("resizable","ghost",{start:function(){var t=m(this).data("ui-resizable"),e=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=m(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=m(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),m.ui.plugin.add("resizable","grid",{resize:function(){var t=m(this).data("ui-resizable"),e=t.options,n=t.size,i=t.originalSize,a=t.originalPosition,r=t.axis,s="number"==typeof e.grid?[e.grid,e.grid]:e.grid,o=s[0]||1,c=s[1]||1,l=Math.round((n.width-i.width)/o)*o,u=Math.round((n.height-i.height)/c)*c,h=i.width+l,d=i.height+u,f=e.maxWidth&&e.maxWidth<h,p=e.maxHeight&&e.maxHeight<d,g=e.minWidth&&e.minWidth>h,v=e.minHeight&&e.minHeight>d;e.grid=s,g&&(h+=o),v&&(d+=c),f&&(h-=o),p&&(d-=c),/^(se|s|e)$/.test(r)?(t.size.width=h,t.size.height=d):/^(ne)$/.test(r)?(t.size.width=h,t.size.height=d,t.position.top=a.top-u):(/^(sw)$/.test(r)?(t.size.width=h,t.size.height=d):(t.size.width=h,t.size.height=d,t.position.top=a.top-u),t.position.left=a.left-l)}})}(J),(l=J).widget("ui.selectable",l.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,e=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=l(e.options.filter,e.element[0])).addClass("ui-selectee"),t.each(function(){var t=l(this),e=t.offset();l.data(this,"selectable-item",{element:this,$element:t,left:e.left,top:e.top,right:e.left+t.outerWidth(),bottom:e.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=l("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(n){var i=this,t=this.options;this.opos=[n.pageX,n.pageY],this.options.disabled||(this.selectees=l(t.filter,this.element[0]),this._trigger("start",n),l(t.appendTo).append(this.helper),this.helper.css({left:n.pageX,top:n.pageY,width:0,height:0}),t.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var t=l.data(this,"selectable-item");t.startselected=!0,n.metaKey||n.ctrlKey||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element}))}),l(n.target).parents().addBack().each(function(){var t,e=l.data(this,"selectable-item");if(e)return t=!n.metaKey&&!n.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(t?"ui-unselecting":"ui-selected").addClass(t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?i._trigger("selecting",n,{selecting:e.element}):i._trigger("unselecting",n,{unselecting:e.element}),!1}))},_mouseDrag:function(n){if(this.dragged=!0,!this.options.disabled){var t,i=this,a=this.options,r=this.opos[0],s=this.opos[1],o=n.pageX,c=n.pageY;return o<r&&(t=o,o=r,r=t),c<s&&(t=c,c=s,s=t),this.helper.css({left:r,top:s,width:o-r,height:c-s}),this.selectees.each(function(){var t=l.data(this,"selectable-item"),e=!1;t&&t.element!==i.element[0]&&("touch"===a.tolerance?e=!(t.left>o||t.right<r||t.top>c||t.bottom<s):"fit"===a.tolerance&&(e=t.left>r&&t.right<o&&t.top>s&&t.bottom<c),e?(t.selected&&(t.$element.removeClass("ui-selected"),t.selected=!1),t.unselecting&&(t.$element.removeClass("ui-unselecting"),t.unselecting=!1),t.selecting||(t.$element.addClass("ui-selecting"),t.selecting=!0,i._trigger("selecting",n,{selecting:t.element}))):(t.selecting&&((n.metaKey||n.ctrlKey)&&t.startselected?(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.$element.addClass("ui-selected"),t.selected=!0):(t.$element.removeClass("ui-selecting"),t.selecting=!1,t.startselected&&(t.$element.addClass("ui-unselecting"),t.unselecting=!0),i._trigger("unselecting",n,{unselecting:t.element}))),t.selected&&(n.metaKey||n.ctrlKey||t.startselected||(t.$element.removeClass("ui-selected"),t.selected=!1,t.$element.addClass("ui-unselecting"),t.unselecting=!0,i._trigger("unselecting",n,{unselecting:t.element})))))}),!1}},_mouseStop:function(e){var n=this;return this.dragged=!1,l(".ui-unselecting",this.element[0]).each(function(){var t=l.data(this,"selectable-item");t.$element.removeClass("ui-unselecting"),t.unselecting=!1,t.startselected=!1,n._trigger("unselected",e,{unselected:t.element})}),l(".ui-selecting",this.element[0]).each(function(){var t=l.data(this,"selectable-item");t.$element.removeClass("ui-selecting").addClass("ui-selected"),t.selecting=!1,t.selected=!0,t.startselected=!0,n._trigger("selected",e,{selected:t.element})}),this._trigger("stop",e),this.helper.remove(),!1}}),function(f,t){function p(t,e,n){return e<t&&t<e+n}function g(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}f.widget("ui.sortable",f.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||g(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;0<=t;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,e){"disabled"===t?(this.options[t]=e,this.widget().toggleClass("ui-sortable-disabled",!!e)):f.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,e){var n=null,i=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),f(t.target).parents().each(function(){if(f.data(this,a.widgetName+"-item")===a)return n=f(this),!1}),f.data(t.target,a.widgetName+"-item")===a&&(n=f(t.target)),!!n&&(!(this.options.handle&&!e&&(f(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,e,n){var i,a,r=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},f.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",r.cursor),this.storedStylesheet=f("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(a)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(i=this.containers.length-1;0<=i;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return f.ui.ddmanager&&(f.ui.ddmanager.current=this),f.ui.ddmanager&&!r.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,n,i,a,r=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-f(document).scrollTop()<r.scrollSensitivity?s=f(document).scrollTop(f(document).scrollTop()-r.scrollSpeed):f(window).height()-(t.pageY-f(document).scrollTop())<r.scrollSensitivity&&(s=f(document).scrollTop(f(document).scrollTop()+r.scrollSpeed)),t.pageX-f(document).scrollLeft()<r.scrollSensitivity?s=f(document).scrollLeft(f(document).scrollLeft()-r.scrollSpeed):f(window).width()-(t.pageX-f(document).scrollLeft())<r.scrollSensitivity&&(s=f(document).scrollLeft(f(document).scrollLeft()+r.scrollSpeed))),!1!==s&&f.ui.ddmanager&&!r.dropBehaviour&&f.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;0<=e;e--)if(i=(n=this.items[e]).item[0],(a=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===i||f.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&f.contains(this.element[0],i))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),f.ui.ddmanager&&f.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,e){if(t){if(f.ui.ddmanager&&!this.options.dropBehaviour&&f.ui.ddmanager.drop(this,t),this.options.revert){var n=this,i=this.placeholder.offset(),a=this.options.axis,r={};a&&"x"!==a||(r.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(r.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,f(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;0<=t;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),f.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?f(this.domPosition.prev).after(this.currentItem):f(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},f(t).each(function(){var t=(f(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);t&&n.push((e.key||t[1]+"[]")+"="+(e.key&&e.expression?t[1]:t[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e.each(function(){n.push(f(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,a=i+this.helperProportions.height,r=t.left,s=r+t.width,o=t.top,c=o+t.height,l=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||o<i+l&&i+l<c,d="y"===this.options.axis||r<e+u&&e+u<s,f=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:r<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&o<i+this.helperProportions.height/2&&a-this.helperProportions.height/2<c},_intersectsWithPointer:function(t){var e="x"===this.options.axis||p(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||p(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=e&&n,a=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return!!i&&(this.floating?r&&"right"===r||"down"===a?2:1:a&&("down"===a?2:1))},_intersectsWithSides:function(t){var e=p(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=p(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&n||"left"===a&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(0<t?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(0<t?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(t){var e,n,i,a,r=[],s=[],o=this._connectWith();if(o&&t)for(e=o.length-1;0<=e;e--)for(n=(i=f(o[e])).length-1;0<=n;n--)(a=f.data(i[n],this.widgetFullName))&&a!==this&&!a.options.disabled&&s.push([f.isFunction(a.options.items)?a.options.items.call(a.element):f(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(s.push([f.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):f(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),e=s.length-1;0<=e;e--)s[e][0].each(function(){r.push(this)});return f(r)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=f.grep(this.items,function(t){for(var e=0;e<n.length;e++)if(n[e]===t.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var e,n,i,a,r,s,o,c,l=this.items,u=[[f.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):f(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(e=h.length-1;0<=e;e--)for(n=(i=f(h[e])).length-1;0<=n;n--)(a=f.data(i[n],this.widgetFullName))&&a!==this&&!a.options.disabled&&(u.push([f.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):f(a.options.items,a.element),a]),this.containers.push(a));for(e=u.length-1;0<=e;e--)for(r=u[e][1],n=0,c=(s=u[e][0]).length;n<c;n++)(o=f(s[n])).data(this.widgetName+"-item",r),l.push({item:o,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var e,n,i,a;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),e=this.items.length-1;0<=e;e--)(n=this.items[e]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?f(this.options.toleranceElement,n.item):n.item,t||(n.width=i.outerWidth(),n.height=i.outerHeight()),a=i.offset(),n.left=a.left,n.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)a=this.containers[e].element.offset(),this.containers[e].containerCache.left=a.left,this.containers[e].containerCache.top=a.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(n){var i,a=(n=n||this).options;a.placeholder&&a.placeholder.constructor!==String||(i=a.placeholder,a.placeholder={element:function(){var t=n.currentItem[0].nodeName.toLowerCase(),e=f("<"+t+">",n.document[0]).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===t?n.currentItem.children().each(function(){f("<td>&#160;</td>",n.document[0]).attr("colspan",f(this).attr("colspan")||1).appendTo(e)}):"img"===t&&e.attr("src",n.currentItem.attr("src")),i||e.css("visibility","hidden"),e},update:function(t,e){i&&!a.forcePlaceholderSize||(e.height()||e.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=f(a.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),a.placeholder.update(n,n.placeholder)},_contactContainers:function(t){var e,n,i,a,r,s,o,c,l,u,h=null,d=null;for(e=this.containers.length-1;0<=e;e--)if(!f.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(h&&f.contains(this.containers[e].element[0],h.element[0]))continue;h=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",t,this._uiHash(this)),this.containers[e].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(i=1e4,a=null,r=(u=h.floating||g(this.currentItem))?"left":"top",s=u?"width":"height",o=this.positionAbs[r]+this.offset.click[r],n=this.items.length-1;0<=n;n--)f.contains(this.containers[d].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(u&&!p(this.positionAbs.top+this.offset.click.top,this.items[n].top,this.items[n].height)||(c=this.items[n].item.offset()[r],l=!1,Math.abs(c-o)>Math.abs(c+this.items[n][s]-o)&&(l=!0,c+=this.items[n][s]),Math.abs(c-o)<i&&(i=Math.abs(c-o),a=this.items[n],this.direction=l?"up":"down")));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[d].element,!0),this._trigger("change",t,this._uiHash()),this.containers[d]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",t,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(t){var e=this.options,n=f.isFunction(e.helper)?f(e.helper.apply(this.element[0],[t,this.currentItem])):"clone"===e.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||f("parent"!==e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!e.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!e.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),f.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&f.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&f.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,e,n,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,f("document"===i.containment?document:window).width()-this.helperProportions.width-this.margins.left,(f("document"===i.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=f(i.containment)[0],e=f(i.containment).offset(),n="hidden"!==f(t).css("overflow"),this.containment=[e.left+(parseInt(f(t).css("borderLeftWidth"),10)||0)+(parseInt(f(t).css("paddingLeft"),10)||0)-this.margins.left,e.top+(parseInt(f(t).css("borderTopWidth"),10)||0)+(parseInt(f(t).css("paddingTop"),10)||0)-this.margins.top,e.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(f(t).css("borderLeftWidth"),10)||0)-(parseInt(f(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,e.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(f(t).css("borderTopWidth"),10)||0)-(parseInt(f(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&f.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(i[0].tagName);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:i.scrollTop())*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:i.scrollLeft())*n}},_generatePosition:function(t){var e,n,i=this.options,a=t.pageX,r=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&f.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),i.grid&&(e=this.originalPageY+Math.round((r-this.originalPageY)/i.grid[1])*i.grid[1],r=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-i.grid[1]:e+i.grid[1]:e,n=this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0],a=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-i.grid[0]:n+i.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this.counter;this._delay(function(){a===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&i.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||i.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(i.push(function(t){this._trigger("remove",t,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;0<=n;n--)e||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(n=0;n<i.length;n++)i[n].call(this,t);this._trigger("stop",t,this._uiHash())}return!(this.fromOutside=!1)},_trigger:function(){!1===f.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var e=t||this;return{helper:e.helper,placeholder:e.placeholder||f([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:t?t.element:null}}})}(J),f="ui-effects-",(h=J).effects={effect:{}},
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(u,h){var l,d=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],f=u.Color=function(t,e,n,i){return new u.Color.fn.parse(t,e,n,i)},p={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},g={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},s=f.support={},e=u("<p>")[0],v=u.each;function m(t,e,n){var i=g[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:t<0?0:i.max<t?i.max:t)}function o(s){var o=f(),c=o._rgba=[];return s=s.toLowerCase(),v(t,function(t,e){var n,i=e.re.exec(s),a=i&&e.parse(i),r=e.space||"rgba";if(a)return n=o[r](a),o[p[r].cache]=n[p[r].cache],c=o._rgba=n._rgba,!1}),c.length?("0,0,0,0"===c.join()&&u.extend(c,l.transparent),o):l[s]}function c(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}e.style.cssText="background-color:rgba(1,1,1,.5)",s.rgba=-1<e.style.backgroundColor.indexOf("rgba"),v(p,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),f.fn=u.extend(f.prototype,{parse:function(a,t,e,n){if(a===h)return this._rgba=[null,null,null,null],this;(a.jquery||a.nodeType)&&(a=u(a).css(t),t=h);var r=this,i=u.type(a),s=this._rgba=[];return t!==h&&(a=[a,t,e,n],i="array"),"string"===i?this.parse(o(a)||l._default):"array"===i?(v(p.rgba.props,function(t,e){s[e.idx]=m(a[e.idx],e)}),this):"object"===i?(v(p,a instanceof f?function(t,e){a[e.cache]&&(r[e.cache]=a[e.cache].slice())}:function(t,n){var i=n.cache;v(n.props,function(t,e){if(!r[i]&&n.to){if("alpha"===t||null==a[t])return;r[i]=n.to(r._rgba)}r[i][e.idx]=m(a[t],e,!0)}),r[i]&&u.inArray(null,r[i].slice(0,3))<0&&(r[i][3]=1,n.from&&(r._rgba=n.from(r[i])))}),this):void 0},is:function(t){var a=f(t),r=!0,s=this;return v(p,function(t,e){var n,i=a[e.cache];return i&&(n=s[e.cache]||e.to&&e.to(s._rgba)||[],v(e.props,function(t,e){if(null!=i[e.idx])return r=i[e.idx]===n[e.idx]})),r}),r},_space:function(){var n=[],i=this;return v(p,function(t,e){i[e.cache]&&n.push(t)}),n.pop()},transition:function(t,s){var o=f(t),e=o._space(),n=p[e],i=0===this.alpha()?f("transparent"):this,c=i[n.cache]||n.to(i._rgba),l=c.slice();return o=o[n.cache],v(n.props,function(t,e){var n=e.idx,i=c[n],a=o[n],r=g[e.type]||{};null!==a&&(l[n]=null===i?a:(r.mod&&(a-i>r.mod/2?i+=r.mod:i-a>r.mod/2&&(i-=r.mod)),m((a-i)*s+i,e)))}),this[e](l)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),n=e.pop(),i=f(t)._rgba;return f(u.map(e,function(t,e){return(1-n)*i[e]+n*t}))},toRgbaString:function(){var t="rgba(",e=u.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=u.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),n=e.pop();return t&&e.push(~~(255*n)),"#"+u.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,p.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,a=t[1]/255,r=t[2]/255,s=t[3],o=Math.max(i,a,r),c=Math.min(i,a,r),l=o-c,u=o+c,h=.5*u;return e=c===o?0:i===o?60*(a-r)/l+360:a===o?60*(r-i)/l+120:60*(i-a)/l+240,n=0===l?0:h<=.5?l/u:l/(2-u),[Math.round(e)%360,n,h,null==s?1:s]},p.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],a=t[3],r=i<=.5?i*(1+n):i+n-i*n,s=2*i-r;return[Math.round(255*c(s,r,e+1/3)),Math.round(255*c(s,r,e)),Math.round(255*c(s,r,e-1/3)),a]},v(p,function(c,t){var n=t.props,s=t.cache,o=t.to,l=t.from;f.fn[c]=function(t){if(o&&!this[s]&&(this[s]=o(this._rgba)),t===h)return this[s].slice();var e,i=u.type(t),a="array"===i||"object"===i?t:arguments,r=this[s].slice();return v(n,function(t,e){var n=a["object"===i?t:e.idx];null==n&&(n=r[e.idx]),r[e.idx]=m(n,e)}),l?((e=f(l(r)))[s]=r,e):f(r)},v(n,function(s,o){f.fn[s]||(f.fn[s]=function(t){var e,n=u.type(t),i="alpha"===s?this._hsla?"hsla":"rgba":c,a=this[i](),r=a[o.idx];return"undefined"===n?r:("function"===n&&(t=t.call(this,r),n=u.type(t)),null==t&&o.empty?this:("string"===n&&(e=d.exec(t))&&(t=r+parseFloat(e[2])*("+"===e[1]?1:-1)),a[o.idx]=t,this[i](a)))})})}),f.hook=function(t){var e=t.split(" ");v(e,function(t,r){u.cssHooks[r]={set:function(t,e){var n,i,a="";if("transparent"!==e&&("string"!==u.type(e)||(n=o(e)))){if(e=f(n||e),!s.rgba&&1!==e._rgba[3]){for(i="backgroundColor"===r?t.parentNode:t;(""===a||"transparent"===a)&&i&&i.style;)try{a=u.css(i,"backgroundColor"),i=i.parentNode}catch(t){}e=e.blend(a&&"transparent"!==a?a:"_default")}e=e.toRgbaString()}try{t.style[r]=e}catch(t){}}},u.fx.step[r]=function(t){t.colorInit||(t.start=f(t.elem,r),t.end=f(t.end),t.colorInit=!0),u.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})},f.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),u.cssHooks.borderColor={expand:function(n){var i={};return v(["Top","Right","Bottom","Left"],function(t,e){i["border"+e+"Color"]=n}),i}},l=u.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(J),function(){var r,a,s,o=["add","remove","toggle"],c={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function l(t){var e,n,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)"string"==typeof i[e=i[n]]&&(a[h.camelCase(e)]=i[e]);else for(e in i)"string"==typeof i[e]&&(a[e]=i[e]);return a}h.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){h.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(J.style(t.elem,e,t.end),t.setAttr=!0)}}),h.fn.addBack||(h.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),h.effects.animateClass=function(a,t,e,n){var r=h.speed(t,e,n);return this.queue(function(){var t,n=h(this),e=n.attr("class")||"",i=r.children?n.find("*").addBack():n;i=i.map(function(){return{el:h(this),start:l(this)}}),(t=function(){h.each(o,function(t,e){a[e]&&n[e+"Class"](a[e])})})(),i=i.map(function(){return this.end=l(this.el[0]),this.diff=function(t,e){var n,i,a={};for(n in e)i=e[n],t[n]!==i&&(c[n]||!h.fx.step[n]&&isNaN(parseFloat(i))||(a[n]=i));return a}(this.start,this.end),this}),n.attr("class",e),i=i.map(function(){var t=this,e=h.Deferred(),n=h.extend({},r,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,n),e.promise()}),h.when.apply(h,i.get()).done(function(){t(),h.each(arguments,function(){var e=this.el;h.each(this.diff,function(t){e.css(t,"")})}),r.complete.call(n[0])})})},h.fn.extend({addClass:(s=h.fn.addClass,function(t,e,n,i){return e?h.effects.animateClass.call(this,{add:t},e,n,i):s.apply(this,arguments)}),removeClass:(a=h.fn.removeClass,function(t,e,n,i){return 1<arguments.length?h.effects.animateClass.call(this,{remove:t},e,n,i):a.apply(this,arguments)}),toggleClass:(r=h.fn.toggleClass,function(t,e,n,i,a){return"boolean"==typeof e||void 0===e?n?h.effects.animateClass.call(this,e?{add:t}:{remove:t},n,i,a):r.apply(this,arguments):h.effects.animateClass.call(this,{toggle:t},e,n,i)}),switchClass:function(t,e,n,i,a){return h.effects.animateClass.call(this,{add:e,remove:t},n,i,a)}})}(),function(){function i(t,e,n,i){return h.isPlainObject(t)&&(t=(e=t).effect),t={effect:t},null==e&&(e={}),h.isFunction(e)&&(i=e,n=null,e={}),("number"==typeof e||h.fx.speeds[e])&&(i=n,n=e,e={}),h.isFunction(n)&&(i=n,n=null),e&&h.extend(t,e),n=n||e.duration,t.duration=h.fx.off?0:"number"==typeof n?n:n in h.fx.speeds?h.fx.speeds[n]:h.fx.speeds._default,t.complete=i||e.complete,t}function n(t){return!(t&&"number"!=typeof t&&!h.fx.speeds[t])||"string"==typeof t&&!h.effects.effect[t]||!!h.isFunction(t)||"object"==typeof t&&!t.effect}var a,r,s;h.extend(h.effects,{version:"1.10.3",save:function(t,e){for(var n=0;n<e.length;n++)null!==e[n]&&t.data(f+e[n],t[0].style[e[n]])},restore:function(t,e){var n,i;for(i=0;i<e.length;i++)null!==e[i]&&(void 0===(n=t.data(f+e[i]))&&(n=""),t.css(e[i],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var i={width:n.outerWidth(!0),height:n.outerHeight(!0),float:n.css("float")},t=h("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:n.width(),height:n.height()},a=document.activeElement;try{a.id}catch(t){a=document.body}return n.wrap(t),(n[0]===a||h.contains(n[0],a))&&h(a).focus(),t=n.parent(),"static"===n.css("position")?(t.css({position:"relative"}),n.css({position:"relative"})):(h.extend(i,{position:n.css("position"),zIndex:n.css("z-index")}),h.each(["top","left","bottom","right"],function(t,e){i[e]=n.css(e),isNaN(parseInt(i[e],10))&&(i[e]="auto")}),n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(e),t.css(i).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===e||h.contains(t[0],e))&&h(e).focus()),t},setTransition:function(i,t,a,r){return r=r||{},h.each(t,function(t,e){var n=i.cssUnit(e);0<n[0]&&(r[e]=n[0]*a+n[1])}),r}}),h.fn.extend({effect:function(){var r=i.apply(this,arguments),t=r.mode,e=r.queue,s=h.effects.effect[r.effect];if(h.fx.off||!s)return t?this[t](r.duration,r.complete):this.each(function(){r.complete&&r.complete.call(this)});function n(t){var e=h(this),n=r.complete,i=r.mode;function a(){h.isFunction(n)&&n.call(e[0]),h.isFunction(t)&&t()}(e.is(":hidden")?"hide"===i:"show"===i)?(e[i](),a()):s.call(e[0],r,a)}return!1===e?this.each(n):this.queue(e||"fx",n)},show:(s=h.fn.show,function(t){if(n(t))return s.apply(this,arguments);var e=i.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(r=h.fn.hide,function(t){if(n(t))return r.apply(this,arguments);var e=i.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(a=h.fn.toggle,function(t){if(n(t)||"boolean"==typeof t)return a.apply(this,arguments);var e=i.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(t){var n=this.css(t),i=[];return h.each(["em","px","%","pt"],function(t,e){0<n.indexOf(e)&&(i=[parseFloat(n),e])}),i}})}(),d={},h.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){d[t]=function(t){return Math.pow(t,e+2)}}),h.extend(d,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),h.each(d,function(t,e){h.easing["easeIn"+t]=e,h.easing["easeOut"+t]=function(t){return 1-e(1-t)},h.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}}),p=J,g=0,m={},(v={}).height=v.paddingTop=v.paddingBottom=v.borderTopWidth=v.borderBottomWidth="hide",m.height=m.paddingTop=m.paddingBottom=m.borderTopWidth=m.borderBottomWidth="show",p.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=p(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():p(),content:this.active.length?this.active.next():p()}},_createIcons:function(){var t=this.options.icons;t&&(p("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){"active"!==t?("event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e)):this._activate(e)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var e=p.ui.keyCode,n=this.headers.length,i=this.headers.index(t.target),a=!1;switch(t.keyCode){case e.RIGHT:case e.DOWN:a=this.headers[(i+1)%n];break;case e.LEFT:case e.UP:a=this.headers[(i-1+n)%n];break;case e.SPACE:case e.ENTER:this._eventHandler(t);break;case e.HOME:a=this.headers[0];break;case e.END:a=this.headers[n-1]}a&&(p(t.target).attr("tabIndex",-1),p(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===p.ui.keyCode.UP&&t.ctrlKey&&p(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=p()):!1===t.active?this._activate(0):this.active.length&&!p.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=p()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var n,t=this.options,e=t.heightStyle,i=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++g);this.active=this._findActive(t.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var e=p(this),n=e.attr("id"),i=e.next(),a=i.attr("id");n||(n=r+"-header-"+t,e.attr("id",n)),a||(a=r+"-panel-"+t,i.attr("id",a)),e.attr("aria-controls",a),i.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(t.event),"fill"===e?(n=i.height(),this.element.siblings(":visible").each(function(){var t=p(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(n-=t.outerHeight(!0))}),this.headers.each(function(){n-=p(this).outerHeight(!0)}),this.headers.next().each(function(){p(this).height(Math.max(0,n-p(this).innerHeight()+p(this).height()))}).css("overflow","auto")):"auto"===e&&(n=0,this.headers.next().each(function(){n=Math.max(n,p(this).css("height","").height())}).height(n))},_activate:function(t){var e=this._findActive(t)[0];e!==this.active[0]&&(e=e||this.active[0],this._eventHandler({target:e,currentTarget:e,preventDefault:p.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):p()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&p.each(t.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var e=this.options,n=this.active,i=p(t.currentTarget),a=i[0]===n[0],r=a&&e.collapsible,s=r?p():i.next(),o=n.next(),c={oldHeader:n,oldPanel:o,newHeader:r?p():i,newPanel:s};t.preventDefault(),a&&!e.collapsible||!1===this._trigger("beforeActivate",t,c)||(e.active=!r&&this.headers.index(i),this.active=a?p():i,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),e.icons&&n.children(".ui-accordion-header-icon").removeClass(e.icons.activeHeader).addClass(e.icons.header),a||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),e.icons&&i.children(".ui-accordion-header-icon").removeClass(e.icons.header).addClass(e.icons.activeHeader),i.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var e=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=e,this.prevHide=n,this.options.animate?this._animate(e,n,t):(n.hide(),e.show(),this._toggleComplete(t)),n.attr({"aria-expanded":"false","aria-hidden":"true"}),n.prev().attr("aria-selected","false"),e.length&&n.length?n.prev().attr("tabIndex",-1):e.length&&this.headers.filter(function(){return 0===p(this).attr("tabIndex")}).attr("tabIndex",-1),e.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,n,e){var i,a,r,s=this,o=0,c=t.length&&(!n.length||t.index()<n.index()),l=this.options.animate||{},u=c&&l.down||l,h=function(){s._toggleComplete(e)};return"number"==typeof u&&(r=u),"string"==typeof u&&(a=u),a=a||u.easing||l.easing,r=r||u.duration||l.duration,n.length?t.length?(i=t.show().outerHeight(),n.animate(v,{duration:r,easing:a,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(m,{duration:r,easing:a,complete:h,step:function(t,e){e.now=Math.round(t),"height"!==e.prop?o+=e.now:"content"!==s.options.heightStyle&&(e.now=Math.round(i-n.outerHeight()-o),o=0)}})):n.animate(v,r,a,h):t.animate(m,r,a,h)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),x=0,(y=J).widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var n,i,a,t=this.element[0].nodeName.toLowerCase(),e="textarea"===t,r="input"===t;this.isMultiLine=!!e||!r&&this.element.prop("isContentEditable"),this.valueMethod=this.element[e||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(t){if(this.element.prop("readOnly"))i=a=n=!0;else{i=a=n=!1;var e=y.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:n=!0,this._move("previousPage",t);break;case e.PAGE_DOWN:n=!0,this._move("nextPage",t);break;case e.UP:n=!0,this._keyEvent("previous",t);break;case e.DOWN:n=!0,this._keyEvent("next",t);break;case e.ENTER:case e.NUMPAD_ENTER:this.menu.active&&(n=!0,t.preventDefault(),this.menu.select(t));break;case e.TAB:this.menu.active&&this.menu.select(t);break;case e.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(t),t.preventDefault());break;default:i=!0,this._searchTimeout(t)}}},keypress:function(t){if(n)return n=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||t.preventDefault());if(!i){var e=y.ui.keyCode;switch(t.keyCode){case e.PAGE_UP:this._move("previousPage",t);break;case e.PAGE_DOWN:this._move("nextPage",t);break;case e.UP:this._keyEvent("previous",t);break;case e.DOWN:this._keyEvent("next",t)}}},input:function(t){if(a)return a=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),this._change(t))}}),this._initSource(),this.menu=y("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];y(t.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(t){t.target===e.element[0]||t.target===n||y.contains(n,t.target)||e.close()})})},menufocus:function(t,e){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){y(t.target).trigger(t.originalEvent)});var n=e.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(t,e){var n=e.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",t,{item:n})&&this._value(n.value),this.term=this._value(),this.close(t),this.selectedItem=n}}),this.liveRegion=y("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?y(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var n,i,a=this;y.isArray(this.options.source)?(n=this.options.source,this.source=function(t,e){e(y.ui.autocomplete.filter(n,t.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,e){a.xhr&&a.xhr.abort(),a.xhr=y.ajax({url:i,data:t,dataType:"json",success:function(t){e(t)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=this,n=++x;return function(t){n===x&&e.__response(t),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:y.map(t,function(t){return"string"==typeof t?{label:t,value:t}:y.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var e=this.menu.element.empty();this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),e.position(y.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(n,t){var i=this;y.each(t,function(t,e){i._renderItemData(n,e)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(t,e){return y("<li>").append(y("<a>").text(e.label)).appendTo(t)},_move:function(t,e){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e);this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),y.extend(y.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,e){var n=new RegExp(y.ui.autocomplete.escapeRegex(e),"i");return y.grep(t,function(t){return n.test(t.label||t.value||t)})}}),y.widget("ui.autocomplete",y.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(1<t?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}}),M="ui-button ui-widget ui-state-default ui-corner-all",T="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",E=function(){var t=_(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},A=function(t){var e=t.name,n=t.form,i=_([]);return e&&(e=e.replace(/'/g,"\\'"),i=n?_(n).find("[name='"+e+"']"):_("[name='"+e+"']",t.ownerDocument).filter(function(){return!this.form})),i},(_=J).widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,E),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var e=this,n=this.options,t="checkbox"===this.type||"radio"===this.type,i=t?"":"ui-state-active",a="ui-state-focus";null===n.label&&(n.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(M).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){n.disabled||this===w&&_(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){n.disabled||_(this).removeClass(i)}).bind("click"+this.eventNamespace,function(t){n.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){e.buttonElement.addClass(a)}).bind("blur"+this.eventNamespace,function(){e.buttonElement.removeClass(a)}),t&&(this.element.bind("change"+this.eventNamespace,function(){C||e.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){n.disabled||(C=!1,k=t.pageX,S=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){n.disabled||k===t.pageX&&S===t.pageY||(C=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled||C)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled||C)return!1;_(this).addClass("ui-state-active"),e.buttonElement.attr("aria-pressed","true");var t=e.element[0];A(t).not(t).map(function(){return _(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(n.disabled)return!1;_(this).addClass("ui-state-active"),w=this,e.document.one("mouseup",function(){w=null})}).bind("mouseup"+this.eventNamespace,function(){if(n.disabled)return!1;_(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(n.disabled)return!1;t.keyCode!==_.ui.keyCode.SPACE&&t.keyCode!==_.ui.keyCode.ENTER||_(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){_(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===_.ui.keyCode.SPACE&&_(this).click()})),this._setOption("disabled",n.disabled),this._resetButton()},_determineButtonType:function(){var t,e,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(M+" ui-state-hover ui-state-active  "+T).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){this._super(t,e),"disabled"!==t?this._resetButton():e?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?A(this.element[0]).each(function(){_(this).is(":checked")?_(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):_(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(T),e=_("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,i=n.primary&&n.secondary,a=[];n.primary||n.secondary?(this.options.text&&a.push("ui-button-text-icon"+(i?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(a.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",_.trim(e)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),_.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return _(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return _(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),function(k,c){k.extend(k.ui,{datepicker:{version:"1.10.3"}});var a,h="datepicker";function t(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},k.extend(this._defaults,this.regional[""]),this.dpDiv=n(k("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(e,"mouseout",function(){k(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).removeClass("ui-datepicker-next-hover")}).delegate(e,"mouseover",function(){k.datepicker._isDisabledDatepicker(a.inline?t.parent()[0]:a.input[0])||(k(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),k(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&k(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&k(this).addClass("ui-datepicker-next-hover"))})}function d(t,e){for(var n in k.extend(t,e),e)null==e[n]&&(t[n]=e[n]);return t}k.extend(t.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return d(this._defaults,t||{}),this},_attachDatepicker:function(t,e){var n,i,a;i="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(a=this._newInst(k(t),i)).settings=k.extend({},e||{}),"input"===n?this._connectDatepicker(t,a):i&&this._inlineDatepicker(t,a)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?n(k("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,e){var n=k(t);e.append=k([]),e.trigger=k([]),n.hasClass(this.markerClassName)||(this._attachments(n,e),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(e),k.data(t,h,e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var n,i,a,r=this._get(e,"appendText"),s=this._get(e,"isRTL");e.append&&e.append.remove(),r&&(e.append=k("<span class='"+this._appendClass+"'>"+r+"</span>"),t[s?"before":"after"](e.append)),t.unbind("focus",this._showDatepicker),e.trigger&&e.trigger.remove(),"focus"!==(n=this._get(e,"showOn"))&&"both"!==n||t.focus(this._showDatepicker),"button"!==n&&"both"!==n||(i=this._get(e,"buttonText"),a=this._get(e,"buttonImage"),e.trigger=k(this._get(e,"buttonImageOnly")?k("<img/>").addClass(this._triggerClass).attr({src:a,alt:i,title:i}):k("<button type='button'></button>").addClass(this._triggerClass).html(a?k("<img/>").attr({src:a,alt:i,title:i}):i)),t[s?"before":"after"](e.trigger),e.trigger.click(function(){return k.datepicker._datepickerShowing&&k.datepicker._lastInput===t[0]?k.datepicker._hideDatepicker():(k.datepicker._datepickerShowing&&k.datepicker._lastInput!==t[0]&&k.datepicker._hideDatepicker(),k.datepicker._showDatepicker(t[0])),!1}))},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e,n,i,a,r=new Date(2009,11,20),s=this._get(t,"dateFormat");s.match(/[DM]/)&&(e=function(t){for(a=i=n=0;a<t.length;a++)t[a].length>n&&(n=t[a].length,i=a);return i},r.setMonth(e(this._get(t,s.match(/MM/)?"monthNames":"monthNamesShort"))),r.setDate(e(this._get(t,s.match(/DD/)?"dayNames":"dayNamesShort"))+20-r.getDay())),t.input.attr("size",this._formatDate(t,r).length)}},_inlineDatepicker:function(t,e){var n=k(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(e.dpDiv),k.data(t,h,e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,n,i,a){var r,s,o,c,l,u=this._dialogInst;return u||(this.uuid+=1,r="dp"+this.uuid,this._dialogInput=k("<input type='text' id='"+r+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),k("body").append(this._dialogInput),(u=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},k.data(this._dialogInput[0],h,u)),d(u.settings,i||{}),e=e&&e.constructor===Date?this._formatDate(u,e):e,this._dialogInput.val(e),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(s=document.documentElement.clientWidth,o=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[s/2-100+c,o/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),u.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),k.blockUI&&k.blockUI(this.dpDiv),k.data(this._dialogInput[0],h,u),this},_destroyDatepicker:function(t){var e,n=k(t),i=k.data(t,h);n.hasClass(this.markerClassName)&&(e=t.nodeName.toLowerCase(),k.removeData(t,h),"input"===e?(i.append.remove(),i.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==e&&"span"!==e||n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(e){var t,n,i=k(e),a=k.data(e,h);i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=k.map(this._disabledInputs,function(t){return t===e?null:t}))},_disableDatepicker:function(e){var t,n,i=k(e),a=k.data(e,h);i.hasClass(this.markerClassName)&&("input"===(t=e.nodeName.toLowerCase())?(e.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==t&&"span"!==t||((n=i.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=k.map(this._disabledInputs,function(t){return t===e?null:t}),this._disabledInputs[this._disabledInputs.length]=e)},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]===t)return!0;return!1},_getInst:function(t){try{return k.data(t,h)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,n){var i,a,r,s,o=this._getInst(t);if(2===arguments.length&&"string"==typeof e)return"defaults"===e?k.extend({},k.datepicker._defaults):o?"all"===e?k.extend({},o.settings):this._get(o,e):null;i=e||{},"string"==typeof e&&((i={})[e]=n),o&&(this._curInst===o&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),r=this._getMinMaxDate(o,"min"),s=this._getMinMaxDate(o,"max"),d(o.settings,i),null!==r&&i.dateFormat!==c&&i.minDate===c&&(o.settings.minDate=this._formatDate(o,r)),null!==s&&i.dateFormat!==c&&i.maxDate===c&&(o.settings.maxDate=this._formatDate(o,s)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(k(t),o),this._autoSize(o),this._setDate(o,a),this._updateAlternate(o),this._updateDatepicker(o))},_changeDatepicker:function(t,e,n){this._optionDatepicker(t,e,n)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var n=this._getInst(t);n&&(this._setDate(n,e),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(t,e){var n=this._getInst(t);return n&&!n.inline&&this._setDateFromField(n,e),n?this._getDate(n):null},_doKeyDown:function(t){var e,n,i,a=k.datepicker._getInst(t.target),r=!0,s=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,k.datepicker._datepickerShowing)switch(t.keyCode){case 9:k.datepicker._hideDatepicker(),r=!1;break;case 13:return(i=k("td."+k.datepicker._dayOverClass+":not(."+k.datepicker._currentClass+")",a.dpDiv))[0]&&k.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,i[0]),(e=k.datepicker._get(a,"onSelect"))?(n=k.datepicker._formatDate(a),e.apply(a.input?a.input[0]:null,[n,a])):k.datepicker._hideDatepicker(),!1;case 27:k.datepicker._hideDatepicker();break;case 33:k.datepicker._adjustDate(t.target,t.ctrlKey?-k.datepicker._get(a,"stepBigMonths"):-k.datepicker._get(a,"stepMonths"),"M");break;case 34:k.datepicker._adjustDate(t.target,t.ctrlKey?+k.datepicker._get(a,"stepBigMonths"):+k.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&k.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&k.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,s?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&k.datepicker._adjustDate(t.target,t.ctrlKey?-k.datepicker._get(a,"stepBigMonths"):-k.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,s?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&k.datepicker._adjustDate(t.target,t.ctrlKey?+k.datepicker._get(a,"stepBigMonths"):+k.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&k.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?k.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e,n,i=k.datepicker._getInst(t.target);if(k.datepicker._get(i,"constrainInput"))return e=k.datepicker._possibleChars(k.datepicker._get(i,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!e||-1<e.indexOf(n)},_doKeyUp:function(t){var e=k.datepicker._getInst(t.target);if(e.input.val()!==e.lastVal)try{k.datepicker.parseDate(k.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,k.datepicker._getFormatConfig(e))&&(k.datepicker._setDateFromField(e),k.datepicker._updateAlternate(e),k.datepicker._updateDatepicker(e))}catch(t){}return!0},_showDatepicker:function(t){var e,n,i,a,r,s,o;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=k("input",t.parentNode)[0]),k.datepicker._isDisabledDatepicker(t)||k.datepicker._lastInput===t)||(e=k.datepicker._getInst(t),k.datepicker._curInst&&k.datepicker._curInst!==e&&(k.datepicker._curInst.dpDiv.stop(!0,!0),e&&k.datepicker._datepickerShowing&&k.datepicker._hideDatepicker(k.datepicker._curInst.input[0])),!1!==(i=(n=k.datepicker._get(e,"beforeShow"))?n.apply(t,[t,e]):{})&&(d(e.settings,i),e.lastVal=null,k.datepicker._lastInput=t,k.datepicker._setDateFromField(e),k.datepicker._inDialog&&(t.value=""),k.datepicker._pos||(k.datepicker._pos=k.datepicker._findPos(t),k.datepicker._pos[1]+=t.offsetHeight),a=!1,k(t).parents().each(function(){return!(a|="fixed"===k(this).css("position"))}),r={left:k.datepicker._pos[0],top:k.datepicker._pos[1]},k.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),k.datepicker._updateDatepicker(e),r=k.datepicker._checkOffset(e,r,a),e.dpDiv.css({position:k.datepicker._inDialog&&k.blockUI?"static":a?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),e.inline||(s=k.datepicker._get(e,"showAnim"),o=k.datepicker._get(e,"duration"),e.dpDiv.zIndex(k(t).zIndex()+1),k.datepicker._datepickerShowing=!0,k.effects&&k.effects.effect[s]?e.dpDiv.show(s,k.datepicker._get(e,"showOptions"),o):e.dpDiv[s||"show"](s?o:null),k.datepicker._shouldFocusInput(e)&&e.input.focus(),k.datepicker._curInst=e)))},_updateDatepicker:function(t){this.maxRows=4,(a=t).dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e,n=this._getNumberOfMonths(t),i=n[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<i&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",17*i+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===k.datepicker._curInst&&k.datepicker._datepickerShowing&&k.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(e=t.yearshtml,setTimeout(function(){e===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),e=t.yearshtml=null},0))},_shouldFocusInput:function(t){return t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&!t.input.is(":focus")},_checkOffset:function(t,e,n){var i=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,s=t.input?t.input.outerHeight():0,o=document.documentElement.clientWidth+(n?0:k(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:k(document).scrollTop());return e.left-=this._get(t,"isRTL")?i-r:0,e.left-=n&&e.left===t.input.offset().left?k(document).scrollLeft():0,e.top-=n&&e.top===t.input.offset().top+s?k(document).scrollTop():0,e.left-=Math.min(e.left,e.left+i>o&&i<o?Math.abs(e.left+i-o):0),e.top-=Math.min(e.top,e.top+a>c&&a<c?Math.abs(a+s):0),e},_findPos:function(t){for(var e,n=this._getInst(t),i=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||k.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];return[(e=k(t).offset()).left,e.top]},_hideDatepicker:function(t){var e,n,i,a,r=this._curInst;!r||t&&r!==k.data(t,h)||this._datepickerShowing&&(e=this._get(r,"showAnim"),n=this._get(r,"duration"),i=function(){k.datepicker._tidyDialog(r)},k.effects&&(k.effects.effect[e]||k.effects[e])?r.dpDiv.hide(e,k.datepicker._get(r,"showOptions"),n,i):r.dpDiv["slideDown"===e?"slideUp":"fadeIn"===e?"fadeOut":"hide"](e?n:null,i),e||i(),this._datepickerShowing=!1,(a=this._get(r,"onClose"))&&a.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),k.blockUI&&(k.unblockUI(),k("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(k.datepicker._curInst){var e=k(t.target),n=k.datepicker._getInst(e[0]);(e[0].id===k.datepicker._mainDivId||0!==e.parents("#"+k.datepicker._mainDivId).length||e.hasClass(k.datepicker.markerClassName)||e.closest("."+k.datepicker._triggerClass).length||!k.datepicker._datepickerShowing||k.datepicker._inDialog&&k.blockUI)&&(!e.hasClass(k.datepicker.markerClassName)||k.datepicker._curInst===n)||k.datepicker._hideDatepicker()}},_adjustDate:function(t,e,n){var i=k(t),a=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(a,e+("M"===n?this._get(a,"showCurrentAtPos"):0),n),this._updateDatepicker(a))},_gotoToday:function(t){var e,n=k(t),i=this._getInst(n[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(e=new Date,i.selectedDay=e.getDate(),i.drawMonth=i.selectedMonth=e.getMonth(),i.drawYear=i.selectedYear=e.getFullYear()),this._notifyChange(i),this._adjustDate(n)},_selectMonthYear:function(t,e,n){var i=k(t),a=this._getInst(i[0]);a["selected"+("M"===n?"Month":"Year")]=a["draw"+("M"===n?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(i)},_selectDay:function(t,e,n,i){var a,r=k(t);k(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((a=this._getInst(r[0])).selectedDay=a.currentDay=k("a",i).html(),a.selectedMonth=a.currentMonth=e,a.selectedYear=a.currentYear=n,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var e=k(t);this._selectDate(e,"")},_selectDate:function(t,e){var n,i=k(t),a=this._getInst(i[0]);e=null!=e?e:this._formatDate(a),a.input&&a.input.val(e),this._updateAlternate(a),(n=this._get(a,"onSelect"))?n.apply(a.input?a.input[0]:null,[e,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var e,n,i,a=this._get(t,"altField");a&&(e=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),i=this.formatDate(e,n,this._getFormatConfig(t)),k(a).each(function(){k(this).val(i)}))},noWeekends:function(t){var e=t.getDay();return[0<e&&e<6,""]},iso8601Week:function(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1},parseDate:function(n,r,t){if(null==n||null==r)throw"Invalid arguments";if(""===(r="object"==typeof r?r.toString():r+""))return null;var i,e,a,s,o=0,c=(t?t.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),u=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,h=(t?t.dayNames:null)||this._defaults.dayNames,d=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,f=(t?t.monthNames:null)||this._defaults.monthNames,p=-1,g=-1,v=-1,m=-1,y=!1,b=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e},x=function(t){var e=b(t),n=new RegExp("^\\d{1,"+("@"===t?14:"!"===t?20:"y"===t&&e?4:"o"===t?3:2)+"}"),i=r.substring(o).match(n);if(!i)throw"Missing number at position "+o;return o+=i[0].length,parseInt(i[0],10)},_=function(t,e,n){var i=-1,a=k.map(b(t)?n:e,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)});if(k.each(a,function(t,e){var n=e[1];if(r.substr(o,n.length).toLowerCase()===n.toLowerCase())return i=e[0],o+=n.length,!1}),-1!==i)return i+1;throw"Unknown name at position "+o},w=function(){if(r.charAt(o)!==n.charAt(i))throw"Unexpected literal at position "+o;o++};for(i=0;i<n.length;i++)if(y)"'"!==n.charAt(i)||b("'")?w():y=!1;else switch(n.charAt(i)){case"d":v=x("d");break;case"D":_("D",u,h);break;case"o":m=x("o");break;case"m":g=x("m");break;case"M":g=_("M",d,f);break;case"y":p=x("y");break;case"@":p=(s=new Date(x("@"))).getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"!":p=(s=new Date((x("!")-this._ticksTo1970)/1e4)).getFullYear(),g=s.getMonth()+1,v=s.getDate();break;case"'":b("'")?w():y=!0;break;default:w()}if(o<r.length&&(a=r.substr(o),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=l?0:-100)),-1<m)for(g=1,v=m;;){if(v<=(e=this._getDaysInMonth(p,g-1)))break;g++,v-=e}if((s=this._daylightSavingAdjust(new Date(p,g-1,v))).getFullYear()!==p||s.getMonth()+1!==g||s.getDate()!==v)throw"Invalid date";return s},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(n,t,e){if(!t)return"";var i,a=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,r=(e?e.dayNames:null)||this._defaults.dayNames,s=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,o=(e?e.monthNames:null)||this._defaults.monthNames,c=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e},l=function(t,e,n){var i=""+e;if(c(t))for(;i.length<n;)i="0"+i;return i},u=function(t,e,n,i){return c(t)?i[e]:n[e]},h="",d=!1;if(t)for(i=0;i<n.length;i++)if(d)"'"!==n.charAt(i)||c("'")?h+=n.charAt(i):d=!1;else switch(n.charAt(i)){case"d":h+=l("d",t.getDate(),2);break;case"D":h+=u("D",t.getDay(),a,r);break;case"o":h+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=l("m",t.getMonth()+1,2);break;case"M":h+=u("M",t.getMonth(),s,o);break;case"y":h+=c("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":h+=t.getTime();break;case"!":h+=1e4*t.getTime()+this._ticksTo1970;break;case"'":c("'")?h+="'":d=!0;break;default:h+=n.charAt(i)}return h},_possibleChars:function(n){var i,t="",e=!1,a=function(t){var e=i+1<n.length&&n.charAt(i+1)===t;return e&&i++,e};for(i=0;i<n.length;i++)if(e)"'"!==n.charAt(i)||a("'")?t+=n.charAt(i):e=!1;else switch(n.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":a("'")?t+="'":e=!0;break;default:t+=n.charAt(i)}return t},_get:function(t,e){return t.settings[e]!==c?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!==t.lastVal){var n=this._get(t,"dateFormat"),i=t.lastVal=t.input?t.input.val():null,a=this._getDefaultDate(t),r=a,s=this._getFormatConfig(t);try{r=this.parseDate(n,i,s)||a}catch(t){i=e?"":i}t.selectedDay=r.getDate(),t.drawMonth=t.selectedMonth=r.getMonth(),t.drawYear=t.selectedYear=r.getFullYear(),t.currentDay=i?r.getDate():0,t.currentMonth=i?r.getMonth():0,t.currentYear=i?r.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(o,t,e){var n,i,a=null==t||""===t?e:"string"==typeof t?function(t){try{return k.datepicker.parseDate(k.datepicker._get(o,"dateFormat"),t,k.datepicker._getFormatConfig(o))}catch(t){}for(var e=(t.toLowerCase().match(/^c/)?k.datepicker._getDate(o):null)||new Date,n=e.getFullYear(),i=e.getMonth(),a=e.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,s=r.exec(t);s;){switch(s[2]||"d"){case"d":case"D":a+=parseInt(s[1],10);break;case"w":case"W":a+=7*parseInt(s[1],10);break;case"m":case"M":i+=parseInt(s[1],10),a=Math.min(a,k.datepicker._getDaysInMonth(n,i));break;case"y":case"Y":n+=parseInt(s[1],10),a=Math.min(a,k.datepicker._getDaysInMonth(n,i))}s=r.exec(t)}return new Date(n,i,a)}(t):"number"==typeof t?isNaN(t)?e:(n=t,(i=new Date).setDate(i.getDate()+n),i):new Date(t.getTime());return(a=a&&"Invalid Date"===a.toString()?e:a)&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(12<t.getHours()?t.getHours()+2:0),t):null},_setDate:function(t,e,n){var i=!e,a=t.selectedMonth,r=t.selectedYear,s=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=s.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=s.getMonth(),t.drawYear=t.selectedYear=t.currentYear=s.getFullYear(),a===t.selectedMonth&&r===t.selectedYear||n||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(i?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""===t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){k.datepicker._adjustDate(n,-e,"M")},next:function(){k.datepicker._adjustDate(n,+e,"M")},hide:function(){k.datepicker._hideDatepicker()},today:function(){k.datepicker._gotoToday(n)},selectDay:function(){return k.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return k.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return k.datepicker._selectMonthYear(n,this,"Y"),!1}};k(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e,n,i,a,r,s,o,c,l,u,h,d,f,p,g,v,m,y,b,x,_,w,k,S,C,M,T,E,A,O,P,D,I,N,j,z,H,L,R,W=new Date,F=this._daylightSavingAdjust(new Date(W.getFullYear(),W.getMonth(),W.getDate())),$=this._get(t,"isRTL"),B=this._get(t,"showButtonPanel"),V=this._get(t,"hideIfNoPrevNext"),q=this._get(t,"navigationAsDateFormat"),U=this._getNumberOfMonths(t),Y=this._get(t,"showCurrentAtPos"),G=this._get(t,"stepMonths"),K=1!==U[0]||1!==U[1],X=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(t,"min"),Q=this._getMinMaxDate(t,"max"),J=t.drawMonth-Y,tt=t.drawYear;if(J<0&&(J+=12,tt--),Q)for(e=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-U[0]*U[1]+1,Q.getDate())),e=Z&&e<Z?Z:e;this._daylightSavingAdjust(new Date(tt,J,1))>e;)--J<0&&(J=11,tt--);for(t.drawMonth=J,t.drawYear=tt,n=this._get(t,"prevText"),n=q?this.formatDate(n,this._daylightSavingAdjust(new Date(tt,J-G,1)),this._getFormatConfig(t)):n,i=this._canAdjustMonth(t,-1,tt,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+n+"</span></a>":V?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"e":"w")+"'>"+n+"</span></a>",a=this._get(t,"nextText"),a=q?this.formatDate(a,this._daylightSavingAdjust(new Date(tt,J+G,1)),this._getFormatConfig(t)):a,r=this._canAdjustMonth(t,1,tt,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+a+"</span></a>":V?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+a+"'><span class='ui-icon ui-icon-circle-triangle-"+($?"w":"e")+"'>"+a+"</span></a>",s=this._get(t,"currentText"),o=this._get(t,"gotoCurrent")&&t.currentDay?X:F,s=q?this.formatDate(s,o,this._getFormatConfig(t)):s,c=t.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(t,"closeText")+"</button>",l=B?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+($?c:"")+(this._isInRange(t,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+s+"</button>":"")+($?"":c)+"</div>":"",u=parseInt(this._get(t,"firstDay"),10),u=isNaN(u)?0:u,h=this._get(t,"showWeek"),d=this._get(t,"dayNames"),f=this._get(t,"dayNamesMin"),p=this._get(t,"monthNames"),g=this._get(t,"monthNamesShort"),v=this._get(t,"beforeShowDay"),m=this._get(t,"showOtherMonths"),y=this._get(t,"selectOtherMonths"),b=this._getDefaultDate(t),x="",w=0;w<U[0];w++){for(k="",this.maxRows=4,S=0;S<U[1];S++){if(C=this._daylightSavingAdjust(new Date(tt,J,t.selectedDay)),M=" ui-corner-all",T="",K){if(T+="<div class='ui-datepicker-group",1<U[1])switch(S){case 0:T+=" ui-datepicker-group-first",M=" ui-corner-"+($?"right":"left");break;case U[1]-1:T+=" ui-datepicker-group-last",M=" ui-corner-"+($?"left":"right");break;default:T+=" ui-datepicker-group-middle",M=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+M+"'>"+(/all|left/.test(M)&&0===w?$?r:i:"")+(/all|right/.test(M)&&0===w?$?i:r:"")+this._generateMonthYearHeader(t,J,tt,Z,Q,0<w||0<S,p,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",E=h?"<th class='ui-datepicker-week-col'>"+this._get(t,"weekHeader")+"</th>":"",_=0;_<7;_++)E+="<th"+(5<=(_+u+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+d[A=(_+u)%7]+"'>"+f[A]+"</span></th>";for(T+=E+"</tr></thead><tbody>",O=this._getDaysInMonth(tt,J),tt===t.selectedYear&&J===t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,O)),P=(this._getFirstDayOfMonth(tt,J)-u+7)%7,D=Math.ceil((P+O)/7),I=K&&this.maxRows>D?this.maxRows:D,this.maxRows=I,N=this._daylightSavingAdjust(new Date(tt,J,1-P)),j=0;j<I;j++){for(T+="<tr>",z=h?"<td class='ui-datepicker-week-col'>"+this._get(t,"calculateWeek")(N)+"</td>":"",_=0;_<7;_++)H=v?v.apply(t.input?t.input[0]:null,[N]):[!0,""],R=(L=N.getMonth()!==J)&&!y||!H[0]||Z&&N<Z||Q&&Q<N,z+="<td class='"+(5<=(_+u+6)%7?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(N.getTime()===C.getTime()&&J===t.selectedMonth&&t._keyEvent||b.getTime()===N.getTime()&&b.getTime()===C.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!m?"":" "+H[1]+(N.getTime()===X.getTime()?" "+this._currentClass:"")+(N.getTime()===F.getTime()?" ui-datepicker-today":""))+"'"+(L&&!m||!H[2]?"":" title='"+H[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(L&&!m?"&#xa0;":R?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===F.getTime()?" ui-state-highlight":"")+(N.getTime()===X.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);T+=z+"</tr>"}11<++J&&(J=0,tt++),k+=T+="</tbody></table>"+(K?"</div>"+(0<U[0]&&S===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}x+=k}return x+=l,t._keyEvent=!1,x},_generateMonthYearHeader:function(t,e,n,i,a,r,s,o){var c,l,u,h,d,f,p,g,v=this._get(t,"changeMonth"),m=this._get(t,"changeYear"),y=this._get(t,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",x="";if(r||!v)x+="<span class='ui-datepicker-month'>"+s[e]+"</span>";else{for(c=i&&i.getFullYear()===n,l=a&&a.getFullYear()===n,x+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!c||u>=i.getMonth())&&(!l||u<=a.getMonth())&&(x+="<option value='"+u+"'"+(u===e?" selected='selected'":"")+">"+o[u]+"</option>");x+="</select>"}if(y||(b+=x+(!r&&v&&m?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",r||!m)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(h=this._get(t,"yearRange").split(":"),d=(new Date).getFullYear(),p=(f=function(t){var e=t.match(/c[+\-].*/)?n+parseInt(t.substring(1),10):t.match(/[+\-].*/)?d+parseInt(t,10):parseInt(t,10);return isNaN(e)?d:e})(h[0]),g=Math.max(p,f(h[1]||"")),p=i?Math.max(p,i.getFullYear()):p,g=a?Math.min(g,a.getFullYear()):g,t.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p<=g;p++)t.yearshtml+="<option value='"+p+"'"+(p===n?" selected='selected'":"")+">"+p+"</option>";t.yearshtml+="</select>",b+=t.yearshtml,t.yearshtml=null}return b+=this._get(t,"yearSuffix"),y&&(b+=(!r&&v&&m?"":"&#xa0;")+x),b+="</div>"},_adjustInstDate:function(t,e,n){var i=t.drawYear+("Y"===n?e:0),a=t.drawMonth+("M"===n?e:0),r=Math.min(t.selectedDay,this._getDaysInMonth(i,a))+("D"===n?e:0),s=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(i,a,r)));t.selectedDay=s.getDate(),t.drawMonth=t.selectedMonth=s.getMonth(),t.drawYear=t.selectedYear=s.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(t)},_restrictMinMax:function(t,e){var n=this._getMinMaxDate(t,"min"),i=this._getMinMaxDate(t,"max"),a=n&&e<n?n:e;return i&&i<a?i:a},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,n,i){var a=this._getNumberOfMonths(t),r=this._daylightSavingAdjust(new Date(n,i+(e<0?e:a[0]*a[1]),1));return e<0&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(t,r)},_isInRange:function(t,e){var n,i,a=this._getMinMaxDate(t,"min"),r=this._getMinMaxDate(t,"max"),s=null,o=null,c=this._get(t,"yearRange");return c&&(n=c.split(":"),i=(new Date).getFullYear(),s=parseInt(n[0],10),o=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(s+=i),n[1].match(/[+\-].*/)&&(o+=i)),(!a||e.getTime()>=a.getTime())&&(!r||e.getTime()<=r.getTime())&&(!s||e.getFullYear()>=s)&&(!o||e.getFullYear()<=o)},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return{shortYearCutoff:e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,n,i){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var a=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(i,n,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),a,this._getFormatConfig(t))}}),k.fn.datepicker=function(t){if(!this.length)return this;k.datepicker.initialized||(k(document).mousedown(k.datepicker._checkExternalClick),k.datepicker.initialized=!0),0===k("#"+k.datepicker._mainDivId).length&&k("body").append(k.datepicker.dpDiv);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?k.datepicker["_"+t+"Datepicker"].apply(k.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?k.datepicker["_"+t+"Datepicker"].apply(k.datepicker,[this].concat(e)):k.datepicker._attachDatepicker(this,t)}):k.datepicker["_"+t+"Datepicker"].apply(k.datepicker,[this[0]].concat(e))},k.datepicker=new t,k.datepicker.initialized=!1,k.datepicker.uuid=(new Date).getTime(),k.datepicker.version="1.10.3"}(J),P={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},D={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},(O=J).widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var e=O(this).css(t).offset().top;e<0&&O(this).css("top",t.top-e)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&O.fn.draggable&&this._makeDraggable(),this.options.resizable&&O.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?O(t):this.document.find(t||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(t=e.parent.children().eq(e.index)).length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:O.noop,enable:O.noop,close:function(t){var e=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||O(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){e._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!e&&this._trigger("focus",t),n},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=O(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"))},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(t){function e(){var t=this.document[0].activeElement;this.uiDialog[0]===t||O.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),e.call(this),this._delay(e)},_createWrapper:function(){this.uiDialog=O("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===O.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===O.ui.keyCode.TAB){var e=this.uiDialog.find(":tabbable"),n=e.filter(":first"),i=e.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(i.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=O("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){O(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=O("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),t=O("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=O("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=O("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var a=this,t=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),O.isEmptyObject(t)||O.isArray(t)&&!t.length?this.uiDialog.removeClass("ui-dialog-buttons"):(O.each(t,function(t,e){var n,i;e=O.isFunction(e)?{click:e,text:t}:e,e=O.extend({type:"button"},e),n=e.click,e.click=function(){n.apply(a.element[0],arguments)},i={icons:e.icons,text:e.showText},delete e.icons,delete e.showText,O("<button></button>",e).button(i).appendTo(a.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var n=this,i=this.options;function a(t){return{position:t.position,offset:t.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(t,e){O(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",t,a(e))},drag:function(t,e){n._trigger("drag",t,a(e))},stop:function(t,e){i.position=[e.position.left-n.document.scrollLeft(),e.position.top-n.document.scrollTop()],O(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",t,a(e))}})},_makeResizable:function(){var n=this,i=this.options,t=i.resizable,e=this.uiDialog.css("position"),a="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw";function r(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:a,start:function(t,e){O(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",t,r(e))},resize:function(t,e){n._trigger("resize",t,r(e))},stop:function(t,e){i.height=O(this).height(),i.width=O(this).width(),O(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",t,r(e))}}).css("position",e)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,a={};O.each(t,function(t,e){n._setOption(t,e),t in P&&(i=!0),t in D&&(a[t]=e)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(t,e){var n,i,a=this.uiDialog;"dialogClass"===t&&a.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&((n=a.is(":data(ui-draggable)"))&&!e&&a.draggable("destroy"),!n&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((i=a.is(":data(ui-resizable)"))&&!e&&a.resizable("destroy"),i&&"string"==typeof e&&a.resizable("option","handles",e),i||!1===e||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=O(this);return O("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!O(t.target).closest(".ui-dialog").length||!!O(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,n=this.widgetFullName;O.ui.dialog.overlayInstances||this._delay(function(){O.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(t){e._allowInteraction(t)||(t.preventDefault(),O(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=O("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),O.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(O.ui.dialog.overlayInstances--,O.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),O.ui.dialog.overlayInstances=0,!1!==O.uiBackCompat&&O.widget("ui.dialog",O.ui.dialog,{_position:function(){var t,e=this.options.position,n=[],i=[0,0];e=e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(1===(n=e.split?e.split(" "):[e[0],e[1]]).length&&(n[1]=n[0]),O.each(["left","top"],function(t,e){+n[t]===n[t]&&(i[t]=n[t],n[t]=e)}),e={my:n[0]+(i[0]<0?i[0]:"+"+i[0])+" "+n[1]+(i[1]<0?i[1]:"+"+i[1]),at:n.join(" ")}),O.extend({},O.ui.dialog.prototype.options.position,e)):O.ui.dialog.prototype.options.position,(t=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(e),t||this.uiDialog.hide()}}),N=/up|down|vertical/,j=/up|left|vertical|horizontal/,(I=J).effects.effect.blind=function(t,e){var n,i,a,r=I(this),s=["position","top","bottom","left","right","height","width"],o=I.effects.setMode(r,t.mode||"hide"),c=t.direction||"up",l=N.test(c),u=l?"height":"width",h=l?"top":"left",d=j.test(c),f={},p="show"===o;r.parent().is(".ui-effects-wrapper")?I.effects.save(r.parent(),s):I.effects.save(r,s),r.show(),i=(n=I.effects.createWrapper(r).css({overflow:"hidden"}))[u](),a=parseFloat(n.css(h))||0,f[u]=p?i:0,d||(r.css(l?"bottom":"right",0).css(l?"top":"left","auto").css({position:"absolute"}),f[h]=p?a:i+a),p&&(n.css(u,0),d||n.css(h,a+i)),n.animate(f,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){"hide"===o&&r.hide(),I.effects.restore(r,s),I.effects.removeWrapper(r),e()}})},(z=J).effects.effect.bounce=function(t,e){var n,i,a,r=z(this),s=["position","top","bottom","left","right","height","width"],o=z.effects.setMode(r,t.mode||"effect"),c="hide"===o,l="show"===o,u=t.direction||"up",h=t.distance,d=t.times||5,f=2*d+(l||c?1:0),p=t.duration/f,g=t.easing,v="up"===u||"down"===u?"top":"left",m="up"===u||"left"===u,y=r.queue(),b=y.length;for((l||c)&&s.push("opacity"),z.effects.save(r,s),r.show(),z.effects.createWrapper(r),h||(h=r["top"===v?"outerHeight":"outerWidth"]()/3),l&&((a={opacity:1})[v]=0,r.css("opacity",0).css(v,m?2*-h:2*h).animate(a,p,g)),c&&(h/=Math.pow(2,d-1)),n=(a={})[v]=0;n<d;n++)(i={})[v]=(m?"-=":"+=")+h,r.animate(i,p,g).animate(a,p,g),h=c?2*h:h/2;c&&((i={opacity:0})[v]=(m?"-=":"+=")+h,r.animate(i,p,g)),r.queue(function(){c&&r.hide(),z.effects.restore(r,s),z.effects.removeWrapper(r),e()}),1<b&&y.splice.apply(y,[1,0].concat(y.splice(b,f+1))),r.dequeue()},(H=J).effects.effect.clip=function(t,e){var n,i,a,r=H(this),s=["position","top","bottom","left","right","height","width"],o="show"===H.effects.setMode(r,t.mode||"hide"),c="vertical"===(t.direction||"vertical"),l=c?"height":"width",u=c?"top":"left",h={};H.effects.save(r,s),r.show(),n=H.effects.createWrapper(r).css({overflow:"hidden"}),a=(i="IMG"===r[0].tagName?n:r)[l](),o&&(i.css(l,0),i.css(u,a/2)),h[l]=o?a:0,h[u]=o?0:a/2,i.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),H.effects.restore(r,s),H.effects.removeWrapper(r),e()}})},(L=J).effects.effect.drop=function(t,e){var n,i=L(this),a=["position","top","bottom","left","right","opacity","height","width"],r=L.effects.setMode(i,t.mode||"hide"),s="show"===r,o=t.direction||"left",c="up"===o||"down"===o?"top":"left",l="up"===o||"left"===o?"pos":"neg",u={opacity:s?1:0};L.effects.save(i,a),i.show(),L.effects.createWrapper(i),n=t.distance||i["top"===c?"outerHeight":"outerWidth"](!0)/2,s&&i.css("opacity",0).css(c,"pos"===l?-n:n),u[c]=(s?"pos"===l?"+=":"-=":"pos"===l?"-=":"+=")+n,i.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&i.hide(),L.effects.restore(i,a),L.effects.removeWrapper(i),e()}})},(R=J).effects.effect.explode=function(t,e){var n,i,a,r,s,o,c=t.pieces?Math.round(Math.sqrt(t.pieces)):3,l=c,u=R(this),h="show"===R.effects.setMode(u,t.mode||"hide"),d=u.show().css("visibility","hidden").offset(),f=Math.ceil(u.outerWidth()/l),p=Math.ceil(u.outerHeight()/c),g=[];function v(){g.push(this),g.length===c*l&&(u.css({visibility:"visible"}),R(g).remove(),h||u.hide(),e())}for(n=0;n<c;n++)for(r=d.top+n*p,o=n-(c-1)/2,i=0;i<l;i++)a=d.left+i*f,s=i-(l-1)/2,u.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-i*f,top:-n*p}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:p,left:a+(h?s*f:0),top:r+(h?o*p:0),opacity:h?0:1}).animate({left:a+(h?0:s*f),top:r+(h?0:o*p),opacity:h?1:0},t.duration||500,t.easing,v)},(W=J).effects.effect.fade=function(t,e){var n=W(this),i=W.effects.setMode(n,t.mode||"toggle");n.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:e})},(F=J).effects.effect.fold=function(t,e){var n,i,a=F(this),r=["position","top","bottom","left","right","height","width"],s=F.effects.setMode(a,t.mode||"hide"),o="show"===s,c="hide"===s,l=t.size||15,u=/([0-9]+)%/.exec(l),h=!!t.horizFirst,d=o!==h,f=d?["width","height"]:["height","width"],p=t.duration/2,g={},v={};F.effects.save(a,r),a.show(),n=F.effects.createWrapper(a).css({overflow:"hidden"}),i=d?[n.width(),n.height()]:[n.height(),n.width()],u&&(l=parseInt(u[1],10)/100*i[c?0:1]),o&&n.css(h?{height:0,width:l}:{height:l,width:0}),g[f[0]]=o?i[0]:l,v[f[1]]=o?i[1]:0,n.animate(g,p,t.easing).animate(v,p,t.easing,function(){c&&a.hide(),F.effects.restore(a,r),F.effects.removeWrapper(a),e()})},($=J).effects.effect.highlight=function(t,e){var n=$(this),i=["backgroundImage","backgroundColor","opacity"],a=$.effects.setMode(n,t.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===a&&(r.opacity=0),$.effects.save(n,i),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&n.hide(),$.effects.restore(n,i),e()}})},(B=J).effects.effect.pulsate=function(t,e){var n,i=B(this),a=B.effects.setMode(i,t.mode||"show"),r="show"===a,s="hide"===a,o=r||"hide"===a,c=2*(t.times||5)+(o?1:0),l=t.duration/c,u=0,h=i.queue(),d=h.length;for(!r&&i.is(":visible")||(i.css("opacity",0).show(),u=1),n=1;n<c;n++)i.animate({opacity:u},l,t.easing),u=1-u;i.animate({opacity:u},l,t.easing),i.queue(function(){s&&i.hide(),e()}),1<d&&h.splice.apply(h,[1,0].concat(h.splice(d,c+1))),i.dequeue()},(V=J).effects.effect.puff=function(t,e){var n=V(this),i=V.effects.setMode(n,t.mode||"hide"),a="hide"===i,r=parseInt(t.percent,10)||150,s=r/100,o={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};V.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:e,percent:a?r:100,from:a?o:{height:o.height*s,width:o.width*s,outerHeight:o.outerHeight*s,outerWidth:o.outerWidth*s}}),n.effect(t)},V.effects.effect.scale=function(t,e){var n=V(this),i=V.extend(!0,{},t),a=V.effects.setMode(n,t.mode||"effect"),r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===a?0:100),s=t.direction||"both",o=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},l="horizontal"!==s?r/100:1,u="vertical"!==s?r/100:1;i.effect="size",i.queue=!1,i.complete=e,"effect"!==a&&(i.origin=o||["middle","center"],i.restore=!0),i.from=t.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:c),i.to={height:c.height*l,width:c.width*u,outerHeight:c.outerHeight*l,outerWidth:c.outerWidth*u},i.fade&&("show"===a&&(i.from.opacity=0,i.to.opacity=1),"hide"===a&&(i.from.opacity=1,i.to.opacity=0)),n.effect(i)},V.effects.effect.size=function(r,t){var e,n,s,o=V(this),i=["position","top","bottom","left","right","width","height","overflow","opacity"],c=["width","height","overflow"],a=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],u=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=V.effects.setMode(o,r.mode||"effect"),d=r.restore||"effect"!==h,f=r.scale||"both",p=r.origin||["middle","center"],g=o.css("position"),v=d?i:["position","top","bottom","left","right","overflow","opacity"],m={height:0,width:0,outerHeight:0,outerWidth:0};"show"===h&&o.show(),e={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===r.mode&&"show"===h?(o.from=r.to||m,o.to=r.from||e):(o.from=r.from||("show"===h?m:e),o.to=r.to||("hide"===h?m:e)),s={from:{y:o.from.height/e.height,x:o.from.width/e.width},to:{y:o.to.height/e.height,x:o.to.width/e.width}},"box"!==f&&"both"!==f||(s.from.y!==s.to.y&&(v=v.concat(l),o.from=V.effects.setTransition(o,l,s.from.y,o.from),o.to=V.effects.setTransition(o,l,s.to.y,o.to)),s.from.x!==s.to.x&&(v=v.concat(u),o.from=V.effects.setTransition(o,u,s.from.x,o.from),o.to=V.effects.setTransition(o,u,s.to.x,o.to))),"content"!==f&&"both"!==f||s.from.y!==s.to.y&&(v=v.concat(a).concat(c),o.from=V.effects.setTransition(o,a,s.from.y,o.from),o.to=V.effects.setTransition(o,a,s.to.y,o.to)),V.effects.save(o,v),o.show(),V.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),p&&(n=V.effects.getBaseline(p,e),o.from.top=(e.outerHeight-o.outerHeight())*n.y,o.from.left=(e.outerWidth-o.outerWidth())*n.x,o.to.top=(e.outerHeight-o.to.outerHeight)*n.y,o.to.left=(e.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),"content"!==f&&"both"!==f||(l=l.concat(["marginTop","marginBottom"]).concat(a),u=u.concat(["marginLeft","marginRight"]),c=i.concat(l).concat(u),o.find("*[width]").each(function(){var t=V(this),e=t.height(),n=t.width(),i=t.outerHeight(),a=t.outerWidth();d&&V.effects.save(t,c),t.from={height:e*s.from.y,width:n*s.from.x,outerHeight:i*s.from.y,outerWidth:a*s.from.x},t.to={height:e*s.to.y,width:n*s.to.x,outerHeight:e*s.to.y,outerWidth:n*s.to.x},s.from.y!==s.to.y&&(t.from=V.effects.setTransition(t,l,s.from.y,t.from),t.to=V.effects.setTransition(t,l,s.to.y,t.to)),s.from.x!==s.to.x&&(t.from=V.effects.setTransition(t,u,s.from.x,t.from),t.to=V.effects.setTransition(t,u,s.to.x,t.to)),t.css(t.from),t.animate(t.to,r.duration,r.easing,function(){d&&V.effects.restore(t,c)})})),o.animate(o.to,{queue:!1,duration:r.duration,easing:r.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===h&&o.hide(),V.effects.restore(o,v),d||("static"===g?o.css({position:"relative",top:o.to.top,left:o.to.left}):V.each(["top","left"],function(a,t){o.css(t,function(t,e){var n=parseInt(e,10),i=a?o.to.left:o.to.top;return"auto"===e?i+"px":n+i+"px"})})),V.effects.removeWrapper(o),t()}})},(q=J).effects.effect.shake=function(t,e){var n,i=q(this),a=["position","top","bottom","left","right","height","width"],r=q.effects.setMode(i,t.mode||"effect"),s=t.direction||"left",o=t.distance||20,c=t.times||3,l=2*c+1,u=Math.round(t.duration/l),h="up"===s||"down"===s?"top":"left",d="up"===s||"left"===s,f={},p={},g={},v=i.queue(),m=v.length;for(q.effects.save(i,a),i.show(),q.effects.createWrapper(i),f[h]=(d?"-=":"+=")+o,p[h]=(d?"+=":"-=")+2*o,g[h]=(d?"-=":"+=")+2*o,i.animate(f,u,t.easing),n=1;n<c;n++)i.animate(p,u,t.easing).animate(g,u,t.easing);i.animate(p,u,t.easing).animate(f,u/2,t.easing).queue(function(){"hide"===r&&i.hide(),q.effects.restore(i,a),q.effects.removeWrapper(i),e()}),1<m&&v.splice.apply(v,[1,0].concat(v.splice(m,l+1))),i.dequeue()},(U=J).effects.effect.slide=function(t,e){var n,i=U(this),a=["position","top","bottom","left","right","width","height"],r=U.effects.setMode(i,t.mode||"show"),s="show"===r,o=t.direction||"left",c="up"===o||"down"===o?"top":"left",l="up"===o||"left"===o,u={};U.effects.save(i,a),i.show(),n=t.distance||i["top"===c?"outerHeight":"outerWidth"](!0),U.effects.createWrapper(i).css({overflow:"hidden"}),s&&i.css(c,l?isNaN(n)?"-"+n:-n:n),u[c]=(s?l?"+=":"-=":l?"-=":"+=")+n,i.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&i.hide(),U.effects.restore(i,a),U.effects.removeWrapper(i),e()}})},(Y=J).effects.effect.transfer=function(t,e){var n=Y(this),i=Y(t.to),a="fixed"===i.css("position"),r=Y("body"),s=a?r.scrollTop():0,o=a?r.scrollLeft():0,c=i.offset(),l={top:c.top-s,left:c.left-o,height:i.innerHeight(),width:i.innerWidth()},u=n.offset(),h=Y("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:u.top-s,left:u.left-o,height:n.innerHeight(),width:n.innerWidth(),position:a?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),e()})},(G=J).widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,G.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(t){var e=G(t.target).closest(".ui-menu-item");!this.mouseHandled&&e.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),e.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var e=G(t.currentTarget);e.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,e)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,n)},blur:function(t){this._delay(function(){G.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){G(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=G(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var e,n,i,a,r,s=!0;function o(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(t.keyCode){case G.ui.keyCode.PAGE_UP:this.previousPage(t);break;case G.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case G.ui.keyCode.HOME:this._move("first","first",t);break;case G.ui.keyCode.END:this._move("last","last",t);break;case G.ui.keyCode.UP:this.previous(t);break;case G.ui.keyCode.DOWN:this.next(t);break;case G.ui.keyCode.LEFT:this.collapse(t);break;case G.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case G.ui.keyCode.ENTER:case G.ui.keyCode.SPACE:this._activate(t);break;case G.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,n=this.previousFilter||"",i=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),i===n?a=!0:i=n+i,r=new RegExp("^"+o(i),"i"),e=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(G(this).children("a").text())}),(e=a&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e).length||(i=String.fromCharCode(t.keyCode),r=new RegExp("^"+o(i),"i"),e=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(G(this).children("a").text())})),e.length?(this.focus(t,e),1<e.length?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}s&&t.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var t,i=this.options.icons.submenu,e=this.element.find(this.options.menus);e.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=G(this),e=t.prev("a"),n=G("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);e.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",e.attr("id"))}),(t=e.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=G(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!G.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=e.children(".ui-menu")).length&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(t){var e,n,i,a,r,s;this._hasScroll()&&(e=parseFloat(G.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(G.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-n,a=this.activeMenu.scrollTop(),r=this.activeMenu.height(),s=t.height(),i<0?this.activeMenu.scrollTop(a+i):r<i+s&&this.activeMenu.scrollTop(a+i-r+s))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(t){var e=G.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(e)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var t=n?this.element:G(e&&e.target).closest(this.element.find(".ui-menu"));t.length||(t=this.element),this._close(t),this.blur(e),this.activeMenu=t},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(n,i)},nextPage:function(t){var e,n,i;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(e=G(this)).offset().top-n-i<0}),this.focus(t,e)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var e,n,i;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(e=G(this)).offset().top-n+i}),this.focus(t,e)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||G(t.target).closest(".ui-menu-item");var e={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,e)}}),function(w,t){w.ui=w.ui||{};var a,k=Math.max,S=Math.abs,C=Math.round,i=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,o=/^\w+/,c=/%$/,l=w.fn.position;function M(t,e,n){return[parseFloat(t[0])*(c.test(t[0])?e/100:1),parseFloat(t[1])*(c.test(t[1])?n/100:1)]}function T(t,e){return parseInt(w.css(t,e),10)||0}w.position={scrollbarWidth:function(){if(void 0!==a)return a;var t,e,n=w("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),i=n.children()[0];return w("body").append(n),t=i.offsetWidth,n.css("overflow","scroll"),t===(e=i.offsetWidth)&&(e=n[0].clientWidth),n.remove(),a=t-e},getScrollInfo:function(t){var e=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),i="scroll"===e||"auto"===e&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?w.position.scrollbarWidth():0,height:i?w.position.scrollbarWidth():0}},getWithinInfo:function(t){var e=w(t||window),n=w.isWindow(e[0]);return{element:e,isWindow:n,offset:e.offset()||{left:0,top:0},scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:n?e.width():e.outerWidth(),height:n?e.height():e.outerHeight()}}},w.fn.position=function(h){if(!h||!h.of)return l.apply(this,arguments);h=w.extend({},h);var d,f,p,g,v,t,e,n,m=w(h.of),y=w.position.getWithinInfo(h.within),b=w.position.getScrollInfo(y),x=(h.collision||"flip").split(" "),_={};return t=9===(n=(e=m)[0]).nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:w.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()},m[0].preventDefault&&(h.at="left top"),f=t.width,p=t.height,g=t.offset,v=w.extend({},g),w.each(["my","at"],function(){var t,e,n=(h[this]||"").split(" ");1===n.length&&(n=i.test(n[0])?n.concat(["center"]):r.test(n[0])?["center"].concat(n):["center","center"]),n[0]=i.test(n[0])?n[0]:"center",n[1]=r.test(n[1])?n[1]:"center",t=s.exec(n[0]),e=s.exec(n[1]),_[this]=[t?t[0]:0,e?e[0]:0],h[this]=[o.exec(n[0])[0],o.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===h.at[0]?v.left+=f:"center"===h.at[0]&&(v.left+=f/2),"bottom"===h.at[1]?v.top+=p:"center"===h.at[1]&&(v.top+=p/2),d=M(_.at,f,p),v.left+=d[0],v.top+=d[1],this.each(function(){var n,t,s=w(this),o=s.outerWidth(),c=s.outerHeight(),e=T(this,"marginLeft"),i=T(this,"marginTop"),a=o+e+T(this,"marginRight")+b.width,r=c+i+T(this,"marginBottom")+b.height,l=w.extend({},v),u=M(_.my,s.outerWidth(),s.outerHeight());"right"===h.my[0]?l.left-=o:"center"===h.my[0]&&(l.left-=o/2),"bottom"===h.my[1]?l.top-=c:"center"===h.my[1]&&(l.top-=c/2),l.left+=u[0],l.top+=u[1],w.support.offsetFractions||(l.left=C(l.left),l.top=C(l.top)),n={marginLeft:e,marginTop:i},w.each(["left","top"],function(t,e){w.ui.position[x[t]]&&w.ui.position[x[t]][e](l,{targetWidth:f,targetHeight:p,elemWidth:o,elemHeight:c,collisionPosition:n,collisionWidth:a,collisionHeight:r,offset:[d[0]+u[0],d[1]+u[1]],my:h.my,at:h.at,within:y,elem:s})}),h.using&&(t=function(t){var e=g.left-l.left,n=e+f-o,i=g.top-l.top,a=i+p-c,r={target:{element:m,left:g.left,top:g.top,width:f,height:p},element:{element:s,left:l.left,top:l.top,width:o,height:c},horizontal:n<0?"left":0<e?"right":"center",vertical:a<0?"top":0<i?"bottom":"middle"};f<o&&S(e+n)<f&&(r.horizontal="center"),p<c&&S(i+a)<p&&(r.vertical="middle"),k(S(e),S(n))>k(S(i),S(a))?r.important="horizontal":r.important="vertical",h.using.call(this,t,r)}),s.offset(w.extend(l,{using:t}))})},w.ui.position={fit:{left:function(t,e){var n,i=e.within,a=i.isWindow?i.scrollLeft:i.offset.left,r=i.width,s=t.left-e.collisionPosition.marginLeft,o=a-s,c=s+e.collisionWidth-r-a;e.collisionWidth>r?0<o&&c<=0?(n=t.left+o+e.collisionWidth-r-a,t.left+=o-n):t.left=0<c&&o<=0?a:c<o?a+r-e.collisionWidth:a:0<o?t.left+=o:0<c?t.left-=c:t.left=k(t.left-s,t.left)},top:function(t,e){var n,i=e.within,a=i.isWindow?i.scrollTop:i.offset.top,r=e.within.height,s=t.top-e.collisionPosition.marginTop,o=a-s,c=s+e.collisionHeight-r-a;e.collisionHeight>r?0<o&&c<=0?(n=t.top+o+e.collisionHeight-r-a,t.top+=o-n):t.top=0<c&&o<=0?a:c<o?a+r-e.collisionHeight:a:0<o?t.top+=o:0<c?t.top-=c:t.top=k(t.top-s,t.top)}},flip:{left:function(t,e){var n,i,a=e.within,r=a.offset.left+a.scrollLeft,s=a.width,o=a.isWindow?a.scrollLeft:a.offset.left,c=t.left-e.collisionPosition.marginLeft,l=c-o,u=c+e.collisionWidth-s-o,h="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];l<0?((n=t.left+h+d+f+e.collisionWidth-s-r)<0||n<S(l))&&(t.left+=h+d+f):0<u&&(0<(i=t.left-e.collisionPosition.marginLeft+h+d+f-o)||S(i)<u)&&(t.left+=h+d+f)},top:function(t,e){var n,i,a=e.within,r=a.offset.top+a.scrollTop,s=a.height,o=a.isWindow?a.scrollTop:a.offset.top,c=t.top-e.collisionPosition.marginTop,l=c-o,u=c+e.collisionHeight-s-o,h="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,d="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,f=-2*e.offset[1];l<0?(i=t.top+h+d+f+e.collisionHeight-s-r,t.top+h+d+f>l&&(i<0||i<S(l))&&(t.top+=h+d+f)):0<u&&(n=t.top-e.collisionPosition.marginTop+h+d+f-o,t.top+h+d+f>u&&(0<n||S(n)<u)&&(t.top+=h+d+f))}},flipfit:{left:function(){w.ui.position.flip.left.apply(this,arguments),w.ui.position.fit.left.apply(this,arguments)},top:function(){w.ui.position.flip.top.apply(this,arguments),w.ui.position.fit.top.apply(this,arguments)}}},function(){var t,e,n,i,a,r=document.getElementsByTagName("body")[0],s=document.createElement("div");for(a in t=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&w.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)t.style[a]=n[a];t.appendChild(s),(e=r||document.documentElement).insertBefore(t,e.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",i=w(s).offset().left,w.support.offsetFractions=10<i&&i<11,t.innerHTML="",e.removeChild(t)}()}(J),(K=J).widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=K("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){if(void 0===t)return this.options.value;this.options.value=this._constrainedValue(t),this._refreshValue()},_constrainedValue:function(t){return void 0===t&&(t=this.options.value),this.indeterminate=!1===t,"number"!=typeof t&&(t=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,e=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=K("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}}),(X=J).widget("ui.slider",X.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,e,n=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a=[];for(e=n.values&&n.values.length||1,i.length>e&&(i.slice(e).remove(),i=i.slice(0,e)),t=i.length;t<e;t++)a.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=i.add(X(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){X(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,e="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:X.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=X("<div></div>").appendTo(this.element),e="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(e+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=X([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var e,n,i,a,r,s,o,c=this,l=this.options;return!l.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(n-c.values(t));(e<i||i===e&&(t===c._lastChangedValue||c.values(t)===l.min))&&(i=e,a=X(this),r=t)}),!1!==this._start(t,r)&&(this._mouseSliding=!0,this._handleIndex=r,a.addClass("ui-state-active").focus(),s=a.offset(),o=!X(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=o?{left:0,top:0}:{left:t.pageX-s.left-a.width()/2,top:t.pageY-s.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,n),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,a;return 1<(n=("horizontal"===this.orientation?(e=this.elementSize.width,t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/e)&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),i=this._valueMax()-this._valueMin(),a=this._valueMin()+n*i,this._trimAlignValue(a)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,a,r;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&i<n||1===e&&n<i)&&(n=i),n!==this.values(e)&&((a=this.values())[e]=n,r=this._trigger("slide",t,{handle:this.handles[e],value:n,values:a}),i=this.values(e?0:1),!1!==r&&this.values(e,n,!0))):n!==this.value()&&!1!==(r=this._trigger("slide",t,{handle:this.handles[e],value:n}))&&this.value(n)},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,e){var n,i,a;if(1<arguments.length)return this.options.values[t]=this._trimAlignValue(e),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!X.isArray(t))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,i=t,a=0;a<n.length;a+=1)n[a]=this._trimAlignValue(i[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,e){var n,i=0;switch("range"===t&&!0===this.options.range&&("min"===e?(this.options.value=this._values(0),this.options.values=null):"max"===e&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),X.isArray(this.options.values)&&(i=this.options.values.length),X.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<i;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=0<this.options.step?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=0<n?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,t,i,a,r=this.options.range,s=this.options,o=this,c=!this._animateOff&&s.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(t){n=(o.values(t)-o._valueMin())/(o._valueMax()-o._valueMin())*100,l["horizontal"===o.orientation?"left":"bottom"]=n+"%",X(this).stop(1,1)[c?"animate":"css"](l,s.animate),!0===o.options.range&&("horizontal"===o.orientation?(0===t&&o.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},s.animate),1===t&&o.range[c?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:s.animate})):(0===t&&o.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},s.animate),1===t&&o.range[c?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:s.animate}))),e=n}):(t=this.value(),i=this._valueMin(),a=this._valueMax(),n=a!==i?(t-i)/(a-i)*100:0,l["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](l,s.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},s.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:s.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},s.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:s.animate}))},_handleEvents:{keydown:function(t){var e,n,i,a=X(t.target).data("ui-slider-handle-index");switch(t.keyCode){case X.ui.keyCode.HOME:case X.ui.keyCode.END:case X.ui.keyCode.PAGE_UP:case X.ui.keyCode.PAGE_DOWN:case X.ui.keyCode.UP:case X.ui.keyCode.RIGHT:case X.ui.keyCode.DOWN:case X.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,X(t.target).addClass("ui-state-active"),!1===this._start(t,a)))return}switch(i=this.options.step,e=n=this.options.values&&this.options.values.length?this.values(a):this.value(),t.keyCode){case X.ui.keyCode.HOME:n=this._valueMin();break;case X.ui.keyCode.END:n=this._valueMax();break;case X.ui.keyCode.PAGE_UP:n=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/5);break;case X.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/5);break;case X.ui.keyCode.UP:case X.ui.keyCode.RIGHT:if(e===this._valueMax())return;n=this._trimAlignValue(e+i);break;case X.ui.keyCode.DOWN:case X.ui.keyCode.LEFT:if(e===this._valueMin())return;n=this._trimAlignValue(e-i)}this._slide(t,a,n)},click:function(t){t.preventDefault()},keyup:function(t){var e=X(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,e),this._change(t,e),X(t.target).removeClass("ui-state-active"))}}}),function(r){function e(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}r.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var i={},a=this.element;return r.each(["min","max","step"],function(t,e){var n=a.attr(e);void 0!==n&&n.length&&(i[e]=n)}),i},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t))},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((0<e?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(t){var e;function n(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=e,this._delay(function(){this.previous=e}))}e=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),!1!==this._start(t)&&this._repeat(null,r(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(r(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,r(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&0<t.height()&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(t){var e=this.options,n=r.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,e.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-e.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(t,e,n){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,n)},t),this._spin(e*this.options.step,n)},_spin:function(t,e){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:n})||(this._value(n),this.counter++)},_increment:function(t){var e=this.options.incremental;return e?r.isFunction(e)?e(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),n=e.indexOf(".");return-1===n?0:e.length-n-1},_adjustValue:function(t){var e,n,i=this.options;return n=t-(e=null!==i.min?i.min:0),t=e+(n=Math.round(n/i.step)*i.step),t=parseFloat(t.toFixed(this._precision())),null!==i.max&&t>i.max?i.max:null!==i.min&&t<i.min?i.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var n=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(n))}"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var n;""!==t&&null!==(n=this._parse(t))&&(e||(n=this._adjustValue(n)),t=this._format(n)),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());e(this._value).call(this,t)},widget:function(){return this.uiSpinner}})}(J),function(l,t){var e=0,n=/#.*$/;function u(t){return 1<t.hash.length&&decodeURIComponent(t.href.replace(n,""))===decodeURIComponent(location.href.replace(n,""))}l.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,t=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",t.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){l(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){l(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),t.active=this._initialActive(),l.isArray(t.disabled)&&(t.disabled=l.unique(t.disabled.concat(l.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(t.active):this.active=l(),this._refresh(),this.active.length&&this.load(t.active)},_initialActive:function(){var n=this.options.active,t=this.options.collapsible,i=location.hash.substring(1);return null===n&&(i&&this.tabs.each(function(t,e){if(l(e).attr("aria-controls")===i)return n=t,!1}),null===n&&(n=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==n&&-1!==n||(n=!!this.tabs.length&&0)),!1!==n&&-1===(n=this.tabs.index(this.tabs.eq(n)))&&(n=!t&&0),!t&&!1===n&&this.anchors.length&&(n=0),n},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):l()}},_tabKeydown:function(t){var e=l(this.document[0].activeElement).closest("li"),n=this.tabs.index(e),i=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case l.ui.keyCode.RIGHT:case l.ui.keyCode.DOWN:n++;break;case l.ui.keyCode.UP:case l.ui.keyCode.LEFT:i=!1,n--;break;case l.ui.keyCode.END:n=this.anchors.length-1;break;case l.ui.keyCode.HOME:n=0;break;case l.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case l.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,i),t.ctrlKey||(e.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===l.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===l.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===l.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,e){var n=this.tabs.length-1;for(;-1!==l.inArray((n<t&&(t=0),t<0&&(t=n),t),this.options.disabled);)t=e?t+1:t-1;return t},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){"active"!==t?"disabled"!==t?(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),"heightStyle"===t&&this._setupHeightStyle(e)):this._setupDisabled(e):this._activate(e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+ ++e},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,e=this.tablist.children(":has(a[href])");t.disabled=l.map(e.filter(".ui-state-disabled"),function(t){return e.index(t)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!l.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=l()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=l()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var c=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return l("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=l(),this.anchors.each(function(t,e){var n,i,a,r=l(e).uniqueId().attr("id"),s=l(e).closest("li"),o=s.attr("aria-controls");u(e)?(n=e.hash,i=c.element.find(c._sanitizeSelector(n))):(n="#"+(a=c._tabId(s)),(i=c.element.find(n)).length||(i=c._createPanel(a)).insertAfter(c.panels[t-1]||c.tablist),i.attr("aria-live","polite")),i.length&&(c.panels=c.panels.add(i)),o&&s.data("ui-tabs-aria-controls",o),s.attr({"aria-controls":n.substring(1),"aria-labelledby":r}),i.attr("aria-labelledby",r)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return l("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){l.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var e,n=0;e=this.tabs[n];n++)!0===t||-1!==l.inArray(n,t)?l(e).addClass("ui-state-disabled").attr("aria-disabled","true"):l(e).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(t){t.preventDefault()}};t&&l.each(t.split(" "),function(t,e){n[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,e=this.element.parent();"fill"===t?(n=e.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=l(this),e=t.css("position");"absolute"!==e&&"fixed"!==e&&(n-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){n-=l(this).outerHeight(!0)}),this.panels.each(function(){l(this).height(Math.max(0,n-l(this).innerHeight()+l(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,l(this).height("").height())}).height(n))},_eventHandler:function(t){var e=this.options,n=this.active,i=l(t.currentTarget).closest("li"),a=i[0]===n[0],r=a&&e.collapsible,s=r?l():this._getPanelForTab(i),o=n.length?this._getPanelForTab(n):l(),c={oldTab:n,oldPanel:o,newTab:r?l():i,newPanel:s};t.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||a&&!e.collapsible||!1===this._trigger("beforeActivate",t,c)||(e.active=!r&&this.tabs.index(i),this.active=a?l():i,this.xhr&&this.xhr.abort(),o.length||s.length||l.error("jQuery UI Tabs: Mismatching fragment identifier."),s.length&&this.load(this.tabs.index(i),t),this._toggle(t,c))},_toggle:function(t,e){var n=this,i=e.newPanel,a=e.oldPanel;function r(){n.running=!1,n._trigger("activate",t,e)}function s(){e.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&n.options.show?n._show(i,n.options.show,r):(i.show(),r())}this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),s()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),e.oldTab.attr("aria-selected","false"),i.length&&a.length?e.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return 0===l(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),e.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var e,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),e=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:e,currentTarget:e,preventDefault:l.noop}))},_findActive:function(t){return!1===t?l():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){l.data(this,"ui-tabs-destroy")?l(this).remove():l(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=l(this),e=t.data("ui-tabs-aria-controls");e?t.attr("aria-controls",e).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var t=this.options.disabled;!1!==t&&(t=void 0!==n&&(n=this._getIndex(n),l.isArray(t)?l.map(t,function(t){return t!==n?t:null}):l.map(this.tabs,function(t,e){return e!==n?e:null})),this._setupDisabled(t))},disable:function(t){var e=this.options.disabled;if(!0!==e){if(void 0===t)e=!0;else{if(t=this._getIndex(t),-1!==l.inArray(t,e))return;e=l.isArray(e)?l.merge([t],e).sort():[t]}this._setupDisabled(e)}},load:function(t,e){t=this._getIndex(t);var n=this,i=this.tabs.eq(t),a=i.find(".ui-tabs-anchor"),r=this._getPanelForTab(i),s={tab:i,panel:r};u(a[0])||(this.xhr=l.ajax(this._ajaxSettings(a,e,s)),this.xhr&&"canceled"!==this.xhr.statusText&&(i.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",e,s)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(t,n,i){var a=this;return{url:t.attr("href"),beforeSend:function(t,e){return a._trigger("beforeLoad",n,l.extend({jqXHR:t,ajaxSettings:e},i))}}},_getPanelForTab:function(t){var e=l(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+e))}})}(J),Q=0,(Z=J).widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=Z(this).attr("title")||"";return Z("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,e){var n=this;if("disabled"===t)return this[e?"_disable":"_enable"](),void(this.options[t]=e);this._super(t,e),"content"===t&&Z.each(this.tooltips,function(t,e){n._updateContent(e)})},_disable:function(){var i=this;Z.each(this.tooltips,function(t,e){var n=Z.Event("blur");n.target=n.currentTarget=e[0],i.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=Z(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=Z(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,e=Z(t?t.target:this.element).closest(this.options.items);e.length&&!e.data("ui-tooltip-id")&&(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&e.parents().each(function(){var t,e=Z(this);e.data("ui-tooltip-open")&&((t=Z.Event("blur")).target=t.currentTarget=this,n.close(t,!0)),e.attr("title")&&(e.uniqueId(),n.parents[this.id]={element:this,title:e.attr("title")},e.attr("title",""))}),this._updateContent(e,t))},_updateContent:function(e,n){var t,i=this.options.content,a=this,r=n?n.type:null;if("string"==typeof i)return this._open(n,e,i);(t=i.call(e[0],function(t){e.data("ui-tooltip-open")&&a._delay(function(){n&&(n.type=r),this._open(n,e,t)})}))&&this._open(n,e,t)},_open:function(t,n,e){var i,a,r,s,o,c,l=Z.extend({},this.options.position);function u(t){l.of=t,i.is(":hidden")||i.position(l)}e&&((i=this._find(n)).length?i.find(".ui-tooltip-content").html(e):(n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),i=this._tooltip(n),s=n,o=i.attr("id"),(c=(s.attr("aria-describedby")||"").split(/\s+/)).push(o),s.data("ui-tooltip-id",o).attr("aria-describedby",Z.trim(c.join(" "))),i.find(".ui-tooltip-content").html(e),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:u}),u(t)):i.position(Z.extend({of:n},this.options.position)),i.hide(),this._show(i,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){i.is(":visible")&&(u(l.of),clearInterval(r))},Z.fx.interval)),this._trigger("open",t,{tooltip:i}),a={keyup:function(t){if(t.keyCode===Z.ui.keyCode.ESCAPE){var e=Z.Event(t);e.currentTarget=n[0],this.close(e,!0)}},remove:function(){this._removeTooltip(i)}},t&&"mouseover"!==t.type||(a.mouseleave="close"),t&&"focusin"!==t.type||(a.focusout="close"),this._on(!0,n,a)))},close:function(t){var e,n,i,a,r=this,s=Z(t?t.currentTarget:this.element),o=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&s.attr("title",s.data("ui-tooltip-title")),n=(e=s).data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/),-1!==(a=Z.inArray(n,i))&&i.splice(a,1),e.removeData("ui-tooltip-id"),(i=Z.trim(i.join(" ")))?e.attr("aria-describedby",i):e.removeAttr("aria-describedby"),o.stop(!0),this._hide(o,this.options.hide,function(){r._removeTooltip(Z(this))}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&Z.each(this.parents,function(t,e){Z(e.element).attr("title",e.title),delete r.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:o}),this.closing=!1)},_tooltip:function(t){var e="ui-tooltip-"+Q++,n=Z("<div>").attr({id:e,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return Z("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[e]=t,n},_find:function(t){var e=t.data("ui-tooltip-id");return e?Z("#"+e):Z()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var i=this;Z.each(this.tooltips,function(t,e){var n=Z.Event("blur");n.target=n.currentTarget=e[0],i.close(n,!0),Z("#"+t).remove(),e.data("ui-tooltip-title")&&(e.attr("title",e.data("ui-tooltip-title")),e.removeData("ui-tooltip-title"))})}})},function(t,e){
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(t){if(t.support.touch="ontouchend"in document,t.support.touch){var e,n=t.ui.mouse.prototype,i=n._mouseInit,a=n._mouseDestroy;n._touchStart=function(t){!e&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,r(t,"mouseover"),r(t,"mousemove"),r(t,"mousedown"))},n._touchMove=function(t){e&&(this._touchMoved=!0,r(t,"mousemove"))},n._touchEnd=function(t){e&&(r(t,"mouseup"),r(t,"mouseout"),this._touchMoved||r(t,"click"),e=!1)},n._mouseInit=function(){this.element.bind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),i.call(this)},n._mouseDestroy=function(){this.element.unbind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),a.call(this)}}function r(t,e){if(!(1<t.originalEvent.touches.length)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}}(jQuery)},function(t,e,n){t.exports=n(89)},function(t,e){var x,_,w,k;x=jQuery,_=this||window,w=/[<>&\r\n"']/gm,k={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"#39;"},x.extend({fileDownload:function(o,t){var e,n,i,c=x.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},prepareCallback:function(t){},successCallback:function(t){},abortCallback:function(t){},failCallback:function(t,e,n){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",cookieDomain:null,popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},t),a=new x.Deferred,r=(navigator.userAgent||navigator.vendor||_.opera).toLowerCase();/ip(ad|hone|od)/.test(r)?e=!0:-1!==r.indexOf("android")?n=!0:i=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(r.substr(0,4));var s=c.httpMethod.toUpperCase();if(n&&"GET"!==s&&c.androidPostUnsupportedMessageHtml)return x().dialog?x("<div>").html(c.androidPostUnsupportedMessageHtml).dialog(c.dialogOptions):alert(c.androidPostUnsupportedMessageHtml),a.reject();var l,u,h,d,f=null,p={onPrepare:function(t){c.preparingMessageHtml?f=x("<div>").html(c.preparingMessageHtml).dialog(c.dialogOptions):c.prepareCallback&&c.prepareCallback(t)},onSuccess:function(t){f&&f.dialog("close"),c.successCallback(t),a.resolve(t)},onAbort:function(t){f&&f.dialog("close"),c.abortCallback(t),a.reject(t)},onFail:function(t,e,n){f&&f.dialog("close"),c.failMessageHtml&&x("<div>").html(c.failMessageHtml).dialog(c.dialogOptions),c.failCallback(t,e,n),a.reject(t,e)}};if(p.onPrepare(o),null!==c.data&&"string"!=typeof c.data&&(c.data=x.param(c.data)),"GET"===s)null!==c.data&&(-1!==o.indexOf("?")?"&"!==o.substring(o.length-1)&&(o+="&"):o+="?",o+=c.data),e||n?((u=_.open(o)).document.title=c.popupWindowTitle,_.focus()):i?_.location(o):l=x("<iframe>").hide().prop("src",o).appendTo("body");else{var g="";null!==c.data&&x.each(c.data.replace(/\+/g," ").split("&"),function(){var t=this.split("="),e=t[0];t.shift(),t=[e,t.join("=")];var n=c.encodeHTMLEntities?y(decodeURIComponent(t[0])):decodeURIComponent(t[0]);if(n){var i=c.encodeHTMLEntities?y(decodeURIComponent(t[1])):decodeURIComponent(t[1]);g+='<input type="hidden" name="'+n+'" value="'+i+'" />'}}),i?(d=x("<form>").appendTo("body")).hide().prop("method",c.httpMethod).prop("action",o).html(g):(e?((u=_.open("about:blank")).document.title=c.popupWindowTitle,h=u.document,_.focus()):h=v(l=x("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body")),h.write("<html><head></head><body><form method='"+c.httpMethod+"' action='"+o+"'>"+g+"</form>"+c.popupWindowTitle+"</body></html>"),d=x(h).find("form")),d.submit()}function v(t){var e=t[0].contentWindow||t[0].contentDocument;return e.document&&(e=e.document),e}function m(t){setTimeout(function(){u&&(n&&u.close(),e&&u.focus&&(u.focus(),t&&u.close()))},0)}function y(t){return t.replace(w,function(t){return"&"+k[t]})}setTimeout(function t(){var e=c.cookieValue;"string"==typeof e&&(e=e.toLowerCase());var n=c.cookieName.toLowerCase()+"="+e;if(-1<document.cookie.toLowerCase().indexOf(n)){p.onSuccess(o);var i=c.cookieName+"=; path="+c.cookiePath+"; expires="+new Date(0).toUTCString()+";";return c.cookieDomain&&(i+=" domain="+c.cookieDomain+";"),document.cookie=i,void m(!1)}if(u||l)try{var a=u?u.document:v(l);if(a&&null!==a.body&&a.body.innerHTML.length){var r=!0;if(d&&d.length){var s=x(a.body).contents().first();try{s.length&&s[0]===d[0]&&(r=!1)}catch(t){if(!t||-2146828218!=t.number)throw t;r=!0}}if(r)return void setTimeout(function(){p.onFail(a.body.innerHTML,o),m(!0)},100)}}catch(t){return p.onFail("",o,t),void m(!0)}setTimeout(t,c.checkInterval)},c.checkInterval);var b=a.promise();return b.abort=function(){m(),l.attr("src","").html(""),p.onAbort(o)},b}})},function(t,e,n){var i,a,r;
/**
  * bootstrap-switch - Turn checkboxes and radio buttons into toggle switches.
  *
  * @version v3.3.4
  * @homepage https://bttstrp.github.io/bootstrap-switch
  * @author Mattia Larentis <mattia@larentis.eu> (http://larentis.eu)
  * @license Apache-2.0
  */a=[n(0)],void 0===(r="function"==typeof(i=function(t){"use strict";var e,n=(e=t)&&e.__esModule?e:{default:e},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),o=n.default||window.jQuery||window.$,c=function(){function e(i){var a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.$element=o(i),this.options=o.extend({},o.fn.bootstrapSwitch.defaults,this._getElementOptions(),t),this.prevOptions={},this.$wrapper=o("<div>",{class:function(){var t=[];return t.push(a.options.state?"on":"off"),a.options.size&&t.push(a.options.size),a.options.disabled&&t.push("disabled"),a.options.readonly&&t.push("readonly"),a.options.indeterminate&&t.push("indeterminate"),a.options.inverse&&t.push("inverse"),a.$element.attr("id")&&t.push("id-"+a.$element.attr("id")),t.map(a._getClass.bind(a)).concat([a.options.baseClass],a._getClasses(a.options.wrapperClass)).join(" ")}}),this.$container=o("<div>",{class:this._getClass("container")}),this.$on=o("<span>",{html:this.options.onText,class:this._getClass("handle-on")+" "+this._getClass(this.options.onColor)}),this.$off=o("<span>",{html:this.options.offText,class:this._getClass("handle-off")+" "+this._getClass(this.options.offColor)}),this.$label=o("<span>",{html:this.options.labelText,class:this._getClass("label")}),this.$element.on("init.bootstrapSwitch",this.options.onInit.bind(this,i)),this.$element.on("switchChange.bootstrapSwitch",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];!1===a.options.onSwitchChange.apply(i,e)&&(a.$element.is(":radio")?o('[name="'+a.$element.attr("name")+'"]').trigger("previousState.bootstrapSwitch",!0):a.$element.trigger("previousState.bootstrapSwitch",!0))}),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch",this.options.state)}return a(e,[{key:"setPrevOptions",value:function(){this.prevOptions=i({},this.options)}},{key:"state",value:function(t,e){return void 0===t?this.options.state:(this.options.disabled||this.options.readonly||this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")||(this.$element.is(":radio")?o('[name="'+this.$element.attr("name")+'"]').trigger("setPreviousOptions.bootstrapSwitch"):this.$element.trigger("setPreviousOptions.bootstrapSwitch"),this.options.indeterminate&&this.indeterminate(!1),this.$element.prop("checked",Boolean(t)).trigger("change.bootstrapSwitch",e)),this.$element)}},{key:"toggleState",value:function(t){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",t)}},{key:"size",value:function(t){return void 0===t?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(this._getClass(this.options.size)),t&&this.$wrapper.addClass(this._getClass(t)),this._width(),this._containerPosition(),this.options.size=t,this.$element)}},{key:"animate",value:function(t){return void 0===t?this.options.animate:this.options.animate===Boolean(t)?this.$element:this.toggleAnimate()}},{key:"toggleAnimate",value:function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(this._getClass("animate")),this.$element}},{key:"disabled",value:function(t){return void 0===t?this.options.disabled:this.options.disabled===Boolean(t)?this.$element:this.toggleDisabled()}},{key:"toggleDisabled",value:function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(this._getClass("disabled")),this.$element}},{key:"readonly",value:function(t){return void 0===t?this.options.readonly:this.options.readonly===Boolean(t)?this.$element:this.toggleReadonly()}},{key:"toggleReadonly",value:function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(this._getClass("readonly")),this.$element}},{key:"indeterminate",value:function(t){return void 0===t?this.options.indeterminate:this.options.indeterminate===Boolean(t)?this.$element:this.toggleIndeterminate()}},{key:"toggleIndeterminate",value:function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(this._getClass("indeterminate")),this._containerPosition(),this.$element}},{key:"inverse",value:function(t){return void 0===t?this.options.inverse:this.options.inverse===Boolean(t)?this.$element:this.toggleInverse()}},{key:"toggleInverse",value:function(){this.$wrapper.toggleClass(this._getClass("inverse"));var t=this.$on.clone(!0),e=this.$off.clone(!0);return this.$on.replaceWith(e),this.$off.replaceWith(t),this.$on=e,this.$off=t,this.options.inverse=!this.options.inverse,this.$element}},{key:"onColor",value:function(t){return void 0===t?this.options.onColor:(this.options.onColor&&this.$on.removeClass(this._getClass(this.options.onColor)),this.$on.addClass(this._getClass(t)),this.options.onColor=t,this.$element)}},{key:"offColor",value:function(t){return void 0===t?this.options.offColor:(this.options.offColor&&this.$off.removeClass(this._getClass(this.options.offColor)),this.$off.addClass(this._getClass(t)),this.options.offColor=t,this.$element)}},{key:"onText",value:function(t){return void 0===t?this.options.onText:(this.$on.html(t),this._width(),this._containerPosition(),this.options.onText=t,this.$element)}},{key:"offText",value:function(t){return void 0===t?this.options.offText:(this.$off.html(t),this._width(),this._containerPosition(),this.options.offText=t,this.$element)}},{key:"labelText",value:function(t){return void 0===t?this.options.labelText:(this.$label.html(t),this._width(),this.options.labelText=t,this.$element)}},{key:"handleWidth",value:function(t){return void 0===t?this.options.handleWidth:(this.options.handleWidth=t,this._width(),this._containerPosition(),this.$element)}},{key:"labelWidth",value:function(t){return void 0===t?this.options.labelWidth:(this.options.labelWidth=t,this._width(),this._containerPosition(),this.$element)}},{key:"baseClass",value:function(t){return this.options.baseClass}},{key:"wrapperClass",value:function(t){return void 0===t?this.options.wrapperClass:(t||(t=o.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(t).join(" ")),this.options.wrapperClass=t,this.$element)}},{key:"radioAllOff",value:function(t){if(void 0===t)return this.options.radioAllOff;var e=Boolean(t);return this.options.radioAllOff===e||(this.options.radioAllOff=e),this.$element}},{key:"onInit",value:function(t){return void 0===t?this.options.onInit:(t||(t=o.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=t,this.$element)}},{key:"onSwitchChange",value:function(t){return void 0===t?this.options.onSwitchChange:(t||(t=o.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=t,this.$element)}},{key:"destroy",value:function(){var t=this.$element.closest("form");return t.length&&t.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element}},{key:"_getElementOptions",value:function(){return{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")}}},{key:"_width",value:function(){var n=this,t=this.$on.add(this.$off).add(this.$label).css("width",""),i="auto"===this.options.handleWidth?Math.round(Math.max(this.$on.width(),this.$off.width())):this.options.handleWidth;return t.width(i),this.$label.width(function(t,e){return"auto"!==n.options.labelWidth?n.options.labelWidth:e<i?i:e}),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)}},{key:"_containerPosition",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.state;arguments[1],this.$container.css("margin-left",function(){var t=[0,"-"+e._handleWidth+"px"];return e.options.indeterminate?"-"+e._handleWidth/2+"px":n?e.options.inverse?t[1]:t[0]:e.options.inverse?t[0]:t[1]})}},{key:"_init",value:function(){var t=this,e=function(){t.setPrevOptions(),t._width(),t._containerPosition(),setTimeout(function(){if(t.options.animate)return t.$wrapper.addClass(t._getClass("animate"))},50)};if(this.$wrapper.is(":visible"))e();else var n=window.setInterval(function(){if(t.$wrapper.is(":visible"))return e(),window.clearInterval(n)},50)}},{key:"_elementHandlers",value:function(){var i=this;return this.$element.on({"setPreviousOptions.bootstrapSwitch":this.setPrevOptions.bind(this),"previousState.bootstrapSwitch":function(){i.options=i.prevOptions,i.options.indeterminate&&i.$wrapper.addClass(i._getClass("indeterminate")),i.$element.prop("checked",i.options.state).trigger("change.bootstrapSwitch",!0)},"change.bootstrapSwitch":function(t,e){t.preventDefault(),t.stopImmediatePropagation();var n=i.$element.is(":checked");i._containerPosition(n),n!==i.options.state&&(i.options.state=n,i.$wrapper.toggleClass(i._getClass("off")).toggleClass(i._getClass("on")),e||(i.$element.is(":radio")&&o('[name="'+i.$element.attr("name")+'"]').not(i.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),i.$element.trigger("switchChange.bootstrapSwitch",[n])))},"focus.bootstrapSwitch":function(t){t.preventDefault(),i.$wrapper.addClass(i._getClass("focused"))},"blur.bootstrapSwitch":function(t){t.preventDefault(),i.$wrapper.removeClass(i._getClass("focused"))},"keydown.bootstrapSwitch":function(t){!t.which||i.options.disabled||i.options.readonly||37!==t.which&&39!==t.which||(t.preventDefault(),t.stopImmediatePropagation(),i.state(39===t.which))}})}},{key:"_handleHandlers",value:function(){var e=this;return this.$on.on("click.bootstrapSwitch",function(t){return t.preventDefault(),t.stopPropagation(),e.state(!1),e.$element.trigger("focus.bootstrapSwitch")}),this.$off.on("click.bootstrapSwitch",function(t){return t.preventDefault(),t.stopPropagation(),e.state(!0),e.$element.trigger("focus.bootstrapSwitch")})}},{key:"_labelHandlers",value:function(){var n=this,t={click:function(t){t.stopPropagation()},"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(t){n._dragStart||n.options.disabled||n.options.readonly||(t.preventDefault(),t.stopPropagation(),n._dragStart=(t.pageX||t.originalEvent.touches[0].pageX)-parseInt(n.$container.css("margin-left"),10),n.options.animate&&n.$wrapper.removeClass(n._getClass("animate")),n.$element.trigger("focus.bootstrapSwitch"))},"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(t){if(null!=n._dragStart){var e=(t.pageX||t.originalEvent.touches[0].pageX)-n._dragStart;t.preventDefault(),e<-n._handleWidth||0<e||(n._dragEnd=e,n.$container.css("margin-left",n._dragEnd+"px"))}},"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(t){if(n._dragStart){if(t.preventDefault(),n.options.animate&&n.$wrapper.addClass(n._getClass("animate")),n._dragEnd){var e=n._dragEnd>-n._handleWidth/2;n._dragEnd=!1,n.state(n.options.inverse?!e:e)}else n.state(!n.options.state);n._dragStart=!1}},"mouseleave.bootstrapSwitch":function(){n.$label.trigger("mouseup.bootstrapSwitch")}};this.$label.on(t)}},{key:"_externalLabelHandler",value:function(){var e=this,n=this.$element.closest("label");n.on("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),t.target===n[0]&&e.toggleState()})}},{key:"_formHandler",value:function(){var t=this.$element.closest("form");t.data("bootstrap-switch")||t.on("reset.bootstrapSwitch",function(){window.setTimeout(function(){t.find("input").filter(function(){return o(this).data("bootstrap-switch")}).each(function(){return o(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)}},{key:"_getClass",value:function(t){return this.options.baseClass+"-"+t}},{key:"_getClasses",value:function(t){return o.isArray(t)?t.map(this._getClass.bind(this)):[this._getClass(t)]}}]),e}();o.fn.bootstrapSwitch=function(r){for(var t=arguments.length,s=Array(1<t?t-1:0),e=1;e<t;e++)s[e-1]=arguments[e];return Array.prototype.reduce.call(this,function(t,e){var n=o(e),i=n.data("bootstrap-switch"),a=i||new c(e,r);return i||n.data("bootstrap-switch",a),"string"!=typeof r?t:a[r].apply(a,s)},this)},o.fn.bootstrapSwitch.Constructor=c,o.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}})?i.apply(e,a):i)||(t.exports=r)},function(t,e,n){},function(t,e,n){var c=n(53),l=n(30);t.exports=function(o){return function(t,e){var n,i,a=String(l(t)),r=c(e),s=a.length;return r<0||s<=r?o?"":void 0:(n=a.charCodeAt(r))<55296||56319<n||r+1===s||(i=a.charCodeAt(r+1))<56320||57343<i?o?a.charAt(r):n:o?a.slice(r,r+2):i-56320+(n-55296<<10)+65536}}},function(t,e,n){"use strict";var i=n(54),a=n(36),r=n(58),s={};n(28)(s,n(12)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:a(1,n)}),r(t,e+" Iterator")}},function(t,e,n){var s=n(22),o=n(26),c=n(39);t.exports=n(23)?Object.defineProperties:function(t,e){o(t);for(var n,i=c(e),a=i.length,r=0;r<a;)s.f(t,n=i[r++],e[n]);return t}},function(t,e,n){var i=n(20).document;t.exports=i&&i.documentElement},function(t,e,n){var r=n(26);t.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},function(t,e,n){var i=n(38),a=n(12)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||r[a]===t)}},function(t,e,n){"use strict";var i=n(22),a=n(36);t.exports=function(t,e,n){e in t?i.f(t,e,a(0,n)):t[e]=n}},function(t,e,n){var i=n(100),a=n(12)("iterator"),r=n(38);t.exports=n(31).getIteratorMethod=function(t){if(null!=t)return t[a]||t["@@iterator"]||r[i(t)]}},function(t,e,n){var a=n(40),r=n(12)("toStringTag"),s="Arguments"==a(function(){return arguments}());t.exports=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:s?a(e):"Object"==(i=a(e))&&"function"==typeof e.callee?"Arguments":i}},function(t,e,n){var r=n(12)("iterator"),s=!1;try{var i=[7][r]();i.return=function(){s=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!s)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},t(i)}catch(t){}return n}},function(t,e,n){n(23)&&"g"!=/./g.flags&&n(22).f(RegExp.prototype,"flags",{configurable:!0,get:n(59)})},function(t,e,n){var i=n(37)("meta"),a=n(24),r=n(27),s=n(22).f,o=0,c=Object.isExtensible||function(){return!0},l=!n(21)(function(){return c(Object.preventExtensions({}))}),u=function(t){s(t,i,{value:{i:"O"+ ++o,w:{}}})},h=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,i)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[i].i},getWeak:function(t,e){if(!r(t,i)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[i].w},onFreeze:function(t){return l&&h.NEED&&c(t)&&!r(t,i)&&u(t),t}}},function(t,e,n){var o=n(39),c=n(78),l=n(60);t.exports=function(t){var e=o(t),n=c.f;if(n)for(var i,a=n(t),r=l.f,s=0;a.length>s;)r.call(t,i=a[s++])&&e.push(i);return e}},function(t,e,n){var i=n(32),a=n(45).f,r={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==r.call(t)?function(t){try{return a(t)}catch(t){return s.slice()}}(t):a(i(t))}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var b=n(43),x=n(72),_=n(33),w=n(44),i=n(108);t.exports=function(h,t){var d=1==h,f=2==h,p=3==h,g=4==h,v=6==h,m=5==h||v,y=t||i;return function(t,e,n){for(var i,a,r=_(t),s=x(r),o=b(e,n,3),c=w(s.length),l=0,u=d?y(t,c):f?y(t,0):void 0;l<c;l++)if((m||l in s)&&(a=o(i=s[l],l,r),h))if(d)u[l]=a;else if(a)switch(h){case 3:return!0;case 5:return i;case 6:return l;case 2:u.push(i)}else if(g)return!1;return v?-1:p||g?g:u}}},function(t,e,n){var i=n(109);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){var i=n(24),a=n(79),r=n(12)("species");t.exports=function(t){var e;return a(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!a(e.prototype)||(e=void 0),i(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var a=n(16),r=n(31),s=n(21);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],i={};i[t]=e(n),a(a.S+a.F*s(function(){n(1)}),"Object",i)}},function(t,e,n){var s=n(16),i=n(30),o=n(21),c=n(112),a="["+c+"]",r=RegExp("^"+a+a+"*"),l=RegExp(a+a+"*$"),u=function(t,e,n){var i={},a=o(function(){return!!c[t]()||"​"!="​"[t]()}),r=i[t]=a?e(h):c[t];n&&(i[n]=r),s(s.P+s.F*a,"String",i)},h=u.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(r,"")),2&e&&(t=t.replace(l,"")),t};t.exports=u},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i=n(62),a=n(30);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(a(t))}},function(t,e,n){var i=n(12)("match");t.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[i]=!1,!"/./"[e](n)}catch(t){}}return!0}},function(t,e,n){"use strict";var i=n(21);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(t,e,n){"use strict";t.exports=function(t){var n=t.stateHandler.getState;return{isDetectable:function(t){var e=n(t);return e&&!!e.isDetectable},markAsDetectable:function(t){n(t).isDetectable=!0},isBusy:function(t){return!!n(t).busy},markBusy:function(t,e){n(t).busy=!!e}}}},function(t,e,n){"use strict";t.exports=function(i){var a={};function r(t){var e=i.get(t);return void 0===e?[]:a[e]||[]}return{get:r,add:function(t,e){var n=i.get(t);a[n]||(a[n]=[]),a[n].push(e)},removeListener:function(t,e){for(var n=r(t),i=0,a=n.length;i<a;++i)if(n[i]===e){n.splice(i,1);break}},removeAllListeners:function(t){var e=r(t);e&&(e.length=0)}}}},function(t,e,n){"use strict";t.exports=function(){var t=1;return{generate:function(){return t++}}}},function(t,e,n){"use strict";t.exports=function(t){var i=t.idGenerator,a=t.stateHandler.getState;return{get:function(t){var e=a(t);return e&&void 0!==e.id?e.id:null},set:function(t){var e=a(t);if(!e)throw new Error("setId required the element to have a resize detection state.");var n=i.generate();return e.id=n}}}},function(t,e,n){"use strict";t.exports=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var i=function(t,n){t[n]=function(){var t=console[n];if(t.apply)t.apply(console,arguments);else for(var e=0;e<arguments.length;e++)t(arguments[e])}};i(n,"log"),i(n,"warn"),i(n,"error")}return n}},function(t,e,n){"use strict";var l=n(126);function u(){var i={},n=0,a=0,r=0;return{add:function(t,e){e||(e=t,t=0),a<t?a=t:t<r&&(r=t),i[t]||(i[t]=[]),i[t].push(e),n++},process:function(){for(var t=r;t<=a;t++)for(var e=i[t],n=0;n<e.length;n++)(0,e[n])()},size:function(){return n}}}t.exports=function(t){var e=(t=t||{}).reporter,n=l.getOption(t,"async",!0),i=l.getOption(t,"auto",!0);i&&!n&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var a,r=u(),s=!1;function o(){for(s=!0;r.size();){var t=r;r=u(),t.process()}s=!1}function c(){var t;t=o,a=setTimeout(t,0)}return{add:function(t,e){!s&&i&&n&&0===r.size()&&c(),r.add(t,e)},force:function(t){s||(void 0===t&&(t=n),a&&(clearTimeout(a),a=null),t?c():o())}}}},function(t,e,n){"use strict";(t.exports={}).getOption=function(t,e,n){var i=t[e];return null!=i||void 0===n?i:n}},function(t,e,n){"use strict";var i="_erd";function a(t){return t[i]}t.exports={initState:function(t){return t[i]={},a(t)},getState:a,cleanState:function(t){delete t[i]}}},function(t,e,n){"use strict";var u=n(84);t.exports=function(t){var o=(t=t||{}).reporter,c=t.batchProcessor,l=t.stateHandler.getState;if(!o)throw new Error("Missing required dependency: reporter.");function i(t){return l(t).object}return{makeDetectable:function(t,e,n){n||(n=e,e=t,t=null),(t=t||{}).debug,u.isIE(8)?n(e):function(n,i){var a=!1,r=window.getComputedStyle(n),t=n.offsetWidth,e=n.offsetHeight;function s(){function t(){if("static"===r.position){n.style.position="relative";var t=function(t,e,n,i){var a=n[i];"auto"!==a&&"0"!==a.replace(/[^-\d\.]/g,"")&&(t.warn("An element that is positioned static has style."+i+"="+a+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",e),e.style[i]=0)};t(o,n,r,"top"),t(o,n,r,"right"),t(o,n,r,"bottom"),t(o,n,r,"left")}}""!==r.position&&(t(),a=!0);var e=document.createElement("object");e.style.cssText="display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; padding: 0; margin: 0; opacity: 0; z-index: -1000; pointer-events: none;",e.tabIndex=-1,e.type="text/html",e.onload=function(){a||t(),function t(e,n){e.contentDocument?n(e.contentDocument):setTimeout(function(){t(e,n)},100)}(this,function(t){i(n)})},u.isIE()||(e.data="about:blank"),n.appendChild(e),l(n).object=e,u.isIE()&&(e.data="about:blank")}l(n).startSize={width:t,height:e},c?c.add(s):s()}(e,n)},addListener:function(t,e){if(!i(t))throw new Error("Element is not detectable by this strategy.");function n(){e(t)}u.isIE(8)?(l(t).object={proxy:n},t.attachEvent("onresize",n)):i(t).contentDocument.defaultView.addEventListener("resize",n)},uninstall:function(t){u.isIE(8)?t.detachEvent("onresize",l(t).object.proxy):t.removeChild(i(t)),delete l(t).object}}}},function(t,e,n){"use strict";var O=n(83).forEach;t.exports=function(t){var _=(t=t||{}).reporter,w=t.batchProcessor,k=t.stateHandler.getState,S=(t.stateHandler.hasState,t.idHandler);if(!w)throw new Error("Missing required dependency: batchProcessor");if(!_)throw new Error("Missing required dependency: reporter.");var C=function(){var t=document.createElement("div");t.style.cssText="position: absolute; width: 1000px; height: 1000px; visibility: hidden; margin: 0; padding: 0;";var e=document.createElement("div");e.style.cssText="position: absolute; width: 500px; height: 500px; overflow: scroll; visibility: none; top: -1500px; left: -1500px; visibility: hidden; margin: 0; padding: 0;",e.appendChild(t),document.body.insertBefore(e,document.body.firstChild);var n=500-e.clientWidth,i=500-e.clientHeight;return document.body.removeChild(e),{width:n,height:i}}(),M="erd_scroll_detection_container";function T(t,e,n){if(t.addEventListener)t.addEventListener(e,n);else{if(!t.attachEvent)return _.error("[scroll] Don't know how to add event listeners.");t.attachEvent("on"+e,n)}}function n(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n);else{if(!t.detachEvent)return _.error("[scroll] Don't know how to remove event listeners.");t.detachEvent("on"+e,n)}}function E(t){return k(t).container.childNodes[0].childNodes[0].childNodes[0]}function A(t){return k(t).container.childNodes[0].childNodes[0].childNodes[1]}return function(i,t){if(!document.getElementById(i)){var e=t+"_animation",n=t+"_animation_active",a="/* Created by the element-resize-detector library. */\n";a+="."+t+" > div::-webkit-scrollbar { display: none; }\n\n",a+="."+n+" { -webkit-animation-duration: 0.1s; animation-duration: 0.1s; -webkit-animation-name: "+e+"; animation-name: "+e+"; }\n",a+="@-webkit-keyframes "+e+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",function(t,e){e=e||function(t){document.head.appendChild(t)};var n=document.createElement("style");n.innerHTML=t,n.id=i,e(n)}(a+="@keyframes "+e+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}("erd_scroll_detection_scrollbar_style",M),{makeDetectable:function(s,v,t){function m(){if(s.debug){var t=Array.prototype.slice.call(arguments);if(t.unshift(S.get(v),"Scroll: "),_.log.apply)_.log.apply(null,t);else for(var e=0;e<t.length;e++)_.log(t[e])}}function o(t){var e=k(t).container.childNodes[0],n=window.getComputedStyle(e);return!n.width||-1===n.width.indexOf("px")}function e(){var t=window.getComputedStyle(v),e={};return e.position=t.position,e.width=v.offsetWidth,e.height=v.offsetHeight,e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e.widthCSS=t.width,e.heightCSS=t.height,e}function n(){if(m("storeStyle invoked."),k(v)){var t=e();k(v).style=t}else m("Aborting because element has been uninstalled")}function c(t,e,n){k(t).lastWidth=e,k(t).lastHeight=n}function l(){return 2*C.width+1}function u(){return 2*C.height+1}function h(t){return t+10+l()}function d(t){return t+10+u()}function f(t,e,n){var i=E(t),a=A(t),r=h(e),s=d(n),o=2*e+l(),c=2*n+u();i.scrollLeft=r,i.scrollTop=s,a.scrollLeft=o,a.scrollTop=c}function y(){var t=k(v).container;if(!t){(t=document.createElement("div")).className=M,t.style.cssText="visibility: hidden; display: inline; width: 0px; height: 0px; z-index: -1; overflow: hidden; margin: 0; padding: 0;",(k(v).container=t).className+=" "+M+"_animation_active",v.appendChild(t);var e=function(){k(v).onRendered&&k(v).onRendered()};T(t,"animationstart",e),k(v).onAnimationStart=e}return t}function i(){if(m("Injecting elements"),k(v)){!function(){var t=k(v).style;if("static"===t.position){v.style.position="relative";var e=function(t,e,n,i){var a=n[i];"auto"!==a&&"0"!==a.replace(/[^-\d\.]/g,"")&&(t.warn("An element that is positioned static has style."+i+"="+a+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",e),e.style[i]=0)};e(_,v,t,"top"),e(_,v,t,"right"),e(_,v,t,"bottom"),e(_,v,t,"left")}}();var t=k(v).container;t||(t=y());var e,n,i,a,r=C.width,s=C.height,o="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; left: "+(e=(e=-(1+r))?e+"px":"0")+"; top: "+(n=(n=-(1+s))?n+"px":"0")+"; right: "+(a=(a=-r)?a+"px":"0")+"; bottom: "+(i=(i=-s)?i+"px":"0")+";",c=document.createElement("div"),l=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div"),d=document.createElement("div"),f=document.createElement("div");c.dir="ltr",c.style.cssText="position: absolute; flex: none; overflow: hidden; z-index: -1; visibility: hidden; width: 100%; height: 100%; left: 0px; top: 0px;",c.className=M,l.className=M,l.style.cssText=o,u.style.cssText="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",h.style.cssText="position: absolute; left: 0; top: 0;",d.style.cssText="position: absolute; flex: none; overflow: scroll; z-index: -1; visibility: hidden; width: 100%; height: 100%;",f.style.cssText="position: absolute; width: 200%; height: 200%;",u.appendChild(h),d.appendChild(f),l.appendChild(u),l.appendChild(d),c.appendChild(l),t.appendChild(c),T(u,"scroll",p),T(d,"scroll",g),k(v).onExpandScroll=p,k(v).onShrinkScroll=g}else m("Aborting because element has been uninstalled");function p(){k(v).onExpand&&k(v).onExpand()}function g(){k(v).onShrink&&k(v).onShrink()}}function a(){function a(t,e,n){var i=E(t).childNodes[0],a=h(e),r=d(n);i.style.width=a+"px",i.style.height=r+"px"}function n(t){var n=v.offsetWidth,i=v.offsetHeight;m("Storing current size",n,i),c(v,n,i),w.add(0,function(){if(k(v))if(r()){if(s.debug){var t=v.offsetWidth,e=v.offsetHeight;t===n&&e===i||_.warn(S.get(v),"Scroll: Size changed before updating detector elements.")}a(v,n,i)}else m("Aborting because element container has not been initialized");else m("Aborting because element has been uninstalled")}),w.add(1,function(){k(v)?r()?f(v,n,i):m("Aborting because element container has not been initialized"):m("Aborting because element has been uninstalled")}),t&&w.add(2,function(){k(v)?r()?t():m("Aborting because element container has not been initialized"):m("Aborting because element has been uninstalled")})}function r(){return!!k(v).container}function i(){m("notifyListenersIfNeeded invoked");var t=k(v);return void 0===k(v).lastNotifiedWidth&&t.lastWidth===t.startSize.width&&t.lastHeight===t.startSize.height?m("Not notifying: Size is the same as the start size, and there has been no notification yet."):t.lastWidth===t.lastNotifiedWidth&&t.lastHeight===t.lastNotifiedHeight?m("Not notifying: Size already notified"):(m("Current size not notified, notifying..."),t.lastNotifiedWidth=t.lastWidth,t.lastNotifiedHeight=t.lastHeight,void O(k(v).listeners,function(t){t(v)}))}function t(){if(m("Scroll detected."),o(v))m("Scroll event fired while unrendered. Ignoring...");else{var t=v.offsetWidth,e=v.offsetHeight;t!==k(v).lastWidth||e!==k(v).lastHeight?(m("Element size changed."),n(i)):m("Element size has not changed ("+t+"x"+e+").")}}if(m("registerListenersAndPositionElements invoked."),k(v)){k(v).onRendered=function(){if(m("startanimation triggered."),o(v))m("Ignoring since element is still unrendered...");else{m("Element rendered.");var t=E(v),e=A(v);0!==t.scrollLeft&&0!==t.scrollTop&&0!==e.scrollLeft&&0!==e.scrollTop||(m("Scrollbars out of sync. Updating detector elements..."),n(i))}},k(v).onExpand=t,k(v).onShrink=t;var e=k(v).style;a(v,e.width,e.height)}else m("Aborting because element has been uninstalled")}function r(){if(m("finalizeDomMutation invoked."),k(v)){var t=k(v).style;c(v,t.width,t.height),f(v,t.width,t.height)}else m("Aborting because element has been uninstalled")}function p(){t(v)}function g(){var t;m("Installing..."),k(v).listeners=[],t=e(),k(v).startSize={width:t.width,height:t.height},m("Element start size",k(v).startSize),w.add(0,n),w.add(1,i),w.add(2,a),w.add(3,r),w.add(4,p)}var b,x;t||(t=v,v=s,s=null),s=s||{},m("Making detectable..."),(x=b=v)!==x.ownerDocument.body&&!x.ownerDocument.body.contains(x)||null===window.getComputedStyle(b)?(m("Element is detached"),y(),m("Waiting until element is attached..."),k(v).onRendered=function(){m("Element is now attached"),g()}):g()},addListener:function(t,e){if(!k(t).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");k(t).listeners.push(e)},uninstall:function(t){var e=k(t);e&&(e.onExpandScroll&&n(E(t),"scroll",e.onExpandScroll),e.onShrinkScroll&&n(A(t),"scroll",e.onShrinkScroll),e.onAnimationStart&&n(e.container,"animationstart",e.onAnimationStart),e.container&&t.removeChild(e.container))}}}},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";var o=n(33),c=n(74),l=n(44);t.exports=function(t){for(var e=o(this),n=l(e.length),i=arguments.length,a=c(1<i?arguments[1]:void 0,n),r=2<i?arguments[2]:void 0,s=void 0===r?n:c(r,n);a<s;)e[a++]=t;return e}},function(t,e,n){var i=n(20),r=n(81),a=n(22).f,s=n(45).f,o=n(62),c=n(59),l=i.RegExp,u=l,h=l.prototype,d=/a/g,f=/a/g,p=new l(d)!==d;if(n(23)&&(!p||n(21)(function(){return f[n(12)("match")]=!1,l(d)!=d||l(f)==f||"/a/i"!=l(d,"i")}))){l=function(t,e){var n=this instanceof l,i=o(t),a=void 0===e;return!n&&i&&t.constructor===l&&a?t:r(p?new u(i&&!a?t.source:t,e):u((i=t instanceof l)?t.source:t,i&&a?c.call(t):e),n?this:h,l)};for(var g=function(e){e in l||a(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},v=s(u),m=0;v.length>m;)g(v[m++]);(h.constructor=l).prototype=h,n(29)(i,"RegExp",l)}n(134)("RegExp")},function(t,e,n){"use strict";var i=n(20),a=n(22),r=n(23),s=n(12)("species");t.exports=function(t){var e=i[t];r&&e&&!e[s]&&a.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){},function(t,e,n){var s=n(46),o=n(75),c=n(27),i=n(16),l=n(24),u=n(26);i(i.S,"Reflect",{get:function t(e,n){var i,a,r=arguments.length<3?e:arguments[2];return u(e)===r?e[n]:(i=s.f(e,n))?c(i,"value")?i.value:void 0!==i.get?i.get.call(r):void 0:l(a=o(e))?t(a,n,r):void 0}})},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){var i=n(16),a=n(21),s=n(30),o=/"/g,r=function(t,e,n,i){var a=String(s(t)),r="<"+e;return""!==n&&(r+=" "+n+'="'+String(i).replace(o,"&quot;")+'"'),r+">"+a+"</"+e+">"};t.exports=function(e,t){var n={};n[e]=t(r),i(i.P+i.F*a(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",n)}},function(t,e){var a;void 0===(a=jQuery).fn.each2&&a.extend(a.fn,{each2:function(t){for(var e=a([0]),n=-1,i=this.length;++n<i&&(e.context=e[0]=this[n])&&!1!==t.call(e[0],n,e););return this}}),function(_,x){"use strict";if(window.Select2===x){var t,e,n,w,r,a,k,i,l={x:0,y:0},o={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case o.LEFT:case o.RIGHT:case o.UP:case o.DOWN:return!0}return!1},isControl:function(t){switch(t.which){case o.SHIFT:case o.CTRL:case o.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return 112<=(t=t.which?t.which:t)&&t<=123}},s={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};a=_(document),i=1,w=function(){return i++},e=P(t=P(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(t){var r,e,n,i,a,s=".select2-results";this.opts=t=this.prepareOpts(t),this.id=t.id,t.element.data("select2")!==x&&null!==t.element.data("select2")&&t.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=_("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(t.element.attr("id")||"autogen"+w()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",t.element.attr("title")),this.body=_("body"),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",t.element.attr("style")),this.container.css(A(t.containerCss,this.opts.element)),this.container.addClass(A(t.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(A(t.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=r=this.container.find(s),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),this.results.on("mousemove",function(t){var e=l;e!==x&&e.x===t.pageX&&e.y===t.pageY||_(t.target).trigger("mousemove-filtered",t)}),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),n=80,i=this.results,a=v(n,function(t){i.trigger("scroll-debounced",t)}),i.on("scroll",function(t){0<=h(t.target,i.get())&&a(t)}),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),_(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),_(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),_.fn.mousewheel&&r.mousewheel(function(t,e,n,i){var a=r.scrollTop();0<i&&a-i<=0?(r.scrollTop(0),m(t)):i<0&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),m(t))}),g(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(t){0<_(t.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.nextSearchTerm=x,_.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==t.maximumInputLength&&this.search.attr("maxlength",t.maximumInputLength);var o=t.element.prop("disabled");o===x&&(o=!1),this.enable(!o);var c=t.element.prop("readonly");c===x&&(c=!1),this.readonly(c),k=k||function(){var t=_("<div class='select2-measure-scrollbar'></div>");t.appendTo("body");var e={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),e}(),this.autofocus=t.element.prop("autofocus"),t.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",t.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,e=t.data("select2"),n=this;this.close(),t.length&&t[0].detachEvent&&t.each(function(){this.detachEvent("onpropertychange",n._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,e!==x&&(e.container.remove(),e.liveRegion.remove(),e.dropdown.remove(),t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),O.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:f(t.attr("locked"),"locked")||f(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(y){var s,t,e,n,b=this;if("select"===(s=y.element).get(0).tagName.toLowerCase()&&(this.select=t=y.element),t&&_.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in y)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),"function"!=typeof(y=_.extend({},{populateResults:function(t,e,p){var g,v=this.opts.id,m=this.liveRegion;(g=function(t,e,n){var i,a,r,s,o,c,l,u,h,d,f=[];for(i=0,a=(t=y.sortResults(t,e,p)).length;i<a;i+=1)s=!(o=!0===(r=t[i]).disabled)&&v(r)!==x,c=r.children&&0<r.children.length,(l=_("<li></li>")).addClass("select2-results-dept-"+n),l.addClass("select2-result"),l.addClass(s?"select2-result-selectable":"select2-result-unselectable"),o&&l.addClass("select2-disabled"),c&&l.addClass("select2-result-with-children"),l.addClass(b.opts.formatResultCssClass(r)),l.attr("role","presentation"),(u=_(document.createElement("div"))).addClass("select2-result-label"),u.attr("id","select2-result-label-"+w()),u.attr("role","option"),(d=y.formatResult(r,u,p,b.opts.escapeMarkup))!==x&&(u.html(d),l.append(u)),c&&((h=_("<ul></ul>")).addClass("select2-result-sub"),g(r.children,h,n+1),l.append(h)),l.data("select2-data",r),f.push(l[0]);e.append(f),m.text(y.formatMatches(t.length))})(e,t,0)}},_.fn.select2.defaults,y)).id&&(e=y.id,y.id=function(t){return t[e]}),_.isArray(y.element.data("select2Tags"))){if("tags"in y)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+y.element.attr("id");y.tags=y.element.data("select2Tags")}if(t?(y.query=this.bind(function(i){var t,e,a,n={results:[],more:!1},r=i.term;a=function(t,e){var n;t.is("option")?i.matcher(r,t.text(),t)&&e.push(b.optionToData(t)):t.is("optgroup")&&(n=b.optionToData(t),t.children().each2(function(t,e){a(e,n.children)}),0<n.children.length&&e.push(n))},t=s.children(),this.getPlaceholder()!==x&&0<t.length&&(e=this.getPlaceholderOption())&&(t=t.not(e)),t.each2(function(t,e){a(e,n.results)}),i.callback(n)}),y.id=function(t){return t.id}):"query"in y||("ajax"in y?((n=y.element.data("ajax-url"))&&0<n.length&&(y.ajax.url=n),y.query=C.call(y.element,y.ajax)):"data"in y?y.query=M(y.data):"tags"in y&&(y.query=T(y.tags),y.createSearchChoice===x&&(y.createSearchChoice=function(t){return{id:_.trim(t),text:_.trim(t)}}),y.initSelection===x&&(y.initSelection=function(t,e){var n=[];_(d(t.val(),y.separator)).each(function(){var t={id:this,text:this},e=y.tags;_.isFunction(e)&&(e=e()),_(e).each(function(){if(f(this.id,t.id))return t=this,!1}),n.push(t)}),e(n)}))),"function"!=typeof y.query)throw"query function not defined for Select2 "+y.element.attr("id");if("top"===y.createSearchChoicePosition)y.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===y.createSearchChoicePosition)y.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof y.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return y},monitorSource:function(){var t,n=this.opts.element,e=this;n.on("change.select2",this.bind(function(t){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var t=n.prop("disabled");t===x&&(t=!1),this.enable(!t);var e=n.prop("readonly");e===x&&(e=!1),this.readonly(e),y(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(A(this.opts.containerCssClass,this.opts.element)),y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(A(this.opts.dropdownCssClass,this.opts.element))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",e._sync)}),(t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==x&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new t(function(t){_.each(t,e._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var e=_.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(e),!e.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=_.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===x&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===x&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,e,n,i,a,r=this.dropdown,s=this.container.offset(),o=this.container.outerHeight(!1),c=this.container.outerWidth(!1),l=r.outerHeight(!1),u=_(window),h=u.width(),d=u.height(),f=u.scrollLeft()+h,p=u.scrollTop()+d,g=s.top+o,v=s.left,m=g+l<=p,y=s.top-l>=u.scrollTop(),b=r.outerWidth(!1),x=v+b<=f;r.hasClass("select2-drop-above")?(e=!0,!y&&m&&(e=!(n=!0))):(e=!1,!m&&y&&(e=n=!0)),n&&(r.hide(),s=this.container.offset(),o=this.container.outerHeight(!1),c=this.container.outerWidth(!1),l=r.outerHeight(!1),f=u.scrollLeft()+h,p=u.scrollTop()+d,g=s.top+o,x=(v=s.left)+(b=r.outerWidth(!1))<=f,r.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(a=_(".select2-results",r)[0],r.addClass("select2-drop-auto-width"),r.css("width",""),c<(b=r.outerWidth(!1)+(a.scrollHeight===a.clientHeight?0:k.width))?c=b:b=c,l=r.outerHeight(!1),x=v+b<=f):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(g-=(t=this.body.offset()).top,v-=t.left),x||(v=s.left+this.container.outerWidth(!1)-b),i={left:v,width:c},e?(i.top=s.top-l,i.bottom="auto",this.container.addClass("select2-drop-above"),r.addClass("select2-drop-above")):(i.top=g,i.bottom="auto",this.container.removeClass("select2-drop-above"),r.removeClass("select2-drop-above")),i=_.extend(i,A(this.opts.dropdownCss,this.opts.element)),r.css(i)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=_.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),a.on("mousemove.select2Event",function(t){l.x=t.pageX,l.y=t.pageY}),!0)},opening:function(){var i,t=this.containerEventName,e="scroll."+t,n="resize."+t,a="orientationchange."+t;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0==(i=_("#select2-drop-mask")).length&&((i=_(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body),i.on("mousedown touchstart click",function(t){c(i);var e,n=_("#select2-drop");0<n.length&&((e=n.data("select2")).opts.selectOnBlur&&e.selectHighlighted({noFocus:!0}),e.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),_("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),i.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){_(this).on(n+" "+e+" "+a,function(t){r.opened()&&r.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,e="scroll."+t,n="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){_(this).off(e).off(n).off(i)}),this.clearDropdownAlignmentPreference(),_("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),a.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(_.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return A(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,e,n,i,a,r,s,o,c=this.results;(e=this.highlight())<0||(0!=e?(t=this.findHighlightableChoices().find(".select2-result-label"),i=(o=((n=_(t[e])).offset()||{}).top||0)+n.outerHeight(!0),e===t.length-1&&0<(s=c.find("li.select2-more-results")).length&&(i=s.offset().top+s.outerHeight(!0)),(a=c.offset().top+c.outerHeight(!0))<i&&c.scrollTop(c.scrollTop()+(i-a)),(r=o-c.offset().top)<0&&"none"!=n.css("display")&&c.scrollTop(c.scrollTop()+r)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var e=this.findHighlightableChoices(),n=this.highlight();-1<n&&n<e.length;){var i=_(e[n+=t]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(n);break}}},highlight:function(t){var e,n,i=this.findHighlightableChoices();if(0===arguments.length)return h(i.filter(".select2-highlighted")[0],i.get());t>=i.length&&(t=i.length-1),t<0&&(t=0),this.removeHighlight(),(e=_(i[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",e.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(e.text()),(n=e.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(n),choice:n})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var e=_(t.target).closest(".select2-result-selectable");if(0<e.length&&!e.is(".select2-highlighted")){var n=this.findHighlightableChoices();this.highlight(n.index(e))}else 0==e.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,n=e.find("li.select2-more-results"),i=this.resultsPage+1,a=this,r=this.search.val(),s=this.context;0!==n.length&&n.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(t){a.opened()&&(a.opts.populateResults.call(this,e,t.results,{term:r,page:i,context:s}),a.postprocessResults(t,!1,!1),!0===t.more?(n.detach().appendTo(e).text(A(a.opts.formatLoadMore,a.opts.element,i+1)),window.setTimeout(function(){a.loadMoreIfNeeded()},10)):n.remove(),a.positionDropdown(),a.resultsPage=i,a.context=t.context,this.opts.element.trigger({type:"select2-loaded",items:t}))})}))},tokenize:function(){},updateResults:function(n){var t,e,i,a=this.search,r=this.results,s=this.opts,o=this,c=a.val(),l=_.data(this.container,"select2-last-term");if((!0===n||!l||!f(c,l))&&(_.data(this.container,"select2-last-term",c),!0===n||!1!==this.showSearchInput&&this.opened())){i=++this.queryCount;var u=this.getMaximumSelectionSize();if(!(1<=u&&(t=this.data(),_.isArray(t)&&t.length>=u&&E(s.formatSelectionTooBig,"formatSelectionTooBig"))))return a.val().length<s.minimumInputLength?(E(s.formatInputTooShort,"formatInputTooShort")?d("<li class='select2-no-results'>"+A(s.formatInputTooShort,s.element,a.val(),s.minimumInputLength)+"</li>"):d(""),void(n&&this.showSearch&&this.showSearch(!0))):void(s.maximumInputLength&&a.val().length>s.maximumInputLength?E(s.formatInputTooLong,"formatInputTooLong")?d("<li class='select2-no-results'>"+A(s.formatInputTooLong,s.element,a.val(),s.maximumInputLength)+"</li>"):d(""):(s.formatSearching&&0===this.findHighlightableChoices().length&&d("<li class='select2-searching'>"+A(s.formatSearching,s.element)+"</li>"),a.addClass("select2-active"),this.removeHighlight(),(e=this.tokenize())!=x&&null!=e&&a.val(e),this.resultsPage=1,s.query({element:s.element,term:a.val(),page:this.resultsPage,context:null,matcher:s.matcher,callback:this.bind(function(t){var e;i==this.queryCount&&(this.opened()?t.hasError!==x&&E(s.formatAjaxError,"formatAjaxError")?d("<li class='select2-ajax-error'>"+A(s.formatAjaxError,s.element,t.jqXHR,t.textStatus,t.errorThrown)+"</li>"):(this.context=t.context===x?null:t.context,this.opts.createSearchChoice&&""!==a.val()&&(e=this.opts.createSearchChoice.call(o,a.val(),t.results))!==x&&null!==e&&o.id(e)!==x&&null!==o.id(e)&&0===_(t.results).filter(function(){return f(o.id(this),o.id(e))}).length&&this.opts.createSearchChoicePosition(t.results,e),0===t.results.length&&E(s.formatNoMatches,"formatNoMatches")?d("<li class='select2-no-results'>"+A(s.formatNoMatches,s.element,a.val())+"</li>"):(r.empty(),o.opts.populateResults.call(this,r,t.results,{term:a.val(),page:this.resultsPage,context:null}),!0===t.more&&E(s.formatLoadMore,"formatLoadMore")&&(r.append("<li class='select2-more-results'>"+s.escapeMarkup(A(s.formatLoadMore,s.element,this.resultsPage))+"</li>"),window.setTimeout(function(){o.loadMoreIfNeeded()},10)),this.postprocessResults(t,n),h(),this.opts.element.trigger({type:"select2-loaded",items:t}))):this.search.removeClass("select2-active"))})})));d("<li class='select2-selection-limit'>"+A(s.formatSelectionTooBig,s.element,u)+"</li>")}function h(){a.removeClass("select2-active"),o.positionDropdown(),r.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?o.liveRegion.text(r.text()):o.liveRegion.text(o.opts.formatMatches(r.find(".select2-result-selectable").length))}function d(t){r.html(t),h()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var i;(i=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var t,e=i[0],n=i.val().length;i.focus(),(0<e.offsetWidth||0<e.offsetHeight)&&e===document.activeElement&&(e.setSelectionRange?e.setSelectionRange(n,n):e.createTextRange&&((t=e.createTextRange()).collapse(!1),t.select()))},0)},selectHighlighted:function(t){if(this._touchMoved)this.clearTouchMoved();else{var e=this.highlight(),n=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");n?(this.highlight(e),this.onSelect(n,t)):t&&t.noFocus&&this.close()}},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==x?t.text():x)},getPlaceholderOption:function(){if(this.select){var t=this.select.children("option").first();if(this.opts.placeholderOption!==x)return"first"===this.opts.placeholderOption&&t||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===_.trim(t.text())&&""===t.val())return t}},initContainerWidth:function(){var t=function(){var t,e,n,i,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return _.isFunction(this.opts.width)?this.opts.width():this.opts.width;if((t=this.opts.element.attr("style"))!==x)for(i=0,a=(e=t.split(";")).length;i<a;i+=1)if(null!==(n=e[i].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=n.length)return n[1];return"resolve"===this.opts.width?0<(t=this.opts.element.css("width")).indexOf("%")?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==t&&this.container.css("width",t)}}),{createContainer:function(){return _(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,e,n;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(t=this.search.get(0)).createTextRange?((e=t.createTextRange()).collapse(!1),e.select()):t.setSelectionRange&&(n=this.search.val().length,t.setSelectionRange(n,n))),""===this.search.val()&&this.nextSearchTerm!=x&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(_.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){_("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),O.call(this,"selection","focusser")},initContainer:function(){var e,t,n=this.container,i=this.dropdown,a=w();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+a),this.focusser.attr("aria-labelledby","select2-chosen-"+a),this.results.attr("id","select2-results-"+a),this.search.attr("aria-owns","select2-results-"+a),this.focusser.attr("id","s2id_autogen"+a),t=_("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(t.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||t.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(_("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode)if(t.which!==o.PAGE_UP&&t.which!==o.PAGE_DOWN)switch(t.which){case o.UP:case o.DOWN:return this.moveHighlight(t.which===o.UP?-1:1),void m(t);case o.ENTER:return this.selectHighlighted(),void m(t);case o.TAB:return void this.selectHighlighted({noFocus:!0});case o.ESC:return this.cancel(t),void m(t)}else m(t)})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==o.TAB&&!o.isControl(t)&&!o.isFunctionKey(t)&&t.which!==o.ESC){if(!1!==this.opts.openOnEnter||t.which!==o.ENTER){if(t.which==o.DOWN||t.which==o.UP||t.which==o.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void m(t)}return t.which==o.DELETE||t.which==o.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(t)):void 0}m(t)}})),g(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(0<=this.opts.minimumResultsForSearch){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){var e;this.isInterfaceEnabled()&&(this.clear(),(e=t).preventDefault(),e.stopImmediatePropagation(),this.close(),this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(t){c(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(_.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(t)})),i.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){m(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(_.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(_.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(_.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var e=this.selection.data("select2-data");if(e){var n=_.Event("select2-clearing");if(this.opts.element.trigger(n),n.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(e),choice:e}),this.triggerChange({removed:e}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==x&&null!==t&&(e.updateSelection(t),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(t,e.search.val()))})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()!==x&&((t=this.getPlaceholderOption())!==x&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===x||null===this.opts.element.val())},prepareOpts:function(){var s=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===s.element.get(0).tagName.toLowerCase()?s.initSelection=function(t,e){var n=t.find("option").filter(function(){return this.selected&&!this.disabled});e(i.optionToData(n))}:"data"in s&&(s.initSelection=s.initSelection||function(t,e){var a=t.val(),r=null;s.query({matcher:function(t,e,n){var i=f(a,s.id(n));return i&&(r=n),i},callback:_.isFunction(e)?function(){e(r)}:_.noop})}),s},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===x?x:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==x){if(this.select&&this.getPlaceholderOption()===x)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,n){var i=0,a=this;if(this.findHighlightableChoices().each2(function(t,e){if(f(a.id(e.data("select2-data")),a.opts.element.val()))return i=t,!1}),!1!==n&&(!0===e&&0<=i?this.highlight(i):this.highlight(0)),!0===e){var r=this.opts.minimumResultsForSearch;0<=r&&this.showSearch(function n(t){var i=0;return _.each(t,function(t,e){e.children?i+=n(e.children):i++}),i}(t.results)>=r)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),_(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(t,e){if(this.triggerSelect(t)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),f(n,this.id(t))||this.triggerChange({added:t,removed:i})}},updateSelection:function(t){var e,n,i=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),i.empty(),null!==t&&(e=this.opts.formatSelection(t,i,this.opts.escapeMarkup)),e!==x&&i.append(e),(n=this.opts.formatSelectionCssClass(t,i))!==x&&i.addClass(n),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==x&&this.container.addClass("select2-allowclear")},val:function(){var t,e=!1,n=null,i=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],1<arguments.length&&(e=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return n=i.optionToData(e),!1}),this.updateSelection(n),this.setPlaceholder(),e&&this.triggerChange({added:n,removed:a});else{if(!t&&0!==t)return void this.clear(e);if(this.opts.initSelection===x)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){i.opts.element.val(t?i.id(t):""),i.updateSelection(t),i.setPlaceholder(),e&&i.triggerChange({added:t,removed:a})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var e,n=!1;if(0===arguments.length)return(e=this.selection.data("select2-data"))==x&&(e=null),e;1<arguments.length&&(n=arguments[1]),t?(e=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),n&&this.triggerChange({added:t,removed:e})):this.clear(n)}}),n=P(t,{createContainer:function(){return _(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var c=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===c.element.get(0).tagName.toLowerCase()?c.initSelection=function(t,e){var n=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){n.push(i.optionToData(e))}),e(n)}:"data"in c&&(c.initSelection=c.initSelection||function(t,r){var s=d(t.val(),c.separator),o=[];c.query({matcher:function(t,e,n){var i=_.grep(s,function(t){return f(t,c.id(n))}).length;return i&&o.push(n),i},callback:_.isFunction(r)?function(){for(var t=[],e=0;e<s.length;e++)for(var n=s[e],i=0;i<o.length;i++){var a=o[i];if(f(n,c.id(a))){t.push(a),o.splice(i,1);break}}r(t)}:_.noop})}),c},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){_("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),O.call(this,"searchContainer","selection")},initContainer:function(){var s,t=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=s=this.container.find(t);var e=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(t){e.search[0].focus(),e.selectChoice(_(this))}),this.search.attr("id","s2id_autogen"+w()),this.search.prev().text(_("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var e=s.find(".select2-search-choice-focus"),n=e.prev(".select2-search-choice:not(.select2-locked)"),i=e.next(".select2-search-choice:not(.select2-locked)"),a=function(t){var e=0,n=0;if("selectionStart"in(t=_(t)[0]))e=t.selectionStart,n=t.selectionEnd-e;else if("selection"in document){t.focus();var i=document.selection.createRange();n=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),e=i.text.length-n}return{offset:e,length:n}}(this.search);if(e.length&&(t.which==o.LEFT||t.which==o.RIGHT||t.which==o.BACKSPACE||t.which==o.DELETE||t.which==o.ENTER)){var r=e;return t.which==o.LEFT&&n.length?r=n:t.which==o.RIGHT?r=i.length?i:null:t.which===o.BACKSPACE?this.unselect(e.first())&&(this.search.width(10),r=n.length?n:i):t.which==o.DELETE?this.unselect(e.first())&&(this.search.width(10),r=i.length?i:null):t.which==o.ENTER&&(r=null),this.selectChoice(r),m(t),void(r&&r.length||this.open())}if((t.which===o.BACKSPACE&&1==this.keydowns||t.which==o.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(s.find(".select2-search-choice:not(.select2-locked)").last()),void m(t);if(this.selectChoice(null),this.opened())switch(t.which){case o.UP:case o.DOWN:return this.moveHighlight(t.which===o.UP?-1:1),void m(t);case o.ENTER:return this.selectHighlighted(),void m(t);case o.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case o.ESC:return this.cancel(t),void m(t)}if(t.which!==o.TAB&&!o.isControl(t)&&!o.isFunctionKey(t)&&t.which!==o.BACKSPACE&&t.which!==o.ESC){if(t.which===o.ENTER){if(!1===this.opts.openOnEnter)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),t.which!==o.PAGE_UP&&t.which!==o.PAGE_DOWN||m(t),t.which===o.ENTER&&m(t)}}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(_.Event("select2-blur"))})),this.container.on("click",t,this.bind(function(t){this.isInterfaceEnabled()&&(0<_(t.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(_.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",t,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(_.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(t){t!==x&&null!==t&&(e.updateSelection(t),e.close(),e.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),e=this.getMaxSearchWidth();t!==x&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(t).addClass("select2-default"),this.search.width(0<e?e:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=x&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(_.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var e=[],n=[],i=this;_(t).each(function(){h(i.id(this),e)<0&&(e.push(i.id(this)),n.push(this))}),t=n,this.selection.find(".select2-search-choice").remove(),_(t).each(function(){i.addSelectedChoice(this)}),i.postprocessResults()},tokenize:function(){var t=this.search.val();null!=(t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts))&&t!=x&&(this.search.val(t),0<t.length&&this.open())},onSelect:function(t,e){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(t,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=x&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var e,n,i=!t.locked,a=_("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=_("<li class='select2-search-choice select2-locked'><div></div></li>"),s=i?a:r,o=this.id(t),c=this.getVal();(e=this.opts.formatSelection(t,s.find("div"),this.opts.escapeMarkup))!=x&&s.find("div").replaceWith("<div>"+e+"</div>"),(n=this.opts.formatSelectionCssClass(t,s.find("div")))!=x&&s.addClass(n),i&&s.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(_(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),s.data("select2-data",t),s.insertBefore(this.searchContainer),c.push(o),this.setVal(c)},unselect:function(t){var e,n,i=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(e=t.data("select2-data")){var a=_.Event("select2-removing");if(a.val=this.id(e),a.choice=e,this.opts.element.trigger(a),a.isDefaultPrevented())return!1;for(;0<=(n=h(this.id(e),i));)i.splice(n,1),this.setVal(i),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(e),choice:e}),this.triggerChange({removed:e}),!0}},postprocessResults:function(t,e,n){var i=this.getVal(),a=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),s=this;a.each2(function(t,e){0<=h(s.id(e.data("select2-data")),i)&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),r.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&!1!==n&&s.highlight(0),!this.opts.createSearchChoice&&0<!a.filter(".select2-result:not(.select2-selected)").length&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&E(s.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+A(s.opts.formatNoMatches,s.opts.element,s.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-p(this.search)},resizeSearch:function(){var t,e,n,i,a=p(this.search);t=function(t){if(!r){var e=t[0].currentStyle||window.getComputedStyle(t[0],null);(r=_(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:e.fontSize,fontFamily:e.fontFamily,fontStyle:e.fontStyle,fontWeight:e.fontWeight,letterSpacing:e.letterSpacing,textTransform:e.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),_("body").append(r)}return r.text(t.val()),r.width()}(this.search)+10,e=this.search.offset().left,(i=(n=this.selection.width())-(e-this.selection.offset().left)-a)<t&&(i=n-a),i<40&&(i=n-a),i<=0&&(i=t),this.search.width(Math.floor(i))},getVal:function(){var t;return this.select?null===(t=this.select.val())?[]:t:d(t=this.opts.element.val(),this.opts.separator)},setVal:function(t){var e;this.select?this.select.val(t):(e=[],_(t).each(function(){h(this,e)<0&&e.push(this)}),this.opts.element.val(0===e.length?"":e.join(this.opts.separator)))},buildChangeDetails:function(t,e){e=e.slice(0),t=t.slice(0);for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++)f(this.opts.id(e[n]),this.opts.id(t[i]))&&(e.splice(n,1),0<n&&n--,t.splice(i,1),i--);return{added:e,removed:t}},val:function(t,n){var i,a=this;if(0===arguments.length)return this.getVal();if((i=this.data()).length||(i=[]),!t&&0!==t)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(n&&this.triggerChange({added:this.data(),removed:i}));if(this.setVal(t),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),n&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===x)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var e=_.map(t,a.id);a.setVal(e),a.updateSelection(t),a.clearSearch(),n&&a.triggerChange(a.buildChangeDetails(i,a.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],e=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(e.opts.id(_(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,e){var n,i,a=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return _(this).data("select2-data")}).get();i=this.data(),t||(t=[]),n=_.map(t,function(t){return a.opts.id(t)}),this.setVal(n),this.updateSelection(t),this.clearSearch(),e&&this.triggerChange(this.buildChangeDetails(i,this.data()))}}),_.fn.select2=function(){var t,e,n,i,a,r=Array.prototype.slice.call(arguments,0),s=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],o=["opened","isFocused","container","dropdown"],c=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===r.length||"object"==typeof r[0])(t=0===r.length?{}:_.extend({},r[0])).element=_(this),"select"===t.element.get(0).tagName.toLowerCase()?a=t.element.prop("multiple"):(a=t.multiple||!1,"tags"in t&&(t.multiple=a=!0)),(e=a?new window.Select2.class.multi:new window.Select2.class.single).init(t);else{if("string"!=typeof r[0])throw"Invalid arguments to select2 plugin: "+r;if(h(r[0],s)<0)throw"Unknown method: "+r[0];if(i=x,(e=_(this).data("select2"))===x)return;if(n=r[0],i="container"===n?e.container:"dropdown"===n?e.dropdown:(l[n]&&(n=l[n]),e[n].apply(e,r.slice(1))),0<=h(r[0],o)||0<=h(r[0],c)&&1==r.length)return!1}}),i===x?this:i},_.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n,i){var a=[];return b(t.text,n.term,a,i),a.join("")},formatSelection:function(t,e,n){return t?n(t.text):x},sortResults:function(t,e,n){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,e){return x},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==x?null:t.id},matcher:function(t,e){return 0<=u(""+e).toUpperCase().indexOf(u(""+t).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(t,e,n,i){var a,r,s,o,c,l=t,u=!1;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return x;for(;;){for(r=-1,s=0,o=i.tokenSeparators.length;s<o&&(c=i.tokenSeparators[s],!(0<=(r=t.indexOf(c))));s++);if(r<0)break;if(a=t.substring(0,r),t=t.substring(r+c.length),0<a.length&&(a=i.createSearchChoice.call(this,a,e))!==x&&null!==a&&i.id(a)!==x&&null!==i.id(a)){for(u=!1,s=0,o=e.length;s<o;s++)if(f(i.id(a),i.id(e[s]))){u=!0;break}u||n(a)}}return l!==t?t:void 0},escapeMarkup:S,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,e){return x},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){return!("ontouchstart"in window||0<navigator.msMaxTouchPoints)||!(t.opts.minimumResultsForSearch<0)}},_.fn.select2.locales=[],_.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,n){return"Loading failed"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results…"},formatSearching:function(){return"Searching…"}},_.extend(_.fn.select2.defaults,_.fn.select2.locales.en),_.fn.select2.ajaxDefaults={transport:_.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:C,local:M,tags:T},util:{debounce:v,markMatch:b,escapeMarkup:S,stripDiacritics:u},class:{abstract:t,single:e,multi:n}}}function c(t){var e=_(document.createTextNode(""));t.before(e),e.before(t),e.remove()}function u(t){return t.replace(/[^\u0000-\u007E]/g,function(t){return s[t]||t})}function h(t,e){for(var n=0,i=e.length;n<i;n+=1)if(f(t,e[n]))return n;return-1}function f(t,e){return t===e||t!==x&&e!==x&&(null!==t&&null!==e&&(t.constructor===String?t+""==e+"":e.constructor===String&&e+""==t+""))}function d(t,e){var n,i,a;if(null===t||t.length<1)return[];for(i=0,a=(n=t.split(e)).length;i<a;i+=1)n[i]=_.trim(n[i]);return n}function p(t){return t.outerWidth(!1)-t.width()}function g(e){var n="keyup-change-value";e.on("keydown",function(){_.data(e,n)===x&&_.data(e,n,e.val())}),e.on("keyup",function(){var t=_.data(e,n);t!==x&&e.val()!==t&&(_.removeData(e,n),e.trigger("keyup-change"))})}function v(e,n,i){var a;return i=i||x,function(){var t=arguments;window.clearTimeout(a),a=window.setTimeout(function(){n.apply(i,t)},e)}}function m(t){t.preventDefault(),t.stopPropagation()}function y(t,e,n){var i,a,r=[];(i=_.trim(t.attr("class")))&&_((i=""+i).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&r.push(this)}),(i=_.trim(e.attr("class")))&&_((i=""+i).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(a=n(this))&&r.push(a)}),t.attr("class",r.join(" "))}function b(t,e,n,i){var a=u(t.toUpperCase()).indexOf(u(e.toUpperCase())),r=e.length;a<0?n.push(i(t)):(n.push(i(t.substring(0,a))),n.push("<span class='select2-match'>"),n.push(i(t.substring(a,a+r))),n.push("</span>"),n.push(i(t.substring(a+r,t.length))))}function S(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function C(s){var t,o=null,e=s.quietMillis||100,c=s.url,l=this;return function(r){window.clearTimeout(t),t=window.setTimeout(function(){var t=s.data,e=c,n=s.transport||_.fn.select2.ajaxDefaults.transport,i={type:s.type||"GET",cache:s.cache||!1,jsonpCallback:s.jsonpCallback||x,dataType:s.dataType||"json"},a=_.extend({},_.fn.select2.ajaxDefaults.params,i);t=t?t.call(l,r.term,r.page,r.context):null,e="function"==typeof e?e.call(l,r.term,r.page,r.context):e,o&&"function"==typeof o.abort&&o.abort(),s.params&&(_.isFunction(s.params)?_.extend(a,s.params.call(l)):_.extend(a,s.params)),_.extend(a,{url:e,dataType:s.dataType,data:t,success:function(t){var e=s.results(t,r.page,r);r.callback(e)},error:function(t,e,n){var i={hasError:!0,jqXHR:t,textStatus:e,errorThrown:n};r.callback(i)}}),o=n.call(l,a)},e)}}function M(t){var e,n,i=t,o=function(t){return""+t.text};_.isArray(i)&&(i={results:n=i}),!1===_.isFunction(i)&&(n=i,i=function(){return n});var a=i();return a.text&&(o=a.text,_.isFunction(o)||(e=a.text,o=function(t){return t[e]})),function(a){var r,s=a.term,n={results:[]};""!==s?(r=function(t,e){var n,i;if((t=t[0]).children){for(i in n={},t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.children=[],_(t.children).each2(function(t,e){r(e,n.children)}),(n.children.length||a.matcher(s,o(n),t))&&e.push(n)}else a.matcher(s,o(t),t)&&e.push(t)},_(i().results).each2(function(t,e){r(e,n.results)}),a.callback(n)):a.callback(i())}}function T(e){var r=_.isFunction(e);return function(n){var i=n.term,a={results:[]},t=r?e(n):e;_.isArray(t)&&(_(t).each(function(){var t=this.text!==x,e=t?this.text:this;(""===i||n.matcher(i,e))&&a.results.push(t?this:{id:this,text:this})}),n.callback(a))}}function E(t,e){if(_.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(e+" must be a string, function, or falsy value")}function A(t,e){if(_.isFunction(t)){var n=Array.prototype.slice.call(arguments,2);return t.apply(e,n)}return t}function O(){var n=this;_.each(arguments,function(t,e){n[e].remove(),n[e]=null})}function P(t,e){var n=function(){};return((n.prototype=new t).constructor=n).prototype.parent=t.prototype,n.prototype=_.extend(n.prototype,e),n}}(jQuery)},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var p,i,u,h,a,d,f;n(86),n(87),n(88),n(90),n(91),n(14),n(15),n(11),n(5),n(6),n(3),n(48),n(80);function s(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}p=jQuery,i=[],u=/^url\(["']?([^"'\)]*)["']?\);?$/i,h=/\.png$/i,a=!!window.createPopup,d=a&&void 0===document.documentElement.currentStyle.minWidth,f=a&&!document.defaultView,p(window).resize(function(){p.each(i,function(){this.refresh(!0)})}),p.Poshytip=function(t,e){this.$elm=p(t),this.opts=p.extend({},p.fn.poshytip.defaults,e),this.$tip=p(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join("")).appendTo(document.body),this.$arrow=this.$tip.find("div.tip-arrow"),this.$inner=this.$tip.find("div.tip-inner"),this.disabled=!1,this.content=null,this.init()},p.Poshytip.hideAll=function(){p.each(i,function(){this.hide()})},p.Poshytip.prototype={init:function(){i.push(this);var t=this.$elm.attr("title");if(this.$elm.data("title.poshytip",void 0!==t?t:null).data("poshytip",this),"none"!=this.opts.showOn)switch(this.$elm.bind({"mouseenter.poshytip":p.proxy(this.mouseenter,this),"mouseleave.poshytip":p.proxy(this.mouseleave,this)}),this.opts.showOn){case"hover":"cursor"==this.opts.alignTo&&this.$elm.bind("mousemove.poshytip",p.proxy(this.mousemove,this)),this.opts.allowTipHover&&this.$tip.hover(p.proxy(this.clearTimeouts,this),p.proxy(this.mouseleave,this));break;case"focus":this.$elm.bind({"focus.poshytip":p.proxy(this.showDelayed,this),"blur.poshytip":p.proxy(this.hideDelayed,this)})}},mouseenter:function(t){return!!this.disabled||(this.updateCursorPos(t),this.$elm.attr("title",""),"focus"==this.opts.showOn||void this.showDelayed())},mouseleave:function(t){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===t.relatedTarget||jQuery.contains(this.$tip[0],t.relatedTarget)))return!0;if(!this.$tip.data("active")){var e=this.$elm.data("title.poshytip");null!==e&&this.$elm.attr("title",e)}if("focus"==this.opts.showOn)return!0;this.hideDelayed()},mousemove:function(t){if(this.disabled)return!0;this.updateCursorPos(t),this.opts.followCursor&&this.$tip.data("active")&&(this.calcPos(),this.$tip.css({left:this.pos.l,top:this.pos.t}),this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-".concat(this.pos.arrow)))},show:function(){this.disabled||this.$tip.data("active")||(this.reset(),this.update(),this.content&&(this.display(),this.opts.timeOnScreen&&this.hideDelayed(this.opts.timeOnScreen)))},showDelayed:function(t){this.clearTimeouts(),this.showTimeout=setTimeout(p.proxy(this.show,this),"number"==typeof t?t:this.opts.showTimeout)},hide:function(){!this.disabled&&this.$tip.data("active")&&this.display(!0)},hideDelayed:function(t){this.clearTimeouts(),this.hideTimeout=setTimeout(p.proxy(this.hide,this),"number"==typeof t?t:this.opts.hideTimeout)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",!1),this.$inner.find("*").poshytip("hide"),this.opts.fade&&this.$tip.css("opacity",this.opacity),this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left",this.asyncAnimating=!1},update:function(t,e){if(!this.disabled){var n=void 0!==t;if(n){if(e||(this.opts.content=t),!this.$tip.data("active"))return}else t=this.opts.content;var i=this,a="function"==typeof t?t.call(this.$elm[0],function(t){i.update(t)},this.$tip):"[title]"==t?this.$elm.data("title.poshytip"):t;this.content!==a&&(this.$inner.empty().append(a),this.content=a),this.refresh(n)}},refresh:function(t){if(!this.disabled){if(t){if(!this.$tip.data("active"))return;var e={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(document.body),void 0===this.opacity&&(this.opacity=this.$tip.css("opacity"));var n=this.$tip.css("background-image").match(u),i=this.$arrow.css("background-image").match(u);if(n){var a=h.test(n[1]);d&&a?(this.$tip.css("background-image","none"),this.$inner.css({margin:0,border:0,padding:0}),n=a=!1):this.$tip.prepend('<table class="tip-table" border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'.concat(n[1],'")')).end().find("td").eq(3).append(this.$inner),a&&f&&(this.opts.fade=!1)}i&&f&&(d&&h.test(i[1])&&(i=!1,this.$arrow.css("background-image","none")),this.opts.fade=!1);var r=this.$tip.find("> table.tip-table");if(d){this.$tip[0].style.width="",r.width("auto").find("td").eq(3).width("auto");var s=this.$tip.width(),o=parseInt(this.$tip.css("min-width")),c=parseInt(this.$tip.css("max-width"));!isNaN(o)&&s<o?s=o:!isNaN(c)&&c<s&&(s=c),this.$tip.add(r).width(s).eq(0).find("td").eq(3).width("100%")}else r[0]&&r.width("auto").find("td").eq(3).width("auto").end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find("td").eq(3).width("100%");if(this.tipOuterW=this.$tip.outerWidth(),this.tipOuterH=this.$tip.outerHeight(),this.calcPos(),i&&this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-".concat(this.pos.arrow),this.$arrow.css("visibility","inherit")),t&&this.opts.refreshAniDuration){this.asyncAnimating=!0;var l=this;this.$tip.css(e).animate({left:this.pos.l,top:this.pos.t},this.opts.refreshAniDuration,function(){l.asyncAnimating=!1})}else this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(t){var e=this.$tip.data("active");if(!(e&&!t||!e&&t)){if(this.$tip.stop(),(this.opts.slide&&this.pos.arrow||this.opts.fade)&&(t&&this.opts.hideAniDuration||!t&&this.opts.showAniDuration)){var n={},i={};if(this.opts.slide&&this.pos.arrow){var a,r;r="bottom"==this.pos.arrow||"top"==this.pos.arrow?(a="top","bottom"):(a="left","right");var s=parseInt(this.$tip.css(a));n[a]=s+(t?0:this.pos.arrow==r?-this.opts.slideOffset:this.opts.slideOffset),i[a]="".concat(s+(t?this.pos.arrow==r?this.opts.slideOffset:-this.opts.slideOffset:0),"px")}this.opts.fade&&(n.opacity=t?this.$tip.css("opacity"):0,i.opacity=t?0:this.opacity),this.$tip.css(n).animate(i,this.opts[t?"hideAniDuration":"showAniDuration"])}if(t?this.$tip.queue(p.proxy(this.reset,this)):this.$tip.css("visibility","inherit"),e){var o=this.$elm.data("title.poshytip");null!==o&&this.$elm.attr("title",o)}this.$tip.data("active",!e)}},disable:function(){this.reset(),this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.reset(),this.$tip.remove(),delete this.$tip,this.content=null,this.$elm.unbind(".poshytip").removeData("title.poshytip").removeData("poshytip"),i.splice(p.inArray(this,i),1)},clearTimeouts:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},updateCursorPos:function(t){this.eventX=t.pageX,this.eventY=t.pageY},calcPos:function(){var t,e,n,i,a,r,s={l:0,t:0,arrow:""},o=p(window),c={l:o.scrollLeft(),t:o.scrollTop(),w:o.width(),h:o.height()};if("cursor"==this.opts.alignTo)t=e=n=this.eventX,i=a=r=this.eventY;else{var l=this.$elm.offset(),u=l.left,h=l.top,d="g"==this.$elm[0].tagName?this.$elm[0].getBBox().width:this.$elm.outerWidth(),f="g"==this.$elm[0].tagName?this.$elm[0].getBBox().height:this.$elm.outerHeight();e=(t=u+("inner-right"!=this.opts.alignX?0:d))+Math.floor(d/2),n=t+("inner-left"!=this.opts.alignX?d:0),a=(i=h+("inner-bottom"!=this.opts.alignY?0:f))+Math.floor(f/2),r=i+("inner-top"!=this.opts.alignY?f:0)}switch(this.opts.alignX){case"right":case"inner-left":s.l=n+this.opts.offsetX,this.opts.keepInViewport&&s.l+this.tipOuterW>c.l+c.w&&(s.l=c.l+c.w-this.tipOuterW),"right"!=this.opts.alignX&&"center"!=this.opts.alignY||(s.arrow="left");break;case"center":s.l=e-Math.floor(this.tipOuterW/2),this.opts.keepInViewport&&(s.l+this.tipOuterW>c.l+c.w?s.l=c.l+c.w-this.tipOuterW:s.l<c.l&&(s.l=c.l));break;default:s.l=t-this.tipOuterW-this.opts.offsetX,this.opts.keepInViewport&&s.l<c.l&&(s.l=c.l),"left"!=this.opts.alignX&&"center"!=this.opts.alignY||(s.arrow="right")}switch(this.opts.alignY){case"bottom":case"inner-top":s.t=r+this.opts.offsetY,s.arrow&&"cursor"!=this.opts.alignTo||(s.arrow="top"),this.opts.keepInViewport&&s.t+this.tipOuterH>c.t+c.h&&(s.t=i-this.tipOuterH-this.opts.offsetY,"top"==s.arrow&&(s.arrow="bottom"));break;case"center":s.t=a-Math.floor(this.tipOuterH/2),this.opts.keepInViewport&&(s.t+this.tipOuterH>c.t+c.h?s.t=c.t+c.h-this.tipOuterH:s.t<c.t&&(s.t=c.t));break;default:s.t=i-this.tipOuterH-this.opts.offsetY,s.arrow&&"cursor"!=this.opts.alignTo||(s.arrow="bottom"),this.opts.keepInViewport&&s.t<c.t&&(s.t=r+this.opts.offsetY,"bottom"==s.arrow&&(s.arrow="top"))}this.pos=s}},p.fn.poshytip=function(t){if("string"==typeof t){var e=arguments,n=t;return Array.prototype.shift.call(e),"destroy"==n&&(this.die?this.die("mouseenter.poshytip").die("focus.poshytip"):p(document).undelegate(this.selector,"mouseenter.poshytip").undelegate(this.selector,"focus.poshytip")),this.each(function(){var t=p(this).data("poshytip");t&&t[n]&&t[n].apply(t,s(e))})}var i=p.extend({},p.fn.poshytip.defaults,t);if(p("#poshytip-css-".concat(i.className))[0]||p(['<style id="poshytip-css-',i.className,'" type="text/css">',"div.",i.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",i.className," table.tip-table, div.",i.className," table.tip-table td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;vertical-align:middle;}","div.",i.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",i.bgImageFrameSize,"px;width:",i.bgImageFrameSize,"px;overflow:hidden;}","div.",i.className," td.tip-right{background-position:100% 0;}","div.",i.className," td.tip-bottom{background-position:100% 100%;}","div.",i.className," td.tip-left{background-position:0 100%;}","div.",i.className," div.tip-inner{background-position:-",i.bgImageFrameSize,"px -",i.bgImageFrameSize,"px;}","div.",i.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head"),i.liveEvents&&"none"!=i.showOn){var a,r=p.extend({},i,{liveEvents:!1});switch(i.showOn){case"hover":a=function(t){var e=p(this);e.data("poshytip")||e.poshytip(r).poshytip("mouseenter",t)},this.live?this.live("mouseenter.poshytip",a):p(document).delegate(this.selector,"mouseenter.poshytip",a);break;case"focus":a=function(){var t=p(this);t.data("poshytip")||t.poshytip(r).poshytip("showDelayed")},this.live?this.live("focus.poshytip",a):p(document).delegate(this.selector,"focus.poshytip",a)}return this}return this.each(function(){new p.Poshytip(this,i)})},p.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,timeOnScreen:0,showOn:"hover",liveEvents:!1,alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,keepInViewport:!0,allowTipHover:!0,followCursor:!1,fade:!0,slide:!0,slideOffset:8,showAniDuration:300,hideAniDuration:300,refreshAniDuration:200};n(17),n(8),n(18),n(19),n(7),n(9),n(13),n(4);var r=n(0),N=n.n(r),o=n(1),j=n.n(o),g=function(t){return t},v=function(t){if(null==t)return g;var r,s,o=t.scale[0],c=t.scale[1],l=t.translate[0],u=t.translate[1];return function(t,e){e||(r=s=0);var n=2,i=t.length,a=new Array(i);for(a[0]=(r+=t[0])*o+l,a[1]=(s+=t[1])*c+u;n<i;)a[n]=t[n],++n;return a}},m=function(t,e){for(var n,i=t.length,a=i-e;a<--i;)n=t[a],t[a++]=t[i],t[i]=n},c=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return l(e,t)})}:l(e,t)};function l(t,e){var n=e.id,i=e.bbox,a=null==e.properties?{}:e.properties,r=y(t,e);return null==n&&null==i?{type:"Feature",properties:a,geometry:r}:null==i?{type:"Feature",id:n,properties:a,geometry:r}:{type:"Feature",id:n,bbox:i,properties:a,geometry:r}}function y(t,e){var r=v(t.transform),s=t.arcs;function a(t,e){e.length&&e.pop();for(var n=s[t<0?~t:t],i=0,a=n.length;i<a;++i)e.push(r(n[i],i));t<0&&m(e,a)}function o(t){return r(t)}function c(t){for(var e=[],n=0,i=t.length;n<i;++n)a(t[n],e);return e.length<2&&e.push(e[0]),e}function n(t){for(var e=c(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(n)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=c(e.arcs);break;case"MultiLineString":n=e.arcs.map(c);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:i,coordinates:n}}(e)}var b=function(c,a){var r={},l={},u={},s=[],o=-1;function t(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),s.push(i)}}return a.forEach(function(t,e){var n,i=c.arcs[t<0?~t:t];i.length<3&&!i[1][0]&&!i[1][1]&&(n=a[++o],a[o]=t,a[e]=n)}),a.forEach(function(t){var e,n,i=function(t){var e,n=c.arcs[t<0?~t:t],i=n[0];c.transform?(e=[0,0],n.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=n[n.length-1];return t<0?[e,i]:[i,e]}(t),a=i[0],r=i[1];if(e=u[a])if(delete u[e.end],e.push(t),e.end=r,n=l[r]){delete l[n.start];var s=n===e?e:e.concat(n);l[s.start=e.start]=u[s.end=n.end]=s}else l[e.start]=u[e.end]=e;else if(e=l[r])if(delete l[e.start],e.unshift(t),e.start=a,n=u[a]){delete u[n.end];var o=n===e?e:n.concat(e);l[o.start=n.start]=u[o.end=e.end]=o}else l[e.start]=u[e.end]=e;else l[(e=[t]).start=a]=u[e.end=r]=e}),t(u,l),t(l,u),a.forEach(function(t){r[t<0?~t:t]||s.push([t])}),s};function x(n,t,e){var i,a,r,s,o;if(1<arguments.length)i=function(t,e,n){var i,a=[],r=[],s=[];function o(t){var e=t<0?~t:t;(s[e]||(s[e]=[])).push({i:t,g:i})}function c(t){t.forEach(o)}function l(t){t.forEach(c)}return function t(e){switch((i=e).type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":c(e.arcs);break;case"MultiLineString":case"Polygon":l(e.arcs);break;case"MultiPolygon":e.arcs.forEach(l)}}(e),s.forEach(function(t){!function(t,e){if(e){var n=a.indexOf(e);-1===n&&(a.push(e),n=r.length,r.push([])),r[n].push(t)}}(t[0].i,!n||n.apply(null,t.map(function(t){return t.g})))}),[r,a]}(0,t,e),r=i[1],i=i[0];else for(s=0,a=new Array(o=n.arcs.length);s<o;++s)a[s]=s,i=[a],r=[!0];return i.map(function(t,e){return{type:"MultiLineString",properties:{tag:r[e]},arcs:b(n,t)}})}var _=new ArrayBuffer(16);new Float64Array(_),new Uint32Array(_);function w(t){var e=t[0],n=t[1],i=t[2];return Math.abs((e[0]-i[0])*(n[1]-e[1])-(e[0]-n[0])*(i[1]-e[1]))/2}function k(t,e){return t[1][2]-e[1][2]}function S(t){return[t[0],t[1],0]}var C=function(t,c){var l=t.transform?v(t.transform):S,u=function(){var t={},s=[],o=0;function i(t,e){for(;0<e;){var n=(e+1>>1)-1,i=s[n];if(0<=k(t,i))break;s[i._=e]=i,s[t._=e=n]=t}}function a(t,e){for(;;){var n=e+1<<1,i=n-1,a=e,r=s[a];if(i<o&&k(s[i],r)<0&&(r=s[a=i]),n<o&&k(s[n],r)<0&&(r=s[a=n]),a===e)break;s[r._=e]=r,s[t._=e=a]=t}}return t.push=function(t){return i(s[t._=o]=t,o++),o},t.pop=function(){if(!(o<=0)){var t,e=s[0];return 0<--o&&(t=s[o],a(s[t._=0]=t,0)),e}},t.remove=function(t){var e,n=t._;if(s[n]===t)return n!==--o&&(k(e=s[o],t)<0?i:a)(s[e._=n]=e,n),n},t}();null==c&&(c=w);var e=t.arcs.map(function(t){var e,n,i,a=[],r=0;for(n=1,i=(t=t.map(l)).length-1;n<i;++n)(e=[t[n-1],t[n],t[n+1]])[1][2]=c(e),a.push(e),u.push(e);for(t[0][2]=t[i][2]=1/0,n=0,i=a.length;n<i;++n)(e=a[n]).previous=a[n-1],e.next=a[n+1];for(;e=u.pop();){var s=e.previous,o=e.next;e[1][2]<r?e[1][2]=r:r=e[1][2],s&&(s.next=o,s[2]=e[2],h(s)),o&&(o.previous=s,o[0]=e[0],h(o))}return t});function h(t){u.remove(t),t[1][2]=c(t),u.push(t)}return{type:"Topology",bbox:t.bbox,objects:t.objects,arcs:e}};Math.PI,Math.abs,Math.atan2,Math.cos,Math.sin;var M,L=n(2),T=n(63),E=n(64),A=n.n(E),O=n(65),P=n.n(O),D=n(10),I=n.n(D);n(130),n(131),n(25);(M=N.a).fn.invisible=function(){return this.each(function(){M(this).css("visibility","hidden")})},M.fn.visible=function(){return this.each(function(){M(this).css("visibility","visible")})},M.fn.disable=function(){return this.each(function(){M(this).attr("disabled",!0)})},M.fn.enable=function(){return this.each(function(){M(this).attr("disabled",!1)})},M.fn.redraw=function(){return M(this).each(function(){this.offsetHeight})},M.fn.htmlClean=function(){return this.contents().filter(function(){return 3!=this.nodeType?(M(this).htmlClean(),!1):(this.textContent=M.trim(this.textContent),!/\S/.test(this.nodeValue))}).remove(),this},M.widget("ui.dragslider",M.ui.slider,{options:M.extend({},M.ui.slider.prototype.options,{rangeDrag:!1}),_create:function(){M.ui.slider.prototype._create.apply(this,arguments),this._rangeCapture=!1},_mouseCapture:function(t){var e=this.options;return!e.disabled&&(t.target==this.range.get(0)&&1==e.rangeDrag&&1==e.range?(this._rangeCapture=!0,this._rangeStart=null):this._rangeCapture=!1,M.ui.slider.prototype._mouseCapture.apply(this,arguments),1==this._rangeCapture&&this.handles.removeClass("ui-state-active").blur(),!0)},_mouseStop:function(t){return this._rangeStart=null,M.ui.slider.prototype._mouseStop.apply(this,arguments)},_slide:function(t,e,n){if(!this._rangeCapture)return M.ui.slider.prototype._slide.apply(this,arguments);null==this._rangeStart&&(this._rangeStart=n);var i=this.options.values[0],a=this.options.values[1],r=n-this._rangeStart,s=i+r,o=a+r;if(this.options.values&&this.options.values.length&&(o>this._valueMax()&&0<r&&(s=i+(r-=o-this._valueMax()),o=a+r),s<this._valueMin()&&(s=i+(r+=this._valueMin()-s),o=a+r),0!==r)){var c=this.values();c[0]=s,c[1]=o,!1!==this._trigger("slide",t,{handle:this.handles[e],value:r,values:c})&&(this.values(0,s,!0),this.values(1,o,!0)),this._rangeStart=n}}}),String.prototype.width=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:12,e=1<arguments.length?arguments[1]:void 0,n=(String.prototype.width.canvas||(String.prototype.width.canvas=document.createElement("canvas"))).getContext("2d");n.font=e||"".concat(t,"px Verdana");var i=n.measureText(this);return Math.ceil(i.width)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.ucwords=function(){return"".concat(this).replace(/^([a-z])|\s+([a-z])/g,function(t){return t.toUpperCase()})},String.prototype.isIn=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).includes(this.valueOf())},Number.prototype.isIn=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).includes(this.valueOf())},Object.filter=function(t,e){var n,i={};for(n in t)t.hasOwnProperty(n)&&e(t[n])&&(i[n]=t[n]);return i},Object.size=function(t){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n};var z=function(t){return Math.log(t)/Math.log(10)},H=function(t,e){var n,i,a=t<0;return n=Math.abs(t),n=(i=e<=(i=1-z(n)+(e-1))?i:e)<20?n.toFixed(i):n,a?-n:n};function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var F=function(t,e){var n,i,a=t.ticks.apply(t,[10]).length-1,r=W(j.a.extent(t.domain()),2),s=r[0],o=r[1]-s,c=Math.abs(o/a);return n=2===e?1<=(i=Math.ceil(1-z(100*c)+1)-2)?j.a.format(".".concat(i,"%")):j.a.format(".0%"):1<=(i=Math.ceil(1-z(c)+1)-2)?j.a.format(".".concat(i,"f")):j.a.format("s"),function(t){return n(t).replace("G","B")}},$=function t(e,n){var i=e;if("object"!==R(i))return"number"==typeof(i=parseFloat(i))&&(i=n.unit&&2===n.unit?i*=100:i,i=j.a.format(",")(H(i,2))),n.unit&&2===n.unit&&(i+="%"),n.metric&&(i+=" ".concat(n.metric)),i;var a="",r=Object.prototype.hasOwnProperty.call(i,"m"),s=Object.prototype.hasOwnProperty.call(i,"l"),o=Object.prototype.hasOwnProperty.call(i,"u");if(r&&(a+=t(i.m,n)),s&&o&&i.m!==i.l&&i.m!==i.u){var c=t(i.l,{unit:n.unit}),l=t(i.u,{unit:n.unit});a+=" (".concat(c," &mdash; ").concat(l,") ")}return a};function B(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var V=function(t,e,n){var i=t<e?t:e,a=(t<e?e:t)-i,r=B(Array(n)).map(function(t,e){return i+a/(n-1)*e});return e<t?r.reverse():r},q=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=[].slice.call(e,0).join("/");return i=(i=(i=(i=i.replace(/:\//g,"://")).replace(/([^:\s])\/+/g,"$1/")).replace(/\/(\?|&|#(\w+)$)/g,"$1")).replace(/(\?.+)\?/g,"$1&")},U=function t(){for(var e,n,i,a,r,s,o,c={},l=arguments.length,u=new Array(l),h=0;h<l;h++)u[h]=arguments[h];for(a=0,r=u.length;a<r;++a)if((i=u[a])instanceof Object&&!(i instanceof Array)&&!(i instanceof Function))for(s=0,o=(e=Object.keys(i)).length;s<o;++s)!(i[n=e[s]]instanceof Object)||i[n]instanceof Array||i[n]instanceof Function?c[n]=i[n]:c[n]=t(c[n]||{},i[n]);return c},Y=function t(e){var n,i,a,r,s,o;if(!(e&&e instanceof Object))return e;for(s=0,o=(i=e instanceof Array?(a="array",n=[],e):(a="object",n={},Object.keys(e))).length;s<o;++s)n[r="object"===a?i[s]:s]=t(e[r]);return n},G=function(t,e){return e.includes(t)},K=function(t,e){return t instanceof Array&&e instanceof Array?0!==function(t,e){var n,i,a=[];i=t.length>e.length?(n=e,t):(n=t,e);for(var r=0,s=n.length;r<s;++r)for(var o=0,c=i.length;o<c;++o)if(n[r]===i[o]){a.push(n[r]);break}return a}(t,e).length:t instanceof Array?G(e,t):e instanceof Array?G(t,e):t.length<=e.length?G(t,e):G(e,t)};n(34);function X(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Z=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"dark",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"light",i=0,a=0,r=0,s=t;if(/rgba/.test(s)){var o=X(s=s.replace("rgba(","").replace(")","").split(/,/),3);i=o[0],a=o[1],r=o[2]}else if(/rgb/.test(s)){var c=X(s=s.replace("rgb(","").replace(")","").split(/,/),3);i=c[0],a=c[1],r=c[2]}else if(/#/.test(s)){if(3===(s=s.replace("#","")).length){var l="";l+=s[0]+s[0],l+=s[1]+s[1],s=l+=s[2]+s[2]}i=parseInt(s.substr(0,2),16),a=parseInt(s.substr(2,2),16),r=parseInt(s.substr(4,2),16)}return 128<=(299*i+587*a+114*r)/1e3?n:e};n(133);function Q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var J=function(t,e,n){if(!t)return t;var i=t,a=function(t,e){for(var n="".concat(t);n.length<e;)n="0"+n;return n};i=(i=i.replace(/^\s*|\s*$/,"")).replace(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i,"#$1$1$2$2$3$3");var r=Math.round(256*e)*(n?-1:1),s=i.match(new RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|0?\\.\\d+))?\\s*\\)$","i")),o=s&&void 0!==s[4]?s[4]:null,c=Q((s?[s[1],s[2],s[3]]:i.replace(/^#?([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])([a-f0-9][a-f0-9])/i,function(){return"\n          ".concat(parseInt(arguments.length<=1?void 0:arguments[1],16),",\n          ").concat(parseInt(arguments.length<=2?void 0:arguments[2],16),",\n          ").concat(parseInt(arguments.length<=3?void 0:arguments[3],16),"\n        ")}).split(/,/)).map(function(t){return parseInt(t,10)}),3),l=c[0],u=c[1],h=c[2];return s?"rgb".concat(null!==o?"a":"","(\n      ").concat(Math[n?"max":"min"](l+r,n?0:255),",\n      ").concat(Math[n?"max":"min"](u+r,n?0:255),",\n      ").concat(Math[n?"max":"min"](h+r,n?0:255),"\n      ").concat(null!==o?", ".concat(o):"",")"):["#",a(Math[n?"max":"min"](l+r,n?0:255).toString(16),2),a(Math[n?"max":"min"](u+r,n?0:255).toString(16),2),a(Math[n?"max":"min"](h+r,n?0:255).toString(16),2)].join("")},tt=function(t,e){return J(t,e,!0)},et=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[0],a=e[1];i.empty()&&a.apply(this,e);var r=0;i.each(function(){r+=1}).each("end",function(){r-=1;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r||a.apply(this,e)})};function nt(t,e){return t instanceof Function?t(e):!!e[t]&&e[t]}function it(t,a){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"children",s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];return t?(t instanceof Array?t:[t]).reduce(function(t,e){var n=a(t,e,s),i=nt(r,e);return i&&i.length?it(i,a,n,r,s.concat([e])):t},e):e}function at(t,i){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"children",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return t?(t instanceof Array?t:[t]).map(function(t){var e=i(t,r),n=nt(a,t);return n&&n.length&&(e[a]=at(n,i,a,r.concat([t]))),e}):[]}var rt={A:["rgb(252,187,161)","rgb(252,146,114)","rgb(251,106,74)","rgb(239,59,44)","rgb(203,24,29)","rgb(165,15,21)","rgb(103,0,13)"],B:["rgb(198,219,239)","rgb(158,202,225)","rgb(107,174,214)","rgb(66,146,198)","rgb(33,113,181)","rgb(8,81,156)","rgb(8,48,107)"],C:["rgb(199,233,192)","rgb(161,217,155)","rgb(116,196,118)","rgb(65,171,93)","rgb(35,139,69)","rgb(0,109,44)","rgb(0,68,27)"]};function st(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ot=function(){function e(t){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.loaded=!1,this.defaults={container:"#chart",type:"arrow",width:1e3,height:500,animation:1e3,margin:{top:20,left:10,right:10,bottom:0},padding:4,rectHeight:20,limit:null},this.settings=N.a.extend({},this.defaults,t),this.data=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return t instanceof Array&&(r.data.values=t,r.loaded&&r.update(e)),r.data.values},this.data.prep=function(){r.data().forEach(function(e,n){e.rows=j.a.values(e.data);var t=e.rows.map(function(t){return t.value}),i=j.a.scale.linear().domain(j.a.extent(t)).range([0,(e.rows.length-1)*(r.settings.rectHeight+4)]);if(e.rows.forEach(function(t){t["stroke-width"]=t["stroke-width"]?t["stroke-width"]:e["stroke-width"],t["font-color"]=t["font-color"]?t["font-color"]:e["font-color"],t.stroke=t.stroke?t.stroke:e.stroke,t.fill=t.fill?t.fill:e.fill,t.y=i(t.value)+(r.settings.limit&&t.value>r.settings.limit?6:0)}),n){var a=r.data()[n-1];a.slopes={},a.slopes.data=a.rows.map(function(t){var e=r.data()[n].data;return e[t.id]?{id:t.id,stroke:t.stroke?t.stroke:a.stroke,"stroke-width":t["stroke-width"]?t["stroke-width"]:a["stroke-width"],y1:t.y,y2:e[t.id].y}:{}}).filter(function(t){return void 0!==t})}})},this.layout={col:{},slope:{}},this.layout.calc=function(){var t=r.settings.margin.left+r.settings.margin.right,e=r.data().length,n=(r.settings.width-t)/e;r.layout.col.width=n*(2/3),r.layout.slope.width=n*(1/3),r.layout.slope.x1=function(t){return(t+1)*(r.layout.col.width+t*r.layout.slope.width)},r.layout.slope.x2=function(t){return r.layout.slope.x1(t)+r.layout.slope.width},r.layout.col.width+=r.layout.slope.width/e,r.layout.col.x=function(t){return t*(r.layout.col.width+r.layout.slope.width)},r.layout.col.y=function(t){return t.y-.7*r.settings.rectHeight}}}var t,n,i;return t=e,(n=[{key:"render",value:function(){var e=this,t=this.settings,n=t.width,i=t.height,a=t.margin,r=t.rectHeight,s=t.container;this.data.prep(),this.layout.calc(),this.svg=j.a.select(s).append("svg").attr("height","100%").attr("width","100%").attr("viewBox","0 0 ".concat(n," ").concat(i)).attr("preserveAspectRatio","none").attr("overflow","hidden"),this.plot=this.svg.append("g").attr("class","plot").attr("transform","translate(".concat(a.left,",").concat(a.top,")")),this.cols=this.plot.selectAll("g.col").data(j.a.range(0,this.data().length,1)),this.cols.enter().append("g").attr("class","col"),this.slopes=this.plot.selectAll("g.slopes").data(j.a.range(0,this.data().length-1,1)),this.slopes.enter().append("g").attr("class","slopes"),this.data().forEach(function(t,n){t.group=e.cols.filter(function(t,e){return n===e}),t.rect=t.group.selectAll("rect").data(t.rows,function(t){return t.id}),t.text=t.group.selectAll("text").data(t.rows,function(t){return t.id}),t.rect.enter().append("rect").attr("x",e.layout.col.x(n)).attr("y",e.layout.col.y).attr("width",e.layout.col.width).attr("height",r).attr("fill",function(t){return t.fill}).attr("stroke-width",function(t){return t["stroke-width"]}).attr("stroke",function(t){return t.stroke}),t.text.enter().append("text").attr("x",e.layout.col.x(n)+4).attr("y",function(t){return t.y}).attr("fill",function(t){return t["font-color"]}).text(function(t){return t.text}),t.slopes&&(t.slopes.group=e.slopes.filter(function(t,e){return n===e}),t.slopes.lines=t.slopes.group.selectAll("line").data(t.slopes.data,function(t){return t.id}),t.slopes.lines.enter().append("line").attr("x1",e.layout.slope.x1(n)).attr("x2",e.layout.slope.x2(n)).attr("y1",function(t){return t.y1-4}).attr("y2",function(t){return t.y2-4}).attr("stroke",function(t){return t.stroke}).attr("stroke-width",function(t){return t["stroke-width"]}).attr("stroke-dasharray",function(t){return t.y1>=t.y2?"none":"5px, 5px"}))}),this.loaded=!0}},{key:"update",value:function(){var e=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.settings,n=t.width,a=t.height,r=t.rectHeight,s=t.animation;this.svg.attr("viewBox","0 0 ".concat(n," ").concat(a)),this.data.prep(),this.layout.calc(),this.cols=this.plot.selectAll("g.col").data(j.a.range(0,this.data().length,1)),this.cols.enter().append("g").attr("class","col"),this.cols.exit().transition().duration(i?s:0).attr("opacity",0).remove(),this.slopes=this.plot.selectAll("g.slopes").data(j.a.range(0,this.data().length-1,1)),this.slopes.enter().append("g").attr("class","slopes"),this.slopes.exit().transition().duration(i?s:0).attr("opacity",0).remove(),this.data().forEach(function(t,n){t.group=e.cols.filter(function(t,e){return n===e}),t.rect=t.group.selectAll("rect").data(t.rows,function(t){return t.id}),t.text=t.group.selectAll("text").data(t.rows,function(t){return t.id}),t.rect.enter().append("rect").attr("x",e.layout.col.x(n)).attr("y",e.layout.col.y).attr("width",e.layout.col.width).attr("height",r).attr("fill",function(t){return t.fill}).attr("stroke-width",function(t){return t["stroke-width"]}).attr("stroke",function(t){return t.stroke}),t.rect.exit().remove(),t.rect.transition().duration(i?s:0).attr("x",e.layout.col.x(n)).attr("y",e.layout.col.y).attr("width",e.layout.col.width).attr("height",r).attr("fill",function(t){return t.fill}).attr("stroke-width",function(t){return t["stroke-width"]}).attr("stroke",function(t){return t.stroke}),t.text.enter().append("text").attr("x",e.layout.col.x(n)+4).attr("y",function(t){return t.y}).attr("fill",function(t){return t["font-color"]}).text(function(t){return t.text}),t.text.exit().remove(),t.text.transition().duration(i?s:0).attr("x",e.layout.col.x(n)+4).attr("y",function(t){return t.y}).attr("fill",function(t){return t["font-color"]}).text(function(t){return t.text}),t.slopes&&(t.slopes.group=e.slopes.filter(function(t,e){return n===e}),t.slopes.lines=t.slopes.group.selectAll("line").data(t.slopes.data,function(t){return t.id}),t.slopes.lines.enter().append("line").attr("x1",e.layout.slope.x1(n)).attr("x2",e.layout.slope.x2(n)).attr("y1",function(t){return t.y1-4}).attr("y2",function(t){return t.y2-4}).attr("stroke",function(t){return t.stroke}).attr("stroke-width",function(t){return t["stroke-width"]}).attr("stroke-dasharray",function(t){return t.y1>=t.y2?"none":"5px, 5px"}),t.slopes.lines.exit().remove(),t.slopes.lines.transition().duration(i?s:0).attr("x1",e.layout.slope.x1(n)).attr("x2",e.layout.slope.x2(n)).attr("y1",function(t){return t.y1-4}).attr("y2",function(t){return t.y2-4}).attr("stroke",function(t){return t.stroke}).attr("stroke-width",function(t){return t["stroke-width"]}).attr("stroke-dasharray",function(t){return t.y1>=t.y2?"none":"5px, 5px"}))})}},{key:"resize",value:function(){var n=this,t=this.settings,e=t.width,i=t.height;this.layout.calc(),this.svg.attr("viewBox","0 0 ".concat(e," ").concat(i)),this.data().forEach(function(t,e){t.rect.attr("x",n.layout.col.x(e)).attr("width",n.layout.col.width),t.text.attr("x",n.layout.col.x(e)+4),t.slopes&&t.slopes.lines.attr("x1",n.layout.slope.x1(e)).attr("x2",n.layout.slope.x2(e))})}}])&&st(t.prototype,n),i&&st(t,i),e}(),ct=(n(49),n(50),function(t){return function(){return t}}),lt=function(){return 1e-6*(Math.random()-.5)};function ut(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var a,r,s,o,c,l,u,h,d,f=t._root,p={data:i},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((l=e>=(r=(g+m)/2))?g=r:m=r,(u=n>=(s=(v+y)/2))?v=s:y=s,!(f=(a=f)[h=u<<1|l]))return a[h]=p,t;if(o=+t._x.call(null,f.data),c=+t._y.call(null,f.data),e===o&&n===c)return p.next=f,a?a[h]=p:t._root=p,t;for(;a=a?a[h]=new Array(4):t._root=new Array(4),(l=e>=(r=(g+m)/2))?g=r:m=r,(u=n>=(s=(v+y)/2))?v=s:y=s,(h=u<<1|l)==(d=(s<=c)<<1|r<=o););return a[d]=f,a[h]=p,t}var ht=function(t,e,n,i,a){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=a};function dt(t){return t[0]}function ft(t){return t[1]}function pt(t,e,n){var i=new gt(null==e?dt:e,null==n?ft:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function gt(t,e,n,i,a,r){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=a,this._y1=r,this._root=void 0}function vt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var mt=pt.prototype=gt.prototype;function yt(t){return t.x+t.vx}function bt(t){return t.y+t.vy}mt.copy=function(){var t,e,n=new gt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=vt(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var a=0;a<4;++a)(e=i.source[a])&&(e.length?t.push({source:e,target:i.target[a]=new Array(4)}):i.target[a]=vt(e));return n},mt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return ut(this.cover(e,n),e,n,t)},mt.addAll=function(t){var e,n,i,a,r=t.length,s=new Array(r),o=new Array(r),c=1/0,l=1/0,u=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||((s[n]=i)<c&&(c=i),u<i&&(u=i),(o[n]=a)<l&&(l=a),h<a&&(h=a));for(u<c&&(c=this._x0,u=this._x1),h<l&&(l=this._y0,h=this._y1),this.cover(c,l).cover(u,h),n=0;n<r;++n)ut(this,s[n],o[n],t[n]);return this},mt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,a=this._x1,r=this._y1;if(isNaN(n))a=(n=Math.floor(t))+1,r=(i=Math.floor(e))+1;else{if(!(t<n||a<t||e<i||r<e))return this;var s,o,c=a-n,l=this._root;switch(o=(e<(i+r)/2)<<1|t<(n+a)/2){case 0:for(;(s=new Array(4))[o]=l,l=s,r=i+(c*=2),(a=n+c)<t||r<e;);break;case 1:for(;(s=new Array(4))[o]=l,l=s,r=i+(c*=2),t<(n=a-c)||r<e;);break;case 2:for(;(s=new Array(4))[o]=l,l=s,i=r-(c*=2),(a=n+c)<t||e<i;);break;case 3:for(;(s=new Array(4))[o]=l,l=s,i=r-(c*=2),t<(n=a-c)||e<i;);}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=i,this._x1=a,this._y1=r,this},mt.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},mt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},mt.find=function(t,e,n){var i,a,r,s,o,c,l,u=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new ht(g,u,h,d,f)),null==n?n=1/0:(u=t-n,h=e-n,d=t+n,f=e+n,n*=n);c=p.pop();)if(!(!(g=c.node)||(a=c.x0)>d||(r=c.y0)>f||(s=c.x1)<u||(o=c.y1)<h))if(g.length){var v=(a+s)/2,m=(r+o)/2;p.push(new ht(g[3],v,m,s,o),new ht(g[2],a,m,v,o),new ht(g[1],v,r,s,m),new ht(g[0],a,r,v,m)),(l=(m<=e)<<1|v<=t)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=c)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),x=y*y+b*b;if(x<n){var _=Math.sqrt(n=x);u=t-_,h=e-_,d=t+_,f=e+_,i=g.data}}return i},mt.remove=function(t){if(isNaN(r=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,i,a,r,s,o,c,l,u,h,d,f=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!f)return this;if(f.length)for(;;){if((l=r>=(o=(p+v)/2))?p=o:v=o,(u=s>=(c=(g+m)/2))?g=c:m=c,!(f=(e=f)[h=u<<1|l]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;f.data!==t;)if(!(f=(i=f).next))return this;return(a=f.next)&&delete f.next,i?a?i.next=a:delete i.next:e?(a?e[h]=a:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f)):this._root=a,this},mt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},mt.root=function(){return this._root},mt.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},mt.visit=function(t){var e,n,i,a,r,s,o=[],c=this._root;for(c&&o.push(new ht(c,this._x0,this._y0,this._x1,this._y1));e=o.pop();)if(!t(c=e.node,i=e.x0,a=e.y0,r=e.x1,s=e.y1)&&c.length){var l=(i+r)/2,u=(a+s)/2;(n=c[3])&&o.push(new ht(n,l,u,r,s)),(n=c[2])&&o.push(new ht(n,i,u,l,s)),(n=c[1])&&o.push(new ht(n,l,a,r,u)),(n=c[0])&&o.push(new ht(n,i,a,l,u))}return this},mt.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new ht(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var a=e.node;if(a.length){var r,s=e.x0,o=e.y0,c=e.x1,l=e.y1,u=(s+c)/2,h=(o+l)/2;(r=a[0])&&n.push(new ht(r,s,o,u,h)),(r=a[1])&&n.push(new ht(r,u,o,c,h)),(r=a[2])&&n.push(new ht(r,s,h,u,l)),(r=a[3])&&n.push(new ht(r,u,h,c,l))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},mt.x=function(t){return arguments.length?(this._x=t,this):this._x},mt.y=function(t){return arguments.length?(this._y=t,this):this._y};function xt(){}function _t(t,e){var n=new xt;if(t instanceof xt)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,a=-1,r=t.length;if(null==e)for(;++a<r;)n.set(a,t[a]);else for(;++a<r;)n.set(e(i=t[a],a,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}xt.prototype=_t.prototype={constructor:xt,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var wt=_t;function kt(){}var St=wt.prototype;kt.prototype={constructor:kt,has:St.has,add:function(t){return this["$"+(t+="")]=t,this},remove:St.remove,clear:St.clear,values:St.keys,size:St.size,empty:St.empty,each:St.each};var Ct={value:function(){}};function Mt(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new Tt(i)}function Tt(t){this._=t}function Et(t,e){for(var n,i=0,a=t.length;i<a;++i)if((n=t[i]).name===e)return n.value}function At(t,e,n){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=Ct,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}Tt.prototype=Mt.prototype={constructor:Tt,on:function(t,e){var n,i,a=this._,r=(i=a,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),s=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=r[s]).type)a[n]=At(a[n],t.name,e);else if(null==e)for(n in a)a[n]=At(a[n],t.name,null);return this}for(;++s<o;)if((n=(t=r[s]).type)&&(n=Et(a[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Tt(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,i,a=new Array(n),r=0;r<n;++r)a[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,n=(i=this._[t]).length;r<n;++r)i[r].value.apply(e,a)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,r=i.length;a<r;++a)i[a].value.apply(e,n)}};var Ot,Pt,Dt=Mt,It=0,Nt=0,jt=0,zt=1e3,Ht=0,Lt=0,Rt=0,Wt="object"==typeof performance&&performance.now?performance:Date,Ft="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $t(){return Lt||(Ft(Bt),Lt=Wt.now()+Rt)}function Bt(){Lt=0}function Vt(){this._call=this._time=this._next=null}function qt(t,e,n){var i=new Vt;return i.restart(t,e,n),i}function Ut(){Lt=(Ht=Wt.now())+Rt,It=Nt=0;try{!function(){$t(),++It;for(var t,e=Ot;e;)0<=(t=Lt-e._time)&&e._call.call(null,t),e=e._next;--It}()}finally{It=0,function(){var t,e,n=Ot,i=1/0;for(;n;)n=n._call?(i>n._time&&(i=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:Ot=e);Pt=t,Gt(i)}(),Lt=0}}function Yt(){var t=Wt.now(),e=t-Ht;zt<e&&(Rt-=e,Ht=t)}function Gt(t){It||(Nt&&(Nt=clearTimeout(Nt)),24<t-Lt?(t<1/0&&(Nt=setTimeout(Ut,t-Wt.now()-Rt)),jt&&(jt=clearInterval(jt))):(jt||(Ht=Wt.now(),jt=setInterval(Yt,zt)),It=1,Ft(Ut)))}Vt.prototype=qt.prototype={constructor:Vt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?$t():+n)+(null==e?0:+e),this._next||Pt===this||(Pt?Pt._next=this:Ot=this,Pt=this),this._call=t,this._time=n,Gt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gt())}};var Kt=Math.PI*(3-Math.sqrt(5));function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(t){Zt(e,t,n[t])})}return e}function Zt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Jt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var te=function(){function e(t){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.loaded=!1,this.defaults={container:"#chart",width:1e3,height:500,animation:1e3,scale:{min:0,max:1,type:"auto",unit:1},margin:{top:20,left:80,right:10,bottom:80},padding:4},this.settings=N.a.extend({},this.defaults,t),this.x={},this.y={},this.y.tickFormat=function(t){return a.y.labels[t]},this.x.tickFormat=function(t){return F(a.x.scale,a.settings.scale.unit)(t)},this.hoverFormat=function(t){return j.a.format(",")(H(t,1))},this.max=function(){var t,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=a.settings.scale;return t="auto"===n.type||e?j.a.max(a.y.data,function(t){var e=t.start,n=t.increase;return Math.round(e+n)}):n.max,Number.isNaN(t)||!Number.isFinite(t)?0:t},this.min=function(){var t,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=a.settings.scale;return t="auto"===n.type||e?j.a.min(a.y.data,function(t){var e=t.start,n=t.decrease;return Math.round(e-n)}):n.min,Number.isNaN(t)||!Number.isFinite(t)?0:t},this.layout={y:function(t){var e=t.stack,n=a.y.scale.rangeBand();return a.y.scale(e)+(20<n?5:.1*n)},height:function(){var t=a.y.scale.rangeBand();return t-(20<t?10:.2*t)},bar:function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return t.attr({y:a.layout.y,x:function(t){var e=t.start,n=t.x0;return a.x.scale(i?e:n)},width:i?0:function(t){var e=t.start,n=t.value;return a.x.scale(e+n)-a.x.scale(e)},height:a.layout.height}).style({opacity:function(t){var e=t.style,n=(e=void 0===e?{}:e).opacity;return void 0===n?1:n},stroke:function(t){return t.style.stroke},fill:function(t){return t.style.fill}})},point:function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return t.attr({y1:function(t){var e=t.stack;return a.y.scale(e)},y2:function(t){var e=t.stack;return a.y.scale(e)+a.y.scale.rangeBand()},x1:function(t){var e=t.start,n=t.value;return a.x.scale(i?e:n)},x2:function(t){var e=t.start,n=t.value;return a.x.scale(i?e:n)}}).style({opacity:i?0:function(t){var e=t.style,n=(e=void 0===e?{}:e).opacity;return void 0===n?1:n},stroke:function(t){return t.style.stroke},"stroke-width":function(t){var e=t.style,n=(e=void 0===e?{}:e).width;return void 0===n?3:n},"stroke-dasharray":function(t){var e=t.style;return(e=void 0===e?{}:e).dasharray}})}}}var t,n,i;return t=e,(n=[{key:"adjustXScaleDomain",value:function(){var d=this;this.x.scale.domain(this.y.data.reduce(function(t,e){var n=Qt(t,2),i=n[0],a=n[1],r=e.start,s=e.increase,o=e.decrease,c="+".concat(d.hoverFormat(s)).width(11)+6,l="-".concat(d.hoverFormat(o)).width(11)+6,u=d.x.scale.invert(d.x.scale(r-o)-c),h=d.x.scale.invert(d.x.scale(r+s)+l);return[u<i?u:i,a<h?h:a]},this.x.scale.domain()))}},{key:"render",value:function(){var n=this,t=this.settings,e=t.container,i=t.width,a=t.height,r=t.margin,s=t.padding,o=t.limit;r.left=j.a.max(j.a.values(this.y.labels).map(function(t){return t.width(null,"bold 12px Verdana")+20}))||r.left,this.svg=j.a.select(e).append("svg").attr("height","100%").attr("width","100%").attr("viewBox","0 0 ".concat(i," ").concat(a)).attr("preserveAspectRatio","none").attr("overflow","hidden"),this.dropshadow=this.svg.append("svg:defs").append("svg:filter").attr("id","dropshadow").attr("width","150%").attr("height","150%"),this.dropshadow.append("feGaussianBlur").attr("stdDeviation","1").attr("in","SourceAlpha"),this.dropshadow.append("feOffset").attr("dx",1).attr("dy",1).attr("result","shadow"),this.dropshadow.append("feComponentTransfer").append("feFuncA").attr("type","linear").attr("slope",.4);var c=this.dropshadow.append("feMerge");c.append("feMergeNode"),c.append("feMergeNode").attr("in","SourceGraphic"),this.y.scale=j.a.scale.ordinal().domain(o?this.y.vals.slice(0,o):this.y.vals).rangeBands([0,a-(r.top+r.bottom)],.05,0),this.y.axis=j.a.svg.axis().scale(this.y.scale).tickFormat(this.y.tickFormat).orient("left"),this.y.label=this.svg.append("g").attr("class","axis y-axis").attr("id","".concat(e.replace("#",""),"-y-axis")).attr("transform","translate(".concat(r.left-s,",").concat(r.top,")")).call(this.y.axis),this.x.scale=j.a.scale.linear().domain([this.min(),this.max()]).range([0,i-(r.left+r.right)]),this.adjustXScaleDomain(),this.x.axis=j.a.svg.axis().scale(this.x.scale).ticks(8).tickFormat(this.x.tickFormat).orient("bottom"),this.x.label=this.svg.append("g").attr("class","axis x-axis").attr("id","".concat(e.replace("#",""),"-x-axis")).attr("transform","translate(".concat(r.left,",").concat(a-r.bottom+s,")")).call(this.x.axis),this.y.title=this.svg.append("g").attr("class","y-title").attr("transform","translate(15, ".concat((a+(r.top-r.bottom))/2,") rotate(-90)")),this.y.titleText=this.y.title.append("text").text(this.y.text).attr("class","title"),this.x.title=this.svg.append("g").attr("class","x-title").attr("transform","translate(".concat((i+(r.left-r.right))/2,",").concat(a-5,")")),this.x.titleText=this.x.title.append("text").text(this.x.text).attr("class","title"),this.plot=this.svg.append("g").attr("class","plot").attr("transform","translate(".concat(r.left,",").concat(r.top,")")),this.background=this.plot.append("g").attr("class","background"),this.middle=this.plot.append("g").attr("class","middle"),this.foreground=this.plot.append("g").attr("class","foreground"),this.stacks=this.middle.selectAll("g.stack").data(this.y.data,function(t){return t.id}).enter().append("g").attr("class","stack").style("opacity",function(t){var e=t.style,n=(e=void 0===e?{}:e).opacity;return void 0===n?1:n}),this.decreasing=this.stacks.selectAll(".decreasing").data(function(t){return t.decomposition.decreasing},function(t){return t.id}).enter().append("rect").attr("class","decreasing").call(this.layout.bar,!0).transition().delay(function(t){var e=t.stack;return 100+100*n.y.vals.indexOf(e)}).duration(this.settings.animation).call(this.layout.bar),this.increasing=this.stacks.selectAll(".increasing").data(function(t){return t.decomposition.increasing},function(t){return t.id}).enter().append("rect").attr("class","increasing").call(this.layout.bar,!0).transition().delay(function(t){var e=t.stack;return 100+100*n.y.vals.indexOf(e)}).duration(this.settings.animation).call(this.layout.bar),this.points=this.stacks.selectAll(".point").data(function(t){return t.values},function(t){return t.id}).enter().append("line").attr("class","point").call(this.layout.point,!0).transition().delay(function(t){var e=t.stack;return 100+100*n.y.vals.indexOf(e)}).duration(this.settings.animation).call(this.layout.point).call(et,function(){n.loaded=!0})}},{key:"positionLabels",value:function(t){for(var e,n,i,a,r=this,s=this.settings,o=s.width,c=s.margin,l=t.map(function(t){return{width:t.width,targetX:r.x.scale(t.value)-t.width/2,fy:r.y.scale(t.stack)-t.height/2-14}}).sort(function(t,e){return t.targetX-e.targetX}),u=function(u){var n,i=1,e=.001,a=1-Math.pow(e,1/300),r=0,s=.6,o=wt(),t=qt(l),c=Dt("tick","end");function l(){h(),c.call("tick",n),i<e&&(t.stop(),c.call("end",n))}function h(){var t,e,n=u.length;for(i+=(r-i)*a,o.each(function(t){t(i)}),t=0;t<n;++t)null==(e=u[t]).fx?e.x+=e.vx*=s:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=s:(e.y=e.fy,e.vy=0)}function d(){for(var t,e=0,n=u.length;e<n;++e){if((t=u[e]).index=e,isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(e),a=e*Kt;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function f(t){return t.initialize&&t.initialize(u),t}return null==u&&(u=[]),d(),n={tick:h,restart:function(){return t.restart(l),n},stop:function(){return t.stop(),n},nodes:function(t){return arguments.length?(u=t,d(),o.each(f),n):u},alpha:function(t){return arguments.length?(i=+t,n):i},alphaMin:function(t){return arguments.length?(e=+t,n):e},alphaDecay:function(t){return arguments.length?(a=+t,n):+a},alphaTarget:function(t){return arguments.length?(r=+t,n):r},velocityDecay:function(t){return arguments.length?(s=1-t,n):1-s},force:function(t,e){return 1<arguments.length?(null==e?o.remove(t):o.set(t,f(e)),n):o.get(t)},find:function(t,e,n){var i,a,r,s,o,c=0,l=u.length;for(null==n?n=1/0:n*=n,c=0;c<l;++c)(r=(i=t-(s=u[c]).x)*i+(a=e-s.y)*a)<n&&(o=s,n=r);return o},on:function(t,e){return 1<arguments.length?(c.on(t,e),n):c.on(t)}}}().nodes(l).force("clamp",(e=0,n=o-(c.left+c.right),a=function(){i.forEach(function(t){t.x+t.width>n&&(t.x=n-t.width),t.x<e&&(t.x=e)})},a.initialize=function(t){return i=t},a)).force("collide",function(i){var r,s,v=1,o=1;function e(){for(var t,e,h,d,f,p,g,n=r.length,i=0;i<o;++i)for(e=pt(r,yt,bt).visitAfter(c),t=0;t<n;++t)h=r[t],p=s[h.index],g=p*p,d=h.x+h.vx,f=h.y+h.vy,e.visit(a);function a(t,e,n,i,a){var r=t.data,s=t.r,o=p+s;if(!r)return d+o<e||i<d-o||f+o<n||a<f-o;if(r.index>h.index){var c=d-r.x-r.vx,l=f-r.y-r.vy,u=c*c+l*l;u<o*o&&(0===c&&(u+=(c=lt())*c),0===l&&(u+=(l=lt())*l),u=(o-(u=Math.sqrt(u)))/u*v,h.vx+=(c*=u)*(o=(s*=s)/(g+s)),h.vy+=(l*=u)*o,r.vx-=c*(o=1-o),r.vy-=l*o)}}}function c(t){if(t.data)return t.r=s[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function n(){if(r){var t,e,n=r.length;for(s=new Array(n),t=0;t<n;++t)e=r[t],s[e.index]=+i(e,t,r)}}return"function"!=typeof i&&(i=ct(null==i?1:+i)),e.initialize=function(t){r=t,n()},e.iterations=function(t){return arguments.length?(o=+t,e):o},e.strength=function(t){return arguments.length?(v=+t,e):v},e.radius=function(t){return arguments.length?(i="function"==typeof t?t:ct(+t),n(),e):i},e}(function(t){return t.width/2+3})).force("x",function(n){var a,r,s,i=ct(.1);function e(t){for(var e,n=0,i=a.length;n<i;++n)(e=a[n]).vx+=(s[n]-e.x)*r[n]*t}function o(){if(a){var t,e=a.length;for(r=new Array(e),s=new Array(e),t=0;t<e;++t)r[t]=isNaN(s[t]=+n(a[t],t,a))?0:+i(a[t],t,a)}}return"function"!=typeof n&&(n=ct(null==n?0:+n)),e.initialize=function(t){a=t,o()},e.strength=function(t){return arguments.length?(i="function"==typeof t?t:ct(+t),o(),e):i},e.x=function(t){return arguments.length?(n="function"==typeof t?t:ct(+t),o(),e):n},e}(function(t){return t.targetX}).strength(1)).stop(),h=0;h<1e3;h++)u.tick();return l.sort(function(t,e){return t.x-e.x}),t.sort(function(t,e){return t.value-e.value}),t.map(function(t,e){var n=l[e];return Xt({},t,{x:n.x,y:n.y})})}},{key:"hover",value:function(e){var n=this,t=Qt(this.y.data.filter(function(t){return t.id===e})||[],1)[0],i=(t=void 0===t?{}:t).values,a=void 0===i?[]:i,r=t.increase,s=t.decrease,o=t.start,c=t.stack,l=j.a.max(a,function(t){var e=t.text;return(void 0===e?"":e).width(11)+10}),u=this.positionLabels(a.map(function(t){return Xt({},t,{width:l,height:22})}));this.y.label.selectAll("text").style("font-weight",function(t){return t===e?"bold":"normal"}),this.lines=this.background.selectAll(".line").data(a,function(t){return t.id}),this.lines.enter().append("line").attr("class","line"),this.lines.exit().remove();var h=Qt(this.y.scale.rangeExtent(),2),d=h[0],f=h[1];this.lines.attr({y1:d,y2:f,x1:function(t){var e=t.value;return n.x.scale(e)},x2:function(t){var e=t.value;return n.x.scale(e)}}),this.labels=this.foreground.selectAll(".label-g").data(u,function(t){return t.id}),this.labels.enter().append("g").attr("class","label-g"),this.labels.exit().remove(),this.labels.append("rect").attr({rx:3,ry:3,x:function(t){return t.x},y:function(t){return t.y},width:function(t){return t.width},height:function(t){return t.height}}).style({filter:"url(#dropshadow)",fill:"rgba(240, 240, 240, .95)",stroke:function(t){return t.style.stroke},"stroke-width":function(t){var e=t.style,n=(e=void 0===e?{}:e).width;return void 0===n?2:n},"stroke-dasharray":function(t){var e=t.style;return(e=void 0===e?{}:e).dasharray}}),this.labels.append("text").attr({x:function(t){return t.x+t.width/2},y:function(t){return t.y+t.height/2},dy:".35em"}).style({"text-anchor":"middle","font-size":"11px",fill:"#454545"}).text(function(t){return t.text});var p=this.foreground.selectAll(".total").data([r,s].filter(function(t){return null!=t}));p.enter().append("text"),p.exit().remove(),p.attr({class:"total",x:function(t,e){return e?n.x.scale(o-t)-3:n.x.scale(o+t)+3},y:this.y.scale(c)+(this.y.scale.rangeBand()+10)/2}).style({fill:"#454545","font-size":11,"text-anchor":function(t,e){return e?"end":"start"}}).text(function(t,e){return"".concat(e?"-":"+").concat(n.hoverFormat(t))})}},{key:"update",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=this.settings.animation;this.loaded||(this.loaded=!0),this.x.titleText.text(this.x.text),this.y.titleText.text(this.y.text),this.y.scale.domain(this.y.vals),this.x.scale.domain([this.min(),this.max()]),this.adjustXScaleDomain(),this.reposition(t),this.stacks=this.stacks.data(this.y.data,function(t){return t.id}),this.stacks.enter().append("g").attr("class","stack"),this.stacks.exit().remove(),this.decreasing=this.stacks.selectAll(".decreasing").data(function(t){return t.decomposition.decreasing},function(t){return t.id}),this.increasing=this.stacks.selectAll(".increasing").data(function(t){return t.decomposition.increasing},function(t){return t.id}),this.points=this.stacks.selectAll(".point").data(function(t){return t.values},function(t){return t.id}),this.decreasing.enter().append("rect").attr("class","decreasing").call(this.layout.bar,!0),this.decreasing.exit().remove(),this.increasing.enter().append("rect").attr("class","increasing").call(this.layout.bar,!0),this.increasing.exit().remove(),this.points.enter().append("line").attr("class","point").call(this.layout.point,!0),this.points.exit().remove(),this.stacks.transition().duration(t?e:0).style("opacity",function(t){var e=t.style,n=(e=void 0===e?{}:e).opacity;return void 0===n?1:n}),this.decreasing.transition().duration(t?e:0).call(this.layout.bar),this.increasing.transition().duration(t?e:0).call(this.layout.bar),this.points.transition().duration(t?e:0).call(this.layout.point)}},{key:"reposition",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=this.settings,n=e.width,i=e.height,a=e.margin,r=e.padding,s=e.animation;a.left=j.a.max(j.a.values(this.y.labels).map(function(t){return t.width(null,"bold 12px Verdana")+20}))||a.left,this.y.scale.rangeBands([0,i-(a.top+a.bottom)],.05,0),this.x.scale.range([0,n-(a.left+a.right)]),this.y.label.transition().duration(t?s:0).attr("transform","translate(".concat(a.left-r,",").concat(a.top,")")).call(this.y.axis),this.x.label.transition().duration(t?s:0).attr("transform","translate(".concat(a.left,",").concat(i-a.bottom+r,")")).call(this.x.axis),this.plot.transition().duration(t?s:0).attr("transform","translate(".concat(a.left,",").concat(a.top,")")),this.x.title.transition().duration(t?s:0).attr("transform","translate(".concat((n+(a.left-a.right))/2,",").concat(i-5,")")),this.y.title.transition().duration(t?s:0).attr("transform","translate(15, ".concat((i+(a.top-a.bottom))/2,") rotate(-90)"))}},{key:"resize",value:function(){var t=this.settings,e=t.width,n=t.height;this.svg&&(this.svg.attr("viewBox","0 0 ".concat(e," ").concat(n)),this.update(!1))}}])&&Jt(t.prototype,n),i&&Jt(t,i),e}();function ee(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ne(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ie=function(){function e(t){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.loaded=!1,this.defaults={container:"#chart",type:"donut",width:1e3,height:500,animation:1e3,margin:{top:10,left:10,right:10,bottom:10},padding:{tb:10,lr:25}},this.settings=N.a.extend({},this.defaults,t),this.data=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return t&&(r.data.data=null,r.data.data=t,r.loaded&&r.update(e)),N.a.extend(!0,{},r.data.data)},this.data.center=function(){return r.data().center.value},this.data.segments=function(){var t=r.data().segments;return r.layout.pie(t).map(function(t){return t.innerRadius=r.layout.innerRadius(),t.outerRadius=r.layout.outerRadius(),t.startAngle=t.startAngle||0,t.endAngle=t.endAngle||0,t})},this.layout={},this.layout.init=function(){r.layout.arc=j.a.svg.arc(),r.layout.pie=j.a.layout.pie().sort(null).value(function(t){return t.value})};var n=this.layout;this.layout.tween=function(t){var e=j.a.interpolate(this._current,t);return this._current=e(0),function(t){return n.arc(e(t))}},this.layout.height=function(){return r.settings.height-(r.settings.margin.top+r.settings.margin.bottom)},this.layout.width=function(){return r.settings.width-(r.settings.margin.left+r.settings.margin.right)},this.layout.padding=function(){var t=r.layout.height()-r.settings.padding.tb;return r.layout.width()-r.settings.padding.lr<t?r.settings.padding.lr:r.settings.padding.tb},this.layout.radius=function(t){var e=r.data().total?j.a.min([r.layout.height(),r.layout.width()])/2:0;return t?e-r.layout.padding():e-2*r.layout.padding()},this.layout.midAngle=function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},this.layout.vals={},this.layout.vals.reset=function(){this.left=[],this.right=[]},this.layout.vals.reset(),this.layout.pos=function(t){var e=r.layout.outerArc.centroid(t);e[0]=r.layout.radius(!0)*(r.layout.midAngle(t)<Math.PI?1:-1);var n=e[0]<0?r.layout.vals.left:r.layout.vals.right,i=e[0]<0?-10:10,a=e[1];return n.some(function(t){return Math.abs(a-t)<15})&&(e[1]+=i),n.push(e[1]),e},this.layout.line=function(t){var e=t.pos,n=r.layout.arc.centroid(t),i=r.layout.outerArc.centroid(t),a=ee(e,2);return i[1]=a[1],[n,i,e]},this.layout.outerRadius=function(){var t=r.layout.radius(),e=r.data().total,n=e*r.data().proportion,i=Math.sqrt(Math.pow(t,2)*n/e);return Number.isNaN(i)||!Number.isFinite(i)?0:i},this.layout.innerRadius=function(){var t=r.layout.radius(),e=r.data().total,n=r.data.center(),i=Math.sqrt(Math.pow(t,2)*n/e);return Number.isNaN(i)||!Number.isFinite(i)?0:i},this.layout.opacity=function(t,e){var n=e||(t.data.primary?.7:.3);return.05<Math.abs(t.endAngle-t.startAngle)?n:0},this.layout.init()}var t,n,i;return t=e,(n=[{key:"render",value:function(){var e=this,t=this.settings,n=t.container,i=t.width,a=t.height;this.layout.outerArc=j.a.svg.arc().innerRadius(this.layout.radius(!0)).outerRadius(this.layout.radius(!0)),this.svg=j.a.select(n).append("svg").attr("height","100%").attr("width","100%").attr("viewBox","0 0 ".concat(i," ").concat(a)).attr("preserveAspectRatio","none").attr("overflow","hidden"),this.dropshadow=this.svg.append("svg:defs").append("svg:filter").attr("id","".concat(n.replace("#",""),"-dropshadow")).attr("height","130%"),this.dropshadow.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation","2.5"),this.dropshadow.append("feOffset").attr("dx",0).attr("dy",0),this.dropshadow.append("feComponentTransfer").append("feFuncA").attr("type","linear").attr("slope","0.6");var r=this.dropshadow.append("feMerge");r.append("feMergeNode"),r.append("feMergeNode").attr("in","SourceGraphic"),this.plot=this.svg.append("g").attr("class","plot").attr("transform","translate(".concat(i/2,",").concat(a/2,")")),this.outer=this.plot.append("g").attr("class","background").append("circle").attr("r",this.layout.radius()).attr("fill","#eee"),this.inner=this.plot.append("g").attr("class","inner"),this.slices=this.inner.append("g").attr("class","slices"),this.labels=this.inner.append("g").attr("class","labels"),this.lines=this.inner.append("g").attr("class","lines"),this.center=this.slices.append("g").attr("class","center"),this.center.append("circle").attr("r",this.layout.innerRadius()).attr("fill",this.data().center.fill),this.center.append("text").style("text-anchor","middle").attr("dy",".35em"),this.arcs=this.slices.selectAll(".arc").data(this.data.segments(),function(t){return t.data.id}).enter().append("g").attr("class","arc"),this.arcs.filter(function(t){return t.data.primary}).each(function(){this.parentNode.appendChild(this)}),this.path=this.arcs.append("path").attr("d",this.layout.arc).attr("fill",function(t){return t.data.fill}).each(function(t){this._current=t}),this.text=this.labels.selectAll("text").data(this.data.segments(),function(t){return t.data.id}),this.text.enter().append("text").each(function(t){t.pos=e.layout.pos(t)}).attr("dy",".35em").attr("transform",function(t){var e=t.pos;return"translate(".concat(e,")")}).style("text-anchor",function(t){return e.layout.midAngle(t)<Math.PI?"start":"end"}).style("font-weight",function(t){return t.data.primary?"bold":""}).style("opacity",function(t){return e.layout.opacity(t,1)}).text(function(t){return t.data.text}).each(function(t){this._current=t}),this.line=this.lines.selectAll("polyline").data(this.data.segments(),function(t){return t.data.id}),this.layout.vals.reset(),this.line.enter().append("polyline").each(function(t){t.pos=e.layout.pos(t),t.pos[0]=t.pos[0]<0?t.pos[0]+2:t.pos[0]-2}).style("opacity",function(t){return e.layout.opacity(t)}).attr("points",function(t){return e.layout.line(t)}).each(function(t){this._current=t}),this.loaded=!0}},{key:"update",value:function(){var e=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],n=this.settings.animation;this.layout.outerArc.innerRadius(this.layout.radius(!0)).outerRadius(this.layout.radius(!0)),this.outer.transition().duration(t?n:0).attr("r",this.layout.radius()).attr("fill","#eee"),this.inner.transition().duration(t?n:0),this.slices.selectAll("circle").transition().duration(t?n:0).attr("r",this.layout.innerRadius()).attr("fill",this.data().center.fill),this.slices.selectAll("text").transition().duration(t?n:0).style("text-anchor","middle"),this.arcs=this.inner.selectAll(".arc").data(this.data.segments(),function(t){return t.data.id}),this.path=this.arcs.select("path").transition().duration(t?n:0).attrTween("d",this.layout.tween).attr("fill",function(t){return t.data.fill}),this.layout.vals.reset(),this.text=this.labels.selectAll("text").data(this.data.segments(),function(t){return t.data.id}),this.text.each(function(t){t.pos=e.layout.pos(t)});var i=this.layout.midAngle.bind(this);this.text.transition().duration(t?n:0).style("opacity",function(t){return e.layout.opacity(t,1)}).attrTween("transform",function(t){var n=j.a.interpolate(this._current,t);return this._current=n(0),function(t){var e=n(t);return"translate(".concat(e.pos,")")}}).styleTween("text-anchor",function(t){var n=j.a.interpolate(this._current,t);return this._current=n(0),function(t){var e=n(t);return i(e)<Math.PI?"start":"end"}}),this.layout.vals.reset(),this.line=this.lines.selectAll("polyline").data(this.data.segments(),function(t){return t.data.id}),this.line.each(function(t){t.pos=e.layout.pos(t),t.pos[0]=t.pos[0]<0?t.pos[0]+2:t.pos[0]-2});var a=this.layout.line.bind(this);this.line.transition().duration(t?n:0).style("opacity",function(t){return e.layout.opacity(t)}).attrTween("points",function(t){var e=j.a.interpolate(this._current,t);return this._current=e(0),function(t){return a(e(t))}})}},{key:"resize",value:function(){var t=this.settings,e=t.width,n=t.height;this.svg.attr("viewBox","0 0 ".concat(e," ").concat(n)),this.plot.attr("transform","translate(".concat(e/2,",").concat(n/2,")")),this.update(!1)}}])&&ne(t.prototype,n),i&&ne(t,i),e}();function ae(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var re=function(){function n(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.loaded=!1,this.defaults={container:"#chart",type:"heatmap",width:1e3,height:500,animation:1e3,margin:{top:80,left:190,right:10,bottom:10},padding:-4},this.settings=N.a.extend({},this.defaults,t),this.rows={},this.cols={},this.rows.tickFormat=function(t){return e.rows.labels[t]},this.cols.tickFormat=function(t){return e.cols.labels[t]}}var t,e,i;return t=n,(e=[{key:"render",value:function(){var n=this,t=this.settings,e=t.container,i=t.width,a=t.height,r=t.margin,s=t.padding;this.svg=j.a.select(e).append("svg").attr("height","100%").attr("width","100%").attr("viewBox","0 0 ".concat(i," ").concat(a)).attr("preserveAspectRatio","none").attr("overflow","hidden"),this.rows.scale=j.a.scale.ordinal().domain(this.rows.vals).rangeBands([0,a-(r.top+r.bottom)],0,0),this.rows.axis=j.a.svg.axis().orient("left").scale(this.rows.scale).tickFormat(this.rows.tickFormat),this.rows.label=this.svg.append("g").attr("class","axis row-axis").attr("transform","translate(".concat(r.left-s,",").concat(r.top,")")).call(this.rows.axis),this.cols.scale=j.a.scale.ordinal().domain(this.cols.vals).rangeBands([0,i-(r.left+r.right)],0,0),this.cols.axis=j.a.svg.axis().orient("top").scale(this.cols.scale).tickFormat(this.cols.tickFormat),this.cols.label=this.svg.append("g").attr("class","axis col-axis").attr("transform","translate(".concat(r.left,",").concat(r.top-s,")")).call(this.cols.axis),this.cols.label.selectAll("text").style("text-anchor","end").attr("dx","-.4em").attr("dy",".4em").attr("transform","rotate(45)"),this.plot=this.svg.append("g").attr("class","plot").attr("transform","translate(".concat(r.left,",").concat(r.top,")")),this.cells=this.plot.selectAll(".cell").data(this.data,function(t){return t.id}).enter().append("g").attr("class","cell"),this.cells.selectAll("rect").data(function(t){return[t]},function(t){return t.id}).enter().append("rect").attr("width",this.cols.scale.rangeBand()).attr("height",this.rows.scale.rangeBand()).attr("x",function(t){var e=t.col;return n.cols.scale(e)}).attr("y",function(t){var e=t.row;return n.rows.scale(e)}).style("fill",function(t){return t.color.fill}).style("stroke","#fff").style("stroke-width","2px"),this.cells.selectAll("text").data(function(t){return[t]},function(t){return t.id}).enter().append("text").attr("x",function(t){var e=t.col;return n.cols.scale.rangeBand()/2+n.cols.scale(e)}).attr("y",function(t){var e=t.row;return n.rows.scale.rangeBand()/2+n.rows.scale(e)}).style("fill",function(t){return t.color.font}).text(function(t){return t.rank})}},{key:"update",value:function(){var n=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=this.settings.animation;this.rows.scale.domain(this.rows.vals),this.cols.scale.domain(this.cols.vals),this.rows.axis.scale(this.rows.scale),this.cols.axis.scale(this.cols.scale),this.rows.label.transition().duration(t?e:0).call(this.rows.axis),this.cols.label.transition().duration(t?e:0).call(this.cols.axis),this.cols.label.selectAll("text").style("text-anchor","end").attr("dx","-.4em").attr("dy",".4em").attr("transform","rotate(45)"),this.cells=this.cells.data(this.data,function(t){return t.id}),this.cells.enter().append("g").attr("class","cell"),this.cells.exit().remove(),this.cells.selectAll("rect").data(function(t){return[t]},function(t){return t.id}).enter().append("rect").attr("width",this.cols.scale.rangeBand()).attr("height",this.rows.scale.rangeBand()).attr("x",function(t){var e=t.col;return n.cols.scale(e)}).attr("y",function(t){var e=t.row;return n.rows.scale(e)}).style("fill",function(t){return t.color.fill}).style("stroke","#fff").style("stroke-width","2px"),this.cells.selectAll("text").data(function(t){return[t]},function(t){return t.id}).enter().append("text").attr("x",function(t){var e=t.col;return n.cols.scale.rangeBand()/2+n.cols.scale(e)}).attr("y",function(t){var e=t.row;return n.rows.scale.rangeBand()/2+n.rows.scale(e)}).style("fill",function(t){return t.color.font}).text(function(t){return t.rank}),this.cells.selectAll("rect").transition().duration(t?e:0).attr("width",this.cols.scale.rangeBand()).attr("height",this.rows.scale.rangeBand()).attr("x",function(t){var e=t.col;return n.cols.scale(e)}).attr("y",function(t){var e=t.row;return n.rows.scale(e)}).style("fill",function(t){return t.color.fill}).style("stroke","#fff").style("stroke-width","2px"),this.cells.selectAll("text").transition().duration(t?e:0).attr("x",function(t){var e=t.col;return n.cols.scale.rangeBand()/2+n.cols.scale(e)}).attr("y",function(t){var e=t.row;return n.rows.scale.rangeBand()/2+n.rows.scale(e)}).style("fill",function(t){return t.color.font}).text(function(t){return t.rank})}},{key:"resize",value:function(){var t=this.settings,e=t.width,n=t.height,i=t.margin,a=t.padding;this.svg.attr("viewBox","0 0 ".concat(e," ").concat(n)),this.rows.scale.rangeBands([0,n-(i.top+i.bottom)],0,0),this.cols.scale.rangeBands([0,e-(i.left+i.right)],0,0),this.rows.axis.scale(this.rows.scale),this.cols.axis.scale(this.cols.scale),this.rows.label.call(this.rows.axis).attr("transform","translate(".concat(i.left-a,",").concat(i.top,")")),this.cols.label.call(this.cols.axis).attr("transform","translate(".concat(i.left,",").concat(i.top-a,")")),this.plot.attr("transform","translate(".concat(i.left,",").concat(i.top,")")),this.cols.label.selectAll("text").style("text-anchor","end").attr("dx","-.4em").attr("dy",".4em").attr("transform","rotate(45)"),this.update(!1)}}])&&ae(t.prototype,e),i&&ae(t,i),n}(),se=n(66);function oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ce(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function le(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ue=function(){function e(t){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaults={container:"#chart",width:1e3,height:500,animation:1e3,scale:{min:0,max:1,type:"auto",unit:1,direction:"-",includeZero:!0},margin:{top:10,left:100,right:10,bottom:40},padding:4},this.settings=U({},this.defaults,t),this.x={},this.y={},this.x.tickFormat=function(t,e){return j.a.select(e.parentNode).selectAll("line").attr("stroke-width",n.x.labels[t]?"1.5":""),n.x.labels[t]},this.y.tickFormat=function(t){return F(n.y.scale,n.settings.scale.unit)(t)},this.max=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=n.settings.scale;return"auto"===e.type||t?j.a.max(n.x.data,function(t){var e=t.values;return j.a.max(e,function(t){return t.u})}):e.max},this.min=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=n.settings.scale;return"auto"===e.type||t?j.a.min(n.x.data,function(t){var e=t.values;return j.a.min(e,function(t){return t.l})}):e.min},this.area=function(e){return j.a.svg.area().interpolate("linear").defined(function(t){return t.segments.includes(e)}).x(function(t){var e=t.year;return n.x.scale(e)}).y0(function(t){var e=t.u;return n.y.scale(e)}).y1(function(t){var e=t.l;return n.y.scale(e)})},this.line=function(e){return j.a.svg.line().interpolate("linear").defined(function(t){return t.segments.includes(e)}).x(function(t){var e=t.year;return n.x.scale(e)}).y(function(t){var e=t.m;return n.y.scale(e)})},this.color=function(t){var n=t.segment;return t.values.reduce(function(t,e){return e.segments.includes(n)&&e.color?e.color:t},"#454545")}}var t,n,i;return t=e,(n=[{key:"render",value:function(){var t=this.settings,e=t.container,n=t.width,i=t.height,a=t.margin,r=t.padding;this.svg=j.a.select(e).append("svg").attr("height","100%").attr("width","100%").attr("viewBox","0 0 ".concat(n," ").concat(i)).attr("preserveAspectRatio","none").attr("overflow","hidden"),this.x.scale=j.a.scale.ordinal().domain(this.x.vals).rangePoints([0,n-(a.left+a.right)],1);var s=this.x.tickFormat.bind(this),o=this.y.tickFormat.bind(this);this.x.axis=j.a.svg.axis().scale(this.x.scale).ticks(5).orient("bottom").tickFormat(function(t){return s(t,this)}),this.x.label=this.svg.append("g").attr("class","axis x-axis").attr("id","".concat(e.replace("#",""),"-x-axis")).attr("transform","translate(".concat(a.left,",").concat(i-a.bottom+r,")")).call(this.x.axis),this.y.scale=j.a.scale.linear().domain([0,0]).range([0,i-(a.top+a.bottom)]),this.y.axis=j.a.svg.axis().scale(this.y.scale).ticks(5).orient("left").tickFormat(function(t){return o(t,this)}),this.y.label=this.svg.append("g").attr("class","axis y-axis").attr("id","".concat(e.replace("#",""),"-y-axis")).attr("transform","translate(".concat(a.left-r,",").concat(a.top,")")).call(this.y.axis),this.y.title=this.svg.append("g").attr("class","y-title").attr("transform","translate(15, ".concat((i+(a.top-a.bottom))/2,") rotate(-90)")),this.y.titleText=this.y.title.append("text").text(this.y.text).attr("class","title"),this.x.title=this.svg.append("g").attr("class","x-title").attr("transform","translate(".concat((n+(a.left-a.right))/2,",").concat(i-8,")")),this.x.titleText=this.x.title.append("text").text(this.x.text).attr("class","title"),this.plot=this.svg.append("g").attr("transform","translate(".concat(a.left,",").concat(a.top,")")),this.lines=this.plot.selectAll("line"),this.points=this.plot.selectAll("circle"),this.update()}},{key:"highlight",value:function(n){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],e=this.settings.animation;this.lines.classed("highlighted",function(t){return t.key===n}).each(function(t){t.key===n&&this.parentNode.appendChild(this)}).transition().duration(t?e:0).attr("opacity",function(t){var e=t.key;return n&&e!==n?.3:1})}},{key:"update",value:function(){var s=this,n=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.settings,i=t.animation,e=t.scale;this.x.titleText.text(this.x.text),this.y.titleText.text(this.y.text),this.x.scale.domain(this.x.vals),this.x.label.transition().duration(i).call(this.x.axis);var a=this.max(),r=this.min();e.includeZero&&(r=r<0?r:0),r===a&&0===a&&(a=1),"-"===e.direction?this.y.scale.domain([a,r]):this.y.scale.domain([r,a]),this.y.label.transition().duration(n?i:0).call(this.y.axis),this.lines=this.lines.data(this.x.data,function(t){return t.key});var o=this.lines.enter().append("g").attr("class","line-group");this.lines.exit().transition().duration(i).attr("opacity",0).remove();var c=o.data().map(function(t){return t.key});this.segments=this.lines.selectAll(".segment").data(function(t){var n=t.values;return n.reduce(function(e,t){return t.segments.forEach(function(t){-1===e.indexOf(t)&&e.push({segment:t,values:n})}),e},[])},function(t){return t.segment});var l=this.segments.enter().append("g").attr("class",function(t){var e=t.segment;return"segment ".concat(e)});l.append("svg:path").datum(function(t){return t}).attr("class","area").attr("d",function(t){var e=t.segment,n=t.values;return s.area(e)(n)}),l.append("svg:path").datum(function(t){return t}).attr("class","line").attr("d",function(t){var e=t.segment,n=t.values;return s.line(e)(n)}),this.segments.exit().remove(),this.segments.style("fill",this.color).style("stroke",this.color),this.segments.select(".line").datum(function(t){return t}).transition().duration(n?i:0).attrTween("d",function(t,e,n){var i=t.segment,a=t.values,r=s.line(i)(a);return Object(se.interpolatePath)(n,r)}),this.segments.select(".area").datum(function(t){return t}).transition().duration(n?i:0).attrTween("d",function(t,e,n){var i=t.segment,a=t.values,r=s.area(i)(a);return Object(se.interpolatePath)(n,r)}),this.points=this.lines.selectAll(".point").data(function(t){return t.values},function(t){return t.key});var u=this.points.enter();this.points.exit().remove(),this.points.transition().duration(n?i:0).attr("cx",function(t){var e=t.year;return s.x.scale(e)}).attr("cy",function(t){var e=t.m;return s.y.scale(e)}),u.append("circle").attr("class",function(t){var e=t.segments;return["point"].concat(ce(e)).join(" ")}).transition().delay(function(t){var e=oe(t.key.split("-"),1)[0];return c.includes(Number(e))?0:n?i:0}).attr("r",3).style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("cx",function(t){var e=t.year;return s.x.scale(e)}).attr("cy",function(t){var e=t.m;return s.y.scale(e)})}},{key:"bringToFront",value:function(e){this.lines.filter(function(t){return t.key===e}).each(function(){this.parentNode.appendChild(this)})}},{key:"order",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.lines.sort(function(t,e){return n.lastIndexOf(t.key)-n.lastIndexOf(e.key)})}},{key:"resize",value:function(){var t=this.settings,e=t.width,n=t.height,i=t.margin,a=t.padding;this.svg&&(this.svg.attr("viewBox","0 0 ".concat(e," ").concat(n)),this.x.scale.rangePoints([0,e-(i.left+i.right)],1),this.x.label.call(this.x.axis).attr("transform","translate(".concat(i.left,",").concat(n-i.bottom+a,")")),this.x.title.attr("transform","translate(".concat((e+(i.left-i.right))/2,",").concat(n-8,")")),this.y.title.attr("transform","translate(15, ".concat((n+(i.top-i.bottom))/2,") rotate(-90)")),this.y.scale.range([0,n-(i.top+i.bottom)]),this.update(!1))}}])&&le(t.prototype,n),i&&le(t,i),e}();function he(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var de=function(){function e(t){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaults={container:"#chart",width:1e3,height:500,animation:1e3,scale:{min:0,max:1,type:"auto",unit:1},margin:{top:10,left:100,right:10,bottom:40},padding:4},this.settings=N.a.extend({},this.defaults,t),this.x={},this.y={},this.x.tickFormat=function(t,e){return j.a.select(e.parentNode).selectAll("line").attr("stroke-width",n.x.labels[t]?"1.5":""),n.x.labels[t]},this.y.tickFormat=function(t){return F(n.y.scale,n.settings.scale.unit)(t)},this.max=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=n.settings.scale;return"auto"===e.type||t?j.a.max(n.x.data.map(function(t){return t.u})):e.max},this.min=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=n.settings.scale;return"auto"===e.type||t?j.a.min([0,j.a.min(n.x.data.map(function(t){return t.l}))]):e.min}}var t,n,i;return t=e,(n=[{key:"render",value:function(){var t=this.settings,e=t.height,n=t.width,i=t.margin,a=t.padding,r=t.container;this.svg=j.a.select(r).append("svg").attr("height","100%").attr("width","100%").attr("viewBox","0 0 ".concat(n," ").concat(e)).attr("preserveAspectRatio","none").attr("overflow","hidden"),this.x.scale=j.a.scale.ordinal().domain(this.x.vals).rangePoints([0,this.settings.width-(i.left+i.right)],1);var s=this.x.tickFormat.bind(this),o=this.y.tickFormat.bind(this);this.x.axis=j.a.svg.axis().scale(this.x.scale).ticks(5).orient("bottom").tickFormat(function(t){return s(t,this)}),this.x.label=this.svg.append("g").attr("class","axis x-axis").attr("id","".concat(r.replace("#",""),"-x-axis")).attr("transform","translate(".concat(i.left,",").concat(e-i.bottom+a,")")).call(this.x.axis),this.y.scale=j.a.scale.linear().domain([0,0]).range([0,e-(i.top+i.bottom)]),this.y.axis=j.a.svg.axis().scale(this.y.scale).ticks(5).tickFormat(function(t){return o(t,this)}).orient("left"),this.y.label=this.svg.append("g").attr("class","axis y-axis").attr("id","".concat(r.replace("#",""),"-y-axis")).attr("transform","translate(".concat(i.left-a,",").concat(i.top,")")).call(this.y.axis),this.y.title=this.svg.append("g").attr("class","y-title").attr("transform","translate(15, ".concat((e+(i.top-i.bottom))/2,") rotate(-90)")),this.y.titleText=this.y.title.append("text").text(this.y.text).attr("class","title"),this.x.title=this.svg.append("g").attr("class","x-title").attr("transform","translate(".concat((n+(i.left-i.right))/2,",").concat(e-5,")")),this.x.titleText=this.x.title.append("text").text(this.x.text).attr("class","title"),this.plot=this.svg.append("g").attr("transform","translate(".concat(i.left,",").concat(i.top,")")),this.lines=this.plot.selectAll("line"),this.points=this.plot.selectAll("circle"),this.update()}},{key:"update",value:function(){var n=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],e=this.settings,i=e.height,a=e.margin,r=e.animation;this.x.titleText.text(this.x.text),this.y.titleText.text(this.y.text),this.x.scale.domain(this.x.vals),this.x.label.transition().duration(r).call(this.x.axis);var s=this.max(),o=this.min();o===s&&0===s&&(s=1),this.y.scale.domain([s,o]),this.y.label.transition().duration(t?r:0).call(this.y.axis),this.lines=this.lines.data(this.x.data,function(t){return t.key}),this.points=this.points.data(this.x.data,function(t){return t.key}),this.lines.enter().append("line").attr("class","plot-line").attr("x1",function(t){return n.x.scale(t.key)}).attr("x2",function(t){return n.x.scale(t.key)}).attr("y1",i-(a.bottom+a.top)).attr("y2",i-(a.bottom+a.top)).style("stroke","#555").style("stroke-width","2px"),this.points.enter().append("circle").attr("class","plot-point").attr("cx",function(t){var e=t.key;return n.x.scale(e)}).attr("cy",i-(a.bottom+a.top)).attr("r",3),this.lines.exit().transition().duration(r).attr("opacity",1e-5).remove(),this.points.exit().transition().duration(r).attr("opacity",1e-5).remove(),this.lines.transition().duration(t?r:0).attr("x1",function(t){return n.x.scale(t.key)}).attr("x2",function(t){return n.x.scale(t.key)}).attr("y1",function(t){return n.y.scale(t.u)}).attr("y2",function(t){return n.y.scale(t.l)}),this.points.transition().duration(t?r:0).attr("cx",function(t){return n.x.scale(t.key)}).attr("cy",function(t){return n.y.scale(t.m)})}},{key:"resize",value:function(){var t=this.settings,e=t.width,n=t.height,i=t.margin,a=t.padding;this.svg&&(this.svg.attr("viewBox","0 0 ".concat(e," ").concat(n)),this.x.scale.rangePoints([0,e-(i.left+i.right)],1),this.x.label.call(this.x.axis).attr("transform","translate(".concat(i.left,",").concat(n-i.bottom+a,")")),this.x.title.attr("transform","translate(".concat((e+(i.left-i.right))/2,",").concat(n-5,")")),this.y.title.attr("transform","translate(15, ".concat((n+(i.top-i.bottom))/2,") rotate(-90)")),this.y.scale.range([0,n-(i.top+i.bottom)]),this.update(!1))}}])&&he(t.prototype,n),i&&he(t,i),e}();function fe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var pe=function(){function e(t){var u=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaults={container:"#chart",width:1e3,height:666,key:"cause_id",animation:1e3,margin:{right:2,left:2,top:2,bottom:2},font:{min:10,max:24},data:{value:0,color:"#454545",attribution:0,text:""}},this.settings=U({},this.defaults,t),this.data={},this.tree={},this.layout=j.a.layout.treemap().size([this.settings.width-(this.settings.margin.left+this.settings.margin.right),this.settings.height-(this.settings.margin.top+this.settings.margin.bottom)]).padding(1).sticky(!0).round(!0).sort(function(t,e){return t.sort&&e.sort?e.sort-t.sort:t.value-e.value}).value(function(t){return u.data[t[u.settings.key]]?u.data[t[u.settings.key]].value:0}),this.visibility=function(t){return t.data.visibility?"visible":"hidden"},this.opacity=function(t){return t.data.visibility?1:0},this.transition=function(t,e){return e&&u.settings.animation&&0<u.settings.animation?t.transition().ease("linear").duration(u.settings.animation):t},this.cell=function(t,e){return t.style("visibility",function(t){return u.visibility(t)}),u.transition(t,e).attr("transform",function(t){var e=t.x,n=t.y;return"translate(".concat(e,",").concat(n,")")}).style("opacity",u.opacity)},this.rect=function(t,e){return u.transition(t,e).attr({width:function(t){var e=t.children,n=t.dx-(e?0:1);return"".concat(Math.floor(0<n?n:0),"px")},height:function(t){var e=t.children,n=t.dy-(e?0:1);return"".concat(Math.floor(0<n?n:0),"px")}}).style("fill",function(t){return t.data.color.color})},this.attribution=function(t,e){return u.transition(t,e).attr({x:.5,y:.5,width:function(t){var e=t.data,n=t.children,i=t.dx,a=e.attribution.value,r=(i-(n?1:2))*j.a.max([0,j.a.min([a||0,1])]);return"".concat(Math.floor(0<r?r:0),"px")},height:function(t){var e=t.children,n=t.dy-(e?1:2);return"".concat(Math.floor(0<n?n:0),"px")}}).style("fill",function(t){return t.data.attribution.color})},this.highlight=function(t,e){return u.transition(t,e).attr({transform:function(t){var e=t.x,n=t.y;return"translate(".concat(e,",").concat(n,")")},width:function(t){var e=t.children,n=t.dx-(e?0:1);return"".concat(Math.floor(0<n?n:0),"px")},height:function(t){var e=t.children,n=t.dy-(e?0:1);return"".concat(Math.floor(0<n?n:0),"px")}}).style("opacity",function(){return null===u.settings.selected?0:1})},this.text=function(t,e){u.transition(t,e).text(function(t){return t.data.text}).style("font-size",function(t){var e=t.font;return"".concat(e.size,"px")}).attr("transform",function(t){var e=t.font;return"lr"===e.direction?"translate(3,".concat(e.size,") rotate(0)"):"translate(".concat(e.size/3,",3) rotate(90)")})},this.fontSize=function(t){var e=t.dx,n=t.dy,i=t.data,a=u.settings.font,r=i.text.width(12)/12,s=Math.floor(e-8),o=Math.floor(n-8),c=s<o&&r*(a.min+1)>s?"tb":"lr",l=0;return"lr"===c&&(l=o<s/r?o:s/r),"tb"===c&&(l=s<o/r?s:o/r),l<a.min&&(l=0),l>a.max&&(l=a.max),{size:l,direction:c}}}var t,n,i;return t=e,(n=[{key:"render",value:function(){var e=this,t=this.settings,n=t.container,i=t.width,a=t.height,r=t.margin,s=t.key,o=t.data,c=t.selected;this.svg=j.a.select(n).append("svg").attr({width:"100%",height:"100%",viewBox:"0 0 ".concat(i," ").concat(a),preserveAspectRatio:"none",overflow:"hidden"}),this.dropshadow=this.svg.append("svg:defs").append("svg:filter").attr({id:"".concat(n.replace("#",""),"-dropshadow"),width:"120%",height:"120%"}),this.dropshadow.append("feGaussianBlur").attr({stdDeviation:"2",result:"shadow"}),this.dropshadow.append("feOffset").attr({dx:1,dy:1}),this.group=this.svg.append("g").attr("transform","translate(".concat(r.left,",").concat(r.top,")")),this.cells=this.group.data([this.tree[0]]).selectAll("g").data(this.layout.nodes,function(t){return t[s]}).enter().append("g").attr("class",function(t){return"cell-g cell-g-".concat(t[s])}).datum(function(t){return t.data=e.data[t[s]]?e.data[t[s]]:o,t.font=e.fontSize(t),t}).call(this.cell,!1),this.rects=this.cells.append("rect").attr("class","cell").call(this.rect,!1),this.attributions=this.cells.append("rect").attr("class","attribution").call(this.attribution,!1),this.shadows=this.cells.append("text").attr({class:"treemap-shadow",filter:"url(#".concat(this.settings.container.replace("#",""),"-dropshadow)")}).call(this.text,!1),this.labels=this.cells.append("text").attr("class","treemap-label").call(this.text,!1);var l=this.cells.filter(function(t){return t[s]===c});this.highlights=this.group.append("rect").style({stroke:"#454545",fill:"none","stroke-width":"2px","pointer-events":"none"}),1===l.size()&&this.highlights.datum(l.datum()),this.highlights.call(this.highlight,!1)}},{key:"update",value:function(){var e=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];j.a.values(this.data).filter(function(t){return 0!==t.value}).length?("0"===this.group.style("opacity")&&(this.transition(this.group,t).style("opacity",1).style("pointer-events","auto"),t=!1),this.cells.data(this.layout.nodes,function(t){return t[e.settings.key]}).datum(function(t){return t.data=e.data[t[e.settings.key]]?e.data[t[e.settings.key]]:e.settings.data,t.font=e.fontSize(t),t}).call(this.cell,t)):this.transition(this.group,t).style("opacity",0).style("pointer-events","none"),this.rects.call(this.rect,t),this.attributions.call(this.attribution,t),this.shadows.call(this.text,t),this.labels.call(this.text,t);var n=this.cells.filter(function(t){return t[e.settings.key]===e.settings.selected});t=t&&(null===this.settings.selected||this.highlights.datum()[this.settings.key]===this.settings.selected),1===n.size()&&this.highlights.datum(n.datum()),this.highlights.call(this.highlight,t)}},{key:"resize",value:function(){var t=this.settings,e=t.width,n=t.height,i=t.margin;this.svg&&(this.svg.attr("viewBox","0 0 ".concat(e," ").concat(n)),this.layout.size([e-(i.left+i.right),n-(i.top+i.bottom)]),this.update(!1))}}])&&fe(t.prototype,n),i&&fe(t,i),e}();function ge(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ve=function(){function r(t){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.defaults={container:"#chart",type:"scol",orient:"left",width:1e3,height:500,animation:1e3,scale:{min:0,max:1,type:"auto",unit:1},margin:{top:10,left:80,right:10,bottom:80},padding:4,limit:null},this.settings=N.a.extend({},this.defaults,t),this.x={},this.y={};var e=this.settings,n=e.type,a=e.orient;"scol"===n&&(this.x.tickFormat=function(t){return i.x.labels[t]},this.y.tickFormat=function(t){return F(i.y.scale,i.settings.scale.unit)(t)}),"sbar"===n&&(this.y.tickFormat=function(t){return i.y.labels[t]},this.x.tickFormat=function(t){return F(i.x.scale,i.settings.scale.unit)(t)}),this.data=function(){return("scol"===n?i.x.data:i.y.data).length?j.a.layout.stack().offset("zero").values(function(t){return t.values}).y(function(t){return t.value}).x(function(t){return t.stack})("scol"===n?i.x.data:i.y.data).map(function(t){return t.values=t.values.filter(function(t){var e=t.stack;return("scol"===n?i.x.scale:i.y.scale).domain().includes(e)}),t}):[]},"scol"===n&&(this.layout={x:function(t){var e=t.stack;return i.x.scale(e)},y:function(t){var e=t.y0,n=t.value;return i.y.scale.range()[1]-i.y.scale(e+n)},width:function(){return i.x.scale.rangeBand()},height:function(t){var e=t.value;return i.y.scale(e)}}),"sbar"===n&&(this.layout={y:function(t){var e=t.stack;return i.y.scale(e)},x:function(t){var e=t.y0,n=t.value;return"right"===a?i.x.scale.range()[0]+i.x.scale(e+n):i.x.scale.range()[0]+i.x.scale(e)},width:function(t){var e=t.value;return"right"===a?i.x.scale.range()[1]-i.x.scale(e):i.x.scale(e)},height:function(){return i.y.scale.rangeBand()}}),this.max=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=i.settings.scale;return"auto"===e.type||t?j.a.max(i.data(),function(t){var e=t.values;return j.a.max(e,function(t){var e=t.y;return t.y0+e})}):e.max}}var t,e,n;return t=r,(e=[{key:"render",value:function(){var n=this,t=this.settings,i=t.type,e=t.orient,a=t.limit,r=t.width,s=t.height,o=t.margin,c=t.padding,l=t.container;this.svg=j.a.select(l).append("svg").attr("height","100%").attr("width","100%").attr("viewBox","0 0 ".concat(r," ").concat(s)).attr("preserveAspectRatio","none").attr("overflow","hidden"),"scol"===i&&(this.x.scale=j.a.scale.ordinal().domain(a?this.x.vals.splice(0,a):this.x.vals).rangeBands([0,r-(o.left+o.right)],0,0),this.x.axis=j.a.svg.axis().scale(this.x.scale).tickFormat(this.x.tickFormat).orient("bottom"),this.x.label=this.svg.append("g").attr("class","axis x-axis").attr("id","".concat(l.replace("#",""),"-x-axis")).attr("transform","translate(".concat(o.left,",").concat(s-o.bottom+c,")")).call(this.x.axis),this.x.label.selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-45)"),this.y.scale=j.a.scale.linear().domain([this.max(),0]).range([0,s-(o.top+o.bottom)]),this.y.axis=j.a.svg.axis().scale(this.y.scale).ticks(5).tickFormat(this.y.tickFormat).orient(e),this.y.label=this.svg.append("g").attr("class","axis y-axis").attr("id","".concat(l.replace("#",""),"-y-axis")).attr("transform","translate(".concat(o.left-c,",").concat(o.top,")")).call(this.y.axis),this.y.scale.domain([0,this.max()])),"sbar"===i&&(this.y.scale=j.a.scale.ordinal().domain(a?this.y.vals.slice(0,a):this.y.vals).rangeBands([0,s-(o.top+o.bottom)],.1,0),this.y.axis=j.a.svg.axis().scale(this.y.scale).tickFormat(this.y.tickFormat).orient(e),this.y.label=this.svg.append("g").attr("class","axis y-axis").attr("id","".concat(this.settings.container.replace("#",""),"-y-axis")).attr("transform","translate(".concat("right"===e?r-(o.right-c):o.left-c,",").concat(o.top,")")).call(this.y.axis),this.x.scale=j.a.scale.linear().domain("right"===e?[this.max(),0]:[0,this.max()]).range([0,r-(o.left+o.right)]),this.x.axis=j.a.svg.axis().scale(this.x.scale).ticks(5).tickFormat(this.x.tickFormat).orient("bottom"),this.x.label=this.svg.append("g").attr("class","axis x-axis").attr("id","".concat(l.replace("#",""),"-x-axis")).attr("transform","translate(".concat(o.left,",").concat(s-o.bottom+c,")")).call(this.x.axis)),this.y.title=this.svg.append("g").attr("class","y-title").attr("transform","translate(15, ".concat((s+(o.top-o.bottom))/2,") rotate(-90)\n      ")),this.y.titleText=this.y.title.append("text").text(this.y.text).attr("class","title"),this.x.title=this.svg.append("g").attr("class","x-title").attr("transform","translate(".concat((r+(o.left-o.right))/2,",").concat(s-5,")")),this.x.titleText=this.x.title.append("text").text(this.x.text).attr("class","title"),this.plot=this.svg.append("g").attr("class","plot").attr("transform","translate(".concat(o.left,",").concat(o.top,")")),this.layers=this.plot.selectAll("g.layer").data(this.data(),function(t){var e=t.layer,n=t.key,i=void 0===n?"":n;return"".concat(e,"-").concat(i)}).enter().append("g").style("fill",function(t){return t.color}).attr("class","layer"),this.stacks=this.layers.selectAll("rect.stack").data(function(t){return t.values},function(t){var e=t.stack,n=t.key,i=void 0===n?"":n;return"".concat(e,"-").concat(i)}).enter().append("rect").attr("class","stack").attr("width","scol"===i?this.layout.width:0).attr("height","sbar"===i?this.layout.height:0).attr("x","scol"===i?n.layout.x:"right"===e?n.x.scale.range()[1]:n.x.scale.range()[0]).attr("y","sbar"===i?this.layout.y:this.y.scale.range()[1]).transition().delay(function(t){var e=t.stack;return 200+50*("scol"===i?n.x.vals:n.y.vals).indexOf(e)}).duration(500).attr("y",this.layout.y).attr("x",this.layout.x).attr("width",this.layout.width).attr("height",this.layout.height)}},{key:"update",value:function(){var t=this,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.x.titleText.text(this.x.text),this.y.titleText.text(this.y.text);var n=this.settings,i=n.type,a=n.orient,r=n.limit,s=n.width,o=n.height,c=n.margin,l=n.padding,u=n.animation;"scol"===i&&(this.x.scale.rangeBands([0,s-(c.left+c.right)],0,0).domain(r?this.x.vals.slice(0,r):this.x.vals),this.y.scale.range([0,o-(c.top+c.bottom)]).domain([this.max(),0]),this.x.label.transition().duration(e?u:0).attr("transform","translate(".concat(c.left,",").concat(o-c.bottom+l,")")).call(this.x.axis),this.x.label.selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-45)"),this.y.label.transition().duration(e?u:0).attr("transform","translate(".concat(c.left-l,",").concat(c.top,")")).call(this.y.axis),this.y.scale.domain([0,this.max()])),"sbar"===i&&(this.y.scale.rangeBands([0,o-(c.top+c.bottom)],.1,0).domain(r?this.y.vals.slice(0,r):this.y.vals),this.x.scale.range([0,s-(c.left+c.right)]).domain("right"===a?[this.max(),0]:[0,this.max()]),this.y.label.transition().duration(e?u:0).attr("transform","translate(\n          ".concat("right"===a?s-(c.right-l):c.left-l,",\n          ").concat(c.top,"\n        )")).call(this.y.axis),this.x.label.transition().duration(e?u:0).attr("transform","translate(".concat(c.left,",").concat(o-c.bottom+l,")")).call(this.x.axis)),this.plot.transition().duration(e?u:0).attr("transform","translate(".concat(c.left,",").concat(c.top,")")),this.x.title.transition().duration(e?u:0).attr("transform","translate(".concat((s+(c.left-c.right))/2,",").concat(o-5,")")),this.y.title.transition().duration(e?u:0).attr("transform","translate(15, ".concat((o+(c.top-c.bottom))/2,") rotate(-90)")),this.layers=this.layers.data(this.data(),function(t){var e=t.layer,n=t.key,i=void 0===n?"":n;return"".concat(e,"-").concat(i)}),this.layers.enter().append("g").style("fill",function(t){return t.color}).attr("class","layer"),this.layers.exit().remove(),this.layers.transition().duration(e?u:0).style("fill",function(t){return t.color}),this.stacks=this.layers.selectAll("rect.stack").data(function(t){return t.values},function(t){var e=t.stack,n=t.key,i=void 0===n?"":n;return"".concat(e,"-").concat(i)}),this.stacks.enter().append("rect").attr("class","stack").attr("width","scol"===i?this.layout.width:0).attr("height","sbar"===i?this.layout.height:0).attr("x","scol"===i?t.layout.x:"right"===a?t.x.scale.range()[1]:t.x.scale.range()[0]).attr("y","sbar"===i?this.layout.y:this.y.scale.range()[1]),this.stacks.exit().remove(),this.stacks.transition().duration(e?u:0).attr("width",this.layout.width).attr("height",this.layout.height).attr("x",this.layout.x).attr("y",this.layout.y)}},{key:"refreshScale",value:function(){var t=this.settings.type;"sbar"===t&&(this.y.scale.domain([]),this.y.label.call(this.x.axis)),"scol"===t&&(this.x.scale.domain([]),this.x.label.call(this.x.axis))}},{key:"resize",value:function(){var t=this.settings,e=t.width,n=t.height;this.svg&&(this.svg.attr("viewBox","0 0 ".concat(e," ").concat(n)),this.update(!1))}}])&&ge(t.prototype,e),n&&ge(t,n),r}(),me=(n(35),n(52)),ye=n.n(me);function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function we(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t,e){return(Se=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ce=function(t){function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n={key:"location_id",animation:1e3,selected:[],colors:["rgb(165,0,38)","rgb(215,48,39)","rgb(244,109,67)","rgb(253,174,97)","rgb(254,224,144)","rgb(255,255,191)","rgb(224,243,248)","rgb(171,217,233)","rgb(116,173,209)","rgb(69,117,180)","rgb(49,54,149)"],scale:{direction:"-",domain:[!1,!1],extent:[!1,!1]},filter:[!1,!1],style:{fill:function(t){return e.color(t)},stroke:function(t){return e.color(t)}}};return(e=we(this,ke(i).call(this))).settings=U({},n,t),e.colors={"+":Y(e.settings.colors),"-":Y(e.settings.colors).reverse()},e.colorize=j.a.scale.linear().range(e.colors[e.settings.scale.direction]).clamp(!0),e}var e,n,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Se(t,e)}(i,ye.a),e=i,(n=[{key:"transition",value:function(t,e){var n=this.settings.animation,i=void 0===n?0:n;return e&&0<i?t.transition().duration(i):t}},{key:"color",value:function(t){var e=t.data,n=e.color,i=void 0===n?void 0:n,a=e.value,r=void 0===a?void 0:a;return i||(void 0!==r?this.colorize(r):null)}},{key:"styles",value:function(t){var i=this,a=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return t.style({fill:function(t){var e=t.layer.style,n=e.fill instanceof Function?e.fill.apply(i,[t,a]):e.fill;return t.style=t.style||{},t.style.fill=n},stroke:function(t){var e=t.layer.style,n=e.stroke instanceof Function?e.stroke.apply(i,[t,a]):e.stroke;return t.style=t.style||{},t.style.stroke=n}})}},{key:"classes",value:function(t){var e=[this.settings.class],n=t.properties.disputes,i=t.data.value,a=void 0===i?void 0:i;n&&n.length&&e.push("disputed"),this.selected(t)&&e.push("selected"),void 0===a&&e.push("no-data"),t.properties.class&&e.push(t.properties.class);var r=this.settings.filter;return r&&(!1!==r[0]&&a<r[0]&&e.push("filtered"),!1!==r[1]&&a>r[1]&&e.push("filtered")),t.classes=e}},{key:"selected",value:function(t){var e=t.properties[this.settings.key],n=t.properties.disputes,i=this.settings.selected;if(!e&&!n)return!1;var a=K(e,i);if(n){var r=K(i,n);if(!e&&r)return!0;if(e&&r&&K(e,n))return!0;if(r&&!a)return!0}return a}},{key:"select",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{update:!0},n=e.update;void 0!==t&&(this.settings.selected=(Array.isArray(t)?t:[t]).map(Number)),this.nodes&&this.nodes.filter(this.selected.bind(this)).each(function(){this.parentNode.appendChild(this)}),n&&this.update(e)}},{key:"direction",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{update:!0},n=e.update;this.colors[t]&&(this.settings.scale.direction=Y(t),n&&this.update(e))}},{key:"unit",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{update:!0},n=e.update;void 0!==t&&(this.settings.scale.unit=Y(t),n&&this.update(e))}},{key:"filter",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{update:!0},n=e.update;void 0!==t&&(this.settings.filter=Y(t),n&&this.update(e))}},{key:"domain",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{update:!0},n=e.update;if(void 0!==t)return this.settings.scale.domain=Y(t),n&&this.update(e),t;var i=this.settings.scale,a=i.direction,r=i.domain,s=void 0===r?[!1,!1]:r,o=[];if(!1===s[0]||!1===s[1]){var c=this.extent();o[0]=!1!==s[0]?s[0]:c[0],o[1]=!1!==s[1]?s[1]:c[1]}else o=xe(s);return o[0]!==o[1]||o[0]||o[1]||(o[0]=0,o[1]=1),V(o[0],o[1],this.colors[a].length)}},{key:"extent",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{update:!0},n=e.update;if(void 0!==t)return this.settings.scale.extent=Y(t),n&&this.update(e),t;var i=this.data||[],a=j.a.extent(i.reduce(function(t,e){var n=[];return e.extent?n=e.extent:e.data&&(n=j.a.extent(j.a.values(e.data).map(function(t){return t.value}))),t.concat(n)},[]));return[!1===this.settings.scale.extent[0]?a[0]:this.settings.scale.extent[0],!1===this.settings.scale.extent[1]?a[1]:this.settings.scale.extent[1]]}}])&&_e(e.prototype,n),a&&_e(e,a),i}();function Me(t){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ee(t,e){return!e||"object"!==Me(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oe(t,e){return(Oe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pe=function(t){function n(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);(e=Ee(this,Ae(n).call(this,Object(L.merge)({},{container:"#chart",width:1e3,height:500,zoom:{extent:[.3,50],scale:0,translate:[0,0],increment:1.5},proportion:.95,class:"location-path"},t)))).viewbox={};var i={area:1,scale:1,translate:[0,0],clip:j.a.geo.clipExtent(),bounds:j.a.geo.path().projection(j.a.geo.transform({point:function(t,e,n){this.stream.point(t,e,n)}})).bounds,simplify:j.a.geo.transform({point:function(t,e,n){n>=i.area&&this.stream.point(t*i.scale+i.translate[0],e*i.scale+i.translate[1],n)}}),path:j.a.geo.path().projection({stream:function(t){return i.simplify.stream(i.clip.stream(t))}})};return e.projection=i,e}var e,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oe(t,e)}(n,Ce),e=n,(i=[{key:"calcBounds",value:function(t){return this.projection.bounds({type:"FeatureCollection",features:t})}},{key:"calcViewbox",value:function(t){var e=this.calcBounds(t.reduce(function(t,e){return e.shape&&e.shape.features?t.concat(e.shape.features):t},[]));return{bounds:e,center:this.calcCenter({bounds:e})}}},{key:"calcCenter",value:function(t){var e=t.width,n=void 0===e?this.settings.width:e,i=t.height,a=void 0===i?this.settings.height:i,r=t.bounds,s=t.scale,o=t.translate;return r?[r[1][0]+r[0][0],r[1][1]+r[0][1]]:s&&o?[(n-2*o[0])/s,(a-2*o[1])/s]:[0,0]}},{key:"calcScale",value:function(t){var e=t.width,n=void 0===e?this.settings.width:e,i=t.height,a=void 0===i?this.settings.height:i,r=t.proportion,s=void 0===r?1:r,o=t.bounds;return s/Math.max(Math.abs(o[1][0]-o[0][0])/n,Math.abs(o[1][1]-o[0][1])/a)}},{key:"calcTranslate",value:function(t){var e=t.width,n=void 0===e?this.settings.width:e,i=t.height,a=void 0===i?this.settings.height:i,r=t.scale,s=t.center;return[(n-r*s[0])/2,(a-r*s[1])/2]}},{key:"render",value:function(t){var e=this;this.svg=j.a.select(this.settings.container).append("svg").attr({height:this.settings.height,width:this.settings.width}),this.zoomed=j.a.behavior.zoom().on("zoom",function(){e.projection.scale=e.zoomed.scale(),e.projection.translate=e.zoomed.translate(),e.projection.area=1/e.projection.scale/e.projection.scale,e.settings.zoom.scale=e.projection.scale-e.viewbox.scale,e.settings.zoom.translate=[e.projection.translate[0]-e.viewbox.translate[0],e.projection.translate[1]-e.viewbox.translate[1]],e.paths.attr("d",e.projection.path),e.emit("zoom",e.settings.zoom)}),this.update(t)}},{key:"update",value:function(t){var a=this,e=t.layers,n=this.layers?this.layers.data():[],i=t.animate,r=void 0===i||i;if(void 0!==e){var s=n.map(function(t){return t.key}),o=e.map(function(t){return t.key});Object(L.isEqual)(s,o)||(this.viewbox=this.calcViewbox(e)),this.layers=this.svg.selectAll(".layer").data(e.map(function(t){return t.style=Object(L.merge)({},a.settings.style,t.style),t}),function(t){return t.key});var c=this.layers.enter(),l=this.layers.exit();c.append("g").attr("class",function(t){var e=t.key;return"layer layer-".concat(e)}).style("opacity",0),this.transition(l,r).style("opacity",0).remove(),this.layers.order(),this.transition(this.layers,r).style("opacity",1),this.data=this.layers.data(),this.paths=this.layers.selectAll("path")}this.colorize.range(this.colors[this.settings.scale.direction]).domain(this.domain()),this.paths=this.paths.data(function(n){if(!n.shape||!n.shape.features)return[];var i=n.data||{};return n.shape.features.map(function(t){var e=t.properties[a.settings.key]||t.properties.key;return t.layer=n,t.data=i[e]||{},t})},function(t){return t.properties.key||t.properties[a.settings.key]}),this.paths.enter().append("path").attr({class:function(t){return a.classes(t).join(" ")},d:this.projection.path}).call(this.styles.bind(this),!0),this.paths.exit().remove(),this.transition(this.paths,r).attr("class",function(t){return a.classes(t).join(" ")}).call(this.styles.bind(this)),this.resize(this.settings.width,this.settings.height),this.nodes=this.paths,this.select(void 0,{update:!1})}},{key:"resize",value:function(t,e){this.settings.width=t,this.settings.height=e;var n=this.settings,i=n.width,a=n.height,r=n.proportion;this.viewbox.scale=this.calcScale({bounds:this.viewbox.bounds,proportion:r}),this.viewbox.translate=this.calcTranslate({scale:this.viewbox.scale,center:this.viewbox.center});var s=[this.viewbox.translate[0]+this.settings.zoom.translate[0],this.viewbox.translate[1]+this.settings.zoom.translate[1]],o=[this.settings.zoom.extent[0]*this.viewbox.scale,this.settings.zoom.extent[1]*this.viewbox.scale],c=this.viewbox.scale+this.settings.zoom.scale,l=this.calcCenter({scale:c,translate:s});this.zoomed.scaleExtent(o),this.projection.clip.extent([[-5,-5],[i+10,a+10]]),c=Math.max(o[0],Math.min(c,o[1])),s=this.calcTranslate({scale:c,center:l}),this.svg.attr({height:a,width:i}).call(this.zoomed.translate(s).scale(c)).call(this.zoomed.event)}},{key:"zoom",value:function(t,e){var n=this,i=this.zoomed.scale(),a=this.zoomed.translate(),r=this.zoomed.scaleExtent(),s=this.calcCenter({scale:i,translate:a});switch(t){case"reset":var o=this.viewbox;i=o.scale,s=o.center;break;case"in":i*=this.settings.zoom.increment;break;case"out":i/=this.settings.zoom.increment;break;case"to":var c,l;c="selected"===e?this.settings.selected:(e instanceof Array?e:[e]).map(Number);var u=this.layers.data().reduce(function(t,e){return t.concat(e.shape.features.filter(function(t){return t.properties[n.settings.key]&&c.includes(t.properties[n.settings.key])}))},[]);u.length&&(l=this.calcBounds(u),i=this.calcScale({bounds:l,proportion:.6}),s=this.calcCenter({bounds:l}))}i=Math.max(r[0],Math.min(i,r[1])),a=this.calcTranslate({scale:i,center:s}),this.svg.transition().duration(this.settings.animation).call(this.zoomed.scale(i).translate(a).event)}}])&&Te(e.prototype,i),a&&Te(e,a),n}();function De(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ie(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ne(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],0<=e.indexOf(n)||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(t){He(e,t,n[t])})}return e}function ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function He(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Le=function(){function n(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),He(this,"props",{container:"#chart",animation:1e3,width:1e3,height:800,margin:{top:10,right:10,bottom:10,left:10},padding:4,dataProps:{fill:"fill",text:"text",value:"value",pointKey:"key"},bins:20,spacing:1,data:[],yTitle:""}),He(this,"yScale",j.a.scale.linear()),He(this,"yAxis",j.a.svg.axis().orient("left")),He(this,"histogram",j.a.layout.histogram().value(function(t){return t[e.props.dataProps.value]})),this.initialize(t)}var t,e,i;return t=n,(e=[{key:"_updateProps",value:function(t){this.props=je({},this.props,t)}},{key:"_calculateBins",value:function(t){var c=this,e=this.props,n=e.width,i=e.margin,r=e.dataProps,l=(n-(i.left+i.right))/t.length;return t.map(function(t,e){var n=t.values,i=Ne(t,["values"]),s=l*e,o=s+l,a=n.sort(function(t,e){return t[r.value]-e[r.value]||t[r.pointKey]-e[r.pointKey]});return je({},i,{x0:s,x1:o,values:c.histogram(a).reduce(function(t,e){var n=e.x,i=e.dx,a=c.yScale(n),r=c.yScale(n+i);return Ie(t).concat(Ie(e.map(function(t,e){return je({},t,{index:e,x0:s,x1:o,y0:a,y1:r})})))},[])})})}},{key:"_extent",value:function(t){var e=this.props,n=e.extent,i=e.dataProps,a=De(n||j.a.extent(t.reduce(function(t,e){var n=e.values;return Ie(t).concat(Ie(n.map(function(t){return t[i.value]})))},[])),2),r=a[0],s=void 0===r?0:r,o=a[1],c=void 0===o?1:o;return[Math.ceil(c),Math.floor(s)]}},{key:"initialize",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._updateProps(t);var e=this.props.container;this.svg=j.a.select(e).append("svg").attr("width","100%").attr("height","100%").attr("preserveAspectRatio","none").attr("overflow","hidden"),this.groups={yTitle:this.svg.append("g").attr("class","y-title-group title-group"),xTitle:this.svg.append("g").attr("class","x-title-group title-group"),xAxis:this.svg.append("g").attr("class","x-axis-group axis-group"),yAxis:this.svg.append("g").attr("class","y-axis-group axis-group"),plot:this.svg.append("g").attr("class","plot-group")},this.groups.columns=this.groups.plot.append("g").attr("class","column-group"),this.groups.bins=this.groups.plot.append("g").attr("class","bin-group"),this.groups.overlay=this.groups.plot.append("g").attr("class","overlay-group"),this.groups.yTitle.append("text").attr("class","y-title title"),this.groups.overlay.append("path").attr("class","line"),this.yAxis.scale(this.yScale),this.update({},!1)}},{key:"update",value:function(){var n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this._updateProps(t);var i=this.props,a=i.animation,r=i.width,s=i.height,o=i.margin,c=i.bins,l=i.spacing,u=i.dataProps,h=i.yTitle;this.yScale.range([0,s-(o.top+o.bottom)]).domain(this._extent(this.props.data)).nice(c),this.yAxis.ticks(c+1),this.histogram.bins(this.yScale.ticks(c));var d=this._calculateBins(this.props.data),f=j.a.max(d,function(t){var e=t.values;return j.a.max(e,function(t){return t.index+1})}),p=this.yScale.ticks(c).length-1,g=(r-(o.left+o.right))/d.length,v=(s-(o.top+o.bottom))/p,m=(Math.sqrt(4*(v-l)*(g-l)*f+1)-2*f*l-1)/(4*f),y=Math.ceil(f/Math.ceil((g-l)/(2*m+l))),b=Math.ceil(f/y);m=Math.min((v-l-l*y)/(2*y),(g-l-l*b)/(2*b));var x=(v-l-(2*m+l)*y)/2;this.svg.attr("viewBox","0 0 ".concat(r," ").concat(s)),this.groups.yAxis.transition().duration(e?a:0).attr("transform","translate(".concat(o.left,", ").concat(o.top,")")).call(this.yAxis),this.groups.plot.transition().duration(e?a:0).attr("transform","translate(".concat([o.left,o.top],")")),this.groups.xTitle.transition().duration(e?a:0).attr("transform","translate(".concat((r+(o.left-o.right))/2,", ").concat(s,")")),this.groups.yTitle.transition().duration(e?a:0).attr("transform","translate(20, ".concat((s+(o.top-o.bottom))/2,") rotate(-90)")),this.groups.yTitle.selectAll(".y-title").text(h);var _=this.groups.bins.selectAll(".bin-line").data(this.yScale.ticks(c).slice(0,-1));_.enter().append("line").attr("class","bin-line").attr("opacity",0),_.exit().transition().duration(e?a:0).attr("opacity",0).remove(),_.transition().duration(e?a:0).attr("opacity",1).attr("x1",0).attr("x2",r-(o.left+o.right)).attr("y1",this.yScale).attr("y2",this.yScale);var w=this.groups.columns.selectAll(".column").data(d),k=w.enter().append("g").attr("class","column");w.exit().remove(),k.append("line").attr("class","column-line"),k.append("rect").attr("class","column-header"),k.append("text").attr("class","column-text");var S=De(this.yScale.range(),2),C=S[0],M=S[1];this.groups.columns.selectAll(".column").select(".column-line").transition().duration(e?a:0).attr("x1",function(t){return t.x1}).attr("x2",function(t){return t.x1}).attr("y1",C).attr("y2",M),this.groups.columns.selectAll(".column").select(".column-header").transition().duration(e?a:0).attr("x",function(t){return t.x0}).attr("y",C-20).attr("height",20).attr("width",g),this.groups.columns.selectAll(".column").select(".column-text").transition().duration(e?a:0).attr("x",function(t){var e=t.x0;return e+(t.x1-e)/2}).attr("y",C-10).attr("dominant-baseline","central").attr("text-anchor","middle").text(function(t){return t[u.text]});var T=this.groups.columns.selectAll(".column").selectAll(".point").data(function(t){return t.values},function(t){return t[u.pointKey]});T.enter().append("circle").attr("class","point").attr("opacity",0).on("mouseover",function(t){var e=t[u.pointKey];return n.hover(e)}).on("mouseout",function(){return n.hover()}).attr("fill",function(t){return t[u.fill]}).attr("r",m).attr("cx",function(t){var e=t.x0,n=t.index;return e+(m+l)+(2*m+l)*Math.floor(n/y)}).attr("cy",function(t){var e=t.y0,n=t.index;return e-x-(m+l)-(2*m+l)*(n%y)}),T.exit().transition().duration(e?a:0).attr("opacity",0).remove(),T.transition().duration(e?a:0).attr("opacity",1).attr("fill",function(t){return t[u.fill]}).attr("r",m).attr("cx",function(t){var e=t.x0,n=t.index;return e+(m+l)+(2*m+l)*Math.floor(n/y)}).attr("cy",function(t){var e=t.y0,n=t.index;return e-x-(m+l)-(2*m+l)*(n%y)})}},{key:"highlight",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this.props,i=n.dataProps,a=n.animation,r=Object(L.castArray)(t).filter(function(t){return!Object(L.isNil)(t)});this.groups.columns.selectAll(".point").transition().duration(e?a:0).attr("opacity",function(t){var e=t[i.pointKey];return!r.length||r.includes(e)?1:.3})}},{key:"hover",value:function(e){var n=this,t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=this.props.dataProps;this.highlight(e,t);var a=this.groups.columns.selectAll(".point").filter(function(t){return t[i.pointKey]===e}).data(),r=De(a,1)[0],s=(r=void 0===r?{}:r)[i.fill],o=void 0===s?"#454545":s,c=this.groups.overlay.selectAll(".line").data(a);c.enter().append("line").attr("class","line").attr("stroke",o),c.exit().remove(),c.attr("x1",function(t){return t.x0}).attr("x2",function(t){return t.x1}).attr("y1",function(t){var e=t.value;return n.yScale(e)}).attr("y2",function(t){var e=t.value;return n.yScale(e)})}},{key:"resize",value:function(t,e){this.update({width:t,height:e},!1)}}])&&ze(t.prototype,e),i&&ze(t,i),n}();function Re(t){return{location:{key:"location",values:t.location,id:"location_id",exclude:[44634,44635,44636,44637,44639]},locations:{metadata:t.location,id:"location_id"},cause:{key:"cause",values:t.cause,id:"cause_id"},causes:{metadata:t.cause,id:"cause_id"},risk:{key:"paf",values:t.risk,id:"paf_id"},sev:{key:"paf",values:t.risk,id:"paf_id"},impairment:{key:"paf",values:t.impairment,id:"paf_id"},etiology:{key:"paf",values:t.etiology,id:"paf_id"},injury:{key:"paf",values:t.injury,id:"paf_id"},groups:{metadata:t.groups,id:"group_id"},pafs:{metadata:t.paf,id:"paf_id"}}}function We(t,e,o,c){var n=Re(t)[e],i=n.values,l=n.exclude,u=n.id;return j.a.values(i).filter(function(t){var e=t[u],n=t.level,i=t.children,a=void 0===i?[]:i,r=t.parents,s=void 0===r?[]:r;return(!l||!l.includes(e))&&(!(s.length&&!s.includes(Number(c)))&&(n===o||n<o&&!a.length))}).map(function(t){return t[u]})}function Fe(t){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Be=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="arrow",this.settings=t,this.settings.selected=null,this.$hover=null,this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){var s=this;this.colors={cause:{295:rt.A[0],409:rt.B[0],687:rt.C[0]},risk:{202:"#b2ebde",203:"#ceb2eb",104:"#f7dbbb"},location:{103:I.a.Pastel1[9][0],4:I.a.Pastel1[9][1],64:I.a.Pastel1[9][2],137:I.a.Pastel1[9][3],31:I.a.Pastel1[9][4],158:I.a.Pastel1[9][6],166:I.a.Pastel1[9][7]}},this.colors.sev=this.colors.risk,"england"===this.getSetting("type")&&(this.colors.location={4621:I.a.Pastel1[9][0],4623:I.a.Pastel1[9][1],4624:I.a.Pastel1[9][2],4618:I.a.Pastel1[9][3],4619:I.a.Pastel1[9][4],4625:I.a.Pastel1[9][5],4626:I.a.Pastel1[9][6],4622:I.a.Pastel1[9][7],4620:I.a.Pastel1[9][8]});var n=this.hover.bind(this);N()("".concat(this.settings.container.chart," .col rect")).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:10,liveEvents:!0,allowTipHover:!1,content:function(t,e){return n(N()(this),e,this.__data__)}}),this.highlight=function(t){var e=t.target,n=t.type,i=e.__data__,a=j.a.selectAll("".concat(s.settings.container.chart," rect")).filter(function(t){return i.id===t.id}),r=j.a.selectAll("".concat(s.settings.container.chart," line")).filter(function(t){return i.id===t.id});"mouseleave"===n&&(a.style("stroke-width",1),r.style("stroke-width",1)),"mouseenter"===n&&(a.style("stroke-width",3),r.style("stroke-width",3))},N()(document).on("mouseenter","".concat(this.settings.container.chart," .col rect"),this.highlight),N()(document).on("mouseleave","".concat(this.settings.container.chart," .col rect"),this.highlight),N()(document).on("click","".concat(this.settings.container.chart," .col rect"),function(t){var e=t.target.__data__;"location"===s.getSetting("rank")?s.changeSetting("location",e.id):s.changeSetting(s.getSetting("display"),e.id)})}},{key:"color",value:function(t){var e=this.getSetting("rank"),n=this.getSetting("display"),i="display"===e?n:e,a=Re(this.metadata)[i].values,r=this.colors[i]||{},s=a[t],o=s.level,c=s.parents;return r[2===o?t:c[1]]||"#fafafa"}},{key:"hover",value:function(t,e,n){this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t;var i,a,r="",s=this.getSetting("metric"),o=this.getSetting("unit"),c=this.getSetting("location"),l=this.getSetting("value"),u=n.year,h=n.fill;if(e.css({"border-color":h}),"location"===this.getSetting("rank"))c=n.id,i=this.getValue({location:c,year:u}),a=this.getValue({location:c,unit:"pcg"}),r+="".concat(this.metadata.location[c].name,"<br/>");else if("cause"===this.getSetting("display"))i=this.getValue({cause:n.id,year:u}),a=this.getValue({cause:n.id,unit:"pcg"}),r+="".concat(this.metadata.cause[n.id].name,"<br/>");else if("risk"===this.getSetting("display")&&"advanced"===this.getSetting("controls")){var d=this.metadata.cause[this.getSetting("cause")],f=this.metadata.risk[n.id];i=this.getValue({paf:n.id,year:u}),a=this.getValue({paf:n.id,unit:"pcg"}),r+="".concat(d.name," attributable to ").concat(f.name,"<br/>")}else i=this.getValue({paf:n.id,year:u}),a=this.getValue({paf:n.id,unit:"pcg"}),r+="".concat(this.metadata.paf[n.id].name,"<br/>");if(r+="<b>Year:</b> ".concat(n.year,"<br/>"),r+="<b>Rank:</b> ".concat(n.rank?n.rank:"No rank","<br/>"),r+="<b>Change:</b> ".concat($(a,{unit:2}),"<br/>"),"expected"===l&&this.metadata.sdi[c]&&this.metadata.sdi[c][u]){var p=this.metadata.sdi[c][u].sdi;r+="<b>SDI:</b> ".concat(p,"<br/>")}return r+="<b>".concat(this.metadata.unit[o].name,":</b> ").concat($(i,{unit:o,metric:this.metadata.measure[s][o].labels.hover}),"<br/>")}},{key:"render",value:function(){this.chart=new ot({container:this.settings.container.chart,animation:this.settings.animation,height:N()(this.settings.container.chart).height(),width:N()(this.settings.container.chart).width()}),this.legend(),this.chart.data(this.data()),this.chart.render(),this.resize(),this.loaded=!0}},{key:"requests",value:function(){var t,e,n,i=this.getSetting("rank"),a=this.getSetting("display"),r=this.getSetting("level"),s=this.getSetting("category"),o="display"===i?a:i,c=this.getSetting("years"),l=We(this.metadata,o,r,s),u=Re(this.metadata)[o].key;return[this.getParameters((t={year:c},e=u,n=l,e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t))]}},{key:"rows",value:function(){var t=this.getSetting("rank"),e=this.getSetting("display"),n=this.getSetting("level"),i=this.getSetting("category"),a="display"===t?e:t;return We(this.metadata,a,n,i)}},{key:"value",value:function(t,e){return"location"===this.getSetting("rank")?this.getValue({unit:"rank",location:t,year:e}):"cause"===this.getSetting("display")?this.getValue({unit:"rank",cause:t,year:e}):this.getValue({unit:"rank",paf:t,year:e})}},{key:"text",value:function(t){var e=this.getSetting("rank"),n=this.getSetting("display"),i="cause"===n?"medium_name":"name";return"location"===e?this.metadata.location[t].short_name:"sev"===n?this.metadata.risk[t][i]:this.metadata[n][t][i]}},{key:"csv",value:function(){var c=this,l=this.getSetting("metric"),u=this.getSetting("unit"),h=this.getSetting("display"),d=this.getSetting("years"),f=this.getSetting("rank"),p=this.getSetting("value"),g=this.getParameters(),t=["Location","Year","Age","Sex",this.metadata.display.cause.name];"cause"!==h&&t.push(this.metadata.display[h].name),t.push("Measure"),t.push("Value"),t.push("Lower bound"),t.push("Upper bound"),"expected"===p&&t.push("SDI value");var v=[];return this.rows().forEach(function(o){d.concat([d]).forEach(function(s){(s instanceof Array?["change"]:["rank","unit"]).forEach(function(t){var e=[],n="location"===f?o:g.location;e.push(c.metadata.location[n].name),e.push("change"===t?s.join(" - "):s),e.push(c.metadata.age[g.age].name),e.push(c.metadata.sex[g.sex].name);var i,a="display"===f&&"cause"===h?o:g.cause;if(e.push(c.metadata.cause[a].name),"cause"!==h&&e.push(c.metadata[h]["display"===f?o:g.paf].name),"change"===t?e.push("".concat(c.metadata.measure[l][u].labels.treemap," % change")):e.push(c.metadata.measure[l]["rank"===t?4:u].labels.map),(i="rank"===t?c.value(o,s):"location"===f?"change"===t?c.getValue({location:o,unit:"pcg"}):c.getValue({location:o,year:s}):"cause"===h?"change"===t?c.getValue({cause:o,unit:"pcg"}):c.getValue({cause:o,year:s}):"change"===t?c.getValue({paf:o,unit:"pcg"}):c.getValue({paf:o,year:s}))&&"object"===Fe(i)?(e.push(void 0!==i.m?i.m:""),e.push(void 0!==i.l?i.l:""),e.push(void 0!==i.u?i.u:"")):(e.push(i),e.push(""),e.push("")),"expected"===p){var r=("change"===t?d:[s]).reduce(function(t,e){return c.metadata.sdi[n]&&c.metadata.sdi[n][e]&&t.push(c.metadata.sdi[n][e].sdi),t},[]);e.push(r.join(";"))}v.push(e)})})}),[t].concat(v)}},{key:"data",value:function(){for(var d=this,f=Math.floor((this.chart.settings.height-20)/24),p=[],g=this.getSetting("years"),v=this.rows(),t=function(l){var u=[];p=g.map(function(t){for(var e=[],n=0,i=v.length;n<i;n++){var a=v[n],r=d.value(a,t);r&&0!==r&&e.push({id:a,year:t,text:"".concat(r," ").concat(d.text(a)),value:r,rank:r})}e.sort(function(t,e){return t.value-e.value});for(var s=0,o=e.length;s<o;s++){var c=e[s];s<l&&!u.includes(c.id)&&u.push(c.id)}return{data:e}});for(var t=0,e=0,n=p.length;e<n;e++){for(var i=p[e],a={},r=1,s=0,o=i.data.length;s<o;s++){var c=i.data[s];if(u.includes(c.id)){var h=d.color(c.id);c.fill=h,c.value=r,c.stroke=tt(h,.3),c["font-color"]=Z(h,"#fff","#454545"),c["stroke-width"]=1,a[c.id]=c,r+=1}}i.data=a,t<r-1&&(t=r-1)}if(t<=f)return d.chart.settings.limit=l,d.title(),{v:p}},e=f;0<e;e--){var n=t(e);if("object"===Fe(n))return n.v}return[]}},{key:"title",value:function(){var t=N()(this.settings.container.title).outerHeight();N()(this.settings.container.title).empty();var e=this.getSetting("display"),n=[];if("location"===this.getSetting("rank"))if("risk"===e&&"advanced"===this.getSetting("controls")){var i=this.metadata.cause[this.getSetting("cause")],a=this.metadata.risk[this.getSetting("risk")];n.push("".concat(i.name," attributable to ").concat(a.name))}else if("sev"===e){var r=this.metadata.risk[this.getSetting("risk")];n.push(r.name)}else n.push(this.metadata[e][this.getSetting(e)].name);else n.push(this.metadata.location[this.getSetting("location")].name);N()(this.settings.container.title).append(N()("<div/>").text(n.join(", ")));var s=[],o=this.getSetting("age"),c=this.getSetting("metric"),l=this.metadata.age[o],u=l.measure,h=(u=void 0===u?{}:u)[c],d=(h=void 0===h?{}:h).name,f=l.name;s.push(this.metadata.sex[this.getSetting("sex")].label),s.push(d||f),s.push(this.metadata.measure[c][this.getSetting("unit")].labels.map);var p=s.join(", ");"value"===this.getSetting("dimension")&&(p+=" (".concat(Object(L.capitalize)(this.getSetting("value")),")")),N()(this.settings.container.title).append(N()("<div/>").text(p));var g=N()("<div/>").attr("class","clearfix");g.append(N()("<div/>").css({width:"40%",float:"left"}).text("".concat(this.getSetting("years")[0]," rank"))),g.append(N()("<div/>").css({width:"40%",float:"right"}).text("".concat(this.getSetting("years")[1]," rank"))),N()(this.settings.container.title).append(g),t!==N()(this.settings.container.title).outerHeight()&&this.resize()}},{key:"legend",value:function(){var r=this;N()(this.settings.container.legend).empty();var t=this.getSetting("rank"),e=this.getSetting("display"),n="display"===t?e:t,s=Re(this.metadata)[n].values;j.a.keys(this.colors[n]).forEach(function(t){var e,n,i=(s[t]||{}).name,a=r.color(t);e=a,n=i,N()("<div/>",{class:"legend-item"}).css({"border-left-color":e}).appendTo(r.settings.container.legend).append(N()("<span/>").text(n))})}},{key:"resize",value:function(){N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")}),N()(this.settings.container.legend).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")}),this.chart&&(this.chart.settings.width=N()(this.settings.container.chart).width(),this.chart.settings.height=N()(this.settings.container.chart).height(),this.chart.data(this.data(),!1))}},{key:"update",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.chart.settings.width=N()(this.settings.container.chart).width(),this.chart.settings.height=N()(this.settings.container.chart).height(),this.chart.data(this.data(),t),this.legend()}},{key:"destroy",value:function(){N()("".concat(this.settings.container.chart," .col rect")).poshytip("hide").poshytip("destroy"),N()(document).off("click","".concat(this.settings.container.chart," .col rect")),N()(document).off("mouseleave","".concat(this.settings.container.chart," .col rect")),N()(document).off("mouseenter","".concat(this.settings.container.chart," .col rect"))}}])&&$e(t.prototype,n),i&&$e(t,i),e}();n(135);function Ve(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ue=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="decomp",this.settings=t,this.settings.selected=null,this.settings.hover=null,this.$hover=null,this.$click=null,this.colors={A:Ve(rt.A).reverse(),B:Ve(rt.B).reverse(),C:Ve(rt.C).reverse()},this.scales={},this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){var r=this;j.a.keys(this.colors).forEach(function(e){var n=r.layers().filter(function(t){return r.metadata.cause[t].cause.substr(0,1)===e}),i=j.a.scale.linear().domain(n.map(function(t,e){return e})).range(V(0,1,n.length)),a=j.a.scale.linear().domain(V(0,1,r.colors[e].length)).range(r.colors[e]);r.scales[e]=function(t){return a(i(n.indexOf(t)))}}),N()(document).on("mouseenter.gbd",".".concat(this.type," .stack"),function(t){var e=t.target,n=j.a.select(e).datum().stack;r.chart&&r.chart.loaded&&r.chart.hover(n)}),N()(document).on("mouseleave.gbd",".".concat(this.type," .stack"),function(){r.chart&&r.chart.loaded&&r.chart.hover(null)}),N()(this.settings.container.chart).on("click.gbd",".stack",function(t){return r.click(t.target.parentNode),t.stopPropagation(),!1}),N()(this.settings.container.chart).on("click.gbd",function(){r.click()}),N()(document).on("mouseenter.gbd",".legend-item, .tip-glass .row",function(t){var e=t.target;if(r.chart&&r.chart.loaded){var n=N()(e).attr("cause");n&&(r.settings.hover=Number(n),r.update({id:"click"}))}}),N()(document).on("mouseleave.gbd",".legend-item, .tip-glass .row",function(){r.chart&&r.chart.loaded&&(r.settings.hover=null,r.update({id:"click"}))})}},{key:"destroy",value:function(){this.$hover&&this.$hover.poshytip("hide"),this.$click&&this.$click.poshytip("hide").poshytip("destroy"),N()(this.settings.container.chart).off("click.gbd"),N()(document).off("mouseleave.gbd"),N()(document).off("mouseenter.gbd")}},{key:"value",value:function(t){var e=this.getSetting("unit"),n=this.getValue(function(a){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},e=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.forEach(function(t){var e,n,i;e=a,i=r[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i})}return a}({},t,2===e?{unit:"ppt"}:{}));return 2===e?Object(L.mapValues)(n,function(t,e){return["m","u","l"].includes(e)?100*t:t}):n}},{key:"color",value:function(t){return this.scales[this.metadata.cause[t].cause.substr(0,1)](t)}},{key:"render",value:function(){this.chart=new te({container:this.settings.container.chart,height:N()(this.settings.container.chart).height(),width:N()(this.settings.container.chart).width(),margin:{top:30,left:230,right:20,bottom:40}}),this.chart.type="decomp",this.chart.y.vals=this.vals(),this.chart.y.labels=this.labels(),this.chart.y.data=this.data(),this.chart.x.text=this.text("x"),this.legend(),this.title(),this.resize(),this.chart.render(),this.loaded=!0}},{key:"layers",value:function(){return Ve(this.metadata.groups.cause.overview)}},{key:"vals",value:function(){return this.stacks().sort(this.sort())}},{key:"resize",value:function(){N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")}),N()(this.settings.container.legend).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")}),this.chart&&(this.chart.settings.width=N()(this.settings.container.chart).width(),this.chart.settings.height=N()(this.settings.container.chart).height(),this.chart.resize())}},{key:"update",value:function(t){var e=t.id;this.chart&&(this.title(),this.legendUpdate(),this.chart.y.vals=this.vals(),this.chart.y.labels=this.labels(),this.chart.y.data=this.data(),this.chart.x.text=this.text("x"),this.scale(),this.chart.update(),"click"!==e&&this.click())}},{key:"click",value:function(){}},{key:"title",value:function(){}},{key:"requests",value:function(){}},{key:"data",value:function(){}},{key:"stacks",value:function(){}},{key:"sort",value:function(){}},{key:"labels",value:function(){}},{key:"text",value:function(){}},{key:"min",value:function(){}},{key:"max",value:function(){}},{key:"scale",value:function(){}},{key:"legendUpdate",value:function(){}},{key:"legend",value:function(){}}])&&qe(t.prototype,n),i&&qe(t,i),e}();function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ke(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Xe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qe(t,e){return!e||"object"!==Ye(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Je(t){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tn(t,e){return(tn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var en=function(t){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Qe(this,Je(n).call(this,t))).type="decomp-le",e}var e,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tn(t,e)}(n,Ue),e=n,(i=[{key:"click",value:function(t){var l=this,e=t&&j.a.select(t).datum()||{},n=e.id,a=e.stack,i=e.values,r=Xe(i=void 0===i?[]:i,2),s=r[0],o=(s=void 0===s?{}:s).value,c=r[1],u=(c=void 0===c?{}:c).value,h=e.decomposition,d=e.increase,f=e.decrease,p=u-o;this.chart&&this.chart.loaded&&(N()(".".concat(this.type," .stack")).poshytip("hide").poshytip("destroy"),t&&this.settings.selected!==n?(this.settings.selected=n,this.$click=N()(t)):(this.$click&&this.$click.poshytip("hide").poshytip("destroy"),this.settings.selected=null,this.settings.hover=null,this.$click=null),this.update({id:"click"}),this.settings.selected&&(N()(t).poshytip({slide:!1,showOn:"none",alignTo:"target",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"bottom",className:"tip-glass",offsetY:3,allowTipHover:!1,keepInViewport:!0,content:function(){var t=Xe(l.getSetting("years"),2),e=t[0],n=t[1],i=["decreasing","increasing"].map(function(t){var e="increasing"===t?"Increased life expectancy":"Decreased life expectancy",i="increasing"===t?"+":"-",n="increasing"===t?"gained":"lost",a="decreasing"===t?"greater than -":"less than ",r=h[t].filter(function(t){var e=t.value;return.05<=Math.abs(e)}).sort(function(t,e){return Math.abs(e.value)-Math.abs(t.value)}),s="increasing"===t?d:f,o=r.map(function(t){var e=t.id,n=t.value;return'<div class="row" cause="'.concat(e,'">\n                <span class="label">').concat(l.metadata.cause[e].medium_name,'</span>\n                <span class="value">').concat(i).concat(Math.round(10*n)/10,"</span>\n              </div>")}).join(""),c=r.length<h[t].length?'<div class="row">\n                  <span><i>Values '.concat(a,".05 were omitted</i></span>\n                </div>"):"";return'<div class="'.concat(t,'">\n              <div>\n                <h2>\n                  <span class="label">').concat(e,'</span>\n                  <span class="value">years</span>\n                </h2>\n              </div>\n              <div class="col-outer">\n                <div class="col-inner">\n                  ').concat(o,"\n                  ").concat(c,'\n                </div>\n              </div>\n              <div class="total">\n                <span class="label">Total years ').concat(n,'</span>\n                <span class="value">').concat(i).concat(Math.round(10*s)/10,"</span>\n              </div>\n            </div>")}).join("");return'<div class="title">\n            <h1>How causes contributed to change in life expectancy</h1>\n          </div>\n          <h1>'.concat(l.metadata.location[a].name,'</h1>\n          <div class="footer ').concat(0<p?"increase":"decrease",'"> \n            <div class="start-eyar">\n              <span class="label">').concat(e,'</span>\n              <span class="value"> ').concat(H(o,0),' years</span>\n            </div>\n            <div class="end-year">\n              <span class="label">').concat(n,' </span>\n              <span class="value"> ').concat(H(u,0),' years</span>\n            </div>\n            <div class="change">\n              <span class="label">Change </span>\n              <span class="value">\n                ').concat(0<p?"+":"").concat(Math.round(10*p)/10,'\n              </span>\n            </div>\n          </div> \n          <div class="table clearfix">\n            ').concat(i,"\n          </div>")}}),window.setTimeout(function(){N()(t).poshytip("show")},1===this.getSetting("locations").length?1e3:0)))}},{key:"title",value:function(){N()(this.settings.container.title).empty();var t=this.getSetting("years"),e=this.metadata.sex[this.getSetting("sex")].label;N()(this.settings.container.title).append(N()("<div/>").text("Change in country life expectancy at birth: \n        ".concat(e," from ").concat(t[0]," - ").concat(t[1]," by broad cause group"))),N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")})}},{key:"requests",value:function(){var t=this.stacks(),e=this.layers();return[this.getParameters({value:"decomp",location:t,cause:e}),this.getParameters({location:t})]}},{key:"data",value:function(){var l=this,u=this.getSetting("years"),t=this.settings,h=t.selected,d=t.hover,e=this.stacks(),f=this.layers();return e.map(function(r){if(!r)return{values:[],decomposition:{increasing:[],decreasing:[]},style:{opacity:0}};var s=l.value({location:r,year:u[0]}).m,t=u.map(function(t,e){var n=l.value({location:r,year:t}).m;return{type:"year",id:e?"end":"start",year:t,stack:r,start:s,value:n,text:"".concat(t," (").concat(n.toFixed(0),")"),style:{stroke:"#454545",dasharray:e?"5,2":""}}}),e=Xe(["increasing","decreasing"].map(function(a){return f.map(function(t){var e=l.value({value:"decomp",location:r,cause:t}).m,n="increasing"===a&&0<e||"decreasing"===a&&e<0?Math.abs(e):0,i=l.color(t);return{id:t,type:"cause",stack:r,decomposition:a,start:s,value:n,style:{opacity:h!==r&&h||!d||d===t?1:.3,stroke:h!==r&&h||d!==t?"#fff":"#454545",fill:i}}})}),2),n=e[0],i=e[1],a=j.a.sum(n,function(t){return t.value}),o=j.a.sum(i,function(t){return t.value}),c={increasing:s,decreasing:s-o};return{id:r,stack:r,start:s,increase:a,decrease:o,values:t,style:{opacity:h&&h!==r?.3:1},decomposition:{increasing:n.map(function(t){return t.x0=c.increasing,c.increasing+=t.value,t}),decreasing:i.map(function(t){return t.x0=c.decreasing,c.decreasing+=t.value,t})}}})}},{key:"stacks",value:function(){var t=this.getSetting("locations");return Ke(t).concat(Ke(this.settings.selected&&1===t.length?[!1]:[]))}},{key:"sort",value:function(){var i=this,t=this.getSetting("order"),a=this.getSetting("years");return"start"===t?function(t,e){var n=Xe(a,1)[0];return i.value({location:t,year:n}).m-i.value({location:e,year:n}).m}:"end"===t?function(t,e){var n=Xe(a,2)[1];return i.value({location:t,year:n}).m-i.value({location:e,year:n}).m}:"change"===t?function(t,e){var n=a;return i.value({unit:"acg",location:t,year:n}).m-i.value({unit:"acg",location:e,year:n}).m}:void 0}},{key:"labels",value:function(){var n=this;return this.vals().reduce(function(t,e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(t){Ge(e,t,n[t])})}return e}({},t,Ge({},e,e?n.metadata.location[e].short_name:""))},{})}},{key:"text",value:function(){return"Years"}},{key:"legendUpdate",value:function(){var n=this;this.getSetting("years").forEach(function(t,e){N()("".concat(n.settings.container.legend," .legend-item.year-").concat(e)).text("Life expectancy ".concat(t))})}},{key:"legend",value:function(){var n=this;this.getSetting("years").forEach(function(t,e){N()(n.settings.container.legend).append(N()("<div>").attr("class","legend-item year-".concat(e)).text("Life expectancy ".concat(t)).css({"border-left":e?"3px dotted #454545":"3px solid #454545","padding-left":"4px",margin:"4px",padding:"3px"}))}),this.layers().reverse().forEach(function(t){N()(n.settings.container.legend).append(N()("<div>").attr("class","legend-item").attr("cause",t).text(n.metadata.cause[t].medium_name).css({"border-left":"4px solid ".concat(n.color(t)),margin:"4px",padding:"3px"}))})}}])&&Ze(e.prototype,i),a&&Ze(e,a),n}(),nn=(n(136),294),an=1,rn=2,sn=3;function on(t){return(on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ln(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function un(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function hn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function dn(t,e){return!e||"object"!==on(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function fn(t,e,n){return(fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pn(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function pn(t){return(pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gn(t,e){return(gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vn=function(t){function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=dn(this,pn(i).call(this,t))).type="decomp-scenario",e.scenarios=[3,2,4],e}var e,n,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gn(t,e)}(i,Ue),e=i,(n=[{key:"click",value:function(t){var c=this,e=t&&j.a.select(t).datum()||{},n=e.id,l=e.stack;this.chart&&this.chart.loaded&&(N()(".".concat(this.type," .stack")).poshytip("hide").poshytip("destroy"),t&&this.settings.selected!==n?(this.settings.selected=n,this.$click=N()(t)):(this.$click&&this.$click.poshytip("hide").poshytip("destroy"),this.settings.selected=null,this.settings.hover=null,this.$click=null),this.update({id:"click"}),this.settings.selected&&(N()(t).poshytip({slide:!1,showOn:"none",alignTo:"target",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"bottom",className:"tip-glass",offsetY:3,allowTipHover:!1,keepInViewport:!0,content:function(){var t=c.value({paf:l,scenario:2,cause:nn}).m,e=c.value({paf:l,scenario:4,cause:nn}).m,n=c.value({paf:l,scenario:3,cause:nn}).m,i=c.layers().map(function(t){return{reference:c.value({cause:t,paf:l,scenario:2}).m,better:c.value({cause:t,paf:l,scenario:4}).m,worse:c.value({cause:t,paf:l,scenario:3}).m,cause:t}}).sort(function(t,e){return e.worse-e.better-(t.worse-t.better)}).map(function(t){var e=t.cause,n=t.better,i=t.reference,a=t.worse,r=c.color("cause",e);return'<tr class="row" cause="'.concat(e,'">\n                <td cause="').concat(e,'">\n                  <span class="cause-name" style="border-left-color: ').concat(r,'">\n                    ').concat(c.metadata.cause[e].medium_name,"\n                  </span>\n                </td>\n                <td>").concat(c.format(a-i,!0),"</td>\n                <td>").concat(c.format(i),"</td>\n                <td>").concat(c.format(n-i,!0),"</td>\n              </tr>")}).join(""),a=c.getSetting("metric"),r=c.getSetting("unit"),s=c.metadata.measure[a][r].labels.map,o=function(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;return n===i&&(i=e.clientWidth),document.body.removeChild(e),n-i}();return'<div class="title">\n            <h1>Difference in attributable '.concat(s,' from reference scenario</h1>\n          </div>\n          <div class="table clearfix">\n            <table>\n              <thead>\n                <tr style="padding-right: ').concat(o,'px">\n                  <th>Cause</th>\n                  <th>Worse</th>\n                  <th>Reference</th>\n                  <th>Better</th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(i,'\n              </tbody>\n              <tfoot>\n                <tr style="padding-right: ').concat(o,'px">\n                  <td>Total</td>\n                  <td>').concat(c.format(n-t,!0),"</td>\n                  <td>").concat(c.format(t),"</td>\n                  <td>").concat(c.format(e-t,!0),"</td>\n                </tr>\n              </tfoot>\n            </table>\n          </div>")}}),window.setTimeout(function(){N()(t).poshytip("show")},this.stacks(!0).includes(!1)?1e3:0)))}},{key:"title",value:function(){var t=this.getSetting("metric"),e=this.getSetting("unit"),n=this.metadata.measure[t][e].labels.map;N()(this.settings.container.title).empty(),N()(this.settings.container.title).append(N()("<div/>").text("Difference in attributable ".concat(n," across scenarios"))),N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")})}},{key:"requests",value:function(){var t=this.stacks(),e=[nn].concat(un(this.layers())),n=this.getSetting("unit"),i=this.getSetting("age"),a=this.scenarios;return n==rn?[this.getParameters({scenario:a,paf:t,cause:e,unit:27==i?sn:an}),this.getParameters({scenario:a,data:"cause",cause:nn,unit:27==i?sn:an})]:[this.getParameters({scenario:a,paf:t,cause:e,unit:n})]}},{key:"format",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=j.a.format(",")(H(t,1));return e&&0<t?"+".concat(n):n}},{key:"data",value:function(){var u=this,t=this.settings,h=t.selected,d=t.hover,e=this.stacks(!0),f={increasing:this.layers().reverse(),decreasing:this.layers()};return e.map(function(c){if(!c)return{values:[],decomposition:{increasing:[],decreasing:[]},style:{opacity:0}};var l=u.value({paf:c,scenario:2,cause:nn}).m,t=u.scenarios.map(function(t){var e=u.value({paf:c,scenario:t,cause:nn}).m;return{type:"scenario",id:t,scenario:t,stack:c,start:l,value:e,text:"".concat(u.metadata.scenario[t].name," (").concat(u.format(e),")"),style:{stroke:u.color("scenario",t),dasharray:"5,2"}}}),e=ln(["increasing","decreasing"].map(function(o){return f[o].map(function(t){var e="increasing"===o?3:4,n=u.value({paf:c,cause:t,scenario:2}).m,i=u.value({paf:c,cause:t,scenario:e}).m,a="increasing"===o?i-n:n-i,r=0<a?a:0,s=u.color("cause",t);return{id:t,type:"cause",stack:c,decomposition:o,start:l,value:r,style:{opacity:h!==c&&h||!d||d===t?1:.3,stroke:h!==c&&h||d!==t?"#fff":"#454545",fill:s}}})}),2),n=e[0],i=e[1],a=j.a.sum(n,function(t){return t.value}),r=j.a.sum(i,function(t){return t.value}),s={increasing:l,decreasing:l-r};return{id:c,stack:c,start:l,increase:a,decrease:r,values:t,style:{opacity:h&&h!==c?.3:1},decomposition:{increasing:n.map(function(t){return t.x0=s.increasing,s.increasing+=t.value,t}),decreasing:i.map(function(t){return t.x0=s.decreasing,s.decreasing+=t.value,t})}}})}},{key:"stacks",value:function(){var o=this,c=0<arguments.length&&void 0!==arguments[0]&&arguments[0],l=this.getSetting("level"),u=this.getSetting("category"),t=j.a.values(this.metadata.risk).filter(function(t){var e=t.paf_id,n=t.level,i=t.children,a=t.parents;if(c){var r=o.value({paf:e,scenario:4,cause:nn}).m,s=o.value({paf:e,scenario:3,cause:nn}).m;if(Math.abs(s-r)<1)return!1}return(n===l||n<l&&0===i.length)&&a&&(!a.length||a.includes(parseInt(u,10)))}).map(function(t){return t.paf_id});return un(t).concat(un(this.settings.selected&&1===t.length?[!1]:[]))}},{key:"vals",value:function(){return this.stacks(!0).sort(this.sort())}},{key:"sort",value:function(){var i=this,a=this.getSetting("order");return"diff"===a?function(t,e){return i.value({paf:t,scenario:4,cause:nn}).m-i.value({paf:t,scenario:3,cause:nn}).m-(i.value({paf:e,scenario:4,cause:nn}).m-i.value({paf:e,scenario:3,cause:nn}).m)}:function(t,e){var n=a;return i.value({paf:e,scenario:n,cause:nn}).m-i.value({paf:t,scenario:n,cause:nn}).m}}},{key:"labels",value:function(){var n=this;return this.vals().reduce(function(t,e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(t){cn(e,t,n[t])})}return e}({},t,cn({},e,e?n.metadata.risk[e].short_name:""))},{})}},{key:"text",value:function(){var t=this.getSetting("metric"),e=this.getSetting("unit");return this.metadata.measure[t][e].labels.map}},{key:"legendUpdate",value:function(){}},{key:"color",value:function(t,e){return"cause"===t?fn(pn(i.prototype),"color",this).call(this,e):"scenario"!==t?"#454545":(cn(n={},2,"rgb(31, 120, 180)"),cn(n,3,"rgb(227, 26, 28)"),cn(n,4,"rgb(51, 160, 44)"),n)[e];var n}},{key:"legend",value:function(){var e=this;this.scenarios.forEach(function(t){N()(e.settings.container.legend).append(N()("<div>").attr("class","legend-item").text("".concat(e.metadata.scenario[t].name," scenario")).css({"border-left":"3px dotted ".concat(e.color("scenario",t)),"padding-left":"4px",margin:"4px",padding:"3px"}))}),this.layers().reverse().forEach(function(t){N()(e.settings.container.legend).append(N()("<div>").attr("class","legend-item").attr("cause",t).text(e.metadata.cause[t].medium_name).css({"border-left":"4px solid ".concat(e.color("cause",t)),margin:"4px",padding:"3px"}))})}}])&&hn(e.prototype,n),a&&hn(e,a),i}();n(137);function mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var yn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);this.type="donut",this.settings=t,this.$hover=null,this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.colors={202:"#fff24a",203:"#429ae5",104:"#f2465a","202_203":"#85dfcb","104_203":"#b185df","104_202":"#f2c591","104_202_203":"#858585"};var n=this.hover.bind(this);N()("".concat(this.settings.container.chart," .background,\n       ").concat(this.settings.container.chart," .center,\n       ").concat(this.settings.container.chart," .arc")).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:10,liveEvents:!0,allowTipHover:!1,content:function(t,e){return n(N()(this),e,this.__data__)}})}},{key:"hover",value:function(t,e,n){var i,a=this,r="";this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t;var s=this.getSetting("metric"),o=this.getSetting("unit"),c=this.metadata.measure[s][o].labels.treemap,l=this.getValue({data:"cause",unit:1}).m,u=this.getValue({data:"paf",paf:169,unit:1}).m;if("background"===t.attr("class")){var h={},d={};d.value=l-u,d.prop=d.value/l,h.value=u,h.prop=h.value/l,i="#eee",r+="<b>Unattributed burden:</b> ".concat($(d.prop,{unit:2}),"\n      (").concat($(d.value,{unit:1,metric:this.metadata.measure[s][1].labels.hover}),")<br/>"),r+="<b>Attributed burden:</b> ".concat($(h.prop,{unit:2}),"\n      (").concat($(h.value,{unit:1,metric:this.metadata.measure[s][1].labels.hover}),")<br/>")}else{var f,p={},g={};"center"===t.attr("class")&&(f="104_202_203"),"arc"===t.attr("class")&&(f=n.data.id),g.value=this.getValue({data:"intersect",paf:f,unit:2})*l,g.prop=Math.min(g.value/u,1),p.prop=Math.min(this.getValue({data:"intersect",paf:f,unit:2}),1),p.value=p.prop*l;var v=f.split("_").map(function(t){return a.metadata.risk[t].short_name}).join(" ∩ ");i=this.colors[f],r+="".concat(v,"<br/>"),r+="<b>".concat(c,":</b> ").concat($(g.value,{unit:1}),"<br/>"),r+="<b>% of attributed burden:</b> ".concat($(g.prop,{unit:2})," <br/>"),r+="<b>% of total burden:</b> ".concat($(p.prop,{unit:2}),"<br/>")}return e.css({"border-color":i}),r}},{key:"render",value:function(){this.title(),this.chart=new ie({container:this.settings.container.chart,animation:this.settings.animation,height:N()(this.settings.container.chart).height(),width:N()(this.settings.container.chart).width()}),this.chart.data(this.data()),this.chart.render(),this.legend(),this.loaded=!0}},{key:"requests",value:function(){var t=[];return t.push(this.getParameters({data:"cause",unit:1})),t.push(this.getParameters({data:"paf",paf:169,unit:1})),t.push(this.getParameters({data:"intersect",unit:2})),t}},{key:"csv",value:function(){var r=this,t=this.getSetting("metric"),e=this.getSetting("unit"),s=this.getParameters(),a=this.metadata.measure[t][e].labels.treemap,n=["Location","Year","Age","Sex",this.metadata.display.cause.name,"Attributable to","Measure","Value"],o=function(t,e,n){var i=[],a=t instanceof Array?t.slice().reverse().map(function(t){return t.short_name}).join(" ∩ "):t;return i.push(r.metadata.location[s.location].name),i.push(r.metadata.year[s.year].name),i.push(r.metadata.age[s.age].name),i.push(r.metadata.sex[s.sex].name),i.push(r.metadata.cause[s.cause].name),i.push(a),i.push(e),i.push(n),i},i={},c={},l=this.getValue({data:"cause",unit:1}).m,u=this.getValue({data:"paf",paf:169,unit:1}).m;c.value=l-u,c.prop=c.value/l,i.value=u,i.prop=i.value/l;var h=[],d="Burden attributable to GBD risk factors",f="Burden not attributable to GBD risk factors";return h.push(o(d,"Percent of total ".concat(a),i.prop)),h.push(o(d,a,i.value)),h.push(o(f,"Percent of total ".concat(a),c.prop)),h.push(o(f,a,c.value)),this.segments().forEach(function(t){var e=t.map(function(t){return t.paf_id}).join("_"),n={},i={};return i.value=r.getValue({data:"intersect",paf:e,unit:2})*l,i.prop=i.value/u,n.prop=r.getValue({data:"intersect",paf:e,unit:2}),n.value=n.prop*l,h.push(o(t,"Percent of ".concat(a," attributable to GBD risk factors"),i.prop)),h.push(o(t,"Percent of total ".concat(a),n.prop)),h.push(o(t,a,i.value)),o}),[n].concat(h)}},{key:"data",value:function(){var n=this,a=["202","202_203","203","104_203","104","104_202"],t=this.segments().filter(function(t){return 3===t.length})[0],e=this.segments().filter(function(t){return t.length<=2}).sort(function(t,e){var n=t.map(function(t){return t.paf_id}).join("_"),i=e.map(function(t){return t.paf_id}).join("_");return a.indexOf(n)-a.indexOf(i)}),i=function(t){var e=t.map(function(t){return t.paf_id}).join("_");return{id:e,text:t.reverse().map(function(t){return t.short_name.substring(0,1)}).join("∩"),value:n.value(e),primary:3===e.length,fill:n.colors[e],stroke:tt(n.colors[e],.3)}};return{total:this.value("total"),proportion:this.value("proportion"),center:i(t),segments:e.map(i)}}},{key:"value",value:function(t){if("total"===t)return this.getValue({data:"cause",unit:1}).m;var e=this.getValue({data:"paf",paf:169,unit:1}).m;if("proportion"!==t)return this.getValue({data:"intersect",paf:t,unit:2})*e||0;var n=e/this.value("total");return Number.isNaN(n)||!Number.isFinite(n)?0:n}},{key:"title",value:function(){N()(this.settings.container.title).empty(),N()(this.settings.container.title).append(N()("<div/>").text("".concat(this.metadata.cause[this.getSetting("cause")].name," attributable to Risk factors")));var t=[],e=this.getSetting("age"),n=this.getSetting("metric"),i=this.metadata.age[e],a=i.measure,r=(a=void 0===a?{}:a)[n],s=(r=void 0===r?{}:r).name,o=i.name;t.push(this.metadata.location[this.getSetting("location")].name),t.push(this.metadata.sex[this.getSetting("sex")].label),t.push(s||o),t.push(this.metadata.year[this.getSetting("year")].name),t.push(this.metadata.measure[n][1].labels.map),N()(this.settings.container.title).append(N()("<div/>").text(t.join(", "))),N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")}),N()(this.settings.container.legend).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")})}},{key:"legend",value:function(){var r=this,i=function(t,n,i){var a=N()("<div/>",{class:"legend-item"}).css({"border-left-color":t}).appendTo(r.settings.container.legend);n.forEach(function(t,e){"risk"===i?(a.append(N()("<span/>",{class:"first"}).text(t.substring(0,1))),a.append(N()("<span/>").text(t.substring(1,t.length)))):a.append(N()("<span/>").text(t)),e!==n.length-1&&a.append(N()("<span/>").text(" ∩ "))})};i("#eee",["Unattributed burden"]),this.segments().forEach(function(t){var e=t.map(function(t){return t.paf_id}).join("_"),n=t.reverse().map(function(t){return t.short_name});i(r.colors[e],n,"risk")})}},{key:"risks",value:function(){return j.a.values(this.metadata.risk).filter(function(t){return 2===t.level})}},{key:"segments",value:function(){return function(t){for(var e=function t(e,n,i,a){if(0!==e)for(var r=0;r<n.length;r++)t(e-1,n.slice(r+1),i.concat([n[r]]),a);else 0<i.length&&(a[a.length]=i)},n=[],i=0;i<t.length;i++)e(i,t,[],n);return n.push(t),n}(this.risks())}},{key:"resize",value:function(){N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")}),N()(this.settings.container.legend).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")}),this.chart&&(this.chart.settings.width=N()(this.settings.container.chart).width(),this.chart.settings.height=N()(this.settings.container.chart).height(),this.chart.resize())}},{key:"update",value:function(t){this.title(),this.chart.settings.width=N()(this.settings.container.chart).width(),this.chart.settings.height=N()(this.settings.container.chart).height(),this.chart.data(this.data(),t)}},{key:"destroy",value:function(){var t=this.settings.container;N()("\n      ".concat(t.chart," .background,\n      ").concat(t.chart," .center,\n      ").concat(t.chart," .arc")).poshytip("hide").poshytip("destroy")}}])&&mn(t.prototype,n),i&&mn(t,i),e}();n(138);function bn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var xn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="heatmap",this.settings=t,this.$hover=null,this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){var r=this;Object(L.isUndefined)(this.settings.selected)&&(this.settings.selected={col:null,row:null}),N()(document).on("click","".concat(this.settings.container.chart," .col-axis text"),function(t){var e=t.target;r.settings.selected.col=e.__data__,r.changeValue("selected",r.settings.selected),r.update()}),this.highlight=function(t){var e=t.type,n=t.target,i=n.__data__,a=j.a.select(n.parentNode).selectAll("rect");"mouseleave"===e&&r.settings.hover===i.id&&(r.settings.hover=null,a.style("stroke","#fff")),"mouseenter"===e&&r.settings.hover!==i.id&&(r.settings.hover=i.id,n.parentNode.parentNode.appendChild(n.parentNode),a.style("stroke",tt(i.color.fill,.3)))},N()(document).on("mouseenter","".concat(this.settings.container.chart," .cell"),this.highlight),N()(document).on("mouseleave","".concat(this.settings.container.chart," .cell"),this.highlight);var n=this.hover.bind(this);N()("".concat(this.settings.container.chart," .cell")).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:10,liveEvents:!0,allowTipHover:!1,content:function(t,e){return n(N()(this),e,this.__data__)}})}},{key:"destroy",value:function(){N()("".concat(this.settings.container.chart," .cell")).poshytip("hide").poshytip("destroy"),N()(document).off("click","".concat(this.settings.container.chart," .col-axis text")),N()(document).off("mouseleave","".concat(this.settings.container.chart," .cell")),N()(document).off("mouseenter","".concat(this.settings.container.chart," .cell"))}},{key:"hover",value:function(t,e,n){this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t;var i,a="",r=this.getSetting("metric"),s=this.getSetting("unit"),o=this.getSetting("year"),c=this.getSetting("value"),l=n.col;e.css({"border-color":n.color.fill});var u=this.getSetting("display");if("cause"===u)i=this.getValue({cause:n.row,location:l}),a+="".concat(this.metadata.cause[n.row].name,"<br/>");else if("risk"===u&&"advanced"===this.getSetting("controls")){i=this.getValue({paf:n.row,location:l});var h=this.metadata.cause[this.getSetting("cause")],d=this.metadata.risk[n.row];a+="".concat(h.name," attributable to ").concat(d.name,"<br/>")}else i=this.getValue({paf:n.row,location:l}),a+="".concat(this.metadata.paf[n.row].name,"<br/>");if(a+="<b>Location:</b> ".concat(this.metadata.location[l].name,"<br/>"),"expected"===c&&this.metadata.sdi[l]&&this.metadata.sdi[l][o]){var f=this.metadata.sdi[l][o].sdi;a+="<b>SDI:</b> ".concat(f,"<br/>")}return a+="<b>Rank:</b> ".concat(n.rank?n.rank:"No rank","<br/>"),a+="<b>".concat(this.metadata.unit[s].name,":</b> ").concat($(i,{unit:s,metric:this.metadata.measure[r][s].labels.hover}),"<br/>")}},{key:"requests",value:function(){var t,e,n,i=this.getSetting("rank"),a=this.getSetting("display"),r=this.getSetting("level"),s=this.getSetting("category"),o="display"===i?a:i,c=We(this.metadata,o,r,s),l=[],u=Re(this.metadata)[o].key;return l.push(this.getParameters((n=c,(e=u)in(t={})?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t))),l}},{key:"render",value:function(){var t=this.settings,e=t.selected,n=t.container,i=t.animation;this.chart=new re({container:n.chart,animation:i,height:N()(n.chart).height(),width:N()(n.chart).width()});var a=this.cols(),r=this.rows();this.chart.rows.vals=r,this.chart.cols.vals=a,this.chart.rows.labels=this.labels("rows"),this.chart.cols.labels=this.labels("cols"),this.chart.data=this.data(),this.chart.render(),this.resize(),this.title(),j.a.selectAll("".concat(n.chart," .col-axis text")).style("font-weight","normal").filter(function(t){return t===(e.col?e.col:a[0])}).style("font-weight","bold"),this.loaded=!0}},{key:"labels",value:function(t){var n=this,i={};return"rows"===t&&this.rows().forEach(function(t){var e="cause"===n.getSetting("display")?"medium_name":"short_name";i[t]=n.metadata[n.getSetting("display")][t][e]}),"cols"===t&&this.cols().forEach(function(t){i[t]=n.metadata.location[t].short_name}),i}},{key:"title",value:function(){N()(this.settings.container.title).empty();var t=[],e=this.getSetting("age"),n=this.getSetting("metric"),i=this.metadata.age[e],a=i.measure,r=(a=void 0===a?{}:a)[n],s=(r=void 0===r?{}:r).name,o=i.name;t.push(this.metadata.sex[this.getSetting("sex")].label),t.push(s||o),t.push(this.metadata.year[this.getSetting("year")].name),t.push(this.metadata.measure[n][this.getSetting("unit")].labels.map),t=t.join(", "),"value"===this.getSetting("dimension")&&(t+=" (".concat(Object(L.capitalize)(this.getSetting("value")),")")),N()(this.settings.container.title).append(N()("<div/>").text(t)),N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")})}},{key:"update",value:function(){var t=this.settings,e=t.selected,n=t.container,i=this.cols(),a=this.rows();e.col&&!e.col.isIn(i)&&(this.settings.selected.col=null),e.row&&!e.row.isIn(a)&&(this.settings.selected.row=null),this.chart.rows.vals=a,this.chart.cols.vals=i,this.chart.rows.labels=this.labels("rows"),this.chart.cols.labels=this.labels("cols"),this.chart.data=this.data(),this.resize(),this.chart.update(),this.title(),j.a.selectAll("".concat(n.chart," .col-axis text")).style("font-weight","normal").filter(function(t){return t===(e.col?e.col:i[0])}).style("font-weight","bold")}},{key:"color",value:function(t){var e=this.settings.max,n=I.a.RdYlBu[6],i=j.a.scale.quantile().domain([Math.log(1),Math.log(e)]).range(n);return t?1===e?"#454545":i(Math.log(t)):"#d3d3d3"}},{key:"csv",value:function(){var r=this,s=this.getSetting("metric"),o=this.getSetting("unit"),c=this.getSetting("display"),l=this.getSetting("value"),u=this.getParameters(),t=["Location","Year","Age","Sex",this.metadata.display.cause.name];"cause"!==c&&t.push(this.metadata.display[c].name),t.push("Measure"),t.push("Value"),t.push("Lower bound"),t.push("Upper bound"),"expected"===l&&t.push("SDI value");var h=[];return this.rows().forEach(function(a){r.cols().forEach(function(i){["rank","unit"].forEach(function(t){var e=[];if(e.push(r.metadata.location[i].name),e.push(r.metadata.year[u.year].name),e.push(r.metadata.age[u.age].name),e.push(r.metadata.sex[u.sex].name),e.push(r.metadata.cause["cause"===c?a:u.cause].name),"cause"!==c&&e.push(r.metadata[c][a].name),"rank"===t)e.push(r.metadata.measure[s][4].labels.map),e.push(r.value(a,i)),e.push(""),e.push("");else{var n="cause"===c?r.getValue({cause:a,location:i}):r.getValue({paf:a,location:i});e.push(r.metadata.measure[s][o].labels.map),e.push(n.m),e.push(n.l),e.push(n.u)}"expected"===l&&r.metadata.sdi[u.location]&&r.metadata.sdi[u.location][u.year]&&e.push(r.metadata.sdi[u.location][u.year].sdi),h.push(e)})})}),[t].concat(h)}},{key:"data",value:function(){var i=this,a=[];return this.rows().forEach(function(n){i.cols().forEach(function(t){var e=i.value(n,t);a.push({id:"".concat(n,"-").concat(t),row:n,col:t,rank:e,color:{fill:i.color(e),font:Z(i.color(e),"#fff","#454545")}})})}),a}},{key:"value",value:function(t,e){return"cause"===this.getSetting("display")?this.getValue({unit:"rank",location:e,cause:t}):this.getValue({unit:"rank",location:e,paf:t})}},{key:"rows",value:function(){var e=this,t=this.getSetting("rank"),n=this.getSetting("display"),i=this.getSetting("level"),a=this.getSetting("category"),r="display"===t?n:t,s=We(this.metadata,r,i,a),o=this.settings.selected.col?this.settings.selected.col:this.cols()[0];this.settings.max=s.length;var c={};return s.filter(function(t){return c[t]=e.value(t,o),c[t]&&c[t]<=25}).sort(function(t,e){return c[t]-c[e]})}},{key:"cols",value:function(){return this.getSetting("locations")}},{key:"resize",value:function(){this.title(),this.chart&&(this.chart.settings.width=N()(this.settings.container.chart).width(),this.chart.settings.height=N()(this.settings.container.chart).height(),this.chart.settings.margin.left=j.a.max(j.a.values(this.labels("rows")).map(function(t){return"".concat(t).width()+10})),this.chart.settings.margin.top=j.a.max(j.a.values(this.labels("cols")).map(function(t){var e="".concat(t).width(),n=(15*Math.abs(Math.cos(45))+e)*Math.abs(Math.sin(45));return Math.ceil(n)})),this.chart.resize())}}])&&bn(t.prototype,n),i&&bn(t,i),e}();n(139);function _n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(t){Cn(e,t,n[t])})}return e}function kn(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],0<=e.indexOf(n)||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Sn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Tn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="line",this.settings=t,this.$hover=null,this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){var i=this;N()("".concat(i.settings.container.chart," .point")).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:10,liveEvents:!0,allowTipHover:!1,content:function(t,e){return i.hover(N()(this),e,this.__data__)}}),N()(document).on("click","".concat(i.settings.container.chart," .line-group"),function(){var t=this.__data__.key;i.chart.bringToFront(t)}),N()(document).on("click","".concat(i.settings.container.legend," .legend-item"),function(){var t=this.__data__.key;i.chart.bringToFront(t)}),N()(document).on("click","".concat(i.settings.container.legend," .legend-item i"),function(t){var e=this.__data__.line,n=i.getSetting("lines");"location"===n&&i.changeSetting("location",e),"scenario"===n&&i.changeSetting("scenario",e),t.stopPropagation()})}},{key:"destroy",value:function(){N()("".concat(this.settings.container.chart," .point")).poshytip("hide").poshytip("destroy"),N()(document).off("click","".concat(this.settings.container.legend," .legend-item")),N()(document).off("click","".concat(this.settings.container.legend," .legend-item i")),N()(document).off("click","".concat(this.settings.container.chart," .line-group")),N()(document).off("mouseleave","".concat(this.settings.container.chart," .point")),N()(document).off("mouseenter","".concat(this.settings.container.chart," .point"))}},{key:"hover",value:function(t,e,n){var i=n.line,a=n.year,r=n.color;this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t,e.css({"border-color":r});var s=this.getSetting("metric"),o=this.getSetting("unit"),c=this.getSetting("value"),l=this.getSetting("lines"),u=this.getSetting("rank"),h=this.metadata.year[a].type,d=void 0===h?[]:h,f="location"===l?i:this.getSetting("location"),p="scenario"===l&&d.includes("forecast")?i:1,g="";if("location"===l?g+="".concat(this.metadata.location[f].name,"<br/>"):"scenario"===l&&(g+="".concat(this.metadata.scenario[p].name,"<br/>")),g+="<b>Year:</b> ".concat(this.metadata.year[a].name,"<br/>"),"expected"===c&&this.metadata.sdi[f]&&this.metadata.sdi[f][a]){var v=this.metadata.sdi[f][a].sdi;g+="<b>SDI:</b> ".concat(v,"<br/>")}var m=this.value({year:a,line:i},!0);return g+=u?"<b>Rank:</b> ".concat(m,"<br/>"):"<b>".concat(this.metadata.unit[o].name,":</b> ").concat($(m,{unit:o,metric:this.metadata.measure[s][o].labels.hover}),"<br/>")}},{key:"title",value:function(){N()(this.settings.container.title).empty();var t=this.getSetting("display");if("risk"===t&&"advanced"===this.getSetting("controls")){var e=this.metadata.cause[this.getSetting("cause")],n=this.metadata.risk[this.getSetting("risk")];N()(this.settings.container.title).append(N()("<div/>").text("".concat(e.name," attributable to ").concat(n.name)))}else"sev"===t?N()(this.settings.container.title).append(N()("<div/>").text(this.metadata.risk[this.getSetting("risk")].name)):["le","hale","haqi"].includes(t)?N()(this.settings.container.title).append(N()("<div/>").text("")):N()(this.settings.container.title).append(N()("<div/>").text(this.metadata[t][this.getSetting(t)].name));var i=[],a=this.getSetting("age"),r=this.getSetting("metric"),s=this.metadata.age[a],o=s.measure,c=(o=void 0===o?{}:o)[r],l=(c=void 0===c?{}:c).name,u=s.name;i.push(this.metadata.sex[this.getSetting("sex")].label),i.push(l||u),i=i.join(", "),"value"===this.getSetting("dimension")&&(i+=" (".concat(Object(L.capitalize)(this.getSetting("value")),")")),N()(this.settings.container.title).append(N()("<div/>").text(i))}},{key:"render",value:function(){var e=this,t=this.settings,n=t.container,i=t.animation;this.title();var a=N()("".concat(n.controls," .control-container-buttonset-lines")),r=N()(n.title).outerHeight(),s=a.is(":visible")?a.outerHeight(!0):0;N()(n.chart).css({height:"calc(100% - ".concat(r+s,"px)")}),N()(n.legend).css({height:"calc(100% - ".concat(r+s,"px)")}),this.chart=new ue({container:n.chart,animation:i,height:N()(n.chart).height(),width:N()(n.chart).width(),margin:{top:10,left:100,right:10,bottom:50}}),this.chart.type="line",this.chart.x.labels=this.labels(),this.chart.x.vals=this.yearRange(),this.chart.x.data=this.data(),this.chart.x.text=this.text("x"),this.chart.y.text=this.text("y"),this.scale(),this.chart.render(),this.legend(),j.a.selectAll("".concat(n.chart,"-x-axis .tick")).style("visibility",function(t){return e.metadata.year[t]?"visible":"hidden"}),this.loaded=!0}},{key:"requests",value:function(){var t=[];return t.push(this.getParameters({year:this.years()})),t}},{key:"years",value:function(){return j.a.keys(this.metadata.year).map(Number)}},{key:"lines",value:function(){switch(this.getSetting("lines")){case"location":var t=this.getSetting("locations"),e=this.getSetting("rank");if(e){var n=this.getSetting("display"),i=this.getSetting("level"),a=this.getSetting("category"),r="display"===e?n:e,s=We(this.metadata,r,i,a);return t.filter(function(t){return s.includes(t)})}return t;case"scenario":return[1,2,3,4];default:return[]}}},{key:"yearRange",value:function(){var t=this.settings.years;return V(t[0],t[1],t[1]-t[0]+1)}},{key:"color",value:function(t,e){if("scenario"!==this.getSetting("lines"))return this.assignColor(t);var n,i=(Cn(n={},1,"rgb(106, 61, 154)"),Cn(n,2,"rgb(31, 120, 180)"),Cn(n,3,"rgb(227, 26, 28)"),Cn(n,4,"rgb(51, 160, 44)"),n);return"past"===e?i[1]:i[t]}},{key:"labels",value:function(){var i=this,t=N()(this.settings.container.chart).width()-(this.chart.settings.margin.left+this.chart.settings.margin.right),a=this.years(),e=this.yearRange(),r=Math.ceil(e.length/(t/34));return e.reduce(function(t,e,n){return t[e]=!a.includes(e)||n%r?"":i.metadata.year[e].name,t},{})}},{key:"csv",value:function(){var a=this,r=this.getSetting("metric"),s=this.getSetting("unit"),o=this.getSetting("display"),c=this.getSetting("value"),l=this.getSetting("rank"),u=this.getSetting("lines"),t=this.years(),e=this.lines(),h=this.getParameters(),d=["cause","risk","etiology","impairment"].includes(o),f=["risk","etiology","impairment"].includes(o),n=Sn("location"===u?["Location"]:[]).concat(Sn("scenario"===u?["Scenario"]:[]),["Year","Age","Sex"],Sn(d?[this.metadata.display.cause.name]:[]),Sn("sev"===o?[this.metadata.display.risk.name]:[]),Sn(f?[this.metadata.display[o].name]:[]),["Measure"],Sn(l?["Rank"]:["Value","Lower bound","Upper bound"]),Sn("expected"===c?["SDI value"]:[])),p=[];return e.forEach(function(i){t.forEach(function(t){var e="location"===u?i:h.location,n=a.value({line:i,year:t},!0);n&&p.push(Sn("location"===u?[a.metadata.location[i].name]:[]).concat(Sn("scenario"===u?[a.metadata.scenario[i].name]:[]),[a.metadata.year[t].name,a.metadata.age[h.age].name,a.metadata.sex[h.sex].name],Sn(d?[a.metadata.cause[h.cause].name]:[]),Sn("sev"===o?[a.metadata.paf[h.paf].name]:[]),Sn(f?[a.metadata.paf[h.paf].name]:[]),[a.metadata.measure[r][s].labels.map],Sn(l?[n]:[n.m,n.u,n.l]),Sn("expected"===c?[a.metadata.sdi[e][t].sdi]:[])))})}),[n].concat(p)}},{key:"value",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=t.line,i=t.year,a=kn(t,["line","year"]),r=this.getSetting("uncertainty"),s=this.getSetting("rank_value"),o=this.getSetting("lines"),c=this.metadata.year[i].type,l=void 0===c?[]:c;if("scenario"!==o||l.includes("transition")||!(1===n&&l.includes("forecast")||1!==n&&!l.includes("forecast"))){var u="scenario"===o&&l.includes("forecast")?n:void 0,h="location"===o?n:void 0,d=this.getValue(wn({},a,s?{unit:"rank"}:{},{year:i,location:h,scenario:u}));if(e)return d;var f=s?d:d.m,p=d||{},g=p.u,v=p.l;return{m:f,u:Object(L.isNil)(g)||!r?f:g,l:Object(L.isNil)(v)||!r?f:v}}}},{key:"data",value:function(){var l=this,u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},h=this.getSetting("lines"),t=this.lines(),e=this.years();return t.map(function(c){return{key:"".concat(h,"-").concat(c),line:c,values:e.reduce(function(t,e){var n=l.value(wn({},u,{year:e,line:c}));if(void 0!==n){var i=l.metadata.year[e].type,a=void 0===i?[]:i,r=a.includes("forecast")?"forecast":"past",s=l.color(c,r),o=[r];a.includes("transition")&&o.push("forecast"),t.push(wn({key:"".concat(h,"-").concat(c,"-").concat(e),segments:o,year:e,line:c,color:s},n))}return t},[])}})}},{key:"legend",value:function(){var n=this,i=this.getSetting("lines"),t=this.lines();j.a.select(this.settings.container.legend).selectAll(".legend-note").remove();var e=j.a.select(this.settings.container.legend).selectAll(".legend-item").data(this.lines().map(function(t){return{key:"".concat(i,"-").concat(t),line:t}}),function(t){return t.key}),a=e.enter().append("div").attr("class","legend-item").style("border-left-color",function(t){var e=t.line;return n.color(e)}).on("mouseover",function(t){var e=t.line;n.chart.highlight(e)}).on("mouseout",function(){n.chart.highlight(!1)});a.append("span").text(function(t){var e=t.line;switch(i){case"location":return n.metadata.location[e].name;case"scenario":return n.metadata.scenario[e].name;default:return""}}),"scenario"!==i&&a.append("i").attr("class","fa fa-times"),e.exit().remove();var r=j.a.select(this.settings.container.legend).selectAll(".legend-note").data("location"===i&&t.length!==this.getSetting("locations").length?["* Some selected locations are not displayed because they do not match the selected rank level"]:[]);r.enter().append("div").attr("class","legend-note").text(function(t){return t}),r.exit().remove()}},{key:"text",value:function(t){if("x"===t)return"Year";if("y"!==t)return"";var e=this.getSetting("rank"),n=this.getSetting("metric"),i=this.getSetting("unit");return e?"Rank":this.metadata.measure[n][i].labels.map}},{key:"resize",value:function(){var t=this.settings.container,e=N()("".concat(t.controls," .control-container-buttonset-lines")),n=N()(t.title).outerHeight(),i=e.is(":visible")?e.outerHeight(!0):0;N()(t.chart).css({height:"calc(100% - ".concat(n+i,"px)")}),N()(t.legend).css({height:"calc(100% - ".concat(n+i,"px)")}),this.chart&&(this.chart.x.labels=this.labels(),this.chart.settings.width=N()(t.chart).width(),this.chart.settings.height=N()(t.chart).height(),this.chart.resize())}},{key:"extent",value:function(t){return j.a.extent(this.data(t).reduce(function(t,e){var n=e.values;return Sn(t).concat(Sn(n.reduce(function(t,e){var n=e.u,i=e.l;return Sn(t).concat([n,i])},[])))},[]))}},{key:"scale",value:function(){if(this.getSetting("scale")){var t=this.getExtent();this.chart.settings.scale.type="manual",this.chart.settings.scale.min=j.a.min([0,t[0]]);var e=_n(t,2);this.chart.settings.scale.max=e[1]}else this.chart.settings.scale.type="auto",this.chart.settings.scale.min=0,this.chart.settings.scale.max=1;var n=this.getSetting("rank");this.chart.settings.scale.unit=this.getSetting("unit"),this.chart.settings.scale.direction=n?"+":"-",this.chart.settings.scale.includeZero=!n}},{key:"update",value:function(){var e=this;this.title(),this.chart.x.vals=this.yearRange(),this.chart.x.labels=this.labels(),this.chart.x.data=this.data(),this.chart.x.text=this.text("x"),this.chart.y.text=this.text("y"),this.scale(),this.legend(),this.chart.update(),j.a.selectAll("".concat(this.settings.container.chart,"-x-axis .tick")).style("visibility",function(t){return e.metadata.year[t]?"visible":"hidden"})}}])&&Mn(t.prototype,n),i&&Mn(t,i),e}();n(140);function En(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(t){On(e,t,n[t])})}return e}function On(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Dn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="plot",this.settings=t,this.$hover=null,this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.values={},this.values.cause=function i(t){var a=[];return j.a.values(t).forEach(function(t){var e=t.cause_id,n=t.children;0===n.length?a.push(e):a=a.concat(i(n))}),a}(this.hierarchy.causes),this.values.risk=function i(t){var a=[];return j.a.values(t).forEach(function(t){var e=t.paf_id,n=t.children;0===n.length?a.push(e):a=a.concat(i(n))}),a}(this.hierarchy.risk),this.values.location=j.a.values(this.metadata.location).filter(function(t){return"custom"!==t.type}).map(function(t){return t.location_id}),this.values.year=j.a.keys(this.metadata.year),this.values.sex=j.a.keys(this.metadata.sex),this.values.age=j.a.values(this.metadata.age).filter(function(t){return t.plot}).map(function(t){return t.age_id});var n=this.hover.bind(this),t=this.settings.container;N()("".concat(t.chart," .plot-point,").concat(t.chart," .plot-line")).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:10,liveEvents:!0,allowTipHover:!1,content:function(t,e){return n(N()(this),e,this.__data__)}})}},{key:"value",value:function(t){var e=this.getSetting("uncertainty"),n=this.getSetting("plot"),i=this.getSetting("metric"),a=t.age&&[26,28].includes(Number(i))&&[2,3,4].includes(Number(t.age))?28:t.age,r="year"!==n&&t.extent,s=this.getValue(An({},t,{age:a,extent:r})),o=s.m,c=s.u,l=s.l,u=s.min,h=s.max,d=s.min_ui,f=s.max_ui;return r?{u:Object(L.isNil)(f)||!e?h:f,l:Object(L.isNil)(d)||!e?u:d}:{m:o,u:Object(L.isNil)(c)||!e?o:c,l:Object(L.isNil)(l)||!e?o:l}}},{key:"destroy",value:function(){N()("".concat(this.settings.container.chart," .plot-point")).poshytip("hide").poshytip("destroy"),N()("".concat(this.settings.container.chart," .plot-line")).poshytip("hide").poshytip("destroy"),N()(document).off("mouseleave","".concat(this.settings.container.chart," .plot-point")),N()(document).off("mouseenter","".concat(this.settings.container.chart," .plot-point")),N()(document).off("mouseleave","".concat(this.settings.container.chart," .plot-line")),N()(document).off("mouseenter","".concat(this.settings.container.chart," .plot-line"))}},{key:"hover",value:function(t,e,n){this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t;var i,a=this.getSetting("display"),r=this.getSetting("metric"),s=this.getSetting("unit"),o=this.getSetting("plot"),c=this.getSetting("value"),l=this.getSetting("location"),u=this.getSetting("year"),h="";if("year"===o)u=n.year_id,h+="".concat(this.metadata.year[u].name,"<br/>"),i=this.getValue({year:u});else if("age"===o){var d=n.age_id;h+="".concat(this.metadata.age[d].name,"<br/>"),d&&Number(r).isIn([26,28])&&d.isIn([2,3,4])&&(d=28),i=this.getValue({age:d})}else if("sex"===o)h+="".concat(this.metadata.sex[n.sex_id].name,"<br/>"),i=this.getValue({sex:n.sex_id});else if("cause"===o)h+="".concat(this.metadata.cause[n.cause_id].name,"<br/>"),i=this.getValue({cause:n.cause_id});else if("risk"===o)if(i=this.getValue({paf:n.paf_id}),"advanced"===this.getSetting("controls")&&"sev"!==a){var f=this.metadata.cause[this.getSetting("cause")],p=this.metadata.risk[n.paf_id];h+="".concat(f.name," attributable to ").concat(p.name,"<br/>")}else h+="".concat(this.metadata.risk[n.paf_id].name,"<br/>");else"location"===o&&(l=n.location_id,h+="".concat(this.metadata.location[l].name,"<br/>"),i=this.getValue({location:l}));if(c.isIn(["expected","ratio"])&&this.metadata.sdi[l]&&this.metadata.sdi[l][u]){var g=this.metadata.sdi[l][u].sdi;h+="<b>SDI:</b> ".concat(g,"<br/>")}var v=$(i,{unit:s,metric:this.metadata.measure[r][s].labels.hover});return h+="<b>".concat(this.metadata.unit[s].name,":</b> ").concat(v,"<br/>")}},{key:"title",value:function(){N()(this.settings.container.title).empty();var t=this.getSetting("display"),e=this.getSetting("plot");if("location"!==this.getSetting("plot")&&N()(this.settings.container.title).append(N()("<div/>").text(this.metadata.location[this.getSetting("location")].name)),e!==t&&!e.isIn(["risk","cause"])){var n=this.metadata.cause[this.getSetting("cause")],i=this.metadata.risk[this.getSetting("risk")];"risk"===t&&"advanced"===this.getSetting("controls")?N()(this.settings.container.title).append(N()("<div/>").text("".concat(n.name," attributable to ").concat(i.name))):"sev"===t?N()(this.settings.container.title).append(N()("<div/>").text(i.name)):["le","hale","haqi"].includes(t)?N()(this.settings.container.title).append(N()("<div/>").text("")):N()(this.settings.container.title).append(N()("<div/>").text(this.metadata[t][this.getSetting(t)].name))}var a=[],r=this.getSetting("age"),s=this.getSetting("metric"),o=this.metadata.age[r],c=o.measure,l=(c=void 0===c?{}:c)[s],u=(l=void 0===l?{}:l).name,h=o.name;"sex"!==this.getSetting("plot")&&a.push(this.metadata.sex[this.getSetting("sex")].label),"age"!==this.getSetting("plot")&&a.push(u||h),"year"!==this.getSetting("plot")&&a.push(this.metadata.year[this.getSetting("year")].name),a=a.join(", "),"value"===this.getSetting("dimension")&&(a+=" (".concat(Object(L.capitalize)(this.getSetting("value")),")")),N()(this.settings.container.title).append(N()("<div/>").text(a));var d=N()("".concat(this.settings.container.controls," .control-container-buttonset-plot"));N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight()+(d.is(":visible")?d.outerHeight(!0):0),"px)")})}},{key:"render",value:function(){var n=this;this.chart=new de({container:this.settings.container.chart,animation:this.settings.animation,height:N()(this.settings.container.chart).height(),width:N()(this.settings.container.chart).width(),margin:{top:10,left:100,right:10,bottom:25}}),this.chart.type="plot",this.title(),this.resize(),this.chart.x.labels=this.labels(),this.chart.x.vals=this.vals(),this.chart.x.data=this.data(),this.chart.y.text=this.text("y"),this.scale(),this.sort(),this.chart.render(),"year"===this.getSetting("plot")&&j.a.selectAll("".concat(this.settings.container.chart,"-x-axis .tick")).style("visibility",function(t){var e=t.replace("".concat(n.key(),"-"),"");return n.metadata.year[e]?"visible":"hidden"}),this.loaded=!0}},{key:"requests",value:function(){var t=[],e=this.getSetting("scale");switch(this.getSetting("plot")){case"year":t.push(this.getParameters({year:this.values.year})),"years"===e&&t.push(this.getParameters({extent:!0,year:this.values.year}));break;case"age":t.push(this.getParameters({age:this.values.age.slice().concat([28])})),"years"===e&&t.push(this.getParameters({extent:!0,age:this.values.age}));break;case"sex":t.push(this.getParameters({sex:this.values.sex})),"years"===e&&t.push(this.getParameters({extent:!0,sex:this.values.sex}));break;case"cause":t.push(this.getParameters({cause:this.values.cause})),"years"===e&&t.push(this.getParameters({extent:!0,cause:this.values.cause}));break;case"risk":t.push(this.getParameters({paf:this.values.risk})),"years"===e&&t.push(this.getParameters({extent:!0,paf:this.values.risk}));break;case"location":t.push(this.getParameters({location:this.values.location})),"years"===e&&t.push(this.getParameters({extent:!0,location:this.values.location}))}return t}},{key:"vals",value:function(){var e=this,t=this.settings.years,n="year"===this.getSetting("plot")?V(t[0],t[1],t[1]-t[0]+1):this.values[this.getSetting("plot")];return n.map(function(t){return"".concat(e.key(),"-").concat(t)})}},{key:"labels",value:function(){var i=this,a=this.key(),t=N()(this.settings.container.chart).width()-(this.chart.settings.margin.left+this.chart.settings.margin.right),e=this.settings.years,n=V(e[0],e[1],e[1]-e[0]+1),r=Math.ceil(n.length/(t/34));switch(this.getSetting("plot")){case"year":return n.reduce(function(t,e,n){return t["".concat(a,"-").concat(e)]=n%r?"":i.metadata.year[e].name,t},{});case"age":return this.values.age.reduce(function(t,e){return t["".concat(a,"-").concat(e)]=i.metadata.age[e].short_name,t},{});case"sex":return this.values.sex.reduce(function(t,e){return t["".concat(a,"-").concat(e)]=i.metadata.sex[e].name,t},{});case"cause":return this.values.cause.reduce(function(t,e){return t["".concat(a,"-").concat(e)]="",t},{});case"risk":return this.values.risk.reduce(function(t,e){return t["".concat(a,"-").concat(e)]="",t},{});case"location":return this.values.location.reduce(function(t,e){return t["".concat(a,"-").concat(e)]="",t},{});default:return{}}}},{key:"csv",value:function(){var s=this,o=this.getSetting("plot"),c=this.getSetting("metric"),l=this.getSetting("unit"),u=this.getSetting("display"),h=this.getSetting("value"),d=this.getParameters(),t=["Location","Year","Age","Sex"],f=u.isIn(["cause","risk","etiology","impairment"]),p=u.isIn(["risk","etiology","impairment"]);f?t.push(this.metadata.display.cause.name):"sev"===u&&t.push(this.metadata.display.risk.name),p&&t.push(this.metadata.display[u].name),t.push("Measure"),t.push("Value"),t.push("Lower bound"),t.push("Upper bound"),"expected"===h&&t.push("SDI value");var e=this.values[o].map(function(t){var e=[],n="location"===o?t:d.location,i="year"===o?t:d.year;e.push(s.metadata.location[n].name),e.push(s.metadata.year[i].name),e.push(s.metadata.age["age"===o?t:d.age].name),e.push(s.metadata.sex["sex"===o?t:d.sex].name),f?e.push(s.metadata.cause["cause"===o?t:d.cause].name):"sev"===u&&e.push(s.metadata.paf["risk"===o?t:d.paf].name),p&&e.push(s.metadata.paf["risk"===o?t:d.paf].name),e.push(s.metadata.measure[c][l].labels.map);var a={};"risk"===o?a.paf=t:a[o]=t;var r=s.getValue(a);return e.push(r.m),e.push(r.l),e.push(r.u),"expected"===h&&s.metadata.sdi[n]&&s.metadata.sdi[n][i]&&e.push(s.metadata.sdi[n][i].sdi),e});return[t].concat(e)}},{key:"data",value:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=[],a=this.key();switch(this.getSetting("plot")){case"year":this.values.year.forEach(function(t){i.push(An({key:"".concat(a,"-").concat(t),year_id:t},e.value(An({},n,{year:t}))))});break;case"age":this.values.age.forEach(function(t){i.push(An({key:"".concat(a,"-").concat(t),age_id:t},e.value(An({},n,{age:t}))))});break;case"sex":this.values.sex.forEach(function(t){i.push(An({key:"".concat(a,"-").concat(t),sex_id:t},e.value(An({},n,{sex:t}))))});break;case"cause":this.values.cause.forEach(function(t){i.push(An({key:"".concat(a,"-").concat(t),cause_id:t},e.value(An({},n,{cause:t}))))});break;case"risk":this.values.risk.forEach(function(t){i.push(An({key:"".concat(a,"-").concat(t),paf_id:t},e.value(An({},n,{paf:t}))))});break;case"location":this.values.location.forEach(function(t){i.push(An({key:"".concat(a,"-").concat(t),location_id:t},e.value(An({},n,{location:t}))))})}return i}},{key:"text",value:function(t){if("x"===t)switch(this.getSetting("plot")){case"year":return"Year";case"age":return"Age";case"sex":return"Sex";case"cause":return"Cause";case"risk":return"Risk factor";case"location":return"Location";default:return""}return"y"===t?this.metadata.measure[this.getSetting("metric")][this.getSetting("unit")].labels.map:""}},{key:"key",value:function(){switch(this.getSetting("plot")){case"year":return"year_id";case"age":return"age_id";case"sex":return"sex_id";case"cause":return"cause_id";case"risk":return"paf_id";case"location":return"location_id";default:return""}}},{key:"resize",value:function(){var t=N()("".concat(this.settings.container.controls," .control-container-buttonset-plot"));N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight()+(t.is(":visible")?t.outerHeight(!0):0),"px)")}),this.chart&&(this.chart.x.labels=this.labels(),this.chart.settings.width=N()(this.settings.container.chart).width(),this.chart.settings.height=N()(this.settings.container.chart).height(),this.chart.resize())}},{key:"extent",value:function(t){return j.a.extent(this.data(t).reduce(function(t,e){return t.concat([e.l,e.u])},[]))}},{key:"scale",value:function(){if(this.getSetting("scale")){var t=this.getExtent();this.chart.settings.scale.type="manual",this.chart.settings.scale.min=j.a.min([0,t[0]]);var e=En(t,2);this.chart.settings.scale.max=e[1]}else this.chart.settings.scale.type="auto",this.chart.settings.scale.min=0,this.chart.settings.scale.max=1;this.chart.settings.scale.unit=this.getSetting("unit")}},{key:"sort",value:function(){var a=this;"cause"===this.getSetting("plot")&&this.chart.x.vals.sort(function(t,e){var n=t.replace("".concat(a.key(),"-"),""),i=e.replace("".concat(a.key(),"-"),"");return a.value({cause:i}).m-a.value({cause:n}).m}),"risk"===this.getSetting("plot")&&this.chart.x.vals.sort(function(t,e){var n=t.replace("".concat(a.key(),"-"),""),i=e.replace("".concat(a.key(),"-"),"");return a.value({paf:i}).m-a.value({paf:n}).m}),"location"===this.getSetting("plot")&&this.chart.x.vals.sort(function(t,e){var n=t.replace("".concat(a.key(),"-"),""),i=e.replace("".concat(a.key(),"-"),"");return a.value({location:i}).m-a.value({location:n}).m})}},{key:"update",value:function(){var n=this;this.title(),this.chart.x.vals=this.vals(),this.chart.x.labels=this.labels(),this.chart.x.data=this.data(),this.chart.y.text=this.text("y"),this.scale(),this.sort(),this.chart.update(),"year"===this.getSetting("plot")&&j.a.selectAll("".concat(this.settings.container.chart,"-x-axis .tick")).style("visibility",function(t){var e=t.replace("".concat(n.key(),"-"),"");return n.metadata.year[e]?"visible":"hidden"})}}])&&Pn(t.prototype,n),i&&Pn(t,i),e}();n(141),n(51),n(143),n(144);function In(t){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var jn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaults={container:"#controls",gaCategory:"Uncategorized settings"},this.values=void 0!==t.values?t.values:{},this.update="function"==typeof t.update?t.update:function(){},delete t.values,delete t.update,this.settings=N.a.extend({},this.defaults,t),this.controls={},this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;j.a.values(this.settings.controls).forEach(function(t){e.addControl(t)})}},{key:"addControl",value:function(e){var n=this;void 0===(e.controls=this).controls[e.id]&&(e.options&&e.options.constructor===Array&&(e._options=N.a.extend([],e.options),e.options=function(){return e._options}),void 0!==e.components?j.a.values(e.components).forEach(function(t){t.settings=N.a.extend({},n.getDefaults(t.type,t),t.settings),n.controls[t.id]=t}):"buttons"===e.type?j.a.values(e.options()).forEach(function(t){t.type="button",t.buttonsText=e.text,t.settings=N.a.extend({},n.getDefaults(t.type,t),t.settings),n.controls[t.id]=t}):(e.settings=N.a.extend(!0,{},this.getDefaults(e.type,e),e.settings),this.controls[e.id]=e),void 0===this.values[e.id]&&void 0!==e.default&&(this.values[e.id]=e.default),e.default=this.values[e.id],this.buildControl(e))}},{key:"buildControl",value:function(t){switch(t.type){case"header":this.buildHeaderWidget(t);break;case"select":this.buildSelectWidget(t);break;case"multi-select":this.buildMultiSelectWidget(t);break;case"tags":this.buildTagsWidget(t);break;case"autocomplete":this.buildAutocompleteWidget(t);break;case"button":this.buildButtonWidget(t);break;case"buttons":this.buildButtonsWidget(t);break;case"buttonset":this.buildButtonsetWidget(t);break;case"slider":this.buildSliderWidget(t);break;case"range-slider":this.buildRangeSliderWidget(t);break;case"age":this.buildAgeWidget(t);break;case"toggle":this.buildToggleWidget(t);break;case"checkbox":this.buildCheckboxWidget(t);break;case"input":this.buildInputWidget(t);break;case"input-set":this.buildInputSetWidget(t);break;case"wrapper":this.buildWrapper(t);break;case"menu":this.buildMenuWidget(t)}}},{key:"getDefaults",value:function(t,n){var i=this,e={};switch(t){case"multi-select":e={minimumResultsForSearch:10,formatSelection:function(t,e){return i.formatMultiSelection(t,e,n)},formatResult:function(t,e){return i.formatMultiResult(t,e,n)},matcher:this.matcher.bind(this),dropdownCss:function(){return i.dropdownCss(n)}};break;case"select":e={minimumResultsForSearch:10,formatSelection:function(t,e){return i.formatSelection(t,e,n)},formatResult:this.formatResult,matcher:this.matcher,dropdownCss:function(){return i.dropdownCss(n)}};break;case"tags":e={width:"500px",tags:!0,separator:'","',maximumSelectionSize:0,formatSelection:function(t){return t.text},formatResult:function(t,e){return i.formatResult(t,e)},initSelection:function(t,e){var i=[],n=N.a.trim(t.val());n=n.split('","'),N()(n).each(function(t,e){var n=e.split(":",2);i.push({id:e,text:n[1]})}),t.val(""),e(i)}}}return e}},{key:"getHTMLid",value:function(t,e,n){var i=this.settings.chart,a=[];return this.settings.id&&a.push(this.settings.id),e&&a.push(e),t.type&&a.push(t.type),t.id&&a.push(t.id),n&&a.push(n),i&&a.push(i),a.join("-")}},{key:"getHTMLclass",value:function(t,e,n){var i=[];return e&&i.push(e),t.type&&i.push("".concat(i[i.length-1],"-").concat(t.type)),t.id&&i.push("".concat(i[i.length-1],"-").concat(t.id)),n&&i.push("".concat(i[i.length-1],"-").concat(n)),i.join(" ")}},{key:"changeValue",value:function(t,e,n){var i,a,r=this,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=e,c=n,l=this.controls[t],u=N()("#".concat(this.getHTMLid(l,"control"))),h=void 0!==l.options?l.options().filter(function(t){return t.id==o})[0]:{};switch(s.value=o,void 0===c&&(c=!!h&&(void 0===h.track||h.track)),l.type){case"multi-select":a=this.values[l.id].slice()||[],o=N.a.isArray(o)?o.slice():o,N.a.isArray(o)||(a.includes(o)?(s.type="remove",a.splice(a.indexOf(o),1)):(s.type="add",a.push(o)),o=a),(this.values[l.id]=o).length?N()("#".concat(this.getHTMLid(l,"control"))).select2("val",o[0]):N()("#".concat(this.getHTMLid(l,"control"))).select2("val",""),u.val(""),c=!1;break;case"select":u.select2("val",o);break;case"buttonset":l.settings.multiple&&o&&o.constructor===Array?(N()("#".concat(this.getHTMLid(l,"control")," input")).prop("checked",!1),o.forEach(function(t){N()("#".concat(r.getHTMLid(l,"control"),' [value="').concat(t,'"]')).prop("checked",!0).button("refresh")})):o&&(N()("#".concat(this.getHTMLid(l,"control")," input")).prop("checked",!1),N()("#".concat(this.getHTMLid(l,"control"),' [value="').concat(o,'"]')).prop("checked",!0),N()("#".concat(this.getHTMLid(l,"control"))).buttonset("refresh"));break;case"slider":this.values[l.id]!=o?(this.values[l.id]=o,u.slider("value",void 0!==l.options?l.options().map(function(t){return t.id}).indexOf(o):o)):(this.values[l.id]=o,u.trigger("updateLabel"));break;case"tags":l.settings.data?i=o.map(function(e){return"object"!==In(e)?l.settings.data.filter(function(t){return t.id==e})[0]:e}):l.settings.query&&(i=o.map(function(e){return"object"!==In(e)?l.settings.query().filter(function(t){return t.id==e})[0]:e})),this.values&&(this.values[l.id]=o),"function"==typeof l.value&&l.value(l,o),u.select2("data",i).select2("close"),"function"==typeof l.refresh&&l.refresh(l,o),o=i;break;case"range-slider":var d=this.values[l.id];null!=o&&(d[0]!=o[0]||d[1]!=o[1]?(this.values[l.id]=o,u.dragslider("values",void 0!==l.options?o.map(function(t){return l.options().map(function(t){return t.id}).indexOf(t)}):o)):(this.values[l.id]=o,u.trigger("updateLabel")));break;case"autocomplete":o?(u.val(l.options().filter(function(t){return t.id==o})[0].text),u.blur()):N()("#".concat(this.getHTMLid(l,"control"))).val("");break;case"toggle":N()("#".concat(this.getHTMLid(l,"control")," input")).bootstrapSwitch("state",o,!1);break;case"checkbox":u.prop("checked",o)}return this.values[l.id]=o,"function"==typeof l.valueChange&&l.valueChange(l,o),!1!==c&&this.trackEvent(l,o),{value:o,event:s}}},{key:"changeSetting",value:function(t,e,n,i){var a=this.controls[t],r=this.changeValue(a.id,e,i,n);"function"==typeof a.change&&!1===a.change(a,r.value,r.event)||this.update(a,r.value,r.event)}},{key:"updateOptions",value:function(t,e){var n=this.controls[t];void 0!==n._options&&void 0!==e&&(n._options=e);var i=N()("#".concat(this.getHTMLid(n,"control")));switch(n.type){case"multi-select":case"select":i.empty(),this.buildSelectOptions(n,i),"select"===n.type&&i.select2("val",this.values[n.id]);break;case"tags":this.getHTMLid(n,"control").select2(n.settings);break;case"range-slider":void 0!==e.min&&(n.min=e.min,i.dragslider("option","min",n.min)),void 0!==e.max&&(n.max=e.max,i.dragslider("option","max",n.max)),void 0!==e.step&&(n.step=e.step,i.dragslider("option","step",n.step))}}},{key:"trackEvent",value:function(e,t){if(void 0!==this.controls[e.id]){var n=this.controls[e.id].text,i=t,a=this.settings.gaCategory;switch(e.type){case"button":void 0!==e.buttonsText&&(n=e.buttonsText,i=e.text);break;case"slider":case"range-slider":i=[].concat(void 0!==e.options?e.options().map(function(t){return t.id}).indexOf(i):i).map(function(t){return e.value(t)});break;case"checkbox":case"toggle":i=i?void 0!==e.on?e.on:"On":void 0!==e.off?e.off:"Off";break;case"tags":i=i.map(function(t){return t.text});break;default:"function"==typeof this.controls[e.id].options&&(i=e.options().filter(function(t){return t.id==i})[0].text)}"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent",a,n,i]),"undefined"!=typeof ga&&ga("send","event",a,n,i)}}},{key:"buildWrapper",value:function(t){var e=N()("<div>").appendTo(this.settings.container).attr("id",this.getHTMLid(t,"control-container")).attr("class","".concat(this.getHTMLclass(t,"control-container")," clearfix"));return void 0!==t.visibility&&e.attr("cv",t.visibility),N()("<div>").appendTo(e).attr("id",this.getHTMLid(t,"control-wrapper")).attr("class","".concat(this.getHTMLclass(t,"control-wrapper")," clearfix"))}},{key:"buildCheckbox",value:function(t,e){var n=N()("<input/>").attr("id",this.getHTMLid(t,"control")).attr("type","checkbox").attr("value",t.id).attr("class",this.getHTMLclass(t,"control"));return t.default&&n.prop("checked",!0),t.text&&e.append(N()("<label>").attr("for",this.getHTMLid(t,"control")).attr("class",this.getHTMLclass(t,"control-label")).text(t.text)),e.append(n),n}},{key:"buildLabel",value:function(t,e){return N()("<span>").appendTo(e).attr("id",this.getHTMLid(t,"control-label")).attr("class",this.getHTMLclass(t,"control-label")).text(t.text)}},{key:"buildValue",value:function(t,e){return N()("<span>").appendTo(e).attr("id",this.getHTMLid(t,"control-value")).attr("class",this.getHTMLclass(t,"control-value"))}},{key:"buildSlider",value:function(t,e){return N()("<div>").appendTo(e).attr("id",this.getHTMLid(t,"control")).attr("class",this.getHTMLclass(t,"control"))}},{key:"buildInput",value:function(t,e){return N()("<input>").appendTo(e).attr("id",this.getHTMLid(t,"control")).attr("class",this.getHTMLclass(t,"control"))}},{key:"buildSelectOptions",value:function(u,h){var d=this;void 0!==u.settings.placeholder&&h.append(N()("<option>")),N()(u.options(this.settings.chart)).each(function(t,e){var n=e.id,i=e.text,a=e.match,r=e.bold,s=e.distance,o=e.enabled,c=void 0===o||o,l=N()("<option>").attr("value",n).attr("id",d.getHTMLid(u,"control",n)).attr("disabled",!c).attr("match-text",a||i).css({"font-weight":r?"bold":"","margin-left":s?5*s:"0"}).text(i).appendTo(h);j.a.selectAll(l).datum({disabled:!c,"match-text":a||i,css:{"font-weight":r?"bold":"","margin-left":s?5*s:0}})})}},{key:"buildSelect",value:function(t,e){var n=N()("<select>").appendTo(e).attr("id",this.getHTMLid(t,"control")).attr("class",this.getHTMLclass(t,"control"));return this.buildSelectOptions(t,n),n}},{key:"buildButtonset",value:function(i,t){var a=this,r=N()("<div>").appendTo(t).attr("id",this.getHTMLid(i,"control")).attr("class",this.getHTMLclass(i,"control"));return N()(i.options()).each(function(t,e){var n=N()("<input/>").attr("type",i.settings.multiple?"checkbox":"radio").attr("name",a.getHTMLid(i,"control")).attr("value",e.id).attr("id",a.getHTMLid(i,"control-option",e.id));(i.settings.multiple&&i.default.includes(e.id)||i.default==e.id)&&n.prop("checked",!0),n.click(function(t){var n;if(i.settings.multiple){var e=a.getHTMLid(i,"control");n=[],N()("input:checkbox[name=".concat(e,"]:checked")).each(function(t,e){n.push(N()(e).val())})}else n=N()(t.target).val();a.changeSetting(i.id,n,t)}),r.append(n)}),N()(i.options()).each(function(t,e){var n=N()("<label>").attr("class",a.getHTMLclass(i,"control-option",e.id)).attr("for",a.getHTMLid(i,"control-option",e.id)).text(e.text);void 0!==e.attrs&&j.a.entries(e.attrs).forEach(function(t){var e=n.attr(t.key);n.attr(t.key,(e?"".concat(e," "):"")+t.value)}),r.append(n)}),r}},{key:"buildButton",value:function(e,t){var n=this,i=N()("<button>").attr("id",this.getHTMLid(e,"control")).attr("class",this.getHTMLclass(e,"control")).text(e.text);return i.button(),i.click(function(t){n.changeSetting(e.id,"",t)}),t.append(i),i}},{key:"buildSliderWidget",value:function(n){var i=this,t=this.buildWrapper(n);this.buildLabel(n,t);var e=this.buildSlider(n,t),a=N()("<span>"),r=n.default;if(void 0!==n.options){var s=n.options();n.min=0,n.max=s.length-1,r=s.map(function(t){return t.id}).indexOf(r),"function"!=typeof n.value&&(n.value=function(t){return s[t]?s[t].text:""})}"function"!=typeof n.value&&(n.value=function(t){return t}),e.slider({value:r,min:n.min,max:n.max,step:n.step?n.step:1,slide:function(t,e){a.text(n.value(e.value))},change:function(t,e){a.text(n.value(e.value)),t.originalEvent&&i.changeSetting(n.id,void 0!==n.options?n.options()[e.value].id:e.value,t)}}),a.appendTo(N()(".ui-slider-handle",e)),e.on("updateLabel",function(){a.text(n.value(e.slider("value")))}),e.trigger("updateLabel")}},{key:"buildRangeSliderWidget",value:function(o){var c=this,t=this.buildWrapper(o);this.buildLabel(o,t);var n=this.buildSlider(o,t),l=[N()("<span>"),N()("<span>")],e=o.default;void 0!==o.options&&(o.min=0,o.max=o.options().length-1,e&&(e=e.map(function(t){return o.options().map(function(t){return t.id}).indexOf(t)})),"function"!=typeof o.value&&(o.value=function(t){return o.options()[t].text})),"function"!=typeof o.value&&(o.value=function(t){return t}),n.dragslider({animate:!0,range:!0,rangeDrag:!0,values:e,min:o.min,max:o.max,step:o.step?o.step:1,change:function(t,n){if(n.values[0]===n.values[1])return!1;var e=N()("#".concat(c.getHTMLid(o,"control")));if(o.threshold){var i=e.width(),a=e.dragslider("option","min"),r=e.dragslider("option","max");if((n.values[1]-n.values[0])/(r-a)*i<=o.threshold)return!1}var s=void 0!==o.options?n.values.map(function(t){return o.options()[t].id}):n.values;return l.forEach(function(t,e){t.text(o.value(n.values[e]))}),t.originalEvent&&c.changeSetting(o.id,s,t),!0},slide:function(t,n){l.forEach(function(t,e){t.text(o.value(n.values[e]))})}}),l.forEach(function(t,e){t.appendTo(N()(".ui-slider-handle",n)[e])}),n.on("updateLabel",function(){l.forEach(function(t,e){t.text(o.value(n.dragslider("values")[e]))})}),n.trigger("updateLabel")}},{key:"buildButtonsetWidget",value:function(n){var i=this,t=this.buildWrapper(n);this.buildLabel(n,t),this.buildButtonset(n,t).buttonset(),N()(n.options()).each(function(t,e){e.icon&&N()("#".concat(i.getHTMLid(n,"control-option",e.id))).button({icons:{primary:e.icon}})})}},{key:"buildButtonWidget",value:function(t){var e=this.buildWrapper(t);this.buildButton(t,e)}},{key:"buildToggleWidget",value:function(n){var i=this,t=this.buildWrapper(n);this.buildLabel(n,t);var e=this.buildCheckbox(N.a.extend({},n,{text:!1,type:"checkbox"}),t).attr("data-on-text",void 0!==n.on?n.on:"On").attr("data-off-text",void 0!==n.off?n.off:"Off").bootstrapSwitch("size","small");e.parent().parent().wrap(N()("<div/>").attr("id",this.getHTMLid(n,"control")).attr("class",this.getHTMLclass(n,"control"))).addClass(),e.on("switchChange.bootstrapSwitch",function(t,e){i.changeSetting(n.id,e,t)})}},{key:"buildCheckboxWidget",value:function(e){var n=this,t=this.buildWrapper(e);this.buildCheckbox(e,t).click(function(t){n.changeSetting(e.id,N()(t.target).prop("checked"),t)})}},{key:"buildButtonsWidget",value:function(t){var n=this,i=this.buildWrapper(t);this.buildLabel(t,i),N()(t.options()).each(function(t,e){n.buildButton(e,i)})}},{key:"buildSelectWidget",value:function(e){var n=this,t=this.buildWrapper(e);this.buildLabel(e,t);var i=this.buildSelect(e,t);i.val(e.default),i.select2(e.settings),i.on("select2-open",function(){n.selectOpen()}).on("select2-opening",function(){n.closeSelect()}),i.change(function(t){n.changeSetting(e.id,t.target.value,t)})}},{key:"buildMultiSelectWidget",value:function(i){var a=this,t=this.buildWrapper(i);this.buildLabel(i,t);var e=this.buildSelect(i,t);i.default&&(this.values[i.id]=i.default,e.val(i.default[0])),e.select2(i.settings),e.val(""),e.on("select2-open",function(){a.selectOpen(),a.buildSelectFilterBar()}).on("select2-opening",function(){a.closeSelect()}).on("select2-clearing",function(t){a.changeSetting(i.id,[],t)}).on("select2-selecting",function(t){var e=a.values[i.id]?a.values[i.id]:[],n=parseInt(t.val,10);return e.includes(n)?N()("#control-result-".concat(n," input")).prop("checked",!1):N()("#control-result-".concat(n," input")).prop("checked",!0),a.changeSetting(i.id,n,t,!1),t.stopPropagation(),t.preventDefault(),!1})}},{key:"buildSelectFilterBar",value:function(){var t=N()("#select2-drop .select2-search");if(N()(".select2-filter",t).length)N()(".select2-filter-option",t).removeClass("active"),N()('.select2-filter-option[value="all"]',t).addClass("active");else{var i=N()("<div/>",{class:"select2-filter"});i.append(N()("<button/>",{class:"select2-filter-option active",value:"all"}).text("All options"),N()("<button/>",{class:"select2-filter-option",value:"selected"}).text("Selected options")),t.append(i),i.on("click",function(t){var e=t.target,n=N()(e);N()(".select2-filter-option",i).removeClass("active"),n.addClass("active"),"selected"===n.attr("value")?N()("#select2-drop input:not(:checked)").parents(".select2-result").hide():N()("#select2-drop .select2-result").show()})}}},{key:"buildTagsWidget",value:function(n){var e=this,t=this.buildWrapper(n);this.buildLabel(n,t);var i=this.buildInput(n,t);i.val(n.default),i.select2(n.settings),i.on("select2-open",function(){e.selectOpen()}).on("select2-opening",function(){e.closeSelect()}).on("choice-selected",function(t,e){"function"==typeof n.choiceSelected&&n.choiceSelected(N()(e).data("select2-data"))}),i.change(function(t){e.changeSetting(n.id,i.select2("val"),t)})}},{key:"buildAutocompleteWidget",value:function(n){var e=this,t=this.buildWrapper(n),i=this.buildInput(n,t);this.buildLabel(n,t),N()(i).autocomplete({source:n.options().map(function(t){return{id:t.id,value:t.text}}),select:function(t,e){this.changeSetting(n.id,e.item.id,t)}}),N()(i).focus(function(t){e.changeSetting(n.id,"",t)}),N()(i).click(function(t){e.changeSetting(n.id,"",t)})}},{key:"buildInputSetWidget",value:function(i){var a=this,r=this.buildWrapper(i);this.buildLabel(i,r),i.options().forEach(function(t,e){a.buildLabel(N.a.extend({},i,t),r);var n=a.buildInput(N.a.extend({},i,t),r);i.default&&i.default.constructor===Array&&i.default[e]&&n.val(i.default[e]),N()(n).change(function(t){var n=[];N()("#".concat(a.getHTMLid(i,"control-wrapper")," input")).each(function(t,e){n.push(N()(e).val())}),a.changeSetting(i.id,n,t)})})}},{key:"buildMenuWidget",value:function(t){var e=this.buildWrapper(t);this.buildLabel(t,e),this.buildMenu(t,e)}},{key:"buildMenu",value:function(t,e){var n=N()("<ul>").appendTo(e).attr("id",this.getHTMLid(t,"control")).attr("class",this.getHTMLclass(t,"control"));return this.buildMenuOptions(t,n),n}},{key:"buildMenuOptions",value:function(i,a){var r=this;N()(i.options()).each(function(t,e){var n=a.append(N()("<li>").attr("value",r.id).attr("id",r.getHTMLid(i,"control",e.id)).append(N()("<span>").text(e.text)));void 0!==e.options&&r.buildMenu(e,n)})}},{key:"markMatch",value:function(t,e,n){var i=t.toUpperCase().indexOf(e.toUpperCase()),a=e.length;i<0?n.push(t):(n.push(t.substring(0,i)),n.push("<span class='select2-match'>"),n.push(t.substring(i,i+a)),n.push("</span>"),n.push(t.substring(i+a,t.length)))}},{key:"formatSelection",value:function(t,e){return N()(e).parent().parent().attr("title",t.text),t.text}},{key:"formatResult",value:function(t,e){return void 0!==t.element&&N()(e).attr("style",t.element[0].style.cssText),t.element[0].disabled&&(N()(e).addClass("disabled"),N()(e).parent("li").removeClass("select2-result-selectable")),t.text}},{key:"matcher",value:function(t,e,n){var i=N()(n).attr("match-text");return void 0!==i&&i.toUpperCase().includes(t.toUpperCase())}},{key:"formatMultiSelection",value:function(t,e,n){N()(e).addClass("select2-default");var i=this.values[n.id];return i.length&&(t.text="".concat(n.settings.placeholder," (").concat(i.length,")")),this.formatSelection(t,e,n)}},{key:"formatMultiResult",value:function(t,e,n){var i,a,r=this.values[n.id],s=void 0!==r&&r.includes(parseInt(t.id,10)),o="";if(void 0!==t.element){var c=j.a.select(t.element[0]).datum();if(c.disabled){var l=N()(e);l.addClass("disabled"),l.parent("li").removeClass("select2-result-selectable")}i=c.css["margin-left"]?"".concat(c.css["margin-left"]+20,"px"):"20px",a=c.css["font-weight"]}return a&&(o+="font-weight: ".concat(a,";")),i&&(o+="margin-left: ".concat(i,";")),'\n      <div class="control-result" id="control-result-'.concat(t.id,'">\n        <input type="checkbox" ').concat(s?"checked":"",'/>\n        <span style="').concat(o,'">').concat(t.text,"</span>\n      </div>\n    ")}},{key:"dropdownCss",value:function(t){var e=N()("#control-styles");e.length||(e=N()("<style/>",{id:"control-styles"}).appendTo(N()("head")));var n=N()("#s2id_".concat(this.getHTMLid(t,"control"))),i=n.offset(),a=n.hasClass("select2-drop-above"),r={"border-bottom-right-radius":"0","border-bottom-left-radius":"0","border-top-right-radius":"0","border-top-left-radius":"0","border-top":""};if(t.settings.dropWidth){var s=t.settings.dropWidth;if("+"===s.charAt(0)&&(s=parseFloat(s.substring(1,s.length),10)+n.width()),s>n.width()){var o=t.settings.dropDirection||"left";(a&&"right"===o||!a)&&(r["border-bottom-right-radius"]="4px"),(a&&"left"===o||!a)&&(r["border-bottom-left-radius"]="4px"),(!a&&"right"===o||a)&&(r["border-top-right-radius"]="4px"),(!a&&"left"===o||a)&&(r["border-top-left-radius"]="4px"),r["border-top"]="1px solid #ccc",r.width=s,r[o]=i[o]-(s-n.outerWidth())}}var c=N()(window),l=N()(document),u=c.height(),h=l.height(),d=c.scrollTop(),f=h-u-d,p=i.top-d,g=u+d-i.top-n.height(),v=30<d?0:30-d,m=25<f?0:25-f,y="multi-select"===t.type?56:30;p-=v,g-=m;var b=!a&&(p<=g||i.top+p<=u+d)?g:p;return e.html(".select2-results{max-height:".concat(b-(y+19),"px;}")),r}},{key:"selectOpen",value:function(){var e=this;N()("#select2-drop-mask").remove(),N()("body").on("click",function(t){"loader"!==t.target.id&&e.closeSelect()})}},{key:"closeSelect",value:function(){var t=N()("#select2-drop").data("select2");t&&t.close()}}])&&Nn(t.prototype,n),i&&Nn(t,i),e}();n(145);function zn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Hn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="treemap";this.settings=U({},{unit:2,legend:{direction:"",filter:"any"},change:{unit:3},defaults:{}},t),this.defaults=this.settings.defaults,this.$hover=null,this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){var n,i=this;this.tree=Y(this.hierarchy.causes),n=j.a.values(i.metadata.cause),i._causes=["all",1,2,3,4].reduce(function(t,e){return t[e]=("all"===e?n:n.filter(function(t){return t.level===e+1||e+1>t.level&&0===t.children.length})).map(function(t){return t.cause_id}),t},{}),this.causes=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i.getSetting("depth");return i._causes[t]},this.colors={A:rt.A,B:rt.B,C:rt.C},this.scales={},j.a.keys(this.colors).forEach(function(t){i.scales[t]=j.a.scale.linear().domain(V(0,1,i.colors[t].length)).range(i.colors[t]).clamp(!0)});var a=this.hover.bind(this);N()("".concat(this.settings.container.chart," .cell-g")).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:10,liveEvents:!0,allowTipHover:!1,content:function(t,e){return a(N()(this),e,this.__data__)}}),N()(document).on("click","".concat(this.settings.container.chart," .cell-g"),function(t){var e=t.target.__data__;i.changeSetting("cause",e.cause_id)})}},{key:"destroy",value:function(){N()(document).off("click","".concat(this.settings.container.chart," .cell-g")),N()("".concat(this.settings.container.chart," .cell-g")).poshytip("hide").poshytip("destroy")}},{key:"hover",value:function(t,e,n){this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t;var i="",a=this.getSetting("metric"),r=this.settings.unit,s=this.getSetting("location"),o=this.getSetting("year"),c=this.getSetting("value"),l=this.getSetting("years"),u=this.getSetting("display"),h={cause:this.getValue({data:"cause",cause:n.cause_id,unit:this.settings.unit}),attribution:this.getValue({data:"paf",cause:n.cause_id,unit:this.settings.unit}),change:this.getValue({data:"cause",cause:n.cause_id,unit:"chg",year:l})};e.css({"border-color":n.data.color.color});var d=$(h.cause,{unit:r,metric:this.metadata.measure[a][r].labels.hover});if(i+="".concat(this.metadata.cause[n.cause_id].name,"<br/>"),i+="<b>".concat(this.metadata.unit[r].name,":</b> ").concat(d,"<br/>"),c.isIn(["expected","ratio"])&&this.metadata.sdi[s]&&this.metadata.sdi[s][o]){var f=this.metadata.sdi[s][o].sdi;i+="<b>SDI:</b> ".concat(f,"<br/>")}if("cause"===u){var p=$(h.change,{unit:r});i+="<b>Annual % change:</b> ".concat(p," <br/>")}if("risk"===u){var g=$(h.attribution,{unit:r});i+="<b>Risk factor attribution:</b> ".concat(g," <br/>")}if("etiology"===u){var v=$(h.attribution,{unit:r});i+="<b>Etiology attribution:</b> ".concat(v," <br/>")}if("impairment"===u){var m=$(h.attribution,{unit:r});i+="<b>Impairment attribution:</b> ".concat(m," <br/>")}if("injury"===u){var y=$(h.attribution,{unit:r});i+="<b>Injury attribution:</b> ".concat(y," <br/>")}return i}},{key:"render",value:function(){this.chart=new pe({container:this.settings.container.chart,animation:this.settings.animation,selected:this.selected()}),this.chart.type="treemap",this.legend(),this.title(),this.chart.tree=this.tree,this.chart.data=this.data(!0),this.chart.render(),this.chart.data=this.data(),this.chart.update(!1),this.resize(),this.loaded=!0}},{key:"selected",value:function(){var t=this.metadata.cause[this.getSetting("cause")],e=this.getSetting("depth");return t&&t.level<=e+1?this.getSetting("cause"):null}},{key:"title",value:function(){var i=this;N()(this.settings.container.title).empty();var t=this.getSetting("location"),e=this.metadata.location[t]?this.metadata.location[t].name:"";N()(this.settings.container.title).append(N()("<div/>").text(e));var n=this.getSetting("display"),a=this.getSetting("age"),r=this.getSetting("metric"),s=this.metadata.age[a],o=s.measure,c=(o=void 0===o?{}:o)[r],l=(c=void 0===c?{}:c).name,u=s.name;if(N()(this.settings.container.title).append(N()("<div/>").text("".concat(this.metadata.sex[this.getSetting("sex")].label,",\n          ").concat(l||u,",\n          ").concat(this.metadata.year[this.getSetting("year")].name,",\n          ").concat(this.metadata.measure[r][this.getSetting("unit")].labels.treemap,"\n          ").concat("cause"!==n?" attributable to ".concat(this.metadata[n][this.getSetting(n)].name):"","\n          ").concat("value"===this.getSetting("dimension")?" (".concat(Object(L.capitalize)(this.getSetting("value")),")"):""))),"cause"!==this.getSetting("display")){var h=this.settings.unit;this.legend.titles.forEach(function(t,n){t.lines.forEach(function(t,e){0===e&&t.text(i.metadata.measure[r][h].labels.treemap),1===e&&0===n&&t.text("attributable to"),1===e&&1===n&&t.text("not attributable to"),2===e&&t.text(i.getSetting("display"))})})}N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")}),N()(this.settings.container.legend).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")})}},{key:"requests",value:function(){var t=[],e=this.causes("all"),n=this.getSetting("years"),i={data:"cause",cause:e,unit:this.settings.unit};return this.chart||t.push(this.getParameters(U({},i,this.defaults))),t.push(this.getParameters(U({},i))),"sig"===this.getSetting("filter")&&t.push(this.getParameters({data:"change",cause:e,unit:1,year:n.join("_")})),"cause"===this.getSetting("display")?t.push(this.getParameters({data:"cause",cause:e,year:n,unit:this.settings.change.unit})):t.push(this.getParameters({data:"paf",unit:this.settings.unit,cause:e})),t}},{key:"csv",value:function(){var r=this,s=this.getSetting("metric"),o=this.settings.unit,c=this.getSetting("display"),l=this.getSetting("value"),u=this.getParameters(),h=this.getSetting("years"),t=["Location","Year","Age","Sex",this.metadata.display.cause.name],e=["cause"];"cause"!==c?(t.push(this.metadata.display[c].name),e.push("paf")):e.push("change"),t.push("Measure"),t.push("Value"),t.push("Lower bound"),t.push("Upper bound"),"expected"===l&&t.push("SDI value");var d=[];return this.causes().forEach(function(a){e.forEach(function(t){var e,n=[];if(n.push(r.metadata.location[u.location].name),n.push("change"===t?h.join(" - "):r.metadata.year[u.year].name),n.push(r.metadata.age[u.age].name),n.push(r.metadata.sex[u.sex].name),n.push(r.metadata.cause[a].name),"cause"!==c&&n.push("paf"===t?r.metadata[c][u.paf].name:""),"cause"===t&&(e=r.getValue({data:"cause",cause:a,unit:r.settings.unit}),n.push(r.metadata.measure[s][o].labels.map)),"paf"===t&&(e=r.getValue({data:"paf",cause:a,unit:r.settings.unit}),n.push("Percent of ".concat(r.metadata.measure[s][o].labels.treemap," attributable"))),"change"===t&&(e=r.getValue({data:"cause",cause:a,unit:"chg",year:h}),n.push("".concat(r.metadata.measure[s][o].labels.treemap," annual % change"))),n.push(e.m),n.push(e.l),n.push(e.u),"expected"===l)if("change"===t){var i=h.reduce(function(t,e){return r.metadata.sdi[u.location]&&r.metadata.sdi[u.location][e]&&t.push(r.metadata.sdi[u.location][e].sdi),t},[]);n.push(i.join(";"))}else n.push(r.metadata.sdi[u.location][u.year].sdi);d.push(n)})}),[t].concat(d)}},{key:"data",value:function(){var s=this,o=0<arguments.length&&void 0!==arguments[0]&&arguments[0],c={},l=this.getSetting("display");return this.causes("all").forEach(function(t){var e=s.metadata.cause[t],n=e.parents,i=e.short_name,a=e.medium_name,r=o?s.getValue(Object(L.merge)({},s.defaults,{data:"cause",cause:t})):s.getValue({data:"cause",cause:t,unit:s.settings.unit});c[t]={text:i.includes("Group")?a:i,value:o||"injury"!==l||n.includes(687)?r.m:0,color:s.color(t),attribution:s.attribution(t),visibility:s.visible(t)}}),c}},{key:"visible",value:function(t){var e=this.causes();return t.isIn(e)}},{key:"color",value:function(t){var e,n,i=this.metadata.cause[t].cause.substr(0,1),a={color:"#454545",value:null};if("cause"===this.getSetting("display")){var r=this.getSetting("direction"),s=this.getSetting("years"),o=j.a.scale.linear().domain([-.03,.03]).clamp(!0);if(a.value=this.getValue({data:"cause",unit:"chg",year:s,cause:t}).m,this.scales[i]&&(a.color=this.scales[i](o(a.value))),("inc"===r&&a.value<0||"dec"===r&&0<a.value)&&(a.color="#d3d3d3"),"advanced"===this.getSetting("controls")&&"sig"===this.getSetting("filter")){var c=this.getValue({data:"change",cause:t,unit:1,year:s.join("_")});e=c.l,n=c.u,0<e&&0<n||e<0&&n<0||(a.color="#d3d3d3")}}else a.color=this.colors[i]?this.colors[i][1]:"#454545";return a}},{key:"attribution",value:function(t){var e=this.metadata.cause[t].cause.substr(0,1),n={color:this.colors[e]?this.colors[e][5]:"#454545",value:null};return"cause"!==this.getSetting("display")&&(n.value=this.getValue({data:"paf",cause:t,unit:this.settings.unit}).m),n}},{key:"legend",value:function(){var c=this;this.legend={},this.legend.build=function(){var t=c.settings.container.legend,a=t.replace("#",""),e=N()(t);c.legend.display=c.getSetting("display");var n=c.getSetting("metric"),i=c.settings.unit,r=c.metadata.measure[n][i];e.empty(),c.legend.title={},c.legend.title.container=N()("<div>").attr("class","legend-title-container").appendTo(e),c.legend.title.text=N()("<div>").attr("class","legend-title").appendTo(c.legend.title.container),c.legend.container=N()("<div>").attr("class","legend").appendTo(e),c.legend.container.css("height","calc(100% - ".concat(c.legend.title.container.outerHeight(),"px)")),c.legend.height=c.legend.container.height(),c.legend.width=c.legend.container.width();var o={A:c.metadata.cause[295].name,B:c.metadata.cause[409].name,C:c.metadata.cause[687].name};c.legend.svg=j.a.select("".concat(t," .legend")).append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 130 ".concat(c.legend.height)).attr("preserveAspectRatio","none").attr("overflow","hidden"),"cause"===c.getSetting("display")?(c.legend.title.text.text("Annual % change"),c.legend.controls=new jn({id:a,container:"".concat(t," .legend-title-container"),update:function(t,e){c.changeSetting(t.id,e)},values:c.settings.legend,controls:{year1:{id:"year1",type:"select",options:j.a.values(c.metadata.year).map(function(t){return{id:t.year_id,text:t.name}}),settings:{minimumResultsForSearch:-1,dropdownCssClass:"ledgend-drop",dropWidth:"80",dropDirection:"right"}},year2:{id:"year2",text:" to ",type:"select",options:j.a.values(c.metadata.year).map(function(t){return{id:t.year_id,text:t.name}}),settings:{minimumResultsForSearch:-1,dropdownCssClass:"ledgend-drop",dropWidth:"80",dropDirection:"left"}},direction:{id:"direction",type:"buttonset",text:"".concat(r.labels.treemap,"/100,000"),options:[{id:"dec",text:"-",attrs:{title:"Decreasing"}},{id:"",text:"±",attrs:{title:"Any"}},{id:"inc",text:"+",attrs:{title:"Increasing"}}]}},settings:{gaCategory:"GBD Compare"}}),c.legend.scale=j.a.scale.linear().domain([-.03,.03]).range([0,c.legend.height-20]),c.legend.axis=j.a.svg.axis().scale(c.legend.scale).ticks(7).orient("left").innerTickSize(3).outerTickSize(5).tickFormat(j.a.format("%")),c.legend.labels=c.legend.svg.append("g").attr("transform","translate(40, 10)").attr("class","tree axis").call(c.legend.axis),c.legend.defs=c.legend.svg.append("svg:defs"),j.a.keys(c.colors).forEach(function(n,t){c.legend[n]={},c.legend[n].gradient=c.legend.defs.append("svg:linearGradient").attr("id","".concat(a,"-gradient-").concat(n)).attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%"),c.colors[n].forEach(function(t,e){c.legend[n].gradient.append("svg:stop").attr("offset",e/(c.colors[n].length-1)).attr("stop-color",t)});var e=c.legend.svg.append("g").attr("transform","translate(".concat(25*t+45,", 10)"));c.legend[n].bar=e.append("rect").attr("class","color-bar").attr("x","0px").attr("y","0px").attr("width","20px").attr("height",c.legend.height-20).attr("stroke","none").attr("title","test").attr("fill","url(#".concat(a,"-gradient-").concat(n,")")),c.legend[n].bar.append("title").text(o[n]);var i=c.getSetting("direction");c.legend[n].dec=e.append("rect").attr("class","no-color-bar no-color-bar-dec").attr("x","0px").attr("y","0px").attr("width","20px").attr("height",(c.legend.height-20)/2).style("opacity","inc"===i?1:0).attr("stroke","none").attr("fill","#d3d3d3"),c.legend[n].inc=e.append("rect").attr("class","no-color-bar no-color-bar-inc").attr("x","0px").attr("y","".concat((c.legend.height-20)/2,"px")).attr("width","20px").attr("height",(c.legend.height-20)/2).style("opacity","dec"===i?1:0).attr("stroke","none").attr("fill","#d3d3d3")})):c.legend.titles=[1,2].map(function(t,n){var e=[c.legend.width/2,n*(c.legend.height/2+c.legend.height/4)],i=c.legend.svg.append("g").attr("transform","translate(".concat(e,")")),a=i.append("g").attr("transform","translate(".concat(0,", ",0,")")),r=[1,2,3].map(function(t,e){return a.append("g").attr("transform","translate(".concat(0,", ",15*e,")")).append("text").attr("class","title")}),s=i.append("g").attr("transform","translate(".concat(-42,", ",40,")"));return j.a.keys(c.colors).forEach(function(t,e){s.append("g").attr("transform","translate(".concat(30*e,", ",0,")")).append("rect").attr("width",25).attr("height",25).style("stroke","none").style("fill",1===n?c.colors[t][1]:c.colors[t][5]).append("title").text(o[t])}),{g:i,lines:r,rects:s}}),c.legend.update()},this.legend.resize=function(){c.legend.container.css("height","calc(100% - ".concat(c.legend.title.container.outerHeight(),"px)")),c.legend.height=c.legend.container.height(),c.legend.svg.attr("viewBox","0 0 130 ".concat(c.legend.height)),"cause"===c.getSetting("display")?(c.legend.scale.range([0,c.legend.height-20]),c.legend.labels.call(c.legend.axis),j.a.keys(c.colors).forEach(function(t){c.legend[t].bar.attr("height",c.legend.height-20),c.legend[t].dec.attr("height",(c.legend.height-20)/2),c.legend[t].inc.attr("height",(c.legend.height-20)/2).attr("y","".concat((c.legend.height-20)/2,"px"))})):c.legend.titles.forEach(function(t,e){var n=c.legend,i=n.width,a=n.height;t.g.attr("transform","translate(".concat(i/2,", ").concat(e*(a/2)+a/4-35,")"))})},this.legend.update=function(){var t=c.getSetting("display");if(c.legend.display===t){if("cause"===t){var e=c.getSetting("direction");j.a.keys(c.colors).forEach(function(t){c.legend[t].dec.style("opacity","inc"===e?1:0),c.legend[t].inc.style("opacity","dec"===e?1:0)});var n=c.getSetting("metric"),i=c.settings.unit,a=c.metadata.measure[n][i],r=c.legend.controls.getHTMLid(c.legend.controls.controls.direction,"control-label");N()("#".concat(r)).text("".concat(a.labels.treemap,"/100,000"))}c.legend.resize()}else c.legend.build()},this.legend.build()}},{key:"resize",value:function(){var t=this.settings.container;N()(t.chart).css({height:"calc(100% - ".concat(N()(t.title).outerHeight(),"px)")}),N()(t.legend).css({height:"calc(100% - ".concat(N()(t.title).outerHeight(),"px)")}),this.legend.resize&&this.legend.resize(),this.chart&&(this.chart.settings.width=N()(this.settings.container.chart).width(),this.chart.settings.height=N()(this.settings.container.chart).height(),this.chart.resize())}},{key:"update",value:function(t){switch(t.id){case"cause":case"depth":this.chart.settings.selected=this.selected();break;case"direction":case"treemap_filter":case"mode":case"display":case"display_adv":case"controls":case"metric":case"metric_adv":case"dimension":this.legend.update()}this.title(),this.chart.data=this.data(),this.chart.update()}}])&&zn(t.prototype,n),i&&zn(t,i),e}();n(146);function Ln(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Rn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Wn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="xmas",this.settings=t,this.settings.container[1]="".concat(this.settings.container.chart,"-1"),this.settings.container.l="".concat(this.settings.container.chart,"-l"),this.settings.container[2]="".concat(this.settings.container.chart,"-2"),this.cache={},this.$hover=null,this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){N()(this.settings.container.chart).append(N()("<div>",{class:"chart-container-1",id:this.settings.container[1].replace("#","")})).append(N()("<div>",{class:"chart-container-l",id:this.settings.container.l.replace("#","")})).append(N()("<div>",{class:"chart-container-2",id:this.settings.container[2].replace("#","")})),N()(this.settings.container.title).append(N()("<div>",{class:"title-container-1",id:"".concat(this.settings.container.title.replace("#",""),"-1")})).append(N()("<div>",{class:"title-container-l",id:"".concat(this.settings.container.title.replace("#",""),"-l")})).append(N()("<div>",{class:"title-container-2",id:"".concat(this.settings.container.title.replace("#",""),"-2")}));var n=this.hover.bind(this);N()("".concat(this.settings.container.chart," .stack")).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:10,liveEvents:!0,allowTipHover:!1,content:function(t,e){return n(N()(this),e,this.__data__)}})}},{key:"destroy",value:function(){N()("".concat(this.settings.container.chart," .stack")).poshytip("hide").poshytip("destroy")}},{key:"hover",value:function(t,e,n){this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t;var i="",a=this.getSetting("metric"),r=this.getSetting("unit"),s=this.getSetting("year"),o=this.getSetting("value"),c=n.stack;if(e.css({"border-color":n.layer.color}),"risk"===this.getSetting("display")&&"advanced"===this.getSetting("controls")){var l=this.metadata.cause[this.getSetting("cause")],u=this.metadata.risk[n.layer.layer];i+="".concat(l.name," attributable to ").concat(u.name,"<br/>")}else{var h=this.metadata[this.getSetting("display")][n.layer.layer];i+="".concat(h.name,"<br/>")}if(i+="<b>Location:</b> ".concat(this.metadata.location[c].name,"<br/>"),i+="<b>Sex:</b> ".concat(this.metadata.sex[n.sex].name,"<br/>"),o.isIn(["expected","ratio"])&&this.metadata.sdi[c]&&this.metadata.sdi[c][s]){var d=this.metadata.sdi[c][s].sdi;i+="<b>SDI:</b> ".concat(d,"<br/>")}var f=$(this.value({layer:n.layer.layer,stack:n.stack,sex:n.sex},!0),{unit:r,metric:this.metadata.measure[a][r].labels.hover});return i+="<b>".concat(this.metadata.unit[r].name,":</b> ").concat(f,"<br/>")}},{key:"render",value:function(){var e=this,t=this.settings,n=t.container,i=t.animation;this.chart={};var a=this.vals(),r=this.labels(),s=this.text("x");[1,2].forEach(function(t){e.chart[t]=new ve({container:n[t],animation:i,type:"sbar",orient:1===t?"right":"left",height:N()(n[t]).height(),width:N()(n[t]).width(),margin:{top:5,left:20,right:20,bottom:40}}),e.chart[t].y.vals=a,e.chart[t].y.labels=r,e.chart[t].y.data=e.data(t),e.chart[t].x.text=s}),this.scale(),this.title(),this.resize(),this.locations={},this.locations.svg=j.a.select(n.l).append("svg").attr("height","100%").attr("width","100%").attr("viewBox","0 0 ".concat(N()(n.l).width()," ").concat(N()(n.l).height())).attr("preserveAspectRatio","none").attr("overflow","hidden"),this.locations.scale=j.a.scale.ordinal().domain(a).rangeBands([0,N()(n.l).height()-45],.1,0),this.locations.axis=j.a.svg.axis().scale(this.locations.scale).tickFormat(function(t){return e.metadata.location[t].short_name}).orient("right"),this.locations.label=this.locations.svg.append("g").attr("class","axis").attr("transform","translate(".concat(N()(n.l).width()/2,",",5,")")).call(this.locations.axis),this.locations.label.selectAll("text").attr("x",0),this.legend(),j.a.values(this.chart).forEach(function(t){t.render()}),this.loaded=!0}},{key:"legend",value:function(){var r=this;this.legend={controls:{}},this.legend.build=function(){r.legend.display=r.getSetting("display"),N()(r.settings.container.legend).empty();var t=r.settings.container.legend.replace("#","");N()(r.settings.container.legend).append(N()("<div>").attr("id","".concat(t,"-controls-").concat(r.legend.display)).attr("class","".concat(t,"-controls"))),r.legend.controls=new jn({id:"legend-".concat(r.settings.chart,"-").concat(r.legend.display),container:"".concat(r.settings.container.legend,"-controls-").concat(r.legend.display),update:function(){},controls:{group:{id:"group",type:"select",options:function(){return("etiology"===r.legend.display?[]:"risk"===r.legend.display?[{id:"overview",text:"Overview level 1"},{id:"overview-2",text:"Overview level 2"}]:[{id:"overview",text:"Overview"}]).concat(r.metadata.groups[r.legend.display].overview.map(function(t){return{id:t,text:r.metadata[r.legend.display][t].name}}).reverse())},change:function(t,e){var n=r.metadata.groups[r.legend.display][e];e&&r.changeSetting("group",e),r.legend.controls.changeValue("list",[]),r.legend.controls.changeSetting("list",n),r.legend.controls.changeValue("group","")},settings:{width:"100%",placeholder:"Switch ".concat(r.legend.display," group"),dropdownCssClass:"legend-drop",formatSelection:function(t,e){return N()(e).addClass("select2-default"),"Switch ".concat(r.legend.display," group")}}},list:{id:"list",type:"tags",choiceSelected:function(t){var e;if("cause"===r.legend.display){var n=r.metadata.cause[t.id];n.children&&n.children.length&&(e=n.children.map(function(t){return t.cause_id}))}else{var i=r.metadata[r.legend.display][t.id];i.children&&i.children.length&&(e=i.children.map(function(t){return t.paf_id}))}e&&(r.legend.controls.changeValue("list",[]),r.legend.controls.changeSetting("list",e.reverse()))},settings:{width:"100%",query:function(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=i.term,u=void 0===a?"":a,h=r.getSetting("list"),d=[];"cause"===r.legend.display?(d=(e=[]).concat.apply(e,Ln(h.map(function(t){return r.metadata.cause[t].parents}))),t=function s(t,o){var c=[];return j.a.values(t).forEach(function(t){var e=t.cause,n=t.name,i=t.medium_name,a=t.cause_id,r=t.children;"".concat(e," ").concat(n).toLowerCase().includes(u.toLowerCase())&&c.push({id:a,text:"".concat(e," ").concat(n),short:i,bold:!!r.length,distance:o,disabled:d.includes(a)}),r.length&&!h.includes(a)&&(c=c.concat(s(r,o+1)))}),c}(r.hierarchy.causes,0)):(d=(n=[]).concat.apply(n,Ln(h.map(function(t){return r.metadata.paf[t].parents}))),t=function o(t,c){var l=[];return j.a.values(t).forEach(function(t){var e=t.cause,n=t.name,i=t.short_name,a=t.enabled,r=t.paf_id,s=t.children;"".concat(e," ").concat(n).toLowerCase().includes(u.toLowerCase())&&l.push({id:r,text:n,short:i,bold:!!s.length,distance:c,disabled:!a||d.includes(r)}),s.length&&!h.includes(r)&&(l=l.concat(o(s,c+1)))}),l}(r.hierarchy[r.legend.display],0));return i.callback?i.callback({results:t}):t},maximumSelectionSize:r.settings.maxSelection,dropdownCssClass:"legend-drop",formatSelection:function(t,e){var n=r.metadata[r.legend.display][t.id],i=r.color(t.id);return N()(e).parent().htmlClean(),i&&N()(e).parent().css({"border-left-color":i}).toggleClass("children",!(!n.children||!n.children.length)),t.short},formatResult:function(t,e){return N()(e).css({"font-weight":t.bold?"bold":"","padding-left":5*t.distance}),t.text},dropdownCss:function(){var t=r.legend.controls,e=t.controls.list,n=t.getHTMLid(e,"control-container"),i=N()("#".concat(n," .select2-input")),a=i.offset().top+i.outerHeight(!0);return N()("#select2-drop").removeClass("select2-drop-above"),{top:a,bottom:"","z-index":10001}},searchInputPlaceholder:"Add ".concat(r.legend.display),placeholder:"Add ".concat(r.legend.display)},value:function(t,e){r.changeSetting("list",e.map(function(t){return parseInt(t,10)}))},refresh:function(t){var e=r.legend.controls.getHTMLid(t,"control"),n=N()("#s2id_".concat(e," .select2-choices"));n.children().each(function(t,e){n.prepend(e)})},change:function(t,e){var n=r.settings.container.legend,i="".concat(n,"-controls-").concat(r.legend.display);e.length?N()("".concat(i," .control-button-clear")).show():N()("".concat(i," .control-button-clear")).hide(),r.update(t,e)}},clear:{id:"clear",type:"button",text:"Clear selection",change:function(){r.legend.controls.changeSetting("list",[])}}},settings:{gaCategory:"GBD Compare"}});var e=r.legend.controls.getHTMLid(r.legend.controls.controls.list,"control-container");r.legend.controls.changeValue("list",r.getSetting("list")),N()("#".concat(e," .select2-input")).attr("placeholder","Add ".concat(r.legend.display)).blur(),N()("#legend-".concat(r.settings.chart,"-impairment-control-container-select-group")).hide(),r.legend.update()},this.legend.update=function(){var t=r.legend.controls.getHTMLid(r.legend.controls.controls.list,"control-container");r.legend.display===r.getSetting("display")?(r.legend.controls.changeValue("list",r.getSetting("list"),!1),N()("#".concat(t," .select2-input")).blur()):r.legend.build()},this.legend.build()}},{key:"requests",value:function(){var t=[],e={location:this.stacks(),sex:[1,2]};return"cause"===this.getSetting("display")?e.cause=this.layers():e.paf=this.layers(),t.push(this.getParameters(e)),"years"===this.getSetting("scale")&&t.push(this.getParameters(U({},e,{extent:!0}))),t}},{key:"labels",value:function(){var e={};return this.stacks().forEach(function(t){e[t]=""}),e}},{key:"stacks",value:function(){return Y(this.getSetting("locations"))}},{key:"vals",value:function(){var t=this.stacks();return t.sort(this.sort(t))}},{key:"layers",value:function(){return this.getSetting("list")}},{key:"color",value:function(t){return this.assignColor(t)}},{key:"csv",value:function(){var r=this,s=this.getSetting("metric"),o=this.getSetting("unit"),c=this.getSetting("display"),l=this.getSetting("value"),u=this.getParameters(),t=["Location","Year","Age","Sex",this.metadata.display.cause.name];"cause"!==c&&t.push(this.metadata.display[c].name),t.push("Measure"),t.push("Value"),t.push("Lower bound"),t.push("Upper bound"),"expected"===l&&t.push("SDI value");var h=[];return this.stacks().forEach(function(a){[1,2].forEach(function(i){r.layers().forEach(function(t){var e=[],n=r.value({layer:t,stack:a,sex:i},!0);e.push(r.metadata.location[a].name),e.push(r.metadata.year[u.year].name),e.push(r.metadata.age[u.age].name),e.push(r.metadata.sex[i].name),e.push(r.metadata.cause["cause"===c?t:u.cause].name),"cause"!==c&&e.push(r.metadata.paf[t].name),e.push(r.metadata.measure[s][o].labels.map),e.push(n.m),e.push(n.l),e.push(n.u),"expected"===l&&r.metadata.sdi[a]&&r.metadata.sdi[a][u.year]&&e.push(r.metadata.sdi[a][u.year].sdi),h.push(e)})})}),[t].concat(h)}},{key:"data",value:function(i){var a=this,t=this.layers(),r=this.stacks();return t.map(function(e){var n={color:a.color(e),layer:e};return n.values=r.map(function(t){return{layer:n,stack:t,sex:i,value:a.value({layer:e,stack:t,sex:i})}}),n})}},{key:"value",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=U({},t),i=["value",e].concat(j.a.values(n)).join(":");if(void 0===this.cache[i]){n.location=n.stack,"cause"===this.getSetting("display")?n.cause=n.layer:n.paf=n.layer,delete n.layer,delete n.stack;var a=this.getValue(n);n.extent?this.cache[i]=a.max:this.cache[i]=e?a:j.a.max([0,a.m])}return this.cache[i]}},{key:"text",value:function(t){if("x"!==t)return"";var e=this.getSetting("metric"),n=this.getSetting("unit");return this.metadata.measure[e][n].labels.map}},{key:"resize",value:function(){var e=this,t=this.settings.container;N()(t.chart).css({height:"calc(100% - ".concat(N()(t.title).outerHeight(),"px)")}),N()(t.legend).css({height:"calc(100% - ".concat(N()(t.title).outerHeight(),"px)")}),j.a.entries(this.chart).forEach(function(t){t.value&&(t.value.settings.width=N()(e.settings.container[t.key]).width(),t.value.settings.height=N()(e.settings.container[t.key]).height(),t.value.resize())}),this.locations&&(this.locations.svg.attr("viewBox","0 0 ".concat(N()(t.l).width()," ").concat(N()(t.l).height())),this.locations.scale.rangeBands([0,N()(t.l).height()-45],.1,0),this.locations.label.call(this.locations.axis),this.locations.label.selectAll("text").attr("x",0))}},{key:"total",value:function(n){var i=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=["total",n].concat(j.a.values(a)).join(":");if(void 0===this.cache[t]){var e=this.layers().reduce(function(t,e){return t+i.value(U(a,{layer:e,stack:n}))},0);this.cache[t]=+"".concat(Math.round("".concat(e,"e+3")),"e-3")}return this.cache[t]}},{key:"scale",value:function(){var e=this,n=this.getSetting("scale")?this.getExtent():this.extent();j.a.values(this.chart).forEach(function(t){t.settings.scale.type="manual",t.settings.scale.min=0,t.settings.scale.max=n[1]||1,t.settings.scale.unit=e.getSetting("unit")})}},{key:"extent",value:function(){var n=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=["extent"].concat(j.a.values(i)).join(":");if(void 0===this.cache[t]){var a=this.stacks();this.cache[t]=j.a.extent(j.a.keys(this.chart).reduce(function(t,e){return t.concat(j.a.extent(a.map(function(t){return n.total(t,U(i,{sex:e}))})))},[]))}return this.cache[t]}},{key:"title",value:function(){var l=this;j.a.keys(this.chart).forEach(function(t){N()("".concat(l.settings.container.title,"-").concat(t)).empty();var e=[],n=l.getSetting("age"),i=l.getSetting("metric"),a=l.metadata.age[n],r=a.measure,s=(r=void 0===r?{}:r)[i],o=(s=void 0===s?{}:s).name,c=a.name;e.push(l.metadata.sex[t].label),e.push(o||c),e.push(l.metadata.year[l.getSetting("year")].name),e=e.join(", "),"value"===l.getSetting("dimension")&&(e+=" (".concat(Object(L.capitalize)(l.getSetting("value")),")")),N()("".concat(l.settings.container.title,"-").concat(t)).append(N()("<div/>").text(e))}),N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")}),N()(this.settings.container.legend).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")})}},{key:"sort",value:function(n){var i=this;return"rank"===this.getSetting("order")?function(t,e){return i.total(t,{sex:1})+i.total(t,{sex:2})-(i.total(e,{sex:1})+i.total(e,{sex:2}))}:function(t,e){return n.indexOf(t)-n.indexOf(e)}}},{key:"update",value:function(t){var e=this;if(this.cache={},this.loaded)if("list"===t.id)this.refresh();else{this.title();var n=this.vals(),i=this.labels();j.a.entries(this.chart).forEach(function(t){t.value.y.vals=n,t.value.y.labels=i,t.value.y.data=e.data(t.key),t.value.x.text=e.text("x")}),this.scale(),this.legend.update(),this.locations.scale.domain(n),this.locations.label.transition().duration(1e3).call(this.locations.axis).selectAll("text").attr("x",0),this.locations.label.selectAll("text").attr("x",0),j.a.entries(this.chart).forEach(function(t){t.value.update()})}}}])&&Rn(t.prototype,n),i&&Rn(t,i),e}();n(147);function Fn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Bn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Vn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="sbar",this.settings=t,this.settings.minBarHeight=15,this.settings.group="overview",this.history=[],this.$hover=null,this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){var i=this;this.updateHistory=function(){var t={level:i.getSetting("level"),category:i.getSetting("category")},e=i.history[i.history.length-1],n=i.history[i.history.length-2];n&&n.level===t.level&&n.category===t.category?i.history.pop():e&&e.level===t.level&&e.category===t.category||i.history.push(t),1<i.history.length?N()("".concat(i.settings.container.controls," .control-container-button-back")).show():N()("".concat(i.settings.container.controls," .control-container-button-back")).hide()},this.updateHistory();var n=this.hover.bind(this);N()("".concat(this.settings.container.chart," .stack")).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:10,liveEvents:!0,allowTipHover:!1,content:function(t,e){return n(N()(this),e,this.__data__)}}),N()(document).on("click","".concat(this.settings.container.chart,"-y-axis .tick"),function(t){var e=t.target.__data__;i.metadata.risk[e].children.length&&i.getSetting("level")!==i.metadata.risk[e].level+1&&(i.changeSetting("level",parseInt(i.metadata.risk[e].level,10)+1),i.changeSetting("category",e))})}},{key:"destroy",value:function(){N()(document).off("click","".concat(this.settings.container.chart,"-y-axis .tick")),N()("".concat(this.settings.container.chart," .stack")).poshytip("hide").poshytip("destroy")}},{key:"hover",value:function(t,e,n){var i=this;this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t;var a="",r=this.getSetting("metric"),s=this.getSetting("location"),o=this.getSetting("year"),c=this.getSetting("value");if(e.css({"border-color":n.layer.color}),a+="".concat(this.metadata.cause[n.layer.layer].name,"<br/>"),c.isIn(["expected","ratio"])&&this.metadata.sdi[s]&&this.metadata.sdi[s][o]){var l=this.metadata.sdi[s][o].sdi;a+="<b>SDI:</b> ".concat(l,"<br/>")}return a+="<b>Attributable risk:</b> ".concat(this.metadata.risk[n.stack].name,"<br/>"),[an,rn,sn].forEach(function(t){var e=$(i.value({layer:n.layer.layer,stack:n.stack,unit:t},!0),{unit:t,metric:i.metadata.measure[r][t].labels.hover});a+="<b>".concat(i.metadata.unit[t].name,":</b> ").concat(e,"<br/>")}),a}},{key:"render",value:function(){var e=this;this.chart=new ve({container:this.settings.container.chart,animation:this.settings.animation,type:"sbar",height:N()(this.settings.container.chart).height(),width:N()(this.settings.container.chart).width(),margin:{top:10,left:200,right:10,bottom:40}}),this.title(),this.chart.y.vals=this.stacks(),this.chart.y.labels=this.labels(),this.chart.y.data=this.data(),this.chart.x.text=this.text("x"),this.scale(),this.sort(),this.resize(),this.chart.render(),j.a.selectAll("".concat(this.settings.container.chart,"-y-axis .tick text")).style("text-decoration",function(t){return e.metadata.risk[t].children.length?"underline":"inherit"}).style("cursor",function(t){return e.metadata.risk[t].children.length?"pointer":"inherit"}),this.legend(),N()(this.settings.container.chart).append(N()("<div/>",{class:"list-label"})),this.loaded=!0}},{key:"legend",value:function(){var a=this;this.legend={controls:{}},this.legend.build=function(){var t=a.settings,n=t.container,e=t.chart;N()(n.legend).empty(),N()(n.legend).append(N()("<div>").attr("id","".concat(n.legend.replace("#",""),"-controls")).attr("class","".concat(n.legend.replace("#",""),"-controls"))),a.legend.controls=new jn({id:"legend-".concat(e),container:"".concat(n.legend,"-controls"),update:function(){},controls:{group:{id:"group",type:"select",options:function(){return[{id:"overview",text:"Overview"}].concat(a.metadata.groups.cause.overview.map(function(t){return{id:t,text:a.metadata.cause[t].name}}).reverse())},change:function(t,e){var n=a.metadata.groups.cause[e];e&&a.changeSetting("group",e),a.legend.controls.changeValue("list",[]),a.legend.controls.changeSetting("list",n),a.legend.controls.changeValue("group","")},settings:{width:"100%",placeholder:"Switch cause group",dropdownCssClass:"legend-drop",formatSelection:function(t,e){return N()(e).addClass("select2-default"),"Switch cause group"}}},list:{id:"list",type:"tags",choiceSelected:function(t){var e,n=a.metadata.cause[t.id];n.children&&n.children.length&&(e=n.children.map(function(t){return t.cause_id})),e&&(a.legend.controls.changeValue("list",[]),a.legend.controls.changeSetting("list",e.reverse()))},settings:{width:"100%",query:function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.term,l=void 0===n?"":n,u=a.getSetting("list"),h=(t=[]).concat.apply(t,$n(u.map(function(t){return a.metadata.cause[t].parents}))),i=function s(t,o){var c=[];return j.a.values(t).forEach(function(t){var e=t.cause,n=t.name,i=t.medium_name,a=t.cause_id,r=t.children;"".concat(e," ").concat(n).toLowerCase().includes(l.toLowerCase())&&c.push({id:a,text:"".concat(e," ").concat(n),short:i,bold:!!r.length,distance:o,disabled:h.includes(a)}),r.length&&!u.includes(a)&&(c=c.concat(s(r,o+1)))}),c}(a.hierarchy.causes,0);return e.callback?e.callback({results:i}):i},maximumSelectionSize:a.settings.maxSelection,dropdownCssClass:"legend-drop",formatSelection:function(t,e){var n=a.metadata.cause[t.id],i=a.color(t.id);return N()(e).parent().htmlClean(),i&&N()(e).parent().css({"border-left-color":i}).toggleClass("children",!(!n.children||!n.children.length)),t.short},formatResult:function(t,e){return N()(e).css({"font-weight":t.bold?"bold":"","padding-left":5*t.distance}),t.text},dropdownCss:function(){var t=a.legend.controls.controls.list,e=N()("#".concat(a.legend.controls.getHTMLid(t,"control-container")," .select2-input")),n=e.offset().top+e.outerHeight(!0);return N()("#select2-drop").removeClass("select2-drop-above"),{top:n,bottom:"","z-index":10001}},searchInputPlaceholder:"Add cause",placeholder:"Add cause"},value:function(t,e){a.changeSetting("list",e.map(function(t){return parseInt(t,10)}))},refresh:function(t){var e=a.legend.controls.getHTMLid(t,"control"),n=N()("#s2id_".concat(e," .select2-choices"));n.children().each(function(t,e){n.prepend(e)})},change:function(t,e){e.length?N()("".concat(n.legend,"-controls .control-button-clear")).show():N()("".concat(n.legend,"-controls .control-button-clear")).hide(),a.update(t,e)}},clear:{id:"clear",type:"button",text:"Clear selection",change:function(){a.legend.controls.changeSetting("list",[])}}},settings:{gaCategory:"GBD Compare"}});var i=a.legend.controls.getHTMLid(a.legend.controls.controls.list,"control-container");a.legend.controls.changeValue("list",a.getSetting("list")),N()("#".concat(i," .select2-input")).attr("placeholder","Add cause").blur(),N()("#legend-".concat(e,"-impairment-control-container-select-group")).hide(),a.legend.update()},this.legend.update=function(){var t=a.legend.controls.getHTMLid(a.legend.controls.controls.list,"control-container");a.legend.controls.changeValue("list",a.getSetting("list"),!1),N()("#".concat(t," .select2-input")).blur()},this.legend.build()}},{key:"requests",value:function(){var t=this.getSetting("scale"),e=this.getSetting("unit"),n=this.getSetting("age"),i=this.layers(),a=this.stacks();return[this.getParameters({cause:i,paf:a,unit:[an,rn,sn]})].concat($n(e==rn?[this.getParameters({data:"cause",cause:nn,unit:27==n?sn:an})]:[]),$n("years"==t?[this.getParameters({cause:i,paf:a,extent:!0})]:[]))}},{key:"labels",value:function(){var e=this,n={};return this.stacks().forEach(function(t){n[t]=e.metadata.risk[t].short_name}),n}},{key:"stacks",value:function(){var e=this.getSetting("level"),n=this.getSetting("category");return j.a.values(this.metadata.risk).filter(function(t){return(t.level===e||e>t.level&&0===t.children.length)&&t.parents&&(!t.parents.length||t.parents.includes(parseInt(n,10)))}).map(function(t){return t.paf_id})}},{key:"layers",value:function(){return this.getSetting("list")}},{key:"color",value:function(t){return this.assignColor(t)}},{key:"csv",value:function(){var r=this,s=this.getSetting("metric"),o=this.getSetting("value"),c=this.getParameters(),t=["Location","Year","Age","Sex",this.metadata.display.cause.name,this.metadata.display.risk.name,"Measure","Value","Lower bound","Upper bound"];"expected"===o&&t.push("SDI value");var l=[];return this.layers().forEach(function(a){r.stacks().forEach(function(i){[an,rn,sn].forEach(function(t){var e=[],n=r.value({layer:a,stack:i,unit:t},!0);e.push(r.metadata.location[c.location].name),e.push(r.metadata.year[c.year].name),e.push(r.metadata.age[c.age].name),e.push(r.metadata.sex[c.sex].name),e.push(r.metadata.cause[a].name),e.push(r.metadata.risk[i].name),e.push(r.metadata.measure[s][t].labels.map),e.push(n.m),e.push(n.l),e.push(n.u),"expected"===o&&r.metadata.sdi[c.location]&&r.metadata.sdi[c.location][c.year]&&e.push(r.metadata.sdi[c.location][c.year].sdi),l.push(e)})})}),[t].concat(l)}},{key:"data",value:function(){var i=this;return this.layers().map(function(e){var n={color:i.color(e),layer:e};return n.values=i.stacks().map(function(t){return{layer:n,stack:t,value:i.value({layer:e,stack:t})}}),n})}},{key:"value",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=N.a.extend({},t);n.cause=n.layer,n.paf=n.stack,delete n.layer,delete n.stack;var i=n.unit;(void 0===i?this.getSetting("unit"):i)===rn&&(n=Object(L.merge)(n,{unit:"ppt"}));var a=this.getValue(n);return n.extent?a.max:e?a:j.a.max([0,a.m])}},{key:"text",value:function(t){if("x"!==t)return"";var e=this.getSetting("metric"),n=this.getSetting("unit");return this.metadata.measure[e][n].labels.map}},{key:"resize",value:function(){var n=this,t=this.settings.container;if(N()(t.chart).css({height:"calc(100% - ".concat(N()(t.title).outerHeight(),"px)")}),N()(this.settings.container.legend).css({height:"calc(100% - ".concat(N()(t.title).outerHeight(),"px)")}),this.chart){var e=N()(t.chart).width(),i=N()(t.chart).height(),a=this.settings.minBarHeight;this.chart.settings.width=e,this.chart.settings.height=i,this.chart.settings.limit=Math.ceil(i/a);var r=j.a.values(this.labels());this.chart.settings.margin.left=j.a.max(r.filter(function(t,e){return e<n.chart.settings.limit-1}).map(function(t){return"".concat(t).width()+20})),N()("".concat(this.settings.container.chart," .list-label")).text("".concat(j.a.min([r.length,this.chart.settings.limit])," of ").concat(r.length)).css({width:this.chart.settings.margin.left}),this.chart.y.data=this.data(),this.chart.resize()}}},{key:"total",value:function(e){var n=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=0;return this.layers().forEach(function(t){a+=n.value(N.a.extend(i,{layer:t,stack:e}))}),a}},{key:"extent",value:function(e){var n=this;return[0,j.a.max(this.stacks().map(function(t){return n.total(t,e)}))]}},{key:"scale",value:function(){if(this.getSetting("scale")){this.chart.settings.scale.type="manual";var t=Fn(this.getExtent(),2);this.chart.settings.scale.max=t[1]}else this.chart.settings.scale.type="auto",this.chart.settings.scale.min=0,this.chart.settings.scale.max=1;this.chart.settings.scale.unit=this.getSetting("unit")}},{key:"title",value:function(){N()(this.settings.container.title).empty();var t=[],e=this.getSetting("age"),n=this.getSetting("metric"),i=this.metadata.age[e],a=i.measure,r=(a=void 0===a?{}:a)[n],s=(r=void 0===r?{}:r).name,o=i.name;t.push(this.metadata.location[this.getSetting("location")].name),t.push(this.metadata.sex[this.getSetting("sex")].label),t.push(s||o),t.push(this.metadata.year[this.getSetting("year")].name),t=t.join(", "),"value"===this.getSetting("dimension")&&(t+=" (".concat(Object(L.capitalize)(this.getSetting("value")),")")),N()(this.settings.container.title).append(N()("<div/>").text(t)),N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")})}},{key:"sort",value:function(){var a=this;"rank"===this.getSetting("order")?this.chart.y.vals=this.stacks().sort(function(t,e){return a.total(e)-a.total(t)}):this.chart.y.vals=this.stacks().sort(function(t,e){var n=a.labels()[t].toLowerCase(),i=a.labels()[e].toLowerCase();return n<i?-1:i<n?1:0})}},{key:"update",value:function(t){var e=this;if("back"===t.id){var n=this.history[this.history.length-2];this.changeSetting("level",n.level),this.changeSetting("category",n.category)}return(t.id.includes("level")||t.id.includes("category")||"back"===t.id)&&this.updateHistory(),"back"===t.id||"list"===t.id?this.refresh():(this.chart&&(this.title(),this.chart.y.vals=this.stacks(),this.chart.y.labels=this.labels(),this.chart.y.data=this.data(),this.chart.x.text=this.text("x"),this.scale(),this.sort(),this.resize(),this.legend.update(),this.chart.update(),j.a.selectAll("".concat(this.settings.container.chart,"-y-axis .tick text")).style("text-decoration",function(t){return e.metadata.risk[t].children.length?"underline":"inherit"}).style("cursor",function(t){return e.metadata.risk[t].children.length?"pointer":"inherit"})),null)}}])&&Bn(t.prototype,n),i&&Bn(t,i),e}();n(148);function qn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Un(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Yn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Gn=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="scol",this.settings=t,this.settings.group="overview",this.$hover=null,this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.values={},this.values.year=j.a.keys(this.metadata.year),this.values.sex=j.a.keys(this.metadata.sex),this.values.age=j.a.values(this.metadata.age).filter(function(t){return t.plot}).map(function(t){return t.age_id});var n=this.hover.bind(this);N()("".concat(this.settings.container.chart," .stack")).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:10,liveEvents:!0,allowTipHover:!1,content:function(t,e){return n(N()(this),e,this.__data__)}})}},{key:"destroy",value:function(){this.$hover&&this.$hover.poshytip("hide"),N()("".concat(this.settings.container.chart," .stack")).poshytip("hide").poshytip("destroy")}},{key:"hover",value:function(t,e,n){this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t;var i=this.getSetting("metric"),a=this.getSetting("unit"),r=this.getSetting("location"),s=this.getSetting("year"),o=this.getSetting("value"),c="";if(e.css({"border-color":n.layer.color}),"risk"===this.getSetting("display")&&"advanced"===this.getSetting("controls")){var l=this.metadata.cause[this.getSetting("cause")],u=this.metadata.risk[n.layer.layer];c+="".concat(l.name," attributable to ").concat(u.name,"<br/>")}else{var h=this.metadata[this.getSetting("display")][n.layer.layer];c+="".concat(h.name,"<br/>")}switch(this.getSetting("scol")){case"year":s=n.stack,c+="<b>Year:</b> ".concat(this.metadata.year[s].name,"<br/>");break;case"age":c+="<b>Age:</b> ".concat(this.metadata.age[n.stack].name,"<br/>");break;case"sex":c+="<b>Sex:</b> ".concat(this.metadata.sex[n.stack].name,"<br/>");break;case"location":r=n.stack,c+="<b>Location:</b> ".concat(this.metadata.location[r].name,"<br/>")}if(["expected","ratio"].includes(o)&&this.metadata.sdi[r]&&this.metadata.sdi[r][s]){var d=this.metadata.sdi[r][s].sdi;c+="<b>SDI:</b> ".concat(d,"<br/>")}var f=$(this.value({layer:n.layer.layer,stack:n.stack},!0),{unit:a,etric:this.metadata.measure[i][a].labels.hover});return c+="<b>".concat(this.metadata.unit[a].name,":</b> ").concat(f,"<br/>")}},{key:"title",value:function(){N()(this.settings.container.title).empty();var t=[],e=this.getSetting("age"),n=this.getSetting("metric"),i=this.metadata.age[e],a=i.measure,r=(a=void 0===a?{}:a)[n],s=(r=void 0===r?{}:r).name,o=i.name;"location"!==this.getSetting("scol")&&t.push(this.metadata.location[this.getSetting("location")].name),"sex"!==this.getSetting("scol")&&t.push(this.metadata.sex[this.getSetting("sex")].label),"age"!==this.getSetting("scol")&&t.push(s||o),"year"!==this.getSetting("scol")&&t.push(this.metadata.year[this.getSetting("year")].name),t=t.join(", "),"value"===this.getSetting("dimension")&&(t+=" (".concat(Object(L.capitalize)(this.getSetting("value")),")")),N()(this.settings.container.title).append(N()("<div/>").text(t));var c=N()("".concat(this.settings.container.controls," .control-container-buttonset-scol"));N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight()+(c.is(":visible")?c.outerHeight(!0):0),"px)")})}},{key:"render",value:function(){this.chart=new ve({container:this.settings.container.chart,animation:this.settings.animation,type:"scol",height:N()(this.settings.container.chart).height(),width:N()(this.settings.container.chart).width()}),this.title(),this.resize(),this.chart.x.labels=this.labels(),this.chart.x.vals=this.stacks(),this.chart.x.data=this.data(),this.chart.y.text=this.text("y"),this.chart.settings.margin.bottom=j.a.max(j.a.values(this.labels()).map(function(t){var e=Math.floor("".concat(t).width())+5;return Math.ceil(15*Math.abs(Math.cos(-45))+e*Math.abs(Math.sin(-45)))})),this.scale(),this.sort(),this.chart.render(),this.legend(),this.loaded=!0}},{key:"legend",value:function(){var o=this;this.legend={controls:{}},this.legend.build=function(){o.legend.display=o.getSetting("display"),N()(o.settings.container.legend).empty();var t=o.settings.container.legend.replace("#","");N()(o.settings.container.legend).append(N()("<div>").attr("id","".concat(t,"-controls-").concat(o.legend.display)).attr("class","".concat(t,"-controls"))),o.legend.controls=new jn({id:"legend-".concat(o.settings.chart,"-").concat(o.legend.display),container:"".concat(o.settings.container.legend,"-controls-").concat(o.legend.display),update:function(){},controls:{group:{id:"group",type:"select",options:function(){var e=o.legend.display,t=o.metadata.groups[e].overview.map(function(t){return{id:t,text:o.metadata[e][t].name}}).reverse();return"etiology"===e?t:"risk"===e?[{id:"overview",text:"Overview level 1"},{id:"overview-2",text:"Overview level 2"}].concat(t):[{id:"overview",text:"Overview"}].concat(t)},change:function(t,e){var n=o.metadata.groups[o.legend.display][e];e&&o.changeSetting("group",e),o.legend.controls.changeValue("list",[]),o.legend.controls.changeSetting("list",n),o.legend.controls.changeValue("group","")},settings:{width:"100%",placeholder:"Switch ".concat(o.legend.display," group"),dropdownCssClass:"legend-drop",formatSelection:function(t,e){return N()(e).addClass("select2-default"),"Switch ".concat(o.legend.display," group")}}},list:{id:"list",type:"tags",choiceSelected:function(t){var e=t.id,n=o.legend.display,i=o.metadata[n][e].children,a=(void 0===i?[]:i).map(function(t){var e=t.cause_id,n=t.paf_id;return e||n});a.length&&(o.legend.controls.changeValue("list",[]),o.legend.controls.changeSetting("list",a.reverse()))},settings:{width:"100%",query:function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=e.term,g=void 0===n?"":n,i=e.callback,a=o.legend.display,r=o.getSetting("list"),v=(t=[]).concat.apply(t,Un(r.map(function(t){return o.metadata[a][t].parents}))),s=it("cause"===a?o.hierarchy.causes:o.hierarchy[a],function(t,e,n){var i=e.cause,a=void 0===i?"":i,r=e.name,s=e.medium_name,o=e.short_name,c=e.enabled,l=void 0===c||c,u=e.cause_id,h=e.paf_id,d=e.children,f=n.length,p=u||h;return"".concat(a," ").concat(r).toLowerCase().includes(g.toLowerCase())&&t.push({id:p,distance:f,text:"".concat(a," ").concat(r),short:s||o,bold:!!d.length,disabled:!l||v.includes(p)}),t},[],function(t){var e=t.cause_id,n=t.paf_id,i=t.children,a=e||n;return r.includes(a)?[]:i});return i?i({results:s}):s},maximumSelectionSize:o.settings.maxSelection,dropdownCssClass:"legend-drop",formatSelection:function(t,e){var n=t.id,i=t.short,a=o.metadata[o.legend.display][n].children,r=void 0===a?[]:a,s=o.color(n);return N()(e).parent().htmlClean(),s&&N()(e).parent().css({"border-left-color":s}).toggleClass("children",!!r.length),i},formatResult:function(t,e){var n=t.bold,i=t.distance,a=t.text;return N()(e).css({"font-weight":n?"bold":"","padding-left":5*i}),a},dropdownCss:function(){var t=o.legend.controls,e=t.controls.list,n=t.getHTMLid(e,"control-container"),i=N()("#".concat(n," .select2-input")),a=i.offset().top+i.outerHeight(!0);return N()("#select2-drop").removeClass("select2-drop-above"),{top:a,bottom:"","z-index":10001}},searchInputPlaceholder:"Add ".concat(o.legend.display),placeholder:"Add ".concat(o.legend.display)},value:function(t,e){o.changeSetting("list",e.map(function(t){return parseInt(t,10)}))},refresh:function(t){var e=o.legend.controls.getHTMLid(t,"control"),n=N()("#s2id_".concat(e," .select2-choices"));n.children().each(function(t,e){n.prepend(e)})},change:function(t,e){var n=o.settings.container.legend,i="".concat(n,"-controls-").concat(o.legend.display);e.length?N()("".concat(i," .control-button-clear")).show():N()("".concat(i," .control-button-clear")).hide(),o.update(t,e)}},clear:{id:"clear",type:"button",text:"Clear selection",change:function(){o.legend.controls.changeSetting("list",[])}}},settings:{gaCategory:"GBD Compare"}});var e=o.legend.controls.getHTMLid(o.legend.controls.controls.list,"control-container");o.legend.controls.changeValue("list",o.getSetting("list")),N()("#".concat(e," .select2-input")).attr("placeholder","Add ".concat(o.legend.display)).blur(),N()("#legend-".concat(o.settings.chart,"-impairment-control-container-select-group")).hide(),o.legend.update()},this.legend.update=function(){var t=o.legend.controls.getHTMLid(o.legend.controls.controls.list,"control-container");o.legend.display===o.getSetting("display")?(o.legend.controls.changeValue("list",o.getSetting("list"),!1),N()("#".concat(t," .select2-input")).blur()):o.legend.build()},this.legend.build()}},{key:"requests",value:function(){var t=[],e={};return e[this.getSetting("scol")]=this.stacks(),"cause"===this.getSetting("display")?e.cause=this.layers():e.paf=this.layers(),t.push(this.getParameters(e)),"years"===this.getSetting("scale")&&t.push(this.getParameters(U({},e,{extent:!0}))),t}},{key:"labels",value:function(){var e=this,n={};switch(this.getSetting("scol")){case"year":this.values.year.forEach(function(t){n[t]=e.metadata.year[t].name});break;case"age":this.values.age.forEach(function(t){n[t]=e.metadata.age[t].name});break;case"sex":this.values.sex.forEach(function(t){n[t]=e.metadata.sex[t].name});break;case"location":this.getSetting("locations").forEach(function(t){n[t]=e.metadata.location[t].short_name})}return n}},{key:"stacks",value:function(){return"location"===this.getSetting("scol")?this.getSetting("locations").slice():this.values[this.getSetting("scol")]}},{key:"layers",value:function(){return this.getSetting("list")}},{key:"color",value:function(t){return this.assignColor(t)}},{key:"csv",value:function(){var s=this,o=this.getSetting("scol"),c=this.getSetting("metric"),l=this.getSetting("unit"),u=this.getSetting("display"),h=this.getSetting("value"),d=this.getParameters(),t=["Location","Year","Age","Sex",this.metadata.display.cause.name];"cause"!==u&&t.push(this.metadata.display[u].name),t.push("Measure"),t.push("Value"),t.push("Lower bound"),t.push("Upper bound"),"expected"===h&&t.push("SDI value");var f=[];return this.layers().forEach(function(r){s.stacks().forEach(function(t){var e="location"===o?t:d.location,n="year"===o?t:d.year,i=[],a=s.value({layer:r,stack:t},!0);i.push(s.metadata.location[e].name),i.push(s.metadata.year[n].name),i.push(s.metadata.age["age"===o?t:d.age].name),i.push(s.metadata.sex["sex"===o?t:d.sex].name),i.push(s.metadata.cause["cause"===u?r:d.cause].name),"cause"!==u&&i.push(s.metadata.paf[r].name),i.push(s.metadata.measure[c][l].labels.map),i.push(a.m),i.push(a.l),i.push(a.u),"expected"===h&&s.metadata.sdi[e]&&s.metadata.sdi[e][n]&&i.push(s.metadata.sdi[e][n].sdi),f.push(i)})}),[t].concat(f)}},{key:"data",value:function(){var i=this;return this.layers().map(function(e){var n={color:i.color(e),layer:e,key:i.getSetting("scol")};return n.values=i.stacks().map(function(t){return{layer:n,stack:t,key:i.getSetting("scol"),value:i.value({layer:e,stack:t})}}),n})}},{key:"value",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=U({},t);"cause"===this.getSetting("display")?n.cause=n.layer:n.paf=n.layer,n[this.getSetting("scol")]=n.stack,delete n.layer,delete n.stack;var i=this.getValue(n);return n.extent?i.max:e?i:j.a.max([0,i.m])}},{key:"text",value:function(t){return"y"===t?this.metadata.measure[this.getSetting("metric")][this.getSetting("unit")].labels.map:""}},{key:"resize",value:function(){var t=N()("".concat(this.settings.container.controls," .control-container-buttonset-scol"));N()(this.settings.container.chart).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight()+(t.is(":visible")?t.outerHeight(!0):0),"px)")}),N()(this.settings.container.legend).css({height:"calc(100% - ".concat(N()(this.settings.container.title).outerHeight(),"px)")}),this.chart&&(this.chart.settings.width=N()(this.settings.container.chart).width(),this.chart.settings.height=N()(this.settings.container.chart).height(),this.chart.resize())}},{key:"total",value:function(n){var i=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=this.layers().reduce(function(t,e){return t+i.value(U(a,{layer:e,stack:n}))},0);return+"".concat(Math.round("".concat(t,"e+3")),"e-3")}},{key:"extent",value:function(e){var n=this;return[0,j.a.max(this.stacks().map(function(t){return n.total(t,e)}))]}},{key:"scale",value:function(){if(this.getSetting("scale")){this.chart.settings.scale.type="manual";var t=qn(this.getExtent(),2);this.chart.settings.scale.max=t[1]}else this.chart.settings.scale.type="auto",this.chart.settings.scale.min=0,this.chart.settings.scale.max=1;this.chart.settings.scale.unit=this.getSetting("unit")}},{key:"sort",value:function(){var n=this;"rank"===this.getSetting("order")?this.chart.x.vals.sort(function(t,e){return n.total(e)-n.total(t)}):("age"===this.getSetting("scol")&&this.chart.x.vals.sort(function(t,e){return n.metadata.age[t].sort-n.metadata.age[e].sort}),"year"===this.getSetting("scol")&&this.chart.x.vals.sort(function(t,e){return n.metadata.year[t].name-n.metadata.year[e].name}),"sex"===this.getSetting("scol")&&this.chart.x.vals.sort(function(t,e){return n.metadata.sex[t].sex_id-n.metadata.sex[e].sex_id}),"location"===this.getSetting("scol")&&(this.chart.x.vals=this.getSetting("locations")))}},{key:"update",value:function(t){this.chart&&("list"===t.id?this.refresh():(this.title(),"scol"===t.id&&this.chart.refreshScale(),this.chart.x.vals=this.stacks(),this.chart.x.labels=this.labels(),this.chart.x.data=this.data(),this.chart.y.text=this.text("y"),this.scale(),this.sort(),this.chart.settings.margin.bottom=j.a.max(j.a.values(this.labels()).map(function(t){var e="".concat(t).width();return Math.abs(e*Math.cos(37))+Math.abs(15*Math.sin(37))+10})),this.legend.update(),this.chart.update()))}}])&&Yn(t.prototype,n),i&&Yn(t,i),e}();n(149);function Kn(t){return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zn(t,e){return!e||"object"!==Kn(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jn(t,e){return(Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ti=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);return Zn(this,Qn(e).call(this,U({},{container:"#legend",width:1e3,height:60,margin:{right:20,left:20,top:4,bottom:0},scale:{unit:1,ticks:10},radius:7.5,class:"density-circle"},t)))}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jn(t,e)}(e,Ce),n=e,(i=[{key:"tickFormat",value:function(t){return F(this.scale,this.settings.scale.unit)(t)}},{key:"render",value:function(t){this.svg=j.a.select(this.settings.container).append("svg").attr({height:this.settings.height,width:this.settings.width}),this.scale=j.a.scale.linear().range([0,this.settings.width-(this.settings.margin.right+this.settings.margin.left)]),this.axis=j.a.svg.axis().scale(this.scale).ticks(this.settings.scale.ticks).orient("bottom").tickFormat(this.tickFormat.bind(this)).innerTickSize(3).outerTickSize(7),this.gradient=this.svg.append("svg:defs").append("svg:linearGradient").attr({id:"".concat(this.settings.container.split(" ")[0].replace("#",""),"-gradient"),x1:"0%",x2:"100%",y1:"0%",y2:"0%"}),this.group=this.svg.append("g").attr("transform","translate(".concat(this.settings.margin.left,", ").concat(this.settings.margin.top,")")),this.dotGroup=this.group.append("g").attr("class","dots").attr("transform","translate(0, 10)"),this.bar=this.group.append("g").attr("transform","translate(0, 20)").attr("class","color-bar").append("rect").attr({y:"0px",x:"0px",height:"15px",width:this.settings.width-(this.settings.margin.right+this.settings.margin.left),stroke:"none",fill:"url(#".concat(this.settings.container.split(" ")[0].replace("#",""),"-gradient)")}),this.labels=this.group.append("g").attr({transform:"translate(0, 40)",class:"axis"}).call(this.axis),this.update(t)}},{key:"update",value:function(t){var a=this,e=t.layers,n=t.animate,i=void 0===n||n;e&&(this.data=e);var r=this.colors[this.settings.scale.direction],s=this.extent(),o=this.domain(),c=s[0]-s[1],l=(s[0]-o[0])/c*100,u=100-(o[o.length-1]-s[1])/c*100;this.transition(this.gradient,i).attr({x1:"".concat(Number.isNaN(l)||!Number.isFinite(l)?0:l,"%"),x2:"".concat(Number.isNaN(u)||!Number.isFinite(u)?100:u,"%")}),this.axis.scale(this.scale.domain(s)),this.colorize.range(this.colors[this.settings.scale.direction]).domain(o);var h=this.data.reduce(function(t,i){return i.shape&&i.shape.features&&!1!==i.dots?t.concat(i.shape.features.reduce(function(t,e){if(e.data.value||0===e.data.value){var n=e.properties[a.settings.key]||e.properties.key;return e.layer=i,e.data=i.data&&i.data[n]?i.data[n]:{},t.concat([e])}return t},[])):t},[]);this.stops=this.gradient.selectAll("stop").data(r),this.dots=this.dotGroup.selectAll("circle").data(h,function(t){return t.properties[a.settings.key]}),this.stops.enter().append("svg:stop").attr({offset:function(t,e){return e/(r.length-1)},"stop-color":function(t){return t}}),this.dots.enter().append("circle").style("opacity",0).attr({r:function(){return a.settings.radius},cx:function(t){return a.scale(t.data.value)},class:function(t){return a.classes(t).join(" ")}}).call(this.styles.bind(this),!0),this.stops.exit().remove(),this.transition(this.dots.exit(),i).style("opacity",0).remove(),this.transition(this.stops,i).attr("stop-color",function(t){return t}),this.transition(this.dots,i).style("opacity",1).attr({cx:function(t){return a.scale(t.data.value)},class:function(t){return a.classes(t).join(" ")}}).call(this.styles.bind(this)),this.transition(this.labels,i).call(this.axis),this.nodes=this.dots,this.select(void 0,{update:!1})}},{key:"resize",value:function(t,e){var n=this;this.settings.width=t,this.settings.height=e;var i=this.settings,a=i.width,r=i.height,s=i.margin;this.svg.attr({height:r,width:a}),this.bar.attr("width",a-(s.right+s.left)),this.axis.scale(this.scale.range([0,a-(s.right+s.left)])),this.labels.call(this.axis),this.dots.attr("cx",function(t){return n.scale(t.data.value)})}}])&&Xn(n.prototype,i),a&&Xn(n,a),e}();function ei(t){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ni(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ii(t,e){return!e||"object"!==ei(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ai(t){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ri(t,e){return(ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var si=function(t){function n(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);return(e=ii(this,ai(n).call(this))).settings=Object(L.merge)({},{extent:[0,1],values:[!1,!1],domain:[!1,!1],format:function(t){return t}},t),e}var e,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ri(t,e)}(n,ye.a),e=n,(i=[{key:"render",value:function(t){var l=this;this.settings.extent=t.extent,this.filter=new jn({id:this.settings.chart,container:this.settings.container,update:function(t){l.update(t)},controls:{filter:{id:"filter",text:"Filter",type:"range-slider",min:0,max:1,step:1e-5,value:function(t){if(!l.filter)return t;var e=l.settings,n=e.extent,i=e.format,a=l.filter.getHTMLid(l.filter.controls.filter,"control"),r=j.a.scale.linear().domain([0,1]).range(n),s=N()("#".concat(a," .ui-slider-range"))[0].style,o=parseFloat(s.left.replace("%","")),c=parseFloat(s.width.replace("%",""));return N()("#".concat(a," .cover-left")).css({right:"".concat(100-o,"%")}),N()("#".concat(a," .cover-right")).css({left:"".concat(c+o,"%")}),i(r(t))},threshold:32,change:function(t,e){l.settings.values=e.slice()},default:[0,1]},set:{id:"set",type:"button",text:"Set scale",change:function(){l.settings.domain=l.settings.values.slice()}},reset:{id:"reset",type:"button",text:"Reset",change:function(){l.settings.values=[!1,!1],l.settings.domain=[!1,!1]}}},settings:{gaCategory:"GBD Compare"}});var e=this.filter.getHTMLid(this.filter.controls.filter,"control");N()("#".concat(e)).append(N()("<div>",{class:"cover-left"})).append(N()("<div>",{class:"cover-right"})).dragslider({animate:!1}),this.update()}},{key:"update",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this.settings,n=e.values,i=e.domain,a=e.extent,r=j.a.scale.linear().domain([0,1]).range(a);this.settings.values=[!1!==n[0]&&0<n[0]&&n[0]<1&&n[0],!1!==n[1]&&0<n[1]&&n[1]<1&&n[1]],this.settings.domain=[!1!==i[0]&&0<i[0]&&i[0]<1&&i[0],!1!==i[1]&&0<i[1]&&i[1]<1&&i[1]],this.filter.changeValue("filter",[this.settings.values[0]||0,this.settings.values[1]||1]);var s=!1===this.settings.values[0]&&!1===this.settings.values[1]&&!1===this.settings.domain[0]&&!1===this.settings.domain[1],o=this.filter.getHTMLid(this.filter.controls.reset,"control");N()("#".concat(o)).prop("disabled",s),this.emit("filter",{values:[!1!==this.settings.values[0]&&r(this.settings.values[0]),!1!==this.settings.values[1]&&r(this.settings.values[1])],domain:[!1!==this.settings.domain[0]&&r(this.settings.domain[0]),!1!==this.settings.domain[1]&&r(this.settings.domain[1])],action:t.id})}},{key:"extent",value:function(t){Object(L.isEqual)(t,this.settings.extent)||(this.settings.extent=t,this.filter&&this.update())}}])&&ni(e.prototype,i),a&&ni(e,a),n}();function oi(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(t){li(e,t,n[t])})}return e}function li(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ui(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var hi=function(){function s(t,e){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);this.topology=e,this.cache={},this.settings=Object(L.merge)({},{legend:!1,chart:!1,filter:!1},t),this.components={};var n=this.settings,i=n.chart,a=n.legend,r=n.filter;this.components.chart=new Pe(i),a&&(this.components.legend=new ti(a)),r&&(this.components.filter=new si(ci({},r,{extent:this.components.chart.extent()})),this.components.filter.on("filter",function(t){var e=t.values,n=t.domain,i=t.action,a=o.filter(),r=o.domain(),s=!1;Object(L.isEqual)(e,a)||(o.filter(e,{update:!1}),s=!0),Object(L.isEqual)(n,r)||(o.domain(n,{update:!1}),s=!0),s&&o.update({animate:"filter"!==i})})),this.feature=Object(L.memoize)(function(t){return c(o.topology,t.topology)},function(t){return t.topology})}var t,e,n;return t=s,(e=[{key:"on",value:function(t,e){this.components.chart&&this.components.chart.on(t,e),this.components.legend&&this.components.legend.on(t,e),this.components.filter&&this.components.filter.on(t,e)}},{key:"render",value:function(t){var e=t.layers,n=t.selected,i=t.direction,a=t.extent;e&&(t.layers=this.layers(e,n)),n&&this.select(n,{update:!1}),i&&this.direction(i,{update:!1}),a&&this.extent(a,{update:!1}),this.components.chart&&this.components.chart.render(t),this.components.legend&&this.components.legend.render(t),this.components.filter&&this.components.filter.render({extent:this.components.chart.extent()})}},{key:"update",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.layers,n=t.selected,i=t.direction,a=t.extent;e&&(t.layers=this.layers(e,n)),n&&this.select(n,{update:!1}),i&&this.direction(i,{update:!1}),a&&this.extent(a,{update:!1}),this.components.chart&&this.components.chart.update(t),this.components.legend&&this.components.legend.update(t),this.components.filter&&this.components.filter.extent(this.components.chart.extent())}},{key:"resize",value:function(t,e){this.components.chart&&this.components.chart.resize(t.width,t.height),this.components.legend&&this.components.legend.resize(e.width,e.height)}},{key:"zoom",value:function(t,e){this.components.chart&&this.components.chart.zoom(t,e)}},{key:"select",value:function(t,e){this.components.chart&&this.components.chart.select(t,e),this.components.legend&&this.components.legend.select(t,e)}},{key:"direction",value:function(t,e){this.components.chart&&this.components.chart.direction(t,e),this.components.legend&&this.components.legend.direction(t,e)}},{key:"unit",value:function(t,e){this.components.chart&&this.components.chart.unit(t,e),this.components.legend&&this.components.legend.unit(t,e)}},{key:"filter",value:function(t,e){if(this.components.chart){if(!t)return this.components.chart.settings.filter;this.components.chart.filter(t,e)}if(this.components.legend){if(!t)return this.components.legend.settings.filter;this.components.legend.filter(t,e)}}},{key:"domain",value:function(t,e){if(this.components.chart){if(!t)return this.components.chart.settings.scale.domain;this.components.chart.domain(t,e)}if(this.components.legend){if(!t)return this.components.legend.settings.scale.domain;this.components.legend.domain(t,e)}}},{key:"extent",value:function(t,e){this.components.chart&&this.components.chart.extent(t,e),this.components.legend&&this.components.legend.extent(t,e),this.components.filter&&this.components.filter.extent(t,e)}},{key:"layers",value:function(t,e){var n=this,i={type:"GeometryCollection",geometries:[]};return t.map(function(t){return i.geometries.push(t.topology),ci({},t,{shape:n.feature(t)})}).concat(this.meshLayers(i,e))}},{key:"meshLayers",value:function(t){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=function(t){return c(t,{type:"GeometryCollection",geometries:x.apply(this,arguments)})}(this.topology,t,function(){for(var i=[],a=[],t=["borders"],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(t){var e=t.properties;e.disputes&&e.disputes.length?i.push.apply(i,oi(e.disputes)):a.push(e.location_id)});var s=1===n.length,o=a.every(function(t){return i.includes(t)}),c=l.some(function(t){var e=a.includes(t),n=i.includes(t);return e&&!n||!e&&n});return!s&&o&&t.push("disputed"),c&&t.push("selected"),t.join(" ")});return e.features=e.features.map(function(t){var e=t.properties.tag;return ci({},t,{properties:{key:e,class:e}})}),[{key:"borders",shape:e}]}}])&&ui(t.prototype,e),n&&ui(t,n),s}();function di(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function fi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var pi=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="map",this.settings=t,this.selector={},this.$hover=null,this.cache={},this.loaded=!1,this.dragging=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){var r=this,t=this.settings.container;N()(t.chart).css({height:"100%"}),N()(t.legend).css("height","").append(N()("<div/>",{class:"inner"})),this.settings.container.legend="".concat(t.legend," .inner"),this.commonwealth=[],this.metadata.groups.locations[44534]&&(this.commonwealth=this.metadata.groups.locations[44534].locations.reduce(function(t,e){return t.concat(r.metadata.groups.locations[e].locations)},[]));var a=j.a.entries(this.topology.objects).filter(function(t){return!t.key.includes("disputes")}).sort(function(t,e){return t.key-e.key});this.cache.locations=a.reduce(function(t,e,n){var i=n+1;return t[i]=a.slice(0,i).reduce(function(t,e){var n=e.value,a=[],i=n.geometries.reduce(function(t,e){var n=e.properties,i=(n=void 0===n?{}:n).location_id;return r.metadata.location[i]&&(t.push(i),a.push(r.metadata.location[i].parent)),t},[]);return t.filter(function(t){return!a.includes(t)}).concat(i)},[]),t},{}),this.selector.hover="\n      ".concat(t.chart," .location-path:not(.disputed), \n      ").concat(t.legend," .density-circle\n    "),this.selector.click="\n      ".concat(t.legend," .density-circle, \n      ").concat(t.chart," .location-path:not(.disputed)\n    "),this.selector.dblclick="".concat(t.legend," .density-circle");var n=this.hover.bind(this);N()(this.selector.hover).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:10,liveEvents:!0,allowTipHover:!1,content:function(t,e){return n(N()(this),e,this.__data__)}}),N()(document).on("mousedown",t.chart,function(){r.dragging=!1}).on("mousemove",t.chart,function(){r.dragging=!0}).on("click",this.selector.click,function(t){var e=t.target;if(!r.dragging){var n=e.__data__.properties.location_id,i=r.locations();n&&i.includes(n)&&(r.changeSetting("location",n),r.update({id:"location"},n))}r.dragging=!1}).on("dblclick",this.selector.dblclick,function(t){var e=t.target.__data__.properties.location_id;r.chart.zoom("to",e)})}},{key:"destroy",value:function(){var t=this.settings.container;N()(document).off("mousedown",t.chart).off("mousemove",t.chart).off("click",this.selector.click).off("dblclick",this.selector.dblclick),N()(this.selector.hover).poshytip("destroy")}},{key:"render",value:function(){var e=this;this.title(),this.chart=new hi({chart:{container:this.settings.container.chart,animation:this.settings.animation,width:N()(this.settings.container.chart).width(),height:N()(this.settings.container.chart).height(),zoom:this.settings.zoom,proportion:"india"===this.getSetting("type")?.85:.95},legend:{animation:this.settings.animation,container:this.settings.container.legend,width:N()(this.settings.container.legend).width()},filter:{chart:this.settings.chart,container:this.settings.container.legend,format:function(t){return 2===e.getSetting("unit")||e.getSetting("change")?j.a.format(".0%")(t):j.a.format(".2s")(Math.round(t)).replace(".0","").replace("G","B")}}},this.topology),this.chart.on("zoom",function(t){e.changeValue("zoom",{scale:t.scale,translate:t.translate.slice()})});var t=this.getSetting("location"),n=(t instanceof Array?t:[t]).map(Number),i=this.metadata.metric[this.getSetting("metric")],a=this.scale(),r=i.direction?i.direction:"-";this.chart.render({layers:this.layers(),selected:n,direction:r,extent:a}),this.loaded=!0}},{key:"hover",value:function(t,e,n){this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t;var i="",a=K(["no-data","filtered"],n.classes)?"#ccc":n.style.fill;e.css({"border-color":a});var r=this.getSetting("year"),s=this.getSetting("years"),o=this.getSetting("value"),c=n.properties.location_id;if(void 0!==this.metadata.location[c]){var l=this.getSetting("metric"),u=this.getSetting("change"),h=u?2:this.getSetting("unit"),d=this.getValue(u?{unit:"chg",location:c}:{location:c});if(i+="".concat(this.metadata.location[c].name,"<br/>"),o.isIn(["expected","ratio"])&&this.metadata.sdi[c])if(u){if(this.metadata.sdi[c][s[0]]){var f=this.metadata.sdi[c][s[0]].sdi;i+="<b>SDI ".concat(s[0],":</b> ").concat(f,"<br/>")}if(this.metadata.sdi[c][s[1]]){var p=this.metadata.sdi[c][s[1]].sdi;i+="<b>SDI ".concat(s[1],":</b> ").concat(p,"<br/>")}}else if(this.metadata.sdi[c][r]){var g=this.metadata.sdi[c][r].sdi;i+="<b>SDI:</b> ".concat(g,"<br/>")}if("ratio"===o){var v=this.getValue(u?{unit:"chg",location:c,value:"expected"}:{location:c,value:"expected"}),m=this.getValue(u?{unit:"chg",location:c,value:"observed"}:{location:c,value:"observed"});if(u)i+="<b>Observed annual % change:</b> ".concat($(m,{unit:h}),"<br/>"),i+="<b>Expected annual % change:</b> ".concat($(v,{unit:h}),"<br/>"),i+="<b>Ratio:</b> ".concat($(d,{unit:1}),"<br/>");else{var y=this.metadata.unit[h].name.toLowerCase();i+="<b>Observed ".concat(y,":</b> ").concat($(m,{unit:h,metric:this.metadata.measure[l][h].labels.hover}),"<br/>"),i+="<b>Expected ".concat(y,":</b> ").concat($(v,{unit:h,metric:this.metadata.measure[l][h].labels.hover}),"<br/>"),i+="<b>O/E ratio:</b> ".concat($(d,{unit:1}),"<br/>")}}else i+=u?"<b>Annual % change:</b> ".concat($(d,{unit:h}),"<br/>"):"<b>".concat(this.metadata.unit[h].name,":</b> ").concat($(d,{unit:h,metric:this.metadata.measure[l][h].labels.hover}),"<br/>")}else i="No Data";return i}},{key:"title",value:function(){var e=this;N()(this.settings.container.title).empty();var t=this.getSetting("display");if("risk"===t&&"advanced"===this.getSetting("controls")){var n=this.metadata.cause[this.getSetting("cause")],i=this.metadata.risk[this.getSetting("risk")];N()(this.settings.container.title).append(N()("<div/>").text("".concat(n.name," attributable to ").concat(i.name)))}else if("sev"===t){var a=this.metadata.risk[this.getSetting("risk")];N()(this.settings.container.title).append(N()("<div/>").text(a.name))}else["le","hale","haqi"].includes(t)?N()(this.settings.container.title).append(N()("<div/>").text("")):N()(this.settings.container.title).append(N()("<div/>").text(this.metadata[t][this.getSetting(t)].name));var r=[],s=this.getSetting("age"),o=this.getSetting("metric"),c=this.metadata.age[s]||{},l=c.measure,u=(l=void 0===l?{}:l)[o],h=(u=void 0===u?{}:u).name,d=c.name;r.push(this.metadata.sex[this.getSetting("sex")].label),r.push(h||d),this.getSetting("change")&&r.push("Annual % change"),r.push(this.getSetting("change")?this.getSetting("years").map(function(t){return e.metadata.year[t].name}).join(" to "):this.metadata.year[this.getSetting("year")].name),r.push(this.metadata.measure[o][this.getSetting("unit")].labels.map),r=r.join(", "),"value"===this.getSetting("dimension")&&(r+=" (".concat(Object(L.capitalize)(this.getSetting("value")),")")),N()(this.settings.container.title).append(N()("<div/>").text(r))}},{key:"locations",value:function(){return this.cache.locations[this.getSetting("detail")]}},{key:"layers",value:function(){var o=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},l=this.getSetting("change"),u=this.getSetting("commonwealth"),t=this.getSetting("detail"),e=di(Array(t)).map(function(t,e){return"admin".concat(e)}).concat(["admin".concat(t-1,"_disputes")]),h=this.locations();return e.reduce(function(t,e){var n=o.topology.objects[e];if(n){var r=1/0,s=-1/0,i=n.geometries.reduce(function(t,e){var n=e.properties.location_id;if(h.includes(n)){var i={unit:l?"chg":void 0,location:n},a=o.getValue(function(a){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},e=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.forEach(function(t){var e,n,i;e=a,i=r[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i})}return a}({},c,i)).m;t[n]={value:a,color:u&&o.commonwealth.includes(n)?"#ccc":null},a<r&&(r=a),s<a&&(s=a)}return t},{});t.push({key:e.includes("disputes")?"disputes":e,topology:n,data:i,extent:[r,s]})}return t},[])}},{key:"requests",value:function(){var t=[];return this.getSetting("change")?t.push(this.getParameters({year:this.getSetting("years"),location:this.locations()})):t.push(this.getParameters({location:this.locations()})),"years"===this.getSetting("scale")&&t.push(this.getParameters({extent:!0,location:this.locations()})),t}},{key:"csv",value:function(){var i=this,a=this.getSetting("metric"),r=this.getSetting("unit"),s=this.getSetting("display"),o=this.getSetting("change"),c=this.getSetting("years"),l=this.getSetting("value"),u=this.getParameters(),t=["Location","Year","Age","Sex"],h=s.isIn(["cause","risk","etiology","impairment"]),d=s.isIn(["risk","etiology","impairment"]);h?t.push(this.metadata.display.cause.name):"sev"===s&&t.push(this.metadata.display.risk.name),d&&t.push(this.metadata.display[s].name),t.push("Measure"),t.push("Value"),t.push("Lower bound"),t.push("Upper bound"),["expected","ratio"].includes(l)&&(o?(t.push("SDI value ".concat(c[0])),t.push("SDI value ".concat(c[1]))):t.push("SDI value"));var e=(this.getSetting("commonwealth")?this.commonwealth:this.locations()).map(function(t){var e=[];e.push(i.metadata.location[t].name),e.push(o?c.map(function(t){return i.metadata.year[t].name}).join(" to "):i.metadata.year[u.year].name),e.push(i.metadata.age[u.age].name),e.push(i.metadata.sex[u.sex].name),h?e.push(i.metadata.cause[u.cause].name):"sev"===s&&e.push(i.metadata.risk[u.paf].name),d&&e.push(i.metadata[s][u.paf].name),e.push(o?"".concat(i.metadata.measure[a][r].labels.treemap," annual % change"):i.metadata.measure[a][r].labels.map);var n=i.getValue(U({},o?{unit:"chg",location:t}:{location:t}));return e.push(n.m),e.push(n.l),e.push(n.u),["expected","ratio"].includes(l)&&i.metadata.sdi[t]&&(o?(i.metadata.sdi[t][c[0]]&&e.push(i.metadata.sdi[t][c[0]].sdi),i.metadata.sdi[t][c[1]]&&e.push(i.metadata.sdi[t][c[1]].sdi)):i.metadata.sdi[t][u.year]&&e.push(i.metadata.sdi[t][u.year].sdi)),e});return[t].concat(e)}},{key:"resize",value:function(){var t={width:N()(this.settings.container.chart).width(),height:N()(this.settings.container.chart).height()},e={width:N()(this.settings.container.legend).width(),height:N()(this.settings.container.legend).height()};this.chart.resize(t,e)}},{key:"unit",value:function(){return this.getSetting("change")?2:this.getSetting("unit")}},{key:"extent",value:function(t){return j.a.extent(this.layers(t).reduce(function(t,e){return t.concat(e.extent)},[]))}},{key:"scale",value:function(){var t=[!1,!1];if(this.getSetting("scale"))t=this.getExtent({location:this.locations()});else if(this.getSetting("change")){var e=j.a.max(this.extent().map(Math.abs));t=[-e,e]}return t}},{key:"update",value:function(t){"controls"===t.id&&this.resize();var e=this.getSetting("location"),n=(e instanceof Array?e:[e]).map(Number),i=this.metadata.metric[this.getSetting("metric")],a=this.scale(),r=i.direction?i.direction:"-";this.title(),this.chart.update({layers:this.layers(),selected:n,direction:r,extent:a})}}])&&fi(t.prototype,n),i&&fi(t,i),e}();n(150);function gi(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(t){mi(e,t,n[t])})}return e}function mi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yi(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],0<=e.indexOf(n)||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function bi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var xi=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="dotogram",this.settings=t,this.$hover=null,this.loaded=!1}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.locations=j.a.values(this.metadata.location).filter(function(t){return 4===t.level}),this.colors={4:"#2e86de",31:"#ff9f43",64:"#10ac84",103:"#ee5253",137:"#f368e0",158:"#0abde3",166:"#5f27cd"},this.groups=Object(L.groupBy)(this.locations,function(t){return t.parents[1]}),this.columns=[{key:1990,text:"1990",parameters:{year:1990,scenario:1}},{key:2016,text:"2016",parameters:{year:2016,scenario:1}},{key:"reference",text:"Reference (2040)",parameters:{year:2040,scenario:2}},{key:"better",text:"Better (2040)",parameters:{year:2040,scenario:4}},{key:"worse",text:"Worse (2040)",parameters:{year:2040,scenario:3}}];var n=this.hover.bind(this);N()("".concat(this.settings.container.chart," .point")).poshytip({slide:!1,followCursor:!0,alignTo:"cursor",showTimeout:0,hideTimeout:0,alignX:"center",alignY:"inner-bottom",className:"tip-ihme",offsetY:20,liveEvents:!0,allowTipHover:!1,content:function(t,e){return n(N()(this),e,this.__data__)}})}},{key:"destroy",value:function(){N()("".concat(this.settings.container.chart," .point")).poshytip("hide").poshytip("destroy")}},{key:"hover",value:function(t,e,n){var i=n.parameters,a=n.fill;this.$hover&&this.$hover!==t&&this.$hover.poshytip("hide"),this.$hover=t,e.css({"border-color":a});var r=this.getSetting("metric"),s=this.getSetting("unit"),o=i.location,c=i.scenario,l=i.year,u=this.getValue(i);return"\n      ".concat(this.metadata.location[o].name,"<br/>\n      <b>Year:</b> ").concat(this.metadata.year[l].name,"<br/>\n      <b>Scenario:</b> ").concat(this.metadata.scenario[c].name,"<br/>\n      <b>").concat(this.metadata.unit[s].name,":</b> ").concat($(u,{unit:s,metric:this.metadata.measure[r][s].labels.hover}),"<br/>\n    ")}},{key:"title",value:function(){N()(this.settings.container.title).empty();var t=this.getSetting("display"),e=this.getSetting("controls");if("risk"===t&&"advanced"===e){var n=this.metadata.cause[this.getSetting("cause")],i=this.metadata.risk[this.getSetting("risk")];N()(this.settings.container.title).append(N()("<div/>").text("".concat(n.name," attributable to ").concat(i.name)))}else"sev"===t?N()(this.settings.container.title).append(N()("<div/>").text(this.metadata.risk[this.getSetting("risk")].name)):N()(this.settings.container.title).append(N()("<div/>").text(this.metadata[t][this.getSetting(t)].name))}},{key:"legend",value:function(){var i=this,t=j.a.select(this.settings.container.legend).selectAll(".legend-item").data(j.a.entries(this.colors),function(t){return t.key});t.enter().append("div").attr("class","legend-item").style("border-color",function(t){return t.value}).on("mouseover",function(t){var e=t.key,n=i.groups[e].map(function(t){return t.location_id});i.chart.highlight(n)}).on("mouseout",function(){i.chart.highlight()}).append("span").text(function(t){var e=t.key;return i.metadata.location[e].name}),t.exit().remove()}},{key:"render",value:function(){var t=this.settings,e=t.container,n=t.animation;this.title(),this.legend();var i=N()(e.title).outerHeight(),a=N()(e.legend).outerHeight();N()(e.chart).css({height:"calc(100% - ".concat(i+a,"px)")});var r=this.getSetting("metric"),s=this.getSetting("unit");this.chart=new Le({container:e.chart,animation:n,height:N()(e.chart).height(),width:N()(e.chart).width(),margin:{top:30,right:10,bottom:10,left:80},data:this.data(),yTitle:this.metadata.measure[r][s].labels.map}),this.loaded=!0}},{key:"requests",value:function(){return[this.getParameters({year:[1990,2016,2040],scenario:[1,2,4,3],location:this.locations.map(function(t){return t.location_id})})]}},{key:"color",value:function(t){var e=t.location_id,n=t.level,i=t.parents;return this.colors[2===n?e:i[1]]||"#fafafa"}},{key:"data",value:function(){var o=this;return this.columns.map(function(t){var s=t.parameters;return vi({},yi(t,["parameters"]),{values:o.locations.reduce(function(t,e){var n=vi({},s,{location:e.location_id}),i=o.getValue(n),a=i.m,r=i.real;return(a||r)&&t.push({parameters:n,value:a,key:e.location_id,fill:o.color(e)}),t},[])})})}},{key:"csv",value:function(){var r=this,s=this.getSetting("metric"),o=this.getSetting("unit"),c=this.getSetting("display"),l=this.getParameters(),u=["cause","risk","etiology","impairment"].includes(c),h=["risk","etiology","impairment"].includes(c),t=["Location","Scenario","Year","Age","Sex"].concat(gi(u?[this.metadata.display.cause.name]:[]),gi("sev"===c?[this.metadata.display.risk.name]:[]),gi(h?[this.metadata.display[c].name]:[]),["Measure","Value","Lower bound","Upper bound"]),d=[];return this.columns.forEach(function(t){var e=t.parameters,i=e.year,a=e.scenario;r.locations.forEach(function(t){var e=t.location_id,n=r.getValue({year:i,scenario:a,location:e});(n.m||n.real)&&d.push([r.metadata.location[e].name,r.metadata.scenario[a].name,r.metadata.year[i].name,r.metadata.age[l.age].name,r.metadata.sex[l.sex].name].concat(gi(u?[r.metadata.cause[l.cause].name]:[]),gi("sev"===c?[r.metadata.paf[l.paf].name]:[]),gi(h?[r.metadata.paf[l.paf].name]:[]),[r.metadata.measure[s][o].labels.map,n.m,n.u,n.l]))})}),[t].concat(d)}},{key:"resize",value:function(){var t=this.settings.container,e=N()(t.title).outerHeight(),n=N()(t.legend).outerHeight();if(N()(t.chart).css({height:"calc(100% - ".concat(e+n,"px)")}),this.chart){var i=N()(t.chart).width(),a=N()(t.chart).height();this.chart.resize(i,a)}}},{key:"update",value:function(){var t=this.settings.container;this.title(),this.legend();var e=N()(t.title).outerHeight(),n=N()(t.legend).outerHeight();N()(t.chart).css({height:"calc(100% - ".concat(e+n,"px)")});var i=this.getSetting("metric"),a=this.getSetting("unit");this.chart.update({data:this.data(),yTitle:this.metadata.measure[i][a].labels.map})}}])&&bi(t.prototype,n),i&&bi(t,i),e}(),_i=n(85),wi=n.n(_i),ki=(n(151),n(152),{properties:{zoom:1,min:1,max:2,inc:.05},init:function(){var r=this;this.properties.panelWidth=N()("#control-panel").outerWidth(),N()("head").append(N()("<style/>",{id:"presentation-styles"})),N()("#footer-content-right").append(N()("<div/>",{id:"presentation-settings",class:"presentation-settings"}).append(N()("<span/>",{id:"presentation-setting-decrease",class:"presentation-setting",title:"Zoom out"}).text("-")).append(N()("<span/>",{id:"presentation-setting-value",class:"presentation-setting",title:"Reset zoom"}).text("")).append(N()("<span/>",{id:"presentation-setting-increase",class:"presentation-setting",title:"Zoom in"}).text("+")).append(N()("<span/>",{id:"presentation-setting-full",class:"presentation-setting",title:"Toggle full screen"}).append(N()("<i/>",{class:"fa"}))).append(N()("<span/>",{id:"presentation-setting-legend",class:"presentation-setting",title:"Hide/show legend"}).append(N()("<i/>",{class:"fa"})))),this.updateStyles(),N()("#drag-bar").on("mousedown.drag",function(t){t.preventDefault(),N()(document).on("mousemove.drag",function(t){var e=t.pageX-75;e<0&&(e=0),300<e&&(e=300),r.properties.panelWidth=e,r.updateStyles()}).on("mouseup.drag",function(){N()(document).unbind("mousemove.drag")})}),N()("#presentation-setting-increase").click(function(){var t=r.properties,e=t.inc,n=t.zoom,i=t.min,a=t.max;r.properties.zoom=j.a.min([j.a.max([n+e,i]),a]),r.updateStyles()}),N()("#presentation-setting-decrease").click(function(){var t=r.properties,e=t.inc,n=t.zoom,i=t.min,a=t.max;r.properties.zoom=j.a.min([j.a.max([n-e,i]),a]),r.updateStyles()}),N()("#presentation-setting-value").click(function(){var t=r.properties,e=t.zoom,n=t.min,i=t.max;r.properties.zoom=e===n?i:n,r.updateStyles()}),N()("#presentation-setting-full").click(function(){N()("body").toggleClass("full")}),N()("#presentation-setting-legend").click(function(){N()("body").toggleClass("legend-off")})},updateStyles:function(){var t=this.properties,e=t.zoom,n=t.inc,i=t.panelWidth;N()("#presentation-setting-value").text("".concat((100*e).toFixed(0),"%")),N()("#presentation-styles").html("\n      #control-panel{\n        width: ".concat(i,"px;\n      }\n      #drag-bar{\n        margin-left: ").concat(i+65,"px;\n      }\n      .full #gbd-app{\n        margin-left: -").concat(i+75,"px;\n        width: calc(100% + ").concat(i+75,"px);\n      }\n      #charts{\n        margin-left: ").concat(i+75,"px;\n        width: calc((100%  - ").concat(i+75,"px) / ").concat(e,");\n        height: calc((100% / ").concat(e,"));\n        transform-style: preserve-3d;\n        transform: scale(").concat(e,");\n        transform-origin: 0 0;\n      }\n      #charts .chart-controls{\n        transform-style: preserve-3d;\n        transform: scale(").concat(1/e,");\n        transform-origin: 0 0;\n        width: ").concat((100*e).toFixed(0),"%;\n        height: ").concat((100*e).toFixed(0),"%;\n      }\n      .tip-ihme{\n        font-size:").concat(12*e,"px;\n        border-width: ").concat(2+(e-1)/n/4,"px;\n        border-radius: ").concat(5+(e-1)/n/2,"px;\n      }\n    "))}});function Si(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(t){Mi(e,t,n[t])})}return e}function Mi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ti(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ei(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ai=function(){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e=this,n={charts:{top:{size:"half",zoom:{scale:0,translate:[0,0]},filter:{values:[!1,!1],scale:[!1,!1]}},bottom:{size:"half",zoom:{scale:0,translate:[0,0]},filter:{values:[!1,!1],scale:[!1,!1]}}},version:null,mode:"single",dimension:null,chart:"treemap",controls:"basic",plot:"year",scol:"age",lines:"location",display:"cause",display_adv:"cause",cause:294,risk:169,etiology:173,impairment:192,injury:304,metric:2,metric_adv:2,location:1,region:"",locations:[6,11,22,36,51,63,67,71,81,97,102,109,123,130,135,141,163,168,180,196,207],year:2017,years:[1990,2017],decomp_years:[1990,2017],forecast_year:2017,age:22,age_adv:22,age_slider:2,age_pod:1,sex:3,depth:3,unit:3,change:!1,rank:"display",rank_value:!1,sbar_order:"rank",scol_order:"default",xmas_order:"rank",decomp_order:"start",scenario_decomp_order:2,risk_category:169,risk_level:2,cause_category:294,cause_level:3,location_level:2,location_level_line:4,location_category:1,etiology_category:172,etiology_level:3,impairment_category:191,impairment_level:2,injury_category:362,injury_level:2,detail:1,uncertainty_plot:!0,uncertainty_line:!1,scale_explore:!1,scale_compare:"charts",stack:{layers:{}},value:"observed",value_map:"observed",commonwealth:!1,treemap_filter:"any",direction:"",language:VizHub.config("language"),scenario:2,scenario_map:2};e.mutate={top:!0,bottom:!0},e.shifted=!1,e.charts={top:{},bottom:{}},e.resizer={top:P()({strategy:"scroll"}),bottom:P()({strategy:"scroll"})},e.data={cause:{},rank:{},change:{},intersect:{},attribution:{},extent:{}},e.metadata={},e.hierarchy={},e.colors={},e.requests=[],e.shapes=[],e.shape=[],e.settings=U(!0,{},n,t,e.loadSettings()),void 0!==ki&&"embed"!=e.settings.mode&&ki.init(),e.init()}var t,e,n;return t=i,(e=[{key:"init",value:function(){var n=this;VizHub.config({url:function(){return n.permalink()}}),n.downloads(),n.getDataThrottled=Object(L.throttle)(n.getData,1e3),N()(document).on("keyup keydown",function(t){var e=t.shiftKey;n.shifted=e}),N()(document).on("localized",function(t,e){n.settings.language=e.lang,window.location=n.permalink(),window.location.reload()}),N()("#gbd-app").attr("mode",n.settings.mode),N()("body").mousemove(function(t){N()(this).hasClass("loader")&&(t.stopPropagation(),t.stopImmediatePropagation())}),n.preLoad(function(){N()("#loader").fadeOut(500),N()("#app").fadeIn(500),n.build()})}},{key:"downloads",value:function(){var n=this,i=[];if(i.push({text:"Screenshot",click:function(){N()("#header-actions-download").VizHubPopover("lockPopover"),N()("#vizhub-action-download-content").empty().append(N()("<div/>",{class:"text",style:"padding: 4px 0 10px 0;"}).text("Generating screenshot, please wait...")).append(N()("<div/>",{class:"error",style:"display: none; padding: 4px 0 10px 0;"}).text("There was a problem generating your screenshot, please try again.")).append(N()("<div/>",{class:"progress animate"})).css({width:"240px"}),N()("#header-actions-download").VizHubPopover("updatePositions");var t=q("".concat(window.location.protocol,"//"),window.location.host,n.settings.path,"/screenshot/index.php?url=".concat(encodeURIComponent(q("".concat(window.location.pathname,"#settings=").concat(n.saveSettings())))));N.a.fileDownload(t,{successCallback:function(){N()("#header-actions-download").VizHubPopover("unlockPopover"),N()("#header-actions-download").VizHubPopover("closePopover")},failCallback:function(){N()("#vizhub-action-download-content .text").hide(),N()("#vizhub-action-download-content .error").show(),N()("#vizhub-action-download-content .progress").addClass("error"),N()("#vizhub-action-download-content .progress").removeClass("animate"),N()("#header-actions-download").VizHubPopover("updatePositions"),N()("#header-actions-download").VizHubPopover("unlockPopover")}})}}),"india"!==n.settings.type){var a=j.a.entries(n.charts).filter(function(t){return!1!==t.value.view});a.forEach(function(t){var e=t.key;i.push({text:"".concat(1==a.length?"C":"".concat(e.capitalize()," c"),"hart data (csv)"),click:function(){N()("#header-actions-download").VizHubPopover("closePopover");var t=n.charts[e].view.csv?n.charts[e].view.csv():[];n.saveFile("download.csv",t)}})}),i.push({text:"GBD results tool",click:function(){N()("#header-actions-download").VizHubPopover("closePopover"),window.open("http://ghdx.healthdata.org/gbd-results-tool")}})}VizHub.config({download:i})}},{key:"loadSettings",value:function(){var e={};return"#settings="==window.location.hash.substr(0,10)&&(N.a.ajax({async:!1,url:"api/settings/".concat(window.location.hash.substr(10)),success:function(t){e=N.a.parseJSON(t)}}),window.location.hash=""),e}},{key:"saveSettings",value:function(){var e="",t=JSON.stringify(this.settings);return N.a.ajax({async:!1,data:{settings:t},url:"api/settings",type:"POST",success:function(t){e=t}}),e}},{key:"permalink",value:function(){return q("".concat(window.location.protocol,"//"),window.location.host,"".concat(window.location.pathname,"#settings=").concat(this.saveSettings()))}},{key:"preLoad",value:function(s){var p=this,t=[],e="india"===p.settings.type?"india":"gbd";t.push(N.a.ajax({url:"resources/shapes/".concat(e,".json"),dataType:"json",success:function(t){p.topology=C(t)}})),t.push(N.a.ajax({url:"api/metadata",dataType:"json",data:{type:p.settings.type,lang:p.settings.language},success:function(t){p.metadata=t.data}})),t.push(N.a.ajax({url:"api/hierarchy",dataType:"json",data:{type:p.settings.type,lang:p.settings.language},success:function(t){p.hierarchy=t.data}})),t.push(N.a.ajax({url:"api/data/version",dataType:"json",success:function(t){p.version=t.data;var e=Ti(j.a.values(p.version).sort(function(t,e){return e.sort-t.sort}),1)[0],n=(e=void 0===e?{}:e).version_id;null===p.settings.version&&n&&(p.settings.version=n)}})),N.a.when.apply(N.a,t).done(function(){var f={};p.topology.objects=Object(L.reduce)(p.topology.objects,function(t,e,h){var d=h.includes("disputes");return e.geometries=e.geometries.reduce(function(t,e,n){var i,a=e.properties,r=a.disputes,s=void 0===r?[]:r,o=a.loc_id,c=a.admin_id,l=(p.metadata.location[c||o]||{}).location_id,u="key-".concat(n+1);return d?(i={key:u,location_id:l||f[o].location_id,disputes:s.map(Number)},f[o]=i):("admin0"===h||l)&&(i={key:u,location_id:l}),i&&t.push(Ci({},e,{properties:i})),t},[]),e.geometries.length&&(t[h]=e),t},{});var t=j.a.values(p.metadata.groups).filter(function(t){var e=t.type,n=t.locations;return void 0!==e&&void 0===n}).map(function(t){return t.group_id});t.forEach(function(n){p.metadata.groups[n].locations=j.a.values(p.metadata.location).filter(function(t){return t.type===p.metadata.groups[n].type}).map(function(t){return t.location_id}),p.metadata.groups[n].locations.forEach(function(t,e){p.hierarchy.groups.filter(function(t){return t.group_id===n})[0].children.push({group_id:"".concat(n,"-").concat(e),children:[]}),p.metadata.groups["".concat(n,"-").concat(e)]={group_id:"".concat(n,"-").concat(e),name:p.metadata.location[t].name}})});var r=Re(p.metadata);j.a.entries(p.hierarchy).forEach(function(e){var t=r[e.key],i=t.metadata,a=t.id,n=function(t,e){var n=e.map(function(t){return t[a]});return i[t[a]]=Ci({},t,i[t[a]],{level:n.length+1,parent:n[n.length-1],parents:n}),i[t[a]]};"pafs"===e.key?j.a.entries(p.hierarchy[e.key]).forEach(function(t){p.hierarchy[e.key][t.key]=at(t.value,n)}):p.hierarchy[e.key]=at(e.value,n)}),j.a.entries(p.metadata.paf).forEach(function(t){var e=t.key,n=t.value;p.metadata[n.type]||(p.metadata[n.type]={}),p.metadata[n.type][e]=n}),j.a.entries(p.hierarchy.pafs).forEach(function(t){var e=t.key,n=t.value;p.hierarchy[e]=["risk"].includes(e)?n:j.a.values(n)[0].children}),t.forEach(function(i){p.metadata.groups[i].locations.forEach(function(t,e){var n=p.metadata.location[t].children;p.metadata.groups["".concat(i,"-").concat(e)].locations=n.map(function(t){return t.location_id})})}),p.metadata.groups={locations:p.metadata.groups},p.colors.list=[];var e=p.metadata.cause[295].children,n=p.metadata.cause[409].children,i=p.metadata.cause[687].children,a=30-(e.length+n.length+i.length);[{klass:"Greens",length:i.length},{klass:"Purples",length:Math.ceil(n.length/2)},{klass:"Blues",length:Math.floor(n.length/2)},{klass:"Reds",length:e.length},{klass:"Oranges",length:Math.ceil(a/2)},{klass:"Greys",length:Math.floor(a/2)}].forEach(function(t){p.colors.list=Si(p.colors.list).concat(Si(I.a[t.klass][t.length+1].slice(1).reverse()))}),j.a.keys(p.metadata.display).concat(["location"]).forEach(function(a){var t="risk"===a?{overview:[],"overview-2":[]}:{overview:[]},e="cause"===a?p.hierarchy.causes:p.hierarchy.pafs[a];if(p.metadata.groups[a]=it(e,function(t,e,n){var i=n.length;return"cause"===a?(2===i&&t.overview.push(e.cause_id),e.children.length&&(t[e.cause_id]=e.children.map(function(t){return t.cause_id}))):("risk"===a?(1===i&&t.overview.push(e.paf_id),2===i&&t["overview-2"].push(e.paf_id)):1===i&&t.overview.push(e.paf_id),e.children.length&&1===i&&(t[e.paf_id]=e.children.map(function(t){return t.paf_id}))),t},t),j.a.values(p.metadata.groups[a]).forEach(function(t){t.reverse()}),void 0===p.settings.stack.layers[a]){var n=p.metadata.groups[a];p.settings.stack.layers[a]={list:"etiology"===a?n[n.overview[1]]:n.overview,group:"overview",colors:{}}}p.colors[a]=Si(p.colors.list)}),"function"==typeof s&&s()})}},{key:"build",value:function(){var t,e,n,i=this;i.tour=(e=i,(n=new wi.a({storage:!1,backdrop:!0,onStart:function(){n.__settings={mode:e.settings.mode,chart:e.settings.chart,cause_level:e.settings.cause_level,risk_level:e.settings.risk_level,location_level:e.settings.location_level}},onShown:function(){N()(".popover-step").text("".concat(n._current+1," / ").concat(n._options.steps.length))},template:'\n      <div class="popover" role="tooltip">\n        <div class="arrow"></div>\n        <div class="popover-title-container">\n          <h3 class="popover-title"></h3>\n          <span class="popover-step"> x of y</span>\n        </div>\n        <div class="popover-content"></div>\n        <div class="popover-navigation">\n          <div class="btn-group">\n            <button class="btn btn-sm btn-default" data-role="prev">&laquo; Prev</button>\n            <button class="btn btn-sm btn-default" data-role="next">Next &raquo;</button>\n            <button \n              class="btn btn-sm btn-default" \n              data-role="pause-resume" \n              data-pause-text="Pause" \n              data-resume-text="Resume"\n            >Pause</button>\n          </div>\n          <button class="btn btn-sm btn-default" data-role="end">End tour</button>\n        </div>\n      </div>\n    ',onEnd:function(){e.changeSetting("mode",n.__settings.mode),e.changeSetting("chart",n.__settings.chart),e.changeSetting("cause_level",n.__settings.cause_level),e.changeSetting("risk_level",n.__settings.risk_level),e.changeSetting("location_level",n.__settings.location_level)}})).addStep({orphan:!0,title:"Welcome to GBD Compare",content:"\n      <p>This interactive tool allows you to analyze health levels and trends.</p>\n      <div>\n        Use treemaps, maps, and other charts to explore and compare:\n        <ul>\n          <li>causes and risks for different geographies</li>\n          <li>patterns and trends by location, age, sex, and year</li>\n          <li>changes in disease patterns over time</li>\n        </ul>\n      </div>\n     "}),n.addStep({element:"#control-panel",title:"Control Panel",content:'\n      <p>\n        Settings for the charts displayed are managed via the \n        <span class="strong">control panel</span>. \n        The control panel has three categories of controls: \n        mode buttons, chart type, and setting controls.\n      </p>\n    '}),n.addStep({element:"#control-menu-mode",placement:"bottom",title:"Mode Buttons",content:'\n      <div>\n        Control what the figure panel displays:\n        <ul>\n          <li>a single chart type (<span class="strong">Single</span>)</li>\n          <li>a map and one additional chart type (<span class="strong">Explore</span>)</li>\n          <li>two of the same chart type (<span class="strong">Compare</span>)</li>\n        </ul>  \n      </div>\n    '}),n.addStep({element:"#controls-heading-main",placement:"bottom",title:"Setting Controls",content:'\n      <p>Drive the data displayed in the charts using the setting controls.</p>\n      <p>\n        In Explore and Compare modes, controls are grouped by the charts they affect. \n        <span class="strong">Shared settings</span> \n        drives both charts. Options vary depending upon the chart type and other settings.\n      </p>\n      <p>\n       <span class="strong">Basic</span> settings (default) address most common needs while \n       <span class="strong">advanced</span> settings provide more options and finer control.\n     </p>\n   '}),n.addStep({element:"#control-container-buttonset-chart",title:"Chart Type Buttons",content:"\n      <p>\n        Use chart type buttons to select which chart type to display \n        (for the bottom chart in Explore mode, for both charts in Compare mode).\n      </p>\n      <div>\n        A green line appears to the right of the active chart type.\n        <ul>\n          <li>Treemap</li>\n          <li>Risks by Cause</li>\n          <li>Arrow Diagram</li>\n          <li>Pyramid</li>\n          <li>Patterns</li>\n          ".concat(e.metadata.chart.donut&&"england"!==e.settings.type?"<li>Overlap Map</li>":"","\n          <li>Heat Map</li>\n          <li>Plot</li>\n          <li>Line</li>\n          ").concat(e.metadata.chart.dotogram?"<li>Dotogram</li>":"","\n          <li>Map (button only appears in Single and Compare modes)</li>\n        </ul>\n      </div>\n    ")}),n.addStep({element:"#header-actions",backdrop:!1,title:"Options",placement:"bottom",content:'\n      <ul>\n        <li>\n          Clicking \n          <span class="strong">Share</span> \n          stores the current settings for GBD Compare and generates a shareable link. \n          Share the link to direct someone to GBD Compare configured with specific settings.\n        </li>\n        <li>\n          <span class="strong">Download</span> \n          a high-resolution screenshot of charts on the screen.\n        </li>\n      </ul>\n    '}),n.addStep({element:"#charts",backdrop:!1,title:"Interactivity Across Charts",placement:"left",onShow:function(){e.changeSetting("mode","explore")},content:'\n      <p>\n        <div>\n          In <span class="strong">Explore mode</span>, cross-chart interactivity is available:\n          <ul>\n            <li>Clicking on a location in the map sets that location for the bottom chart.</li>\n            <li>\n              Clicking on the figure in the bottom chart changes what is displayed in the map.\n            </li>\n          </ul>\n        </div>\n      </p>\n    '}),n.addStep({element:"#chart-controls-bottom .control-multi-container",backdrop:!1,title:"Chart Info and Expand/Reduce",placement:"bottom",content:'\n      <p>\n        <i class="fa fa-info"></i>&nbsp;Click on the \n        <span class="strong">Chart Info</span>\n        button for a description of the chart and important information \n        about the data and/or the display.\n      </p>\n      <p>\n        <i class="fa fa-expand"></i>&nbsp;Click to expand or reduce a chart size.\n      </p>\n    '}),n.addStep({element:"#top-chart",backdrop:!1,title:"Map",placement:"left",onShow:function(){e.changeSetting("mode","explore")},content:"\n      <p>\n        The map displays country or subnational estimates. \n        Place your cursor on a section of the map or a dot above the \n        map legend to see detailed data.\n      </p>\n    "}),n.addStep({element:"#bottom-chart",backdrop:!1,title:"Treemap",placement:"left",onShow:function(){e.changeSetting("mode","explore"),e.changeSetting("chart","treemap")},content:"\n      <p>\n        The treemap chart type is a square pie chart displaying causes \n        (diseases and injures) grouped by hierarchy; \n        the size of the box is proportionate to the burden displayed. \n        Also can display a risk factor and its attribution to the causes\n      </p>\n      <div>\n        Color indicates the broad cause groups:\n        <ul>\n          <li>Blue = Non-communicable causes</li>\n          <li>Red = Communicable, maternal, neonatal, & nutritional causes </li>\n          <li>Green = Injuries</li>\n        </ul>\n      </div>    \n    "}),n.addStep({element:"#bottom-chart",backdrop:!1,title:"Risks by Cause Chart",placement:"left",onShow:function(){e.changeSetting("mode","explore"),e.changeSetting("chart","sbar")},content:"\n      <p>\n        The risks by cause chart type displays total burden by risk \n        factor and how risk factors affect 21 broad cause groups.\n      </p>\n    "}),n.addStep({element:"#bottom-chart",backdrop:!1,title:"Arrow Diagram",placement:"left",onShow:function(){e.changeSetting("mode","explore"),e.changeSetting("chart","arrow"),e.changeSetting("level",3)},content:"\n      <p>\n        The arrow diagram chart type displays ranks of causes or risks for \n        two different years and visualizes the change in rankings between those years.\n      </p>\n    "}),n.addStep({element:"#bottom-chart",backdrop:!1,title:"Pyramid Chart",placement:"left",onShow:function(){e.changeSetting("mode","explore"),e.changeSetting("chart","xmas")},content:'\n      <p>\n        The pyramid chart displays causes or risks attributed to causes \n        for males and females for one or more locations and a selected year and age.\n      </p>\n      <div>\n        Use the legend (to the right of the chart) to:\n        <ul>\n          <li>Switch cause or risk group by making a selection from the top drop-down.</li>\n          <li>Add a single cause or risk by making a selection from the second drop-down.</li>\n          <li>\n            Remove a single cause or risk by clicking the \n            <span class="strong">x</span> \n            that appears next to the cause or risk in the legend.\n          </li>\n        </ul>\n      </div>\n    '}),n.addStep({element:"#bottom-chart",backdrop:!1,title:"Patterns Chart",placement:"left",onShow:function(){e.changeSetting("mode","explore"),e.changeSetting("chart","scol")},content:"\n      <p>\n        The patterns chart type displays patterns for causes or risks for different \n        age groups, locations, years, or sexes. Formerly known as GBD Cause Patterns.\n      </p>\n      <p>\n        Select x-axis dimension using the x-axis buttons on the bottom of the chart.\n      </p>\n    "}),e.metadata.chart.donut&&"england"!==e.settings.type&&n.addStep({element:"#bottom-chart",backdrop:!1,title:"Overlap Map",placement:"left",onShow:function(){e.changeSetting("mode","explore"),e.changeSetting("chart","donut")},content:"\n        <p>\n          The overlap map chart type visualizes how much burden is explained by \n          single or multiple (overlap) types of risk factors.\n        </p>\n      "}),n.addStep({element:"#bottom-chart",backdrop:!1,title:"Heat Map",placement:"left",onShow:function(){e.changeSetting("mode","explore"),e.changeSetting("chart","heatmap")},content:"\n      <p>\n       The heat map chart type displays top-ranked causes or risks for different locations.\n      </p>\n      <p>\n        By default the chart will sort by the first column on the left. \n        Change the sort by clicking on a different column header.\n      </p>\n    "}),n.addStep({element:"#bottom-chart",backdrop:!1,title:"Plot Chart",placement:"left",onShow:function(){e.changeSetting("mode","explore"),e.changeSetting("chart","plot")},content:"\n      <p>\n        The plot chart type displays estimates and uncertainty intervals by \n        year, age, sex, cause, risk, or country.\n      </p>\n    "}),n.addStep({element:"#bottom-chart",backdrop:!1,title:"Line Chart",placement:"left",onShow:function(){e.changeSetting("mode","explore"),e.changeSetting("chart","line")},content:"\n      <p>\n        The line chart type displays estimates over time for \n        causes, risks, etiologies, or impairments for selected age, sex, and locations.\n      </p>\n    "}),n),i.buildControls(),t=i.getSetting("main","mode").isIn(["embed","single"])?{top:i.getSetting("main","chart"),bottom:null}:{top:i.getSetting("top","chart"),bottom:i.getSetting("bottom","chart")},i.buildCharts(t),i.update(i.controls.main,{id:"init"}),i.updateVisibility()}},{key:"getVisibility",value:function(t){var e=this.isVisible("top",t),n=this.isVisible("bottom",t);if(e&&n&&"compare"==this.getSetting("main","mode")){var i=this.getSetting("main","dimension");if("sex"==i&&t.isIn(["sex"]))return"both";if("year"==i&&t.isIn(["year","years"]))return"both";if("age"==i&&t.isIn(["age","age_adv","age_slider"]))return"both";if("risk"==i&&t.isIn(["risk","risk_category","risk_level"]))return"both";if("rsik"==i&&t.isIn(["risk","risk_category","risk_level"]))return"both";if("cause"==i&&t.isIn(["cause","cause_category","cause_level"]))return"both";if("location"==i&&t.isIn(["region","location","locations","location_category","location_level","location_level_line"]))return"both";if("scenario"==i&&t.isIn(["scenario"]))return"both";if("cause-risk"==i&&"cause"==t&&"advanced"==this.getSetting("main","controls"))return"both"}return(e||n)&&"embed"==this.settings.mode&&this.options[t]&&this.options[t].position?this.options[t].position:e&&n?"main":e?"top":!!n&&"bottom"}},{key:"isVisible",value:function(e,t){var n=this;if("main"==e)return n.isVisible("top",t)&&n.isVisible("bottom",t);var i=n.visibility[t];return"boolean"==typeof i?i:"function"==typeof i&&i(function(t){return n.getSetting(e,t)})}},{key:"buildControls",value:function(){var d=this;d.controls={},d.options={controls:{text:"Controls",id:"controls",type:"buttonset",options:[{id:"basic",text:"Basic"},{id:"advanced",text:"Advanced"}],default:d.settings.controls,change:function(){N()("#advanced-settings-button").text("basic"==d.settings.controls?"Use advanced settings":"Use basic settings"),N()("#app").removeClass("basic advanced"),N()("#app").addClass(d.settings.controls)}},mode:{id:"mode",text:"Mode",type:"buttonset",options:[{id:"explore",text:"Explore"},{id:"compare",text:"Compare"}],default:d.settings.mode},dimension:{id:"dimension",text:"Dimension",type:"select",options:[{id:"year",text:"Year"},{id:"age",text:"Age"},{id:"sex",text:"Sex"},{id:"cause",text:"Cause"},{id:"risk",text:"Risk"},{id:"location",text:"Location"}],default:d.settings.dimension},plot:{id:"plot",text:"Plot",type:"buttonset",options:[{id:"year",text:"Year"},{id:"age",text:"Age"},{id:"sex",text:"Sex"},{id:"cause",text:"Cause"},{id:"risk",text:"Risk"},{id:"location",text:"Location"}],default:d.settings.plot},scol:{id:"scol",text:"Stack",type:"buttonset",options:[{id:"age",text:"Age"},{id:"location",text:"Location"},{id:"year",text:"Year"},{id:"sex",text:"Sex"}],default:d.settings.scol},lines:{id:"lines",text:"Lines",type:"buttonset",options:[{id:"location",text:"Locations"},{id:"scenario",text:"Scenarios"}],default:d.settings.lines},version:{id:"version",text:"Version",type:"select",change:function(){d.data={cause:{},rank:{},change:{},intersect:{},attribution:{},extent:{}}},options:j.a.values(d.version).sort(function(t,e){return t.sort-e.sort}).map(function(t){var e=t.version_id,n=t.date,i=t.description,a=t.status;return{id:e,text:"".concat(e," ").concat(n," (").concat(i,")"),bold:1==a}}),settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.version},display:{id:"display",text:"Display",type:"buttonset",position:"top",options:j.a.values(d.metadata.display).filter(function(t){var e=t.enabled,n=t.advanced;return e&&!n}).map(function(t){var e=t.display_id,n=t.short_name,i=t.name;return{id:e,text:n,attrs:n!=i?{title:i}:{}}}),default:d.settings.display},display_adv:{id:"display_adv",text:"Display",type:"embed"==d.settings.mode?"select":"buttonset",position:"top",options:j.a.values(d.metadata.display).filter(function(t){return t.enabled}).map(function(t){var e=t.display_id,n=t.short_name,i=t.name;return{id:e,text:n,attrs:n!=i?{title:i}:{}}}),default:d.settings.display_adv},rank:{id:"rank",text:"Rank",type:"buttonset",position:"bottom",options:[{id:"display",text:"Display"},{id:"location",text:"Location"}],default:d.settings.rank},cause:{id:"cause",text:"Cause",type:"select",position:"top",options:function(){var u="basic"==d.settings.controls?this.controls.values.dispaly:this.controls.values.dispaly_adv;return it(d.hierarchy.causes,function(t,e,n){var i=e.cause_id,a=e.cause,r=e.name,s=e.children,o=e.parents,c=n.length;if("injury"===u&&o.includes(687)||"injury"!==u){var l=o.map(function(t){var e=d.metadata.cause[t];return"".concat(e.cause," ").concat(e.name)}).join(" ");t.push({id:i,text:"".concat(a," ").concat(r),bold:!!s.length,distance:c,match:"".concat(a," ").concat(r," ").concat(l)})}return t})},settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.cause},risk:{id:"risk",text:"Risk",type:"select",position:"top",options:it(d.hierarchy.risk,function(t,e,n){var i=e.paf_id,a=e.name,r=e.enabled,s=e.children,o=e.parents,c=n.length;return t.push({id:i,text:a,enabled:r,distance:c,bold:!!s.length,match:"".concat(a," ").concat(o.map(function(t){return d.metadata.paf[t].name}).join(" "))}),t}),settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.risk},etiology:{id:"etiology",text:"Etiology",type:"select",position:"top",options:it(d.hierarchy.etiology,function(t,e,n){var i=e.paf_id,a=e.name,r=e.enabled,s=e.children,o=e.parents,c=n.length,l=o.map(function(t){return d.metadata.paf[t].name}).join(" ");return t.push({id:i,text:a,enabled:r,distance:c,bold:!!s.length,match:"".concat(a," ").concat(l)}),t}),settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.etiology},impairment:{id:"impairment",text:"Impairment",type:"select",position:"top",options:it(d.hierarchy.impairment,function(t,e,n){var i=e.paf_id,a=e.name,r=e.enabled,s=e.children,o=e.parents,c=n.length,l=o.map(function(t){return d.metadata.paf[t].name}).join(" ");return t.push({id:i,text:a,enabled:r,distance:c,bold:!!s.length,match:"".concat(a," ").concat(l)}),t}),settings:{dropWidth:"embed"!=d.settings.mode&&"+84"},default:d.settings.impairment},injury:{id:"injury",text:"Injury",type:"select",position:"top",options:it(d.hierarchy.injury,function(t,e,n){var i=e.paf_id,a=e.name,r=e.enabled,s=e.children,o=e.parents,c=n.length,l=o.map(function(t){return d.metadata.paf[t].name}).join(" ");return t.push({id:i,text:a,enabled:r,distance:c,bold:!!s.length,match:"".concat(a," ").concat(l)}),t}),settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.injury},risk_category:{id:"risk_category",text:"Category",type:"select",position:"top",options:function(){var l=this.controls.values.risk_level;return it(d.hierarchy.risk,function(t,e){var n=e.paf_id,i=e.name,a=e.enabled,r=e.children,s=e.parents,o=e.level;if((o<l||1==o)&&r.length){var c=s.map(function(t){return d.metadata.paf[t].name}).join(" ");t.push({id:n,text:i,enabled:a,distance:o,bold:o+1<l,match:"".concat(i," ").concat(c)})}return t})},settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.risk_category},risk_level:{id:"risk_level",text:"Level",type:"slider",position:"top",options:j.a.values(d.metadata.risk).map(function(t){return t.level}).filter(function(t,e,n){return n.indexOf(t,e+1)<0&&null!=t}).sort(function(t,e){return t-e}).map(function(t){return{id:t,text:t-1}}),valueChange:function(){var t=this.controls.controls.risk_category.options().map(function(t){var e=t.id;return parseInt(e)}),e=parseInt(this.controls.values.risk_category);t.includes(e)||this.controls.changeSetting("risk_category",d.metadata.risk[e].parent),this.controls.updateOptions("risk_category"),this.controls.changeValue("risk_category",this.controls.values.risk_category)},default:d.settings.risk_level},cause_category:{id:"cause_category",text:"Category",type:"select",position:"top",options:function(){var c=this.controls.values.cause_level;return it(d.hierarchy.causes,function(t,e){var n=e.cause_id,i=e.name,a=e.children,r=e.parents,s=e.level;if((s<c||1==s)&&a.length){var o=r.map(function(t){return d.metadata.cause[t].name}).join(" ");t.push({id:n,text:i,distance:s,bold:s+1<c,match:"".concat(i," ").concat(o)})}return t})},settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.cause_category},cause_level:{id:"cause_level",text:"Level",type:"slider",position:"top",options:j.a.values(d.metadata.cause).map(function(t){return t.level}).filter(function(t,e,n){return n.indexOf(t,e+1)<0&&null!=t}).sort(function(t,e){return t-e}).map(function(t){return{id:t,text:t-1}}),valueChange:function(){var t=this.controls.controls.cause_category.options().map(function(t){var e=t.id;return parseInt(e)}),e=parseInt(this.controls.values.cause_category);t.includes(e)||this.controls.changeSetting("cause_category",d.metadata.cause[e].parent),this.controls.updateOptions("cause_category"),this.controls.changeValue("cause_category",this.controls.values.cause_category)},default:d.settings.cause_level},etiology_category:{id:"etiology_category",text:"Category",type:"select",position:"top",options:j.a.values(d.hierarchy.etiology).map(function(t){return{id:t.paf_id,text:t.name}}),default:d.settings.etiology_category},impairment_category:{id:"impairment_category",text:"Category",type:"select",position:"top",options:function(){var c=this.controls.values.impairment_level;return it(d.hierarchy.pafs.impairment,function(t,e){var n=e.paf_id,i=e.name,a=e.children,r=e.parents,s=e.level;if((s<c||1==s)&&a.length){var o=r.map(function(t){return d.metadata.paf[t].name}).join(" ");t.push({id:n,text:i,distance:s,bold:s+1<c,match:"".concat(i," ").concat(o)})}return t})},settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.impairment_category},impairment_level:{id:"impairment_level",text:"Level",type:"slider",position:"top",options:j.a.values(d.metadata.impairment).map(function(t){return t.level}).filter(function(t,e,n){return n.indexOf(t,e+1)<0&&null!=t}).sort(function(t,e){return t-e}).map(function(t){return{id:t,text:t-1}}),valueChange:function(){var t=this.controls.controls.impairment_category.options().map(function(t){var e=t.id;return parseInt(e)}),e=parseInt(this.controls.values.impairment_category);t.includes(e)||this.controls.changeSetting("impairment_category",d.metadata.paf[e].parent),this.controls.updateOptions("impairment_category"),this.controls.changeValue("impairment_category",this.controls.values.impairment_category)},default:d.settings.impairment_level},injury_category:{id:"injury_category",text:"Category",type:"select",position:"top",options:function(){var c=this.controls.values.injury_level;return it(d.hierarchy.pafs.injury,function(t,e){var n=e.paf_id,i=e.name,a=e.children,r=e.parents,s=e.level;if((s<c||1==s)&&a.length){var o=r.map(function(t){return d.metadata.paf[t].name}).join(" ");t.push({id:n,text:i,distance:s,bold:s+1<c,match:"".concat(i," ").concat(o)})}return t})},settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.injury_category},injury_level:{id:"injury_level",text:"Level",type:"slider",position:"top",options:j.a.values(d.metadata.injury).map(function(t){return t.level}).filter(function(t,e,n){return 1<t&&n.indexOf(t,e+1)<0&&null!=t}).sort(function(t,e){return t-e}).map(function(t){return{id:t,text:t-1}}),valueChange:function(){var t=this.controls.controls.injury_category.options().map(function(t){var e=t.id;return parseInt(e)}),e=parseInt(this.controls.values.injury_category);t.includes(e)||this.controls.changeSetting("injury_category",d.metadata.paf[e].parent),this.controls.updateOptions("injury_category"),this.controls.changeValue("injury_category",this.controls.values.injury_category)},default:d.settings.injury_level},location_category:{id:"location_category",text:"Category",type:"select",position:"top",options:function(){var c=this.controls.values.location_level;return it(d.hierarchy.locations,function(t,e){var n=e.location_id,i=e.medium_name,a=e.children,r=e.parents,s=e.level;if((s<c||1==s)&&a.length){var o=r.map(function(t){return d.metadata.location[t].medium_name}).join(" ");t.push({id:n,text:i,distance:s,bold:s+1<c,match:"".concat(i," ").concat(o)})}return t})},settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.location_category},location_level:{id:"location_level",text:"Level",type:"slider",position:"top",options:j.a.values(d.metadata.location).map(function(t){return t.level}).filter(function(t,e,n){return n.indexOf(t,e+1)<0&&null!=t}).sort(function(t,e){return t-e}).map(function(t){return{id:t,text:t-1}}),valueChange:function(){var t=this.controls.controls.location_category.options().map(function(t){var e=t.id;return parseInt(e)}),e=parseInt(this.controls.values.location_category);t.includes(e)||this.controls.changeSetting("location_category",d.metadata.location[e].parent),this.controls.updateOptions("location_category"),this.controls.changeValue("location_category",this.controls.values.location_category)},default:d.settings.location_level},location_level_line:{id:"location_level_line",text:"Level",type:"slider",position:"top",options:j.a.values(d.metadata.location).map(function(t){return t.level}).filter(function(t,e,n){return n.indexOf(t,e+1)<0&&null!=t&&t<=4}).sort(function(t,e){return t-e}).map(function(t){return{id:t,text:t-1}}),default:d.settings.location_level_line},metric:{id:"metric",text:"Measure",type:"buttonset",position:"top",options:j.a.values(d.metadata.metric).sort(function(t,e){return t.sort-e.sort}).filter(function(t){return!t.advanced}).map(function(t){var e=t.metric_id,n=t.short_name,i=t.name;return{id:e,text:n,attrs:n!=i?{title:i}:{}}}),default:d.settings.metric},metric_adv:{id:"metric_adv",text:"Measure",type:"select",position:"top",options:function(){return j.a.values(d.metadata.metric).sort(function(t,e){return t.sort-e.sort}).filter(function(t){var e=t.metric_id,n=d.getSetting("main","display"),i=d.version[d.settings.version].metadata,a=(i=void 0===i?{}:i).metric,r=(a=void 0===a?{}:a)[n];return(void 0===r?[]:r).includes(e)}).map(function(t){return{id:t.metric_id,text:t.name}})},settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.metric_adv},location:{id:"location",text:"Location",type:"select",position:"top",options:it(d.hierarchy.locations,function(t,e,n){var i=e.location_id,a=e.medium_name,r=e.enabled,s=e.children,o=e.parents,c=n.length,l=o.map(function(t){return d.metadata.location[t].medium_name}).join(" ");return t.push({id:i,text:a,enabled:r,distance:c,bold:!!s.length,match:"".concat(a," ").concat(l)}),t}),settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.location},region:{id:"region",text:"Locations",type:"select",position:"top",options:it(d.hierarchy.groups,function(t,e,n){var i=e.group_id,a=e.name,r=e.disabled,s=e.locations,o=e.children,c=e.parents,l=n.length;if(r||s.length){var u=o.map(function(t){return t.name}).join(" "),h=c.map(function(t){return d.metadata.groups.locations[t].name}).join(" ");return t.push({id:i,text:a,distance:l,bold:!!o.length,enabled:r?0:1,match:"".concat(a," ").concat(u," ").concat(h)}),t}}),change:function(t,e){var n=d.metadata.groups.locations[e].locations,i=(d.shifted?this.controls.values.locations.concat(n):n).filter(function(t){return null!=d.metadata.location[t]}).filter(function(t,e,n){return n.indexOf(t,e+1)<0&&null!=t});return this.controls.changeSetting("locations",i),this.controls.changeValue("region",""),!1},settings:{placeholder:"Switch location group",dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.region},locations:{id:"locations",text:"Locations",type:"multi-select",position:"top",options:it(d.hierarchy.locations,function(t,e,n){var i=e.location_id,a=e.medium_name,r=e.enabled,s=e.children,o=e.parents,c=n.length,l=o.map(function(t){return d.metadata.location[t].medium_name}).join(" ");return t.push({id:i,text:a,enabled:r,distance:c,bold:!!s.length,match:"".concat(a," ").concat(l)}),t}),settings:{placeholder:"Add/Remove locations",dropWidth:"embed"!=d.settings.mode&&"+70",allowClear:!0},default:d.settings.locations},year:{id:"year",text:"Year",type:"slider",position:"bottom",options:j.a.values(d.metadata.year).map(function(t){return{id:t.year_id,text:t.name}}),default:d.settings.year},forecast_year:{id:"forecast_year",text:"Year",type:"slider",position:"bottom",options:j.a.values(d.metadata.year).filter(function(t){var e=t.type;return(void 0===e?[]:e).includes("forecast")}).map(function(t){return{id:t.year_id,text:t.name}}),default:d.settings.forecast_year},years:{id:"years",text:"Range",type:"range-slider",position:"bottom",options:j.a.values(d.metadata.year).map(function(t){return{id:t.year_id,text:t.name}}),default:d.settings.years},decomp_years:{id:"decomp_years",text:"Range",type:"range-slider",position:"bottom",options:j.a.values(d.metadata.year).filter(function(t){var e=t.type;return(void 0===e?[]:e).includes("decomposition")}).map(function(t){return{id:t.year_id,text:t.name}}),default:d.settings.decomp_years},age:{id:"age",text:"Age",type:"buttonset",position:"top",options:j.a.values(d.metadata.age).filter(function(t){var e=t.type;return(void 0===e?[]:e).includes("basic")}).sort(function(t,e){return t.sort-e.sort}).map(function(t){return{id:t.age_id,text:t.short_name}}),default:d.settings.age},age_adv:{id:"age_adv",text:"Age",type:"select",position:"top",options:function(){var t=j.a.values(d.metadata.age).filter(function(t){var e=t.type;return(void 0===e?[]:e).includes("advanced")}).sort(function(t,e){return t.sort-e.sort}).map(function(t){return{id:t.age_id,text:t.name}});return"embed"==d.settings.mode?t.concat(j.a.values(d.metadata.age).filter(function(t){var e=t.type;return(void 0===e?[]:e).includes("specific")}).sort(function(t,e){return t.sort-e.sort}).map(function(t){return{id:t.age_id,text:t.name}})):t.concat({id:"specific",text:"Age-specific"})},settings:{dropWidth:"embed"!=d.settings.mode&&"+70"},default:d.settings.age_adv},age_slider:{id:"age_slider",text:"Age",type:"slider",position:"top",options:j.a.values(d.metadata.age).filter(function(t){var e=t.type;return(void 0===e?[]:e).includes("specific")}).sort(function(t,e){return t.sort-e.sort}).map(function(t){return{id:t.age_id,text:t.name}}),default:d.settings.age_slider},age_pod:{id:"age_pod",text:"Age",type:"select",position:"top",options:j.a.values(d.metadata.age).reduce(function(t,e){var n=e.measure,i=(n=void 0===n?{}:n)[27];return i?Si(t).concat([i]):t},[]).sort(function(t,e){return t.sort-e.sort}).map(function(t){return{id:t.age_id,text:t.name}}),default:d.settings.age_pod},sex:{id:"sex",text:"Sex",type:"buttonset",position:"top",options:j.a.values(d.metadata.sex).map(function(t){return{id:t.sex_id,text:t.name}}),default:d.settings.sex},unit:{id:"unit",text:"Units",type:"buttonset",position:"top",options:j.a.values(d.metadata.unit).filter(function(t){var e=t.unit_id;return[1,2,3].includes(e)}).sort(function(t,e){return t.sort-e.sort}).map(function(t){return{id:t.unit_id,text:t.short_name}}),default:d.settings.unit},change:{id:"change",text:"Rate of change",type:"toggle",position:"bottom",default:d.settings.change},depth:{id:"depth",text:"Level",type:"slider",position:"bottom",min:1,max:4,default:d.settings.depth},sbar_order:{id:"sbar_order",text:"Order",type:"buttonset",position:"bottom",options:[{id:"rank",text:"Value"},{id:"alpha",text:"Alphabetical"}],default:d.settings.sbar_order},scol_order:{id:"scol_order",text:"Order",type:"buttonset",position:"bottom",options:[{id:"default",text:"Default"},{id:"rank",text:"Value"}],default:d.settings.scol_order},xmas_order:{id:"xmas_order",text:"Order",type:"buttonset",position:"bottom",options:[{id:"rank",text:"Value"},{id:"default",text:"Default"}],default:d.settings.xmas_order},decomp_order:{id:"decomp_order",text:"Order",type:"select",options:[{id:"start",text:"Start life expectancy"},{id:"end",text:"End life expectancy"},{id:"change",text:"Change in life expectancy"}],default:d.settings.decomp_order},scenario_decomp_order:{id:"scenario_decomp_order",text:"Order",type:"select",options:[2,3,4,"diff"].map(function(t){var e=d.metadata.scenario[t].name;return{id:t,text:"diff"===t?e:"".concat(e," value")}}),default:d.settings.scenario_decomp_order},scale_explore:{id:"scale_explore",text:"Scale",type:"buttonset",position:"bottom",options:[{id:!1,text:"Unlocked"},{id:"years",text:"Years",attrs:{title:"Set scales to min/max across years"}}],default:d.settings.scale_explore},scale_compare:{id:"scale_compare",text:"Scale",type:"buttonset",position:"bottom",options:[{id:!1,text:"Unlocked"},{id:"years",text:"Years",attrs:{title:"Set scales to min/max across years"}},{id:"charts",text:"Charts",attrs:{title:"Set scales to min/max across charts"}}],default:d.settings.scale_compare},uncertainty_plot:{id:"uncertainty_plot",text:"Uncertainty",position:"bottom",type:"toggle",default:d.settings.uncertainty_plot},uncertainty_line:{id:"uncertainty_line",text:"Uncertainty",position:"bottom",type:"toggle",default:d.settings.uncertainty_line},detail:{id:"detail",text:"Detail",type:"slider",options:j.a.keys(d.topology.objects).filter(function(t){return!t.includes("disputes")}).map(function(t,e){return{id:e+1,text:e+1}}),default:d.settings.detail},value:{id:"value",text:"Value",type:"buttonset",position:"bottom",options:[{id:"observed",text:"Observed"},{id:"expected",text:"Expected"}],default:d.settings.value},value_map:{id:"value_map",text:"Value",type:"buttonset",position:"bottom",options:[{id:"observed",text:"Observed"},{id:"expected",text:"Expected"},{id:"ratio",text:"O/E ratio"}],default:d.settings.value_map},commonwealth:{id:"commonwealth",text:"Commonwealth only",type:"toggle",position:"bottom",on:"Yes",off:"No",default:d.settings.commonwealth},direction:{id:"direction",type:"buttonset",options:[{id:"dec",text:"-",attrs:{title:"Decreasing"}},{id:"",text:"±",attrs:{title:"Any"}},{id:"inc",text:"+",attrs:{title:"Increasing"}}]},treemap_filter:{id:"treemap_filter",type:"buttonset",options:[{id:"any",text:"Any"},{id:"sig",text:"Sig.",attrs:{title:"Significant"}}]},scenario:{id:"scenario",text:"Scenario",type:"buttonset",options:[4,2,3].map(function(t){return{id:t,text:d.metadata.scenario[t].name}}),default:d.settings.scenario},scenario_map:{id:"scenario_map",text:"Scenario",type:"buttonset",options:[4,2,3,"diff"].map(function(t){return{id:t,text:d.metadata.scenario[t].name}}),default:d.settings.scenario_map},rank_value:{id:"rank_value",text:"Rank",type:"toggle",position:"bottom",default:d.settings.rank_value}},d.visibility={chart:function(t){return"embed"!=t("mode")},controls:!1,mode:!1,dimension:!1,plot:!1,scol:!1,lines:!1,version:!1,direction:!1,treemap_filter:!1,display:function(t){if("england"==t("type"))return!0;if("advanced"==t("controls"))return!1;if(t("chart").isIn(["donut","sbar"]))return!1;if(t("dimension").isIn(["cause","risk","cause-risk"]))return!1;if("plot"==t("chart")&&t("plot").isIn(["cause","risk"]))return!1;var a=d.version[d.settings.version];return!(j.a.values(d.metadata.display).filter(function(t){var e=t.display_id,n=t.enabled,i=t.advanced;return n&&!i&&a.metadata.display.includes(e)}).length<2)},display_adv:function(t){if("england"==t("type"))return!1;if("basic"==t("controls"))return!1;if(t("chart").isIn(["donut","sbar"]))return!1;if(t("dimension").isIn(["cause","risk","cause-risk"]))return!1;if("plot"==t("chart")&&t("plot").isIn(["cause","risk"]))return!1;var n=d.version[d.settings.version];return!(j.a.values(d.metadata.display).filter(function(t){var e=t.display_id;return t.enabled&&n.metadata.display.includes(e)}).length<2)},rank:function(t){return"arrow"==t("chart")},cause:function(t){return"advanced"==t("controls")&&"risk"==t("display")&&!t("chart").isIn(["sbar","treemap","decomp"])||"cause"==t("display")&&(!t("chart").isIn(["treemap","xmas","scol","heatmap","decomp"])&&(("arrow"!=t("chart")||"display"!=t("rank"))&&("plot"!=t("chart")||!t("plot").isIn(["cause","risk"]))))},risk:function(t){return!!t("display").isIn(["risk","sev"])&&(!t("chart").isIn(["sbar","donut","xmas","scol","heatmap","decomp"])&&(("arrow"!=t("chart")||"display"!=t("rank"))&&("plot"!=t("chart")||!t("plot").isIn(["cause","risk"]))))},etiology:function(t){return("arrow"!=t("chart")||"display"!=t("rank"))&&(!t("chart").isIn(["sbar","donut","xmas","scol","heatmap","decomp"])&&"etiology"==t("display"))},impairment:function(t){return("arrow"!=t("chart")||"display"!=t("rank"))&&(!t("chart").isIn(["sbar","donut","xmas","scol","heatmap","decomp"])&&"impairment"==t("display"))},injury:function(t){return("arrow"!=t("chart")||"display"!=t("rank"))&&(!t("chart").isIn(["sbar","donut","xmas","scol","heatmap","decomp"])&&"injury"==t("display"))},risk_category:function(t){return!!["risk","sev"].includes(t("display"))&&(!!t("chart").isIn(["sbar","arrow","heatmap","decomp"])&&(("arrow"!=t("chart")||"display"==t("rank"))&&("decomp"!=t("chart")||26!=t("metric"))))},risk_level:function(t){return"risk"==t("display")&&(!!t("chart").isIn(["sbar","arrow","heatmap","decomp"])&&(("arrow"!=t("chart")||"display"==t("rank"))&&("decomp"!=t("chart")||26!=t("metric"))))},impairment_category:function(t){return"impairment"==t("display")&&(!!t("chart").isIn(["arrow","heatmap"])&&("arrow"!=t("chart")||"display"==t("rank")))},impairment_level:function(t){return"impairment"==t("display")&&(!!t("chart").isIn(["arrow","heatmap"])&&("arrow"!=t("chart")||"display"==t("rank")))},injury_category:function(t){return"injury"==t("display")&&(!!t("chart").isIn(["arrow","heatmap"])&&("arrow"!=t("chart")||"display"==t("rank")))},injury_level:function(t){return"injury"==t("display")&&(!!t("chart").isIn(["arrow","heatmap"])&&("arrow"!=t("chart")||"display"==t("rank")))},cause_category:function(t){return!!t("chart").isIn(["arrow","heatmap"])&&("display"==t("rank")&&"cause"==t("display"))},cause_level:function(t){return!!t("chart").isIn(["arrow","heatmap"])&&("display"==t("rank")&&"cause"==t("display"))},etiology_category:function(t){return!!t("chart").isIn(["arrow","heatmap"])&&("display"==t("rank")&&"etiology"==t("display"))},location_category:function(t){return!!t("chart").isIn(["arrow","heatmap"])&&"location"==t("rank")},location_level:function(t){return!!t("chart").isIn(["arrow","heatmap"])&&"location"==t("rank")},location_level_line:function(t){return"line"==t("chart")&&"location"==t("rank")},metric:function(t){var e=t("display"),n=d.version[d.settings.version].metadata.metric[e],i=(void 0===n?[]:n).filter(function(t){return!(d.metadata.metric[t]||{}).advanced});return"basic"==t("controls")&&1<i.length},metric_adv:function(t){var e=t("display"),n=d.version[d.settings.version].metadata.metric[e],i=void 0===n?[]:n;return"advanced"==t("controls")&&1<i.length},location:function(t){var e=t("chart");return!["map","xmas","heatmap","dotogram"].includes(e)&&(("decomp"!=e||26!=t("metric"))&&(("scol"!=e||"location"!=t("scol"))&&(("plot"!=e||"location"!=t("plot"))&&(("arrow"!=e||"location"!=t("rank"))&&("line"!=e||"location"!=t("lines"))))))},region:function(t){if("england"==t("type"))return!1;var e=t("chart");return!!["xmas","heatmap"].includes(e)||("decomp"==e&&26==t("metric")||("scol"==e&&"location"==t("scol")||"line"==e&&"location"==t("lines")))},locations:function(t){var e=t("chart");return!!["xmas","heatmap"].includes(e)||("decomp"==e&&26==t("metric")||("scol"==e&&"location"==t("scol")||"line"==e&&"location"==t("lines")))},year:function(t){var e=t("chart");return!["arrow","line","decomp","dotogram"].includes(e)&&(("map"!=e||!t("change"))&&(("plot"!=e||"year"!=t("plot"))&&("scol"!=e||"year"!=t("scol"))))},forecast_year:function(t){return"decomp"==t("chart")&&26!=t("metric")},age:function(t){if("basic"!=t("controls"))return!1;var e=t("chart");if("decomp"==e&&26==t("metric"))return!1;if("plot"==e&&"age"==t("plot"))return!1;if("scol"==e&&"age"==t("scol"))return!1;if(27==t("metric"))return!1;var n=(d.metadata.metric[t("metric")]||{}).ages;return!(n&&n.length<2)},age_adv:function(t){if("advanced"!=t("controls"))return!1;var e=t("chart");if("decomp"==e&&26==t("metric"))return!1;if("plot"==e&&"age"==t("plot"))return!1;if("scol"==e&&"age"==t("scol"))return!1;if(27==t("metric"))return!1;var n=(d.metadata.metric[t("metric")]||{}).ages;return!(n&&n.length<2)},age_slider:function(t){var e=t("chart");return("decomp"!=e||26!=t("metric"))&&(("plot"!=e||"age"!=t("plot"))&&(("scol"!=e||"age"!=t("scol"))&&(!!Number(t("metric")).isIn([26,28])||"advanced"==t("controls")&&("specific"==t("age_adv")&&27!=t("metric")))))},age_pod:function(t){return 27==t("metric")},sex:function(t){if("xmas"==t("chart"))return!1;if("plot"==t("chart")&&"sex"==t("plot"))return!1;if("scol"==t("chart")&&"sex"==t("scol"))return!1;var e=(d.metadata.metric[t("metric")]||{}).sexes;return!(e&&e.length<2)},unit:function(t){if(["treemap","donut"].includes(t("chart")))return!1;if("decomp"==t("chart")&&26==t("metric"))return!1;if("risk"==t("display")&&"5"==t("metric"))return!1;var e=(d.metadata.metric[t("metric")]||{}).units;return!(e&&e.length<2)},change:function(t){return"map"==t("chart")},years:function(t){return!!t("chart").isIn(["arrow"])||!("map"!=t("chart")||!t("change"))},decomp_years:function(t){return"decomp"===t("chart")&&26==t("metric")},depth:function(t){return"advanced"==t("controls")&&"treemap"==t("chart")},sbar_order:function(t){return"advanced"==t("controls")&&"sbar"==t("chart")},scol_order:function(t){return"advanced"==t("controls")&&"scol"==t("chart")},xmas_order:function(t){return"advanced"==t("controls")&&"xmas"==t("chart")},decomp_order:function(t){return"advanced"==t("controls")&&"decomp"==t("chart")&&26==t("metric")},scenario_decomp_order:function(t){return"advanced"==t("controls")&&"decomp"==t("chart")&&26!=t("metric")},scale_explore:function(t){if("ratio"==t("value"))return!1;if("compare"==t("mode"))return!1;if("advanced"!=t("controls"))return!1;var e=t("chart");return("scol"!==e||"year"!=t("scol"))&&(("plot"!==e||"year"!=t("plot"))&&!e.isIn(["treemap","arrow","donut","heatmap","line","decomp","dotogram"]))},scale_compare:function(t){return"ratio"!=t("value")&&("compare"==t("mode")&&("advanced"==t("controls")&&!t("chart").isIn(["treemap","arrow","donut","heatmap","decomp","dotogram"])))},uncertainty_plot:function(t){return"advanced"==t("controls")&&"plot"==t("chart")},rank_value:function(t){return"advanced"==t("controls")&&"line"==t("chart")&&"location"==t("lines")},uncertainty_line:function(t){return"advanced"==t("controls")&&"line"==t("chart")&&!t("rank")},detail:function(t){return"england"!=t("type")&&(!(j.a.keys(d.topology.objects).filter(function(t){return!t.includes("disputes")}).length<2)&&"map"==t("chart"))},commonwealth:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){return"undefined"!=typeof commonwealth&&"map"==t("chart")}),value:function(t){var e=d.getSetting("main","display"),n=t("metric"),i=d.version[d.settings.version].metadata.shapes[e],a=(i=void 0===i?{}:i)[n];return!!(void 0===a?[]:a).includes("expected")&&("value"!=t("dimension")&&("advanced"==t("controls")&&(!t("display").isIn(["impairment","etiology"])&&!t("chart").isIn(["donut","map","decomp"]))))},value_map:function(t){var e=d.getSetting("main","display"),n=t("metric"),i=d.version[d.settings.version].metadata.shapes[e],a=(i=void 0===i?{}:i)[n];return!!(void 0===a?[]:a).includes("expected")&&("value"!=t("dimension")&&("advanced"==t("controls")&&(!t("display").isIn(["impairment","etiology"])&&"map"==t("chart"))))},scenario:function(t){var e=t("chart");return("line"!=e||"scenario"!=t("lines"))&&(("decomp"!=e||26==t("metric"))&&(!["map","dotogram"].includes(e)&&"forecasting"===t("type")))},scenario_map:function(t){return"forecasting"===t("type")&&"map"==t("chart")}},d.controls.chart=new jn({container:"#controls-chart",update:function(t,e){d.update(d.controls.main,t,e)},values:d.settings,controls:{chart:{id:"chart",text:"Chart",type:"buttonset",options:j.a.values(d.metadata.chart).sort(function(t,e){return t.sort-e.sort}).map(function(t){return{id:t.chart_id,text:t.short_name,attrs:{class:"left-tip","data-tips":t.name}}}),default:d.settings.chart}},settings:{gaCategory:"GBD Compare"}}),d.controls.main=new jn({container:"#controls-main",update:function(t,e){d.update(d.controls.main,t,e)},values:d.settings,controls:Object(L.cloneDeep)(d.options),settings:{gaCategory:"GBD Compare"}}),d.controls.top=new jn({id:"top",container:"#controls-top",update:function(t,e){d.update(d.controls.top,t,e)},values:d.settings.charts.top,controls:Object(L.cloneDeep)(d.options),settings:{gaCategory:"GBD Compare"}}),d.controls.bottom=new jn({id:"bottom",container:"#controls-bottom",update:function(t,e){d.update(d.controls.bottom,t,e)},values:d.settings.charts.bottom,controls:Object(L.cloneDeep)(d.options),settings:{gaCategory:"GBD Compare"}}),d.controls.tour=new jn({container:"#controls-tour",update:function(t,e){d.update(d.controls.bottom,t,e)},controls:{tour:{id:"tour",type:"button",text:"Take tour",change:function(){d.tour.init(),d.tour.restart()}}},settings:{gaCategory:"GBD Compare"}}),N()("#control-button-tour .ui-button-text").html('Take tour <i class="fa fa-play"></i>'),N()("#controls-main, #controls-top, #controls-bottom").each(function(){N()(this).children(".control-container-select-region, .control-container-multi-select-locations").wrapAll(N()("<div/>",{class:"control-multi-container"}))}),N()("#control-menu-mode-option-".concat(d.settings.mode)).addClass("active"),N()("#control-menu-mode-option-compare").hover(function(){N()(this).delay(100).queue(function(){N()(this).addClass("hover"),N()(this).dequeue()})},function(){N()(this).dequeue().removeClass("hover")}),N()("#advanced-settings-button").click(function(){d.controls.main.changeSetting("controls","basic"==d.settings.controls?"advanced":"basic")}),N()("#app").addClass(d.settings.controls),N()("#advanced-settings-button").text("basic"==d.settings.controls?"Use advanced settings":"Use basic settings"),N()("#control-menu-dimension li").click(function(){"compare"!=d.settings.mode?(d.controls.main.changeValue("dimension",N()(this).attr("value")),d.controls.main.changeSetting("mode","compare"),N()("#gbd-app").attr("mode",d.settings.mode)):d.controls.main.changeSetting("dimension",N()(this).attr("value")),N()(".control-menu-mode-option").removeClass("active"),N()("#control-menu-mode-option-compare").addClass("active"),N()("#control-menu-mode-option-compare").removeClass("hover")}),N()("#control-menu-mode-option-explore").click(function(){d.settings.dimension=null,d.controls.main.changeSetting("mode","explore"),N()("#gbd-app").attr("mode",d.settings.mode),N()(".control-menu-mode-option").removeClass("active"),N()(this).addClass("active")}),N()("#control-menu-mode-option-single").click(function(){d.settings.dimension=null,d.controls.main.changeSetting("mode","single"),N()("#gbd-app").attr("mode",d.settings.mode),N()(".control-menu-mode-option").removeClass("active"),N()(this).addClass("active")})}},{key:"buildCharts",value:function(t){var s=this;j.a.entries(t).forEach(function(t){var e=t.key,n=t.value,i="#".concat(e,"-chart"),a=s.getSetting(e,"size");N()(i).removeClass("animate"),N()(i).addClass([a,n,"full"==a?"above":""].filter(function(t){return t}).join(" ")),N()(i).append('<div class="content"></div>'),N()("".concat(i," .content")).append('<div id="chart-controls-'.concat(e,'" class="chart-controls"></div>')),N()("".concat(i," .content")).append('<div id="title-container-'.concat(e,'" class="title-container"></div>')),N()("".concat(i," .content")).append('<div id="chart-container-'.concat(e,'" class="chart-container"></div>')),N()("".concat(i," .content")).append('<div id="legend-container-'.concat(e,'" class="legend-container"></div>'));var r=document.getElementById("".concat(e,"-chart"));r&&s.resizer[e].listenTo(r,function(){s.mutate[e]&&s.charts[e].view&&s.charts[e].view.resize()}),s.charts[e].controls=new jn({id:"".concat(e,"-view"),container:"#chart-controls-".concat(e),update:function(t,e){"scol"!=t.id&&"plot"!=t.id&&"lines"!=t.id||s.controls.main.changeSetting(t.id,e)},controls:{info:{id:"info",text:"Info",type:"button"},resize:{id:"resize",text:"Resize",type:"button",change:function(){N()(i).removeClass(s.settings.charts[e].size),N()(i).removeClass("above"),s.settings.charts[e].size="half"==s.settings.charts[e].size?"full":"half",N()(i).addClass("above"),N()(i).one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){"full"!=s.settings.charts[e].size&&N()(i).removeClass("above")}),N()(i).addClass(s.settings.charts[e].size)}},zoom:{id:"zoom",text:"Zoom",type:"buttons",options:[{id:"zoom-in",text:"+",change:function(){s.charts[e].view.chart.zoom("in")}},{id:"zoom-reset",text:"•",change:function(){s.charts[e].view.chart.zoom("reset")}},{id:"zoom-out",text:"-",change:function(){s.charts[e].view.chart.zoom("out")}}]},back:{id:"back",text:"Back",type:"button",change:function(t,e){s.update(null,t,e)}},plot:Object(L.cloneDeep)(s.options.plot),scol:Object(L.cloneDeep)(s.options.scol),lines:Object(L.cloneDeep)(s.options.lines)},settings:{gaCategory:"GBD Compare"}}),N()("#chart-controls-".concat(e)).children(".control-container-button-resize, .control-container-button-info").wrapAll(N()("<div/>",{class:"control-multi-container"})),N()(i).addClass("animate")}),N()(".control-button-resize .ui-button-text").remove(),N()(".control-button-resize").append(N()("<i/>",{class:"fa"})),N()(".control-button-info .ui-button-text").remove(),N()(".control-button-info").append(N()("<i/>",{class:"fa"})),N()("#top-view-control-button-info").popover({content:function(){return s.info("top")},template:'<div class="info-popover"><div class="arrow"></div><div class="popover-content"></div></div>',placement:"bottom",html:!0,viewport:{selector:"body",padding:5}}),N()("#bottom-view-control-button-info").popover({content:function(){return s.info("bottom")},template:'<div class="info-popover"><div class="arrow"></div><div class="popover-content"></div></div>',placement:"bottom",html:!0,viewport:{selector:"body",padding:5}}),N()(document).on("keyup.info",function(t){27==t.which&&(N()("#top-view-control-button-info").popover("hide"),N()("#bottom-view-control-button-info").popover("hide"))}),N()(document).on("click.info",function(t){var e=t.target,i=!1;if(N()(e).parents().each(function(t,e){!function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(t);var n=N()(e).attr("id");if("top-view-control-button-info"==n||"bottom-view-control-button-info"==n)return!(i=!0)}),i||"top-view-control-button-info"==e.id||"bottom-view-control-button-info"==e.id)return!1;N()("#top-view-control-button-info").popover("hide"),N()("#bottom-view-control-button-info").popover("hide")})}},{key:"issues",value:function(e){var n=this,t=function(t){return n.getSetting(e,t)},i=[{criteria:function(){return"risk"===t("display")},text:"Risk Factor estimates are not available for prevalence and incidence."},{criteria:function(){return t("value").isIn(["expected","ratio"])&&!Number(t("metric")).isIn([25,5])},text:"Expected values are values predicted by probability (for example, how many questions you might get right if you guess on a multiple choice test); these are used in comparison to values that are actually observed. Statistical tests are used to measure the difference between the observed and expected values."},{criteria:function(){return t("value").isIn(["expected","ratio"])&&Number(t("metric")).isIn([25,5])},text:"Expected values are values are not available for this metric."},{criteria:function(){return t("chart").isIn(["scol","xmas"])&&t("display").isIn(["risk"])},text:"The association between each risk factor and disease burden is considered separately. Therefore, the combined height of multiple bar segments of this graph may be greater than 100%."},{criteria:function(){return"donut"==t("chart")},text:"For risks with a negative PAF (population attributable fraction), the PAF is not displayed in this figure. This happens when the risk factor has a protective effect, e.g., moderate consumption of alcohol."},{criteria:function(){return"sbar"==t("chart")},text:"The number of risks displayed is determined by available screen space; as a result, some risks may not be displayed. "},{criteria:function(){return 29==t("metric")},text:"SEV, or summary exposure value, is a measure of a population’s exposure to a risk factor that takes into account the extent of exposure by risk level and the severity of that risk’s contribution to disease burden."},{criteria:function(){return 29==t("metric")},text:"SEV data are only available for most detailed risks (e.g., second hand smoke, but not tobacco)."},{criteria:function(){return 26==t("metric")&&"decomp"!=t("chart")},text:"Life expectancy is the number of years a person is expected to live based on their present age. In this chart, the life expectancy displayed for an age group is for the first year in the age group (e.g., 50-54 represents life expectancy at age 50)."},{criteria:function(){return 28==t("metric")},text:"HALE, or healthy life expectancy, is the number of years that a person at any given age can expect to live in full health, taking into account mortality and disability. HALE provides a single measure of average population health for individual countries.In this chart, the healthy life expectancy displayed for an age group is for the first year in the age group (e.g., 50-54 represents life expectancy at age 50)."},{criteria:function(){return 25==t("metric")},text:"Maternal mortality ratio data are available for maternal causes for females between the ages of 10 and 54."},{criteria:function(){return"treemap"==t("chart")&&("advanced"==t("controls")&&(!!n.charts[e]&&(!!n.charts[e].view&&(!!n.charts[e].view.settings&&(!!n.charts[e].view.settings.legend&&(!!n.charts[e].view.settings.legend.filter&&"sig"==n.charts[e].view.settings.legend.filter))))))},text:"Growth/decline is shown as statistically significant if the entire uncertainty bound is on one side of 0 (i.e., doesn’t include 0)."},{criteria:function(){return"risk"==t("display")},text:"Annual results are not yet available for risk factors, please select from the following years to display results: 1990, 1995, 2000, 2005, 2007, 2010, 2015, 2017."},{criteria:function(){return"impairment"==t("display")},text:"The impairment estimates for some years are currently unavailable. This will be updated in due course."}];return i.filter(function(t){return(0,t.criteria)()}).map(function(t){return t.text})}},{key:"info",value:function(t){var e=this.issues(t),n=N()("<div/>").css({width:"250px"});if(n.append(N()("<h2/>").text("About this chart:")),n.append(N()("<p/>").text({treemap:"This chart is essentially a square pie chart; the size of the box is proportionate to the burden displayed. The cause hierarchy may be navigated by levels. As the level increases, boxes will remain in place but will be subdivided to reflect the detail. Can also display a risk factor and its attribution to the causes.",xmas:"This chart compares groups of causes or risks for males and females across selected locations.",scol:"This chart displays groups of causes or risks for different age groups, locations, years, or sexes. Formerly known as GBD Cause Patterns.",sbar:"This chart displays total burden by risk factor, broken down into 21 broad cause groups or – if selected – into more detailed causes.",arrow:"This chart displays ranks of causes or risks for two different years and visualizes the change in rankings between those years with a connecting line.",heatmap:"This chart shows top-ranked causes or risks for different locations; selecting a location will show leading causes or risks for that location.",donut:"This chart visualizes how much burden is explained by one or more (overlap) types of risk factors and how much is not explained by GBD risk factors.",plot:"This chart displays mean estimates (points) and 95% uncertainty intervals (lines) by year, age, sex, cause, risk, or country",map:"Visualizes country or subnational estimates on a map.",line:"This chart displays estimates over time for causes, risks, etiologies, or impairments for selected age, sex, and locations.",decomp:"This chart visualizes changes in life expectancy for a selected year range and how causes contributed to changes in life expectancy for selected locations. Click on a bar in the chart to display all values for the corresponding location. Hover over a cause in the legend to highlight it in for all locations in the chart."}[this.getSetting(t,"chart")])),e.length){n.append(N()("<h2/>").text("Please note:"));var i=N()("<ul/>").appendTo(n);e.forEach(function(t){i.append(N()("<li/>").text(t))})}return n.wrap("<div/>").parent().html()}},{key:"buildChart",value:function(n,t){var i=this;N()("#".concat(n,"-chart .loader")).show();var e,a={chart:n,animation:void 0===i.settings.animation?1e3:i.settings.animation,container:{chart:"#chart-container-".concat(n),legend:"#legend-container-".concat(n),title:"#title-container-".concat(n),controls:"#chart-controls-".concat(n)}},r=j.a.values(i.metadata.year).map(function(t){return t.year_id}),s=i.version[i.getSetting("main","version")].metadata.metric.cause,o=void 0===s?[]:s;if(o.includes(2))e=2;else if(o.includes(1))e=1;else{e=Ti(o,1)[0]}switch(t){case"map":a.filter=i.settings.charts[n].filter.values,a.domain=i.settings.charts[n].filter.scale,a.zoom=i.settings.charts[n].zoom,i.charts[n].view=new pi(a),i.charts[n].view.topology=i.topology;break;case"treemap":var c=i.getSetting(n,"years");a.legend={direction:i.getSetting(n,"direction"),filter:i.getSetting(n,"treemap_filter"),year1:c[0],year2:c[1]},a.defaults={location:1,age:22,sex:3,metric:e,unit:2,value:"observed",year:2017},i.charts[n].view=new Hn(a);break;case"plot":a.years=j.a.extent(r),i.charts[n].view=new Dn(a);break;case"line":a.years=j.a.extent(r),i.charts[n].view=new Tn(a);break;case"sbar":i.charts[n].view=new Vn(a);break;case"scol":a.maxSelection=i.colors.list.length,i.charts[n].view=new Gn(a);break;case"xmas":a.maxSelection=i.colors.list.length,i.charts[n].view=new Wn(a);break;case"arrow":i.charts[n].view=new Be(a);break;case"heatmap":a.selected=i.settings.charts[n].selected,i.charts[n].view=new xn(a);break;case"donut":i.charts[n].view=new yn(a);break;case"decomp-le":i.charts[n].view=new en(a);break;case"decomp-scenario":i.charts[n].view=new vn(a);break;case"dotogram":i.charts[n].view=new xi(a);break;default:i.charts[n].view=!1}i.charts[n].view.metadata=i.metadata,i.charts[n].view.hierarchy=i.hierarchy,i.charts[n].view.getSetting=function(t){return i.getSetting(n,t)},i.charts[n].view.changeSetting=function(t,e){return i.changeSetting(t,e,n)},i.charts[n].view.changeValue=function(t,e){return i.changeValue(t,e,n)},i.charts[n].view.getParameters=function(t){return i.getParameters(n,t)},i.charts[n].view.getValue=function(t){return i.getValue(n,t)},i.charts[n].view.getExtent=function(t){return i.getExtent(n,t)},i.charts[n].view.assignColor=function(t){return i.assignColor(n,t)},i.charts[n].view.refresh=function(){return i.update(null,{id:"stack"})},i.charts[n].view&&i.charts[n].view.init()}},{key:"updateChart",value:function(t,e){var n=this,i="#".concat(t,"-chart");n.mutate[t]=!1,N()("#".concat(t,"-chart")).addClass("no-transition"),n.charts[t].view&&(N()(i).removeClass(n.charts[t].view.type),n.charts[t].view.destroy()),N()(i).addClass(e),N()("body")[0].offsetHeight,N()(document).poshytip("hide"),delete n.charts[t].view,n.charts[t].view=void 0,N()("#title-container-".concat(t)).removeAttr("style").empty(),N()("#chart-container-".concat(t)).removeAttr("style").empty(),N()("#legend-container-".concat(t)).removeAttr("style").empty(),n.buildChart(t,e),N()("body")[0].offsetHeight,window.setTimeout(function(){n.mutate[t]=!0,N()("#".concat(t,"-chart")).removeClass("no-transition")},1001)}},{key:"updateCharts",value:function(t,e,n){var i=this,a=[];if("back"==e.id)return j.a.values(i.charts).forEach(function(t){t.view.loaded?t.view.update(e,n):t.view.render()});j.a.entries(t).forEach(function(t){var e=t.key,n=t.value;N()("#".concat(e,"-view-control-button-info")).popover("hide"),n?(i.charts[e].view&&i.charts[e].view.type==n||i.updateChart(e,n),i.charts[e].view&&(a=a.concat(i.charts[e].view.requests()))):(N()("#title-container-".concat(e)).removeAttr("style").empty(),N()("#chart-container-".concat(e)).removeAttr("style").empty(),N()("#legend-container-".concat(e)).removeAttr("style").empty(),i.charts[e].view=!1)}),"year"===e.id&&(a=a.filter(function(t){return!t.extent})),i.cancelRequests(),i.getDataThrottled(a,function(){j.a.entries(i.charts).forEach(function(t){t.value.view&&(t.value.view.loaded?t.value.view.update(e,n):(N()("#".concat(t.key,"-chart .loader")).fadeOut(500),t.value.view.render()))}),i.downloads()})}},{key:"update",value:function(t,e,n){var i=this;t&&i.syncControls(t,e,n),i.updateValues(e,n);var a=function(t){var e=i.getSetting(t,"chart"),n=i.getSetting(t,"metric");return"decomp"===e?"".concat(e,26==n?"-le":"-scenario"):e},r=["embed","single"].includes(i.getSetting("main","mode"))?{top:a("main"),bottom:null}:{top:a("top"),bottom:a("bottom")};i.updateCharts(r,e,n),i.updateVisibility(e,n)}},{key:"getParameters",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=this,n=a.getSetting(t,"display"),i=a.getSetting(t,"type"),r=a.getSetting(t,"rank"),s=this.getSetting(t,"level"),o=this.getSetting(t,"category"),c="display"===r?n:r;if(e.chart=t,null==e.value&&(e.value=a.getSetting(t,"value")),null==e.data&&(e.data=e.paf||"cause"!=n?"paf":"cause"),null==e.metric&&(e.metric=a.getSetting(t,"metric")),null==e.unit&&(e.unit=a.getSetting(t,"unit")),null==e.location&&(e.location="location"===c?We(a.metadata,c,s,o):a.getSetting(t,"location")),null==e.year){var l=e.unit;e.year="chg"==l||"pcg"==l?a.getSetting(t,"years"):a.getSetting(t,"year")}if(null==e.age&&(e.age=a.getSetting(t,"age")),null==e.sex&&(e.sex=a.getSetting(t,"sex")),null==e.cause&&(e.cause="cause"===c?We(a.metadata,c,s,o):a.getSetting(t,"cause")),null==e.paf){var u=["risk","impairment","etiology","injury"].includes(c)?We(a.metadata,c,s,o):a.getSetting(t,n);e.paf="paf"==e.data?u:0}if("forecasting"===i&&null==e.scenario){var h=Object(L.castArray)(e.year),d=Object(L.castArray)(a.getSetting(t,"scenario")),f=h.reduce(function(n,t){var e=a.metadata.year[t].type,i=void 0===e?[]:e;return d.forEach(function(t){var e=i.includes("forecast")||"diff"===t?t:1;n.includes(e)||n.push(e)}),n},[]);"decomp"==e.value?e.scenario=1===f.length?f[0]:f.find(function(t){return 1!==t}):e.scenario=1===f.length?f[0]:f}return"decomp"==e.value&&(e.year=e.year.join("_")),e}},{key:"cancelRequests",value:function(){this.requests=this.requests||[],this.requests.forEach(function(t){var e=t.readyState,n=t.abort;4!==e&&n&&n()}),this.requests=[]}},{key:"makeRequest",value:function(t,l){var m=this;return N.a.ajax({url:t,dataType:"json",method:"GET",data:Object(L.mapValues)(l,function(t){return t instanceof Array?t.join("."):t}),success:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=void 0===e?[]:e,i=t.keys,g=void 0===i?[]:i,v=m.data.cause;if("intersect"==l.data&&(v=m.data.intersect),"change"==l.data&&(v=m.data.change),l.extent&&(v=m.data.extent),v[l.value]=v[l.value]||{},v=v[l.value],l.extent){var a=m.metadata.measure[l.metric][l.unit].multiplier,r=n.min,s=void 0===r?1/0:r,o=n.max,c=void 0===o?-1/0:o;v[l.chart]={min:s*a,max:c*a}}else n.forEach(function(t){var e=t.reduce(function(t,e,n){return t[g[n]]=e,t},{}),n=e.cause,i=e.paf,a=e.location,r=e.age,s=e.year,o=e.sex,c=e.metric,l=e.unit,u=e.scenario,h=e.mean,d=e.upper,f=e.lower,p=m.metadata.measure[c][l].multiplier;h&&Object(L.setWith)(v,[n,i,a,r,s,o,c,l,u],Ci({},h?{m:h*p}:{},d?{u:d*p}:{},f?{l:f*p}:{},{real:!0}),Object)})}})}},{key:"getData",value:function(t,e){var s=this;s.requests=[],t.forEach(function(t,e){var n=U({},t),i="api/data",a=n.chart;if(n.version=s.getSetting("main","version"),n.context="cause",n.base="single","intersect"==n.data&&(n.context="risk",n.base="intersect"),"change"==n.data&&(n.base="multi"),("paf"==n.data||n.paf)&&(n.context=s.getSetting("main","display")),"expected"==n.value&&(n.base="expected"),"decomp"==n.value&&(n.context="decomp",n.base="multi"),"haqi"==n.context&&(n.base="haqi"),n.extent){n.year=j.a.keys(s.metadata.year).map(function(t){return Number(t)});var r=s.getSetting(a,"chart");i=["sbar","scol","xmas"].includes(r)?"sbar"===r&&2==s.getSetting(a,"unit")?"api/data/extent/ppt":"api/data/extent/stacked":s.getSetting(a,"uncertainty")&&"expected"!=n.value?"api/data/extent/uncertainty":"api/data/extent"}"ratio"==n.value?(s.requests.push(s.makeRequest(i,U({},n,{value:"expected",base:"expected"}))),s.requests.push(s.makeRequest(i,U({},n,{value:"observed",base:"single"})))):"diff"==n.scenario?s.requests.push(s.makeRequest(i,U({},n,{scenario:[3,4]}))):s.requests.push(s.makeRequest(i,n))});var n=window.setTimeout(function(){N()("body").addClass("loader"),N()("#loader").stop().fadeIn(250)},700);N.a.when.apply(N.a,Si(s.requests)).done(function(){window.clearTimeout(n),N()("body").removeClass("loader"),N()("#loader").fadeOut(250,function(){e()})})}},{key:"getValue",value:function(n,t){var r=this,e=r.getParameters(n,t),i=e.age,a=e.cause,s=e.location,o=e.metric,c=e.paf,l=e.sex,u=e.value,h=e.year,d=e.extent,f=e.scenario,p=e.data,g=e.unit;if("rank"===g){g=r.getSetting(n,"unit");var v=r.getSetting(n,"rank"),m=r.getSetting(n,"display"),y=r.getSetting(n,"level"),b=r.getSetting(n,"category"),x="display"===v?m:v,_=[v,m,b,y,u,a,c,s,i,h,l,o,g,f];if(Object(L.has)(r.data.rank,_))return Object(L.get)(r.data.rank,_);var w=Re(r.metadata)[x].key,k=Ci({},e,{unit:g}),S=0;return We(r.metadata,x,y,b).map(function(t){var e=r.getValue(n,Ci({},k,Mi({},w,t))).m;return{key:w,id:t,mean:e}}).sort(function(t,e){return e.mean-t.mean}).forEach(function(t){var e=t.id,n=t.key,i=t.mean;k[n]=e;var a=i?S+=1:null;Object(L.setWith)(r.data.rank,[v,m,b,y,u,k.cause,k.paf,k.location,k.age,k.year,k.sex,k.metric,k.unit,f],a,Object)}),Object(L.get)(r.data.rank,_,null)}if(e.unit.isIn(["chg","pcg","acg"])){var C;delete e.scenario;var M=(r.metadata.metric[o]||{}).units,T=void 0===M?[]:M;g=r.getSetting(n,"unit"),"chg"==e.unit&&T.includes(3)&&(g=3);var E=r.getValue(n,U({},e,{unit:g,year:h[0]})).m,A=r.getValue(n,U({},e,{unit:g,year:h[1]})).m;return"chg"==e.unit&&(C=Math.log(A/E)/(h[1]-h[0])),"pcg"==e.unit&&(C=(A-E)/Math.abs(E)),"acg"==e.unit&&(C=A-E),isNaN(C)||!isFinite(C)?{m:0}:{m:C}}if("ppt"==e.unit){g=27==e.age?3:1;var O=r.getValue(n,U({},e,{unit:g})),P=r.getValue(n,U({},e,{data:"cause",unit:g,paf:0,cause:294})),D=O.m/P.m;return d?(D=O.max/P.max,isNaN(D)||!isFinite(D)?{max:0}:{max:D}):isNaN(D)||!isFinite(D)?{m:0}:{m:D}}if("ratio"==u){var I=r.getValue(n,U({},e,{value:"expected"})).m,N=r.getValue(n,U({},e,{value:"observed"})).m/I;return{m:isNaN(N)||!isFinite(N)?0:N}}if("diff"==f){var j=r.getValue(n,U({},e,{scenario:4})).m,z=r.getValue(n,U({},e,{scenario:3})).m-j;return{m:isNaN(z)||!isFinite(z)?0:z}}var H={u:0,l:0,m:0};return"intersect"==p?Object(L.get)(r.data.intersect,[u,a,c,s,i,h,l,o,g,f],H).m:"change"==p?Object(L.get)(r.data.change,[u,a,c,s,i,h,l,o,g,f],H):d?Object(L.get)(r.data.extent,[u,n],{min:0,max:0}):Object(L.get)(r.data.cause,[u,a,c,s,i,h,l,o,g,f],H)}},{key:"getExtent",value:function(t){var e=[],n=[],i=this.getSetting(t,"chart"),a=this.getSetting(t,"change");if("map"==i&&a){var r=j.a.max(j.a.values(this.charts).reduce(function(t,e){var n=e.view;return t.concat(n.extent().map(function(t){return Math.abs(t)}))},[]));return[-r,r]}var s=this.getSetting(t,"scale"),o=this.getSetting(t,"value");return"years"==s?[this.data.extent[o][t].min,this.data.extent[o][t].max]:"charts"==s?j.a.extent(j.a.values(this.charts).reduce(function(t,e){var n=e.view;return t.concat(n.extent())},[])):[e.length?j.a.min(e):0,n.length?j.a.max(n):0]}},{key:"assignColor",value:function(t,e){var n=this,i=n.getSetting(t,"chart"),a=n.getSetting(t,"display");"sbar"==i&&(a="cause"),"line"==i&&(a="location"),n.unassignColors(t);var r=n.getSetting(t,"colors");null==r[e]&&(r[e]=n.colors.list.indexOf(n.colors[a][0]),n.changeSetting("colors",r,t));var s=n.colors[a].indexOf(n.colors.list[r[e]]);return-1!=s&&n.colors[a].splice(s,1),"location"==a&&n.colors[a].push(n.colors.list[r[e]]),n.colors.list[r[e]]}},{key:"unassignColors",value:function(t){var n=this,e=n.getSetting(t,"chart"),i=n.getSetting(t,"display");"sbar"==e&&(i="cause"),"line"==e&&(i="location");var a=n.getSetting(t,"colors"),r=n.getSetting(t,"list");0==r.length?(n.colors[i]=n.colors.list.slice(),a={}):j.a.keys(a).forEach(function(t){r.map(function(t){return parseInt(t)}).includes(parseInt(t))||(n.colors[i].push(n.colors.list[a[t]]),a[t]=void 0,delete a[t])}),n.changeSetting("colors",a,t),"location"!=i&&n.colors[i].sort(function(t,e){return n.colors.list.indexOf(t)-n.colors.list.indexOf(e)})}},{key:"getSetting",value:function(t,e){var n=this,i="explore"==n.settings.mode&&"top"==t?"map":n.settings.chart,a="display"==e?null:n.getSetting(t,"display"),r=n.settings.metric;if("advanced"==n.settings.controls&&(r=n.settings.metric_adv),"metric"==e)return r;if("chart"==e)return i;if("size"==e)return n.settings.charts[t][e];if("filter"==e){if("map"===i)return n.settings.charts[t].filter;if("treemap"===i)return n.getSetting(t,"treemap_filter")}if("display"==e){var s="advanced"==n.settings.controls?n.settings.display_adv:n.settings.display,o=(n.metadata.metric[r]||{}).display;return o&&1===o.length?"sev"===o[0]&&"risk"!==s?s:o[0]:["sbar","donut"].includes(i)?"risk":"plot"==i&&"risk"==n.settings.plot?"risk":"plot"==i&&"cause"==n.settings.plot?"cause":"cause"==n.settings.dimension?"cause":"risk"==n.settings.dimension?"risk":"cause-risk"==n.settings.dimension?"top"==t?"cause":"risk":s}if("cause"==e&&!n.getVisibility("cause"))return 294;if("sev"==e)return n.getSetting(t,"risk");if(["le","hale","haqi"].includes(e))return 0;if("age"==e){var c=(n.metadata.metric[r]||{}).ages,l=void 0===c?[]:c;if(1===l.length)return l[0];if("advanced"==n.settings.controls&&"specific"==n.getSetting(t,"age_adv")||[26,28].includes(Number(r))){var u=n.getSetting(t,"age_slider");return[2,3,4].includes(Number(u))&&[26,28].includes(Number(r))?28:u}if(27==r)return n.getSetting(t,"age_pod")}if("sex"==e){var h=(n.metadata.metric[r]||{}).sex,d=void 0===h?[]:h;if(1===d.length)return d[0]}if(("year"==e||"years"==e)&&"decomp"==i&&26==r)return n.getSetting(t,"decomp_years");if("year"==e&&"decomp"==i&&26!=r)return n.getSetting(t,"forecast_year");if("order"==e)return"decomp"===n.getSetting(t,"chart")&&26!=r?n.getSetting(t,"scenario_decomp_order"):n.getSetting(t,"".concat(n.getSetting(t,"chart"),"_order"));if("level"==e)return"treemap"==i?n.getSetting(t,"depth"):"sbar"==i?n.getSetting(t,"risk_level"):"location"==n.getSetting(t,"rank")?n.getSetting(t,"location_level"):29==r?1/0:n.getSetting(t,"".concat(a,"_level"));if("location_level"==e&&"line"===i)return n.getSetting(t,"location_level_line");if("rank"==e)return"line"==i&&n.getSetting(t,"rank_value")&&"location"==n.getSetting(t,"lines")?"location":"heatmap"===i?"display":!!n.getVisibility(e)&&n.settings.charts[t][e];if("unit"==e){var f=(n.metadata.metric[r]||{}).units;return f&&1===f.length?f[0]:"risk"==a&&"5"==r?2:Number("main"==t?n.settings[e]:n.settings.charts[t][e])}if("category"==e)return"line"==i?1:"location"==n.getSetting(t,"rank")?n.getSetting(t,"location_category"):29==r?n.getSetting(t,"risk_category"):n.getSetting(t,"".concat(a,"_category"));if("scale"==e){var p=n.getSetting(t,"scol"),g=n.getSetting(t,"plot"),v=!1;if("compare"==n.settings.mode)"years"==(v=n.getSetting(t,"scale_compare"))&&("scol"==i&&"year"==p||"plot"==i&&"year)"==g)&&(v=!1),v=n.getVisibility("scale_compare")?v:"charts";else if(n.getVisibility("scale_explore")){if("scol"==i&&"year"==p)return!1;if("plot"==i&&"year"==g)return!1;v=n.getSetting(t,"scale_explore")}return"false"!=v&&v}if("uncertainty"==e)return n.getSetting(t,"uncertainty_".concat(i));if("location"==e&&("scol"==n.settings.chart&&"location"==n.settings.scol||"line"==n.settings.chart&&"location"==n.settings.lines||"decomp"==n.settings.chart&&26==r||["xmas","heatmap"].includes(n.settings.chart)))return n.getSetting(t,"locations");if("value"==e){if("compare"==n.settings.mode&&"value"==n.settings.dimension){if("top"==t)return"observed";if("bottom"==t)return"expected"}if("map"==i&&n.getVisibility("value_map"))return n.getSetting(t,"value_map");if(!n.getVisibility(e))return"observed"}if(["list","colors","group"].includes(e))return"sbar"==i?"list"==e?Si(n.settings.stack.layers.cause[e]):n.settings.stack.layers.cause[e]:"line"==i?"list"==e?n.getSetting(t,"locations"):n.settings.stack.layers.location[e]:"list"==e?Si(n.settings.stack.layers[a][e]):n.settings.stack.layers[a][e];if("scenario"==e){if("line"==i&&"scenario"==n.settings.lines)return[1,2,3,4];if("map"==i)return n.getSetting(t,"scenario_map")}if(["controls","mode","dimension","plot","scol","lines"].includes(e))return n.settings[e]||"";if(n.getVisibility("".concat(e,"_adv")))return n.getSetting(t,"".concat(e,"_adv"));var m=n.getVisibility(e);return"main"!=t&&"main"!=m&&m?n.settings.charts[t][e]||"":n.settings[e]||""}},{key:"changeSetting",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"main",i=this,a=i.getSetting(n,"chart");if("year1"==t||"year2"==t){var r=i.getSetting(n,"years");if("year1"==t)return i.changeSetting("years",[Number(e),r[1]],n);if("year2"==t)return i.changeSetting("years",[r[0],Number(e)],n)}if("zoom"==t)return i.settings.charts[n].zoom=e;if("filter_scale"==t)return i.settings.charts[n].filter.scale=e;if("filter"==t){if("map"==a)return i.settings.charts[n].filter.values=e;"treemap"==a&&(t="treemap_filter")}if("mode"==t)return"compare"!=e&&(i.settings.dimension=null),i.controls.main.changeSetting(t,e),N()("#gbd-app").attr("mode",i.settings.mode),N()(".control-menu-mode-option").removeClass("active"),void N()(".control-menu-mode-option[value=".concat(e,"]")).addClass("active");if("chart"==t)return i.controls.chart.changeSetting(t,e);if("location"==t&&("scol"==i.settings.chart&&"location"==i.settings.scol||"line"==i.settings.chart&&"location"==i.settings.lines||i.settings.chart.isIn(["xmas","heatmap"]))){e=parseInt(e)?parseInt(e):e;var s=i.getSetting(n,"locations").slice();return e.isIn(s)?s.splice(s.indexOf(e),1):s.push(e),i.controls[n].changeSetting("locations",s)}if("level"==t&&(t="treemap"==a?"depth":"sbar"==a?"risk_level":"arrow"==a&&"location"==i.settings.rank?"location_level":"line"==a?"location_level_line":"".concat(i.getSetting(n,"display"),"_level")),"category"==t&&(t="sbar"==a?"risk_category":"arrow"==a&&"location"==i.settings.rank?"location_category":"".concat(i.getSetting(n,"display"),"_category")),"scale"==t&&(t="compare"==i.settings.mode?"scale_compare":"scale_explore"),"age"==t&&"advanced"==i.settings.controls&&"specific"==i.getSetting(n,"age_adv")&&(t="age_slider"),t.isIn(["list","colors","group"]))return"sbar"==i.getSetting(n,"chart")?i.settings.stack.layers.cause[t]=e:"line"==i.getSetting(n,"chart")?i.settings.stack.layers.location[t]=e:i.settings.stack.layers[i.getSetting(n,"display")][t]=e;"advanced"==i.settings.controls&&void 0!==i.options["".concat(t,"_adv")]&&(t="".concat(t,"_adv")),i.controls[n].changeSetting(t,e)}},{key:"changeValue",value:function(t,e,n){var i=this,a=i.getSetting(n,"chart");if("selected"===t)return i.settings.charts[n].selected=e;if("zoom"==t)return i.settings.charts[n].zoom=e;if("filter_scale"==t)return i.settings.charts[n].filter.scale=e;if("filter"==t){if("map"==a)return i.settings.charts[n].filter.values=e;"treemap"==a&&(t="treemap_filter")}if("location"==t&&("scol"==a&&"location"==i.settings.scol||"line"==a&&"location"==i.settings.lines||a.isIn(["xmas","heatmap"]))){e=parseInt(e)?parseInt(e):e;var r=i.getSetting(n,"locations").slice();return e.isIn(r)?r.splice(r.indexOf(r),1):r.push(e),i.controls[n].changeValue("locations",r),void i.syncControls(i.controls[n],i.controls[n].controls.locations,r)}if("level"==t&&(t="treemap"==a?"depth":"sbar"==a?"risk_level":"arrow"==a&&"location"==i.settings.rank?"location_level":"line"===a?"location_level_line":"".concat(i.getSetting(n,"display"),"_level")),"category"==t&&(t="sbar"==a?"risk_category":"arrow"==a&&"location"==i.settings.rank?"location_category":"".concat(i.getSetting(n,"display"),"_category")),"scale"==t&&(t="compare"==i.settings.mode?"scale_compare":"scale_explore"),"age"==t&&"advanced"==i.settings.controls&&"specific"==i.getSetting(n,"age_adv")&&(t="age_slider"),t.isIn(["list","colors","group"]))return"sbar"==i.getSetting(n,"chart")?i.settings.stack.layers.cause[t]=e:"line"==i.getSetting(n,"chart")?i.settings.stack.layers.location[t]=e:i.settings.stack.layers[i.getSetting(n,"display")][t]=e;"advanced"==i.settings.controls&&void 0!==i.options["".concat(t,"_adv")]&&(t="".concat(t,"_adv")),i.controls[n].changeValue(t,e),i.syncControls(i.controls[n],i.controls[n].controls[t],e)}},{key:"updateValues",value:function(t){var n=this,e=t.controls,i=(e=void 0===e?{}:e).settings,a=(i=void 0===i?{}:i).id,r=void 0===a?"main":a,s=n.getSetting("main","metric"),o=n.getSetting("main","display"),c=n.getSetting("main","dimension"),l=n.getSetting("main","mode"),u=n.getSetting("main","change"),h=n.getSetting("main","unit"),d=n.settings.type,f=n.settings,p=f.scol,g=f.plot,v=f.chart;if(N()(".control-option-buttonset-rank-display .ui-button-text").text(o.capitalize()),!["metric","metric_adv"].includes(t.id)){var m=n.version[n.settings.version].metadata.metric[n.settings.display_adv],y=void 0===m?[]:m;!y.includes(Number(s))&&y.length&&n.controls.main.changeSetting("metric_adv",y[0]),n.controls.main.updateOptions("metric_adv"),n.controls.main.changeValue("metric_adv",n.getSetting("main","metric"))}var b=n.metadata.metric[s]||{},x=b.charts,_=void 0===x?j.a.keys(n.metadata.chart):x,w=b.plot,k=_.filter(function(t){var e=n.metadata.chart[t].metrics;return("decomp"!==t||"risk"==o||26==s)&&(!e||e.includes(Number(s)))}),S=!k||k.includes("treemap")?"treemap":"line";if((["cause","cause-risk"].includes(c)&&"treemap"==v||["risk","cause","cause-risk"].includes(c)&&"scol"==v||["risk","cause","cause-risk"].includes(c)&&"sbar"==v||["risk","cause-risk","value"].includes(c)&&"donut"==v||"england"==d&&"donut"==v||["risk","cause","cause-risk","sex"].includes(c)&&"xmas"==v||"year"==c&&"line"==v||["risk","cause","cause-risk","age","value"].includes(c)&&"decomp"==v||k&&!v.isIn(k))&&(n.controls.chart.changeValue("chart","map"),v=n.settings.chart),("explore"==l&&"map"==v||"location"==c&&"map"==v)&&(n.controls.chart.changeValue("chart",S),v=n.settings.chart),w&&!g.isIn(w)){var C=["year","age","sex","cause","risk","location"].find(function(t){return w.includes(t)});n.controls.main.changeSetting("plot",C,{},"plot"==v),g=n.settings.plot}if(w&&!p.isIn(w)){var M=["age","location","year","sex"].find(function(t){return w.includes(t)});n.controls.main.changeSetting("scol",M,{},"scol"==v),p=n.settings.scol}if("year"==c&&"year"==g&&n.controls.main.changeSetting("plot","location",{},"plot"==v),"age"==c&&"age"==g&&n.controls.main.changeSetting("plot","year",{},"plot"==v),"sex"==c&&"sex"==g&&n.controls.main.changeSetting("plot","year",{},"plot"==v),"cause"==c&&"cause"==g&&n.controls.main.changeSetting("plot","year",{},"plot"==v),"risk"==c&&"risk"==g&&n.controls.main.changeSetting("plot","year",{},"plot"==v),"location"==c&&"location"==g&&n.controls.main.changeSetting("plot","year",{},"plot"==v),"cause-risk"!=c||"cause"!=g&&"risk"!=g||n.controls.main.changeSetting("plot","year",{},"plot"==v),"year"==c&&"year"==p&&n.controls.main.changeSetting("scol","age",{},"scol"==v),"age"==c&&"age"==p&&n.controls.main.changeSetting("scol","location",{},"scol"==v),"sex"==c&&"sex"==p&&n.controls.main.changeSetting("scol","age",{},"scol"==v),"unit"==t.id)if("compare"==l){var T=n.getSetting("top","age"),E=n.getSetting("top","unit"),A=n.getSetting("bottom","age"),O=n.getSetting("bottom","unit");27==T&&1==E&&n.changeValue("age",22,"top"),27==A&&1==O&&n.changeValue("age",22,"bottom")}else 27==n.getSetting(r,"age")&&1==n.getSetting(r,"unit")&&n.changeValue("age",22,r);t.id.includes("age")&&27==n.getSetting(r,"age")&&1==n.getSetting(r,"unit")&&n.changeValue("unit",3,r),"unit"==t.id&&u&&3!=h&&n.changeValue("change",!1,"main"),"change"==t.id&&u&&3!=h&&n.changeValue("unit",3,"main"),"change"==t.id&&n.getSetting(r,"change")&&"years"==n.getSetting(r,"scale")&&("compare"==l?n.changeValue("scale","charts",r):n.changeValue("scale","false",r)),t.id.includes("scale")&&"years"==n.getSetting(r,"scale")&&n.getSetting(r,"change")&&n.changeValue("change",!1,r);var P=n.controls.chart.controls.chart.options(),D=P.filter(function(t){return t.id==n.getSetting("top","chart")})[0].text,I=P.filter(function(t){return t.id==n.getSetting("bottom","chart")})[0].text;N()("#controls-main-label").text("".concat("single"==l?"":"Shared"," Settings")),N()("#controls-top-label").text("".concat("explore"==l?D:"Top chart"," Settings")),N()("#controls-bottom-label").text("".concat("explore"==l?I:"Bottom chart"," Settings"))}},{key:"updateVisibility",value:function(t,e){var r=this,n=r.settings,i=n.dimension,a=n.mode,s=n.type,o=r.getSetting("main","metric"),c=r.getSetting("main","display"),l=r.metadata.metric[o]||{},u=l.charts,h=void 0===u?j.a.keys(r.metadata.chart):u,d=l.plot,f=h.filter(function(t){var e=r.metadata.chart[t].metrics;return("decomp"!==t||"risk"==c||26==o)&&(!e||e.includes(Number(o)))}),p=function(t,e,n,i){var a=r.controls[t].controls[e];return void 0!==i?r.controls[t].getHTMLid(a,n,i):n?r.controls[t].getHTMLid(a,n):r.controls[t].getHTMLid(a,"control-container")},g={main:!1,top:!1,bottom:!1};j.a.keys(r.options).forEach(function(t){var e=r.getVisibility(t)||"";"main"==e?(N()("#".concat(p("main",t))).show(),N()("#".concat(p("top",t))).hide(),N()("#".concat(p("bottom",t))).hide(),g.main=!0):(N()("#".concat(p("main",t))).hide(),e.isIn(["top","both"])?(N()("#".concat(p("top",t))).show(),g.top=!0):N()("#".concat(p("top",t))).hide(),e.isIn(["bottom","both"])?(N()("#".concat(p("bottom",t))).show(),g.bottom=!0):N()("#".concat(p("bottom",t))).hide())}),g.top?N()(".control-section-top").show():N()(".control-section-top").hide(),g.bottom?N()(".control-section-bottom").show():N()(".control-section-bottom").hide(),g.main?N()(".control-section-main").show():N()(".control-section-main").hide(),N()(".chart-controls .control-button-info").removeClass("issues"),r.issues("top").length&&N()("#top-view-control-button-info").addClass("issues"),r.issues("bottom").length&&N()("#bottom-view-control-button-info").addClass("issues"),N()(".control-multi-container").each(function(){N()(this).children(".control-container").filter(function(){return"none"!=N()(this).css("display")}).length?N()(this).show():N()(this).hide()}),"england"==s&&N()(".control-label-multi-select-locations").visible(),"map"==r.charts.top.view.type?N()("#chart-controls-top .control-container-buttons-zoom").show():N()("#chart-controls-top .control-container-buttons-zoom").hide(),"map"==r.charts.bottom.view.type?N()("#chart-controls-bottom .control-container-buttons-zoom").show():N()("#chart-controls-bottom .control-container-buttons-zoom").hide(),"sbar"!=r.charts.top.view.type&&N()("#chart-controls-top .control-container-button-back").hide(),"sbar"!=r.charts.bottom.view.type&&N()("#chart-controls-bottom .control-container-button-back").hide(),a.isIn(["embed","single"])?N()("#chart-controls-top .control-container-button-resize").hide():N()("#chart-controls-top .control-container-button-resize").show(),a.isIn(["embed","single"])?N()("#chart-controls-bottom .control-container-button-resize").hide():N()("#chart-controls-bottom .control-container-button-resize").show(),"plot"!=r.charts.top.view.type?N()("#chart-controls-top .control-container-buttonset-plot").hide():N()("#chart-controls-top .control-container-buttonset-plot").show(),"plot"!=r.charts.bottom.view.type?N()("#chart-controls-bottom .control-container-buttonset-plot").hide():N()("#chart-controls-bottom .control-container-buttonset-plot").show(),"scol"!=r.charts.top.view.type?N()("#chart-controls-top .control-container-buttonset-scol").hide():N()("#chart-controls-top .control-container-buttonset-scol").show(),"scol"!=r.charts.bottom.view.type?N()("#chart-controls-bottom .control-container-buttonset-scol").hide():N()("#chart-controls-bottom .control-container-buttonset-scol").show(),"line"==r.charts.top.view.type&&"forecasting"==r.settings.type?N()("#chart-controls-top .control-container-buttonset-lines").show():N()("#chart-controls-top .control-container-buttonset-lines").hide(),"line"==r.charts.bottom.view.type&&"forecasting"==r.settings.type?N()("#chart-controls-bottom .control-container-buttonset-lines").show():N()("#chart-controls-bottom .control-container-buttonset-lines").hide(),N()("#top-view-control-option-buttonset-scol-age").prop("disabled","age"==i||d&&!d.includes("age")),N()("#bottom-view-control-option-buttonset-scol-age").prop("disabled","age"==i||d&&!d.includes("age")),N()("#top-view-control-option-buttonset-scol-year").prop("disabled","year"==i||d&&!d.includes("year")),N()("#bottom-view-control-option-buttonset-scol-year").prop("disabled","year"==i||d&&!d.includes("year")),N()("#top-view-control-option-buttonset-scol-sex").prop("disabled","sex"==i||d&&!d.includes("sex")),N()("#bottom-view-control-option-buttonset-scol-sex").prop("disabled","sex"==i||d&&!d.includes("sex")),N()("#top-view-control-buttonset-scol").buttonset("refresh"),N()("#bottom-view-control-buttonset-scol").buttonset("refresh"),Number(o).isIn([26,28])?(N()(".control-container-select-age_adv").css({width:"auto"}),N()(".control-select-age_adv").hide()):(N()(".control-container-select-age_adv").css({width:""}),N()(".control-select-age_adv").show()),"year"==i||d&&!"year".isIn(d)?(N()("#top-view-control-option-buttonset-plot-year").prop("disabled",!0),N()("#bottom-view-control-option-buttonset-plot-year").prop("disabled",!0)):(N()("#top-view-control-option-buttonset-plot-year").prop("disabled",!1),N()("#bottom-view-control-option-buttonset-plot-year").prop("disabled",!1)),"age"==i||d&&!"age".isIn(d)?(N()("#top-view-control-option-buttonset-plot-age").prop("disabled",!0),N()("#bottom-view-control-option-buttonset-plot-age").prop("disabled",!0)):(N()("#top-view-control-option-buttonset-plot-age").prop("disabled",!1),N()("#bottom-view-control-option-buttonset-plot-age").prop("disabled",!1)),"sex"==i||d&&!"sex".isIn(d)?(N()("#top-view-control-option-buttonset-plot-sex").prop("disabled",!0),N()("#bottom-view-control-option-buttonset-plot-sex").prop("disabled",!0)):(N()("#top-view-control-option-buttonset-plot-sex").prop("disabled",!1),N()("#bottom-view-control-option-buttonset-plot-sex").prop("disabled",!1)),"cause"==i||"cause-risk"==i||d&&!"cause".isIn(d)?(N()("#top-view-control-option-buttonset-plot-cause").prop("disabled",!0),N()("#bottom-view-control-option-buttonset-plot-cause").prop("disabled",!0)):(N()("#top-view-control-option-buttonset-plot-cause").prop("disabled",!1),N()("#bottom-view-control-option-buttonset-plot-cause").prop("disabled",!1)),"risk"==i||"cause-risk"==i||d&&!"risk".isIn(d)?(N()("#top-view-control-option-buttonset-plot-risk").prop("disabled",!0),N()("#bottom-view-control-option-buttonset-plot-risk").prop("disabled",!0)):(N()("#top-view-control-option-buttonset-plot-risk").prop("disabled",!1),N()("#bottom-view-control-option-buttonset-plot-risk").prop("disabled",!1)),"location"==i||d&&!"location".isIn(d)?(N()("#top-view-control-option-buttonset-plot-location").prop("disabled",!0),N()("#bottom-view-control-option-buttonset-plot-location").prop("disabled",!0)):(N()("#top-view-control-option-buttonset-plot-location").prop("disabled",!1),N()("#bottom-view-control-option-buttonset-plot-location").prop("disabled",!1)),N()("#top-view-control-buttonset-plot").buttonset("refresh"),N()("#bottom-view-control-buttonset-plot").buttonset("refresh"),"compare"==a&&"location"!=i||"single"==a?N()("[for=".concat(p("chart","chart","control-option","map"),"]")).show():N()("[for=".concat(p("chart","chart","control-option","map"),"]")).hide(),["cause","cause-risk"].includes(i)||f&&!"treemap".isIn(f)?N()("[for=".concat(p("chart","chart","control-option","treemap"),"]")).hide():N()("[for=".concat(p("chart","chart","control-option","treemap"),"]")).show(),["risk","cause","cause-risk"].includes(i)||f&&!"scol".isIn(f)?N()("[for=".concat(p("chart","chart","control-option","scol"),"]")).hide():N()("[for=".concat(p("chart","chart","control-option","scol"),"]")).show(),["risk","cause","cause-risk"].includes(i)||f&&!"sbar".isIn(f)?N()("[for=".concat(p("chart","chart","control-option","sbar"),"]")).hide():N()("[for=".concat(p("chart","chart","control-option","sbar"),"]")).show(),["risk","cause-risk","value"].includes(i)||"england"==s||f&&!"donut".isIn(f)?N()("[for=".concat(p("chart","chart","control-option","donut"),"]")).hide():N()("[for=".concat(p("chart","chart","control-option","donut"),"]")).show(),["risk","cause","cause-risk","sex"].includes(i)||f&&!"xmas".isIn(f)?N()("[for=".concat(p("chart","chart","control-option","xmas"),"]")).hide():N()("[for=".concat(p("chart","chart","control-option","xmas"),"]")).show(),!f||"heatmap".isIn(f)?N()("[for=".concat(p("chart","chart","control-option","heatmap"),"]")).show():N()("[for=".concat(p("chart","chart","control-option","heatmap"),"]")).hide(),!f||"arrow".isIn(f)?N()("[for=".concat(p("chart","chart","control-option","arrow"),"]")).show():N()("[for=".concat(p("chart","chart","control-option","arrow"),"]")).hide(),"year"==i||f&&!"line".isIn(f)?N()("[for=".concat(p("chart","chart","control-option","line"),"]")).hide():N()("[for=".concat(p("chart","chart","control-option","line"),"]")).show(),["risk","cause","cause-risk","age","value"].includes(i)||f&&!"decomp".isIn(f)?N()("[for=".concat(p("chart","chart","control-option","decomp"),"]")).hide():N()("[for=".concat(p("chart","chart","control-option","decomp"),"]")).show(),"year"==i||f&&!"dotogram".isIn(f)?N()("[for=".concat(p("chart","chart","control-option","dotogram"),"]")).hide():N()("[for=".concat(p("chart","chart","control-option","dotogram"),"]")).show()}},{key:"syncControls",value:function(t,e,n,i){var a=this,r=N.a.isArray(n)?n.slice():n;a.advancedControls=a.advancedControls||j.a.keys(t.controls).filter(function(t){return t.includes("_adv")});var s=t.settings.id||"main",o=a.getSetting("main","mode");"scol"!=e.id&&"plot"!=e.id||(a.charts.bottom.controls.changeValue(e.id,r),a.charts.top.controls.changeValue(e.id,r)),o.isIn(["explore","embed","single"])&&("main"!=s&&a.controls.main.controls[e.id]&&a.controls.main.changeValue(e.id,r),"top"!=s&&a.controls.top.controls[e.id]&&a.controls.top.changeValue(e.id,r),"bottom"!=s&&a.controls.bottom.controls[e.id]&&a.controls.bottom.changeValue(e.id,r)),"compare"==o&&("main"!=s&&a.controls.main.controls[e.id]&&a.controls.main.changeValue(e.id,r),"main"==s&&"main"==a.getVisibility(e.id)&&(a.controls.top.controls[e.id]&&a.controls.top.changeValue(e.id,r),a.controls.bottom.controls[e.id]&&a.controls.bottom.changeValue(e.id,r))),"value"==e.id&&(t.changeValue("value_map",r,!1),!1!==i&&a.syncControls(t,{id:"value_map"},r,!1)),"value_map"==e.id&&"ratio"!=r&&(t.changeValue("value",r,!1),!1!==i&&a.syncControls(t,{id:"value"},r,!1)),a.advancedControls.includes("".concat(e.id,"_adv"))&&(t.changeValue("".concat(e.id,"_adv"),r,!1),!1!==i&&a.syncControls(t,{id:"".concat(e.id,"_adv")},r,!1)),e.id.includes("_adv")&&t.controls[e.id.replace("_adv","")].options().map(function(t){return t.id}).includes(r)&&(t.changeValue(e.id.replace("_adv",""),r,!1),!1!==i&&a.syncControls(t,{id:e.id.replace("_adv","")},r,!1))}},{key:"saveFile",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"download.csv",e=(1<arguments.length?arguments[1]:void 0).map(function(t){return t.map(function(t){return"".concat(t).includes(",")?'"'.concat(t,'"'):t}).join()}).join("\n");if(e=((e+='\n\n"Global Burden of Disease Study 2017. Global Burden of Disease Study 2017 (GBD 2017) Results. Seattle, United States: Institute for Health Metrics and Evaluation (IHME), 2017."\n"Available from from https://http://vizhub.healthdata.org/gbd-compare/"\n"For terms and conditions of use, please visit http://www.healthdata.org/about/terms-and-conditions"')||"").replace(/\r?\n/g,"\r\n"),T.saveAs&&A.a){var n=new A.a([e],{type:"text/csv;charset=".concat("utf-8")});return Object(T.saveAs)(n,t),!0}var i=window.frames.saveTxtWindow;if(!i&&((i=document.createElement("iframe")).id="saveTxtWindow",i.style.display="none",document.body.insertBefore(i,null),!(i=window.frames.saveTxtWindow)&&!(i=window.open("","_temp","width=100,height=100"))))return window.alert("Sorry, download file could not be created."),!1;var a=i.document;a.open("text/html","replace"),a.charset="utf-8",a.write(e),a.close();var r=a.execCommand("SaveAs",null,t);return i.close(),r}}])&&Ei(t.prototype,e),n&&Ei(t,n),i}();n(153),n(154),n(155),n(156),n(157),n(158);window.App=Ai},function(t,e,n){"use strict";n.r(e);var i=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function a(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function l(){}var r="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3})$/,u=/^#([0-9a-f]{6})$/,h=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),d=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),f=new RegExp("^rgba\\("+[r,r,r,s]+"\\)$"),p=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),g=new RegExp("^hsl\\("+[s,o,o]+"\\)$"),v=new RegExp("^hsla\\("+[s,o,o,s]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(t){var e;return t=(t+"").trim().toLowerCase(),(e=c.exec(t))?new k((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=u.exec(t))?b(parseInt(e[1],16)):(e=h.exec(t))?new k(e[1],e[2],e[3],1):(e=d.exec(t))?new k(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=f.exec(t))?x(e[1],e[2],e[3],e[4]):(e=p.exec(t))?x(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g.exec(t))?C(e[1],e[2]/100,e[3]/100,1):(e=v.exec(t))?C(e[1],e[2]/100,e[3]/100,e[4]):m.hasOwnProperty(t)?b(m[t]):"transparent"===t?new k(NaN,NaN,NaN,0):null}function b(t){return new k(t>>16&255,t>>8&255,255&t,1)}function x(t,e,n,i){return i<=0&&(t=e=n=NaN),new k(t,e,n,i)}function _(t){return t instanceof l||(t=y(t)),t?new k((t=t.rgb()).r,t.g,t.b,t.opacity):new k}function w(t,e,n,i){return 1===arguments.length?_(t):new k(t,e,n,null==i?1:i)}function k(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function S(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function C(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new T(t,e,n,i)}function M(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof T)return new T(t.h,t.s,t.l,t.opacity);if(t instanceof l||(t=y(t)),!t)return new T;if(t instanceof T)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,a=Math.min(e,n,i),r=Math.max(e,n,i),s=NaN,o=r-a,c=(r+a)/2;return o?(s=e===r?(n-i)/o+6*(n<i):n===r?(i-e)/o+2:(e-n)/o+4,o/=c<.5?r+a:2-r-a,s*=60):o=0<c&&c<1?0:s,new T(s,o,c,t.opacity)}(t):new T(t,e,n,null==i?1:i)}function T(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function E(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}i(l,y,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),i(k,w,a(l,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new k(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new k(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+S(this.r)+S(this.g)+S(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),i(T,M,a(l,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new T(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new T(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,a=2*n-i;return new k(E(240<=t?t-240:t+120,a,i),E(t,a,i),E(t<120?t+240:t-120,a,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var A=Math.PI/180,O=180/Math.PI,P=.96422,D=1,I=.82521,N=4/29,j=6/29*3*(6/29),z=6/29*(6/29)*(6/29);function H(t){if(t instanceof R)return new R(t.l,t.a,t.b,t.opacity);if(t instanceof U){if(isNaN(t.h))return new R(t.l,0,0,t.opacity);var e=t.h*A;return new R(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof k||(t=_(t));var n,i,a=B(t.r),r=B(t.g),s=B(t.b),o=W((.2225045*a+.7168786*r+.0606169*s)/D);return a===r&&r===s?n=i=o:(n=W((.4360747*a+.3850649*r+.1430804*s)/P),i=W((.0139322*a+.0971045*r+.7141733*s)/I)),new R(116*o-16,500*(n-o),200*(o-i),t.opacity)}function L(t,e,n,i){return 1===arguments.length?H(t):new R(t,e,n,null==i?1:i)}function R(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function W(t){return z<t?Math.pow(t,1/3):t/j+N}function F(t){return 6/29<t?t*t*t:j*(t-N)}function $(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function B(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function V(t){if(t instanceof U)return new U(t.h,t.c,t.l,t.opacity);if(t instanceof R||(t=H(t)),0===t.a&&0===t.b)return new U(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*O;return new U(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function q(t,e,n,i){return 1===arguments.length?V(t):new U(t,e,n,null==i?1:i)}function U(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}i(R,L,a(l,{brighter:function(t){return new R(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new R(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new k($(3.1338561*(e=P*F(e))-1.6168667*(t=D*F(t))-.4906146*(n=I*F(n))),$(-.9787684*e+1.9161415*t+.033454*n),$(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),i(U,q,a(l,{brighter:function(t){return new U(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new U(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return H(this).rgb()}}));var Y=-.29227,G=-.90649,K=1.97294,X=K*G,Z=1.78277*K,Q=1.78277*Y- -.14861*G;function J(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof tt)return new tt(t.h,t.s,t.l,t.opacity);t instanceof k||(t=_(t));var e=t.r/255,n=t.g/255,i=t.b/255,a=(Q*i+X*e-Z*n)/(Q+X-Z),r=i-a,s=(K*(n-a)-Y*r)/G,o=Math.sqrt(s*s+r*r)/(K*a*(1-a)),c=o?Math.atan2(s,r)*O-120:NaN;return new tt(c<0?c+360:c,o,a,t.opacity)}(t):new tt(t,e,n,null==i?1:i)}function tt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function et(t,e,n,i,a){var r=t*t,s=r*t;return((1-3*t+3*r-s)*e+(4-6*r+3*s)*n+(1+3*t+3*r-3*s)*i+s*a)/6}i(tt,J,a(l,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new tt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new tt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*A,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),a=Math.sin(t);return new k(255*(e+n*(-.14861*i+1.78277*a)),255*(e+n*(Y*i+G*a)),255*(e+n*(K*i)),this.opacity)}}));var nt=function(s){var o=s.length-1;return function(t){var e=t<=0?t=0:1<=t?o-(t=1):Math.floor(t*o),n=s[e],i=s[e+1],a=0<e?s[e-1]:2*n-i,r=e<o-1?s[e+2]:2*i-n;return et((t-e/o)*o,a,n,i,r)}},it=function(s){var o=s.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*o),n=s[(e+o-1)%o],i=s[e%o],a=s[(e+1)%o],r=s[(e+2)%o];return et((t-e/o)*o,n,i,a,r)}},at=function(t){return function(){return t}};function rt(e,n){return function(t){return e+t*n}}function st(t,e){var n=e-t;return n?rt(t,180<n||n<-180?n-360*Math.round(n/360):n):at(isNaN(t)?e:t)}function ot(r){return 1==(r=+r)?ct:function(t,e){return e-t?(n=t,i=e,a=r,n=Math.pow(n,a),i=Math.pow(i,a)-n,a=1/a,function(t){return Math.pow(n+t*i,a)}):at(isNaN(t)?e:t);var n,i,a}}function ct(t,e){var n=e-t;return n?rt(t,n):at(isNaN(t)?e:t)}var lt=function t(e){var s=ot(e);function n(e,t){var n=s((e=w(e)).r,(t=w(t)).r),i=s(e.g,t.g),a=s(e.b,t.b),r=ct(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=a(t),e.opacity=r(t),e+""}}return n.gamma=t,n}(1);function ut(o){return function(t){var e,n,i=t.length,a=new Array(i),r=new Array(i),s=new Array(i);for(e=0;e<i;++e)n=w(t[e]),a[e]=n.r||0,r[e]=n.g||0,s[e]=n.b||0;return a=o(a),r=o(r),s=o(s),n.opacity=1,function(t){return n.r=a(t),n.g=r(t),n.b=s(t),n+""}}}var ht=ut(nt),dt=ut(it),ft=function(t,e){var n,i=e?e.length:0,a=t?Math.min(i,t.length):0,r=new Array(a),s=new Array(i);for(n=0;n<a;++n)r[n]=St(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<a;++n)s[n]=r[n](t);return s}},pt=function(e,n){var i=new Date;return n-=e=+e,function(t){return i.setTime(e+n*t),i}},gt=function(e,n){return n-=e=+e,function(t){return e+n*t}},vt=function(t,e){var n,i={},a={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=St(t[n],e[n]):a[n]=e[n];return function(t){for(n in i)a[n]=i[n](t);return a}},mt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yt=new RegExp(mt.source,"g");var bt,xt,_t,wt,kt=function(t,i){var e,n,a,r,s,o=mt.lastIndex=yt.lastIndex=0,c=-1,l=[],u=[];for(t+="",i+="";(e=mt.exec(t))&&(n=yt.exec(i));)(a=n.index)>o&&(a=i.slice(o,a),l[c]?l[c]+=a:l[++c]=a),(e=e[0])===(n=n[0])?l[c]?l[c]+=n:l[++c]=n:(l[++c]=null,u.push({i:c,x:gt(e,n)})),o=yt.lastIndex;return o<i.length&&(a=i.slice(o),l[c]?l[c]+=a:l[++c]=a),l.length<2?u[0]?(s=u[0].x,function(t){return s(t)+""}):(r=i,function(){return r}):(i=u.length,function(t){for(var e,n=0;n<i;++n)l[(e=u[n]).i]=e.x(t);return l.join("")})},St=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?at(e):("number"===i?gt:"string"===i?(n=y(e))?(e=n,lt):kt:e instanceof y?lt:e instanceof Date?pt:Array.isArray(e)?ft:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?vt:gt)(t,e)},Ct=function(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}},Mt=function(t,e){var n=st(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}},Tt=function(e,n){return n-=e=+e,function(t){return Math.round(e+n*t)}},Et=180/Math.PI,At={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ot=function(t,e,n,i,a,r){var s,o,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,c/=o),t*i<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:a,translateY:r,rotate:Math.atan2(e,t)*Et,skewX:Math.atan(c)*Et,scaleX:s,scaleY:o}};function Pt(d,f,p,g){function v(t){return t.length?t.pop()+" ":""}return function(t,e){var n,i,a,r,s,o,c,l,u=[],h=[];return t=d(t),e=d(e),function(t,e,n,i,a,r){if(t!==n||e!==i){var s=a.push("translate(",null,f,null,p);r.push({i:s-4,x:gt(t,n)},{i:s-2,x:gt(e,i)})}else(n||i)&&a.push("translate("+n+f+i+p)}(t.translateX,t.translateY,e.translateX,e.translateY,u,h),n=t.rotate,i=e.rotate,a=u,r=h,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),r.push({i:a.push(v(a)+"rotate(",null,g)-2,x:gt(n,i)})):i&&a.push(v(a)+"rotate("+i+g),s=t.skewX,o=e.skewX,c=u,l=h,s!==o?l.push({i:c.push(v(c)+"skewX(",null,g)-2,x:gt(s,o)}):o&&c.push(v(c)+"skewX("+o+g),function(t,e,n,i,a,r){if(t!==n||e!==i){var s=a.push(v(a)+"scale(",null,",",null,")");r.push({i:s-4,x:gt(t,n)},{i:s-2,x:gt(e,i)})}else 1===n&&1===i||a.push(v(a)+"scale("+n+","+i+")")}(t.scaleX,t.scaleY,e.scaleX,e.scaleY,u,h),t=e=null,function(t){for(var e,n=-1,i=h.length;++n<i;)u[(e=h[n]).i]=e.x(t);return u.join("")}}}var Dt=Pt(function(t){return"none"===t?At:(bt||(bt=document.createElement("DIV"),xt=document.documentElement,_t=document.defaultView),bt.style.transform=t,t=_t.getComputedStyle(xt.appendChild(bt),null).getPropertyValue("transform"),xt.removeChild(bt),t=t.slice(7,-1).split(","),Ot(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),It=Pt(function(t){return null==t?At:(wt||(wt=document.createElementNS("http://www.w3.org/2000/svg","g")),wt.setAttribute("transform",t),(t=wt.transform.baseVal.consolidate())?(t=t.matrix,Ot(t.a,t.b,t.c,t.d,t.e,t.f)):At)},", ",")",")"),Nt=Math.SQRT2;function jt(t){return((t=Math.exp(t))+1/t)/2}var zt=function(t,e){var n,s,o=t[0],c=t[1],l=t[2],i=e[0],a=e[1],r=e[2],u=i-o,h=a-c,d=u*u+h*h;if(d<1e-12)s=Math.log(r/l)/Nt,n=function(t){return[o+t*u,c+t*h,l*Math.exp(Nt*t*s)]};else{var f=Math.sqrt(d),p=(r*r-l*l+4*d)/(2*l*2*f),g=(r*r-l*l-4*d)/(2*r*2*f),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);s=(m-v)/Nt,n=function(t){var e,n,i=t*s,a=jt(v),r=l/(2*f)*(a*(n=Nt*i+v,((n=Math.exp(2*n))-1)/(n+1))-(e=v,((e=Math.exp(e))-1/e)/2));return[o+r*u,c+r*h,l*a/jt(Nt*i+v)]}}return n.duration=1e3*s,n};function Ht(s){return function(e,t){var n=s((e=M(e)).h,(t=M(t)).h),i=ct(e.s,t.s),a=ct(e.l,t.l),r=ct(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=i(t),e.l=a(t),e.opacity=r(t),e+""}}}var Lt=Ht(st),Rt=Ht(ct);function Wt(e,t){var n=ct((e=L(e)).l,(t=L(t)).l),i=ct(e.a,t.a),a=ct(e.b,t.b),r=ct(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=i(t),e.b=a(t),e.opacity=r(t),e+""}}function Ft(s){return function(e,t){var n=s((e=q(e)).h,(t=q(t)).h),i=ct(e.c,t.c),a=ct(e.l,t.l),r=ct(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=i(t),e.l=a(t),e.opacity=r(t),e+""}}}var $t=Ft(st),Bt=Ft(ct);function Vt(o){return function t(s){function e(e,t){var n=o((e=J(e)).h,(t=J(t)).h),i=ct(e.s,t.s),a=ct(e.l,t.l),r=ct(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=i(t),e.l=a(Math.pow(t,s)),e.opacity=r(t),e+""}}return s=+s,e.gamma=t,e}(1)}var qt=Vt(st),Ut=Vt(ct);function Yt(t,e){for(var n=0,i=e.length-1,a=e[0],r=new Array(i<0?0:i);n<i;)r[n]=t(a,a=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return r[e](t-e)}}var Gt=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n};n.d(e,"interpolate",function(){return St}),n.d(e,"interpolateArray",function(){return ft}),n.d(e,"interpolateBasis",function(){return nt}),n.d(e,"interpolateBasisClosed",function(){return it}),n.d(e,"interpolateDate",function(){return pt}),n.d(e,"interpolateDiscrete",function(){return Ct}),n.d(e,"interpolateHue",function(){return Mt}),n.d(e,"interpolateNumber",function(){return gt}),n.d(e,"interpolateObject",function(){return vt}),n.d(e,"interpolateRound",function(){return Tt}),n.d(e,"interpolateString",function(){return kt}),n.d(e,"interpolateTransformCss",function(){return Dt}),n.d(e,"interpolateTransformSvg",function(){return It}),n.d(e,"interpolateZoom",function(){return zt}),n.d(e,"interpolateRgb",function(){return lt}),n.d(e,"interpolateRgbBasis",function(){return ht}),n.d(e,"interpolateRgbBasisClosed",function(){return dt}),n.d(e,"interpolateHsl",function(){return Lt}),n.d(e,"interpolateHslLong",function(){return Rt}),n.d(e,"interpolateLab",function(){return Wt}),n.d(e,"interpolateHcl",function(){return $t}),n.d(e,"interpolateHclLong",function(){return Bt}),n.d(e,"interpolateCubehelix",function(){return qt}),n.d(e,"interpolateCubehelixLong",function(){return Ut}),n.d(e,"piecewise",function(){return Yt}),n.d(e,"quantize",function(){return Gt})}]);